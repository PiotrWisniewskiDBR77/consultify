@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
    .animate-fade-up {
        animation: fadeUp 0.5s ease-out forwards;
    }

    .animate-fade-in {
        animation: fadeIn 0.4s ease-out forwards;
    }

    .animate-breathing-glow {
        animation: breathing-glow 4s ease-in-out infinite;
    }

    @keyframes fadeUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
        }

        to {
            opacity: 1;
        }
    }

    @keyframes breathing-glow {
        0%, 100% {
            opacity: 0.4;
        }
        50% {
            opacity: 0.6;
        }
    }

    /* Global Typography Overrides for Light Mode Contrast */
    .text-slate-500 {
        @apply text-slate-600 dark:text-slate-400;
    }

    .text-gray-500 {
        @apply text-gray-600 dark:text-gray-400;
    }

    /* ========================================
       Mobile/Tablet Touch-Friendly Utilities
       ======================================== */

    /* Touch target - minimum 44x44px for accessibility */
    .touch-target {
        @apply min-h-[44px] min-w-[44px];
    }

    /* Safe area insets for notched devices */
    .safe-area-pb {
        padding-bottom: env(safe-area-inset-bottom, 0px);
    }

    .safe-area-pt {
        padding-top: env(safe-area-inset-top, 0px);
    }

    .safe-area-pl {
        padding-left: env(safe-area-inset-left, 0px);
    }

    .safe-area-pr {
        padding-right: env(safe-area-inset-right, 0px);
    }

    /* Hide scrollbar but keep functionality */
    .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
    .scrollbar-hide::-webkit-scrollbar {
        display: none;
    }

    /* Horizontal scroll snap for touch navigation */
    .scroll-snap-x {
        scroll-snap-type: x mandatory;
        -webkit-overflow-scrolling: touch;
    }

    .scroll-snap-item {
        scroll-snap-align: start;
    }

    /* Touch feedback ripple effect */
    .touch-ripple {
        position: relative;
        overflow: hidden;
    }

    .touch-ripple::after {
        content: '';
        position: absolute;
        inset: 0;
        background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
        opacity: 0;
        transform: scale(0);
        transition: transform 0.3s ease-out, opacity 0.3s ease-out;
    }

    .touch-ripple:active::after {
        opacity: 1;
        transform: scale(2);
    }

    /* Prevent text selection on touch */
    .no-select {
        -webkit-user-select: none;
        user-select: none;
        -webkit-touch-callout: none;
    }

    /* Smooth momentum scrolling */
    .momentum-scroll {
        -webkit-overflow-scrolling: touch;
        overscroll-behavior: contain;
    }

    /* Bottom navigation height placeholder */
    .bottom-nav-spacer {
        height: calc(64px + env(safe-area-inset-bottom, 0px));
    }
}

@layer base {
    body {
        @apply bg-gray-50 dark:bg-navy-950 text-navy-900 dark:text-white antialiased text-sm leading-relaxed;
        /* Subtle global gradient in dark mode for depth */
        background-image: radial-gradient(circle at 50% 0%, rgba(124, 58, 237, 0.03) 0%, transparent 50%),
            radial-gradient(circle at 100% 0%, rgba(59, 130, 246, 0.03) 0%, transparent 50%);
        background-attachment: fixed;
    }
}

@layer components {
    .glass-panel {
        @apply bg-white/70 dark:bg-navy-900/60 backdrop-blur-xl border border-white/20 dark:border-white/5 shadow-sm dark:shadow-2xl;
    }

    .glass-card {
        @apply bg-white/50 dark:bg-navy-800/40 backdrop-blur-md border border-slate-200/60 dark:border-white/5 transition-all duration-300 hover:border-brand/30 dark:hover:border-white/10 hover:shadow-glow;
    }

    /* Button Base Utilities */
    .btn-base {
        @apply inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none active:scale-[0.98];
    }

    /* Primary Button */
    .btn-primary {
        @apply btn-base bg-gradient-to-r from-brand-600 to-brand-500 hover:from-brand-500 hover:to-brand-400 text-white shadow-lg shadow-brand/25 border border-white/10 relative overflow-hidden;
    }

    /* Secondary Button */
    .btn-secondary {
        @apply btn-base bg-navy-800 hover:bg-navy-700 text-white border border-white/10 shadow-lg hover:shadow-xl hover:border-white/20;
    }

    /* Ghost Button - Darkened text for light mode */
    .btn-ghost {
        @apply btn-base bg-transparent hover:bg-slate-100 dark:hover:bg-white/5 text-slate-600 dark:text-slate-400 hover:text-navy-900 dark:hover:text-white border border-transparent;
    }

    /* Danger Button */
    .btn-danger {
        @apply btn-base bg-red-600 hover:bg-red-500 text-white shadow-lg shadow-red-500/20 border border-transparent;
    }

    /* Outline Button */
    .btn-outline {
        @apply btn-base bg-transparent border border-slate-200 dark:border-white/10 hover:border-brand/50 text-slate-700 dark:text-slate-200 hover:text-brand dark:hover:text-white;
    }

    /* Glass Button (Special Variant) */
    .btn-glass {
        @apply btn-base bg-white/5 hover:bg-white/10 text-navy-900 dark:text-white border border-white/10 backdrop-blur-sm shadow-sm;
    }

    /* Compact layout utilities */
    .compact-card {
        @apply p-3 gap-2;
    }

    .compact-section {
        @apply py-3 px-4;
    }

    .compact-header {
        @apply py-2 px-3;
    }

    /* ========================================
       PMO Priority System - My Work Module
       ======================================== */

    /* PMO Category Cards - Strategic Priority Visualization */
    .pmo-blocking-phase {
        @apply border-l-4 border-red-500 bg-red-50/50 dark:bg-red-900/10;
    }

    .pmo-blocking-initiative {
        @apply border-l-4 border-orange-500 bg-orange-50/50 dark:bg-orange-900/10;
    }

    .pmo-decision-required {
        @apply border-l-4 border-amber-500 bg-amber-50/50 dark:bg-amber-900/10;
    }

    .pmo-deadline-critical {
        @apply border-l-4 border-slate-700 bg-slate-50/50 dark:bg-slate-800/50;
    }

    .pmo-high-strategic {
        @apply border-l-4 border-blue-500 bg-blue-50/50 dark:bg-blue-900/10;
    }

    .pmo-routine {
        @apply border-l-4 border-green-500 bg-green-50/50 dark:bg-green-900/10;
    }

    /* Focus Board Time Block Headers */
    .time-block-morning {
        @apply bg-gradient-to-r from-amber-100 to-orange-100 dark:from-amber-900/20 dark:to-orange-900/20;
    }

    .time-block-afternoon {
        @apply bg-gradient-to-r from-blue-100 to-indigo-100 dark:from-blue-900/20 dark:to-indigo-900/20;
    }

    .time-block-buffer {
        @apply bg-gradient-to-r from-slate-100 to-gray-100 dark:from-slate-800/50 dark:to-gray-800/50;
    }

    /* Inbox Item Urgency Indicators */
    .inbox-critical {
        @apply bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500;
    }

    .inbox-high {
        @apply bg-orange-50 dark:bg-orange-900/20 border-l-4 border-orange-500;
    }

    .inbox-normal {
        @apply bg-white dark:bg-navy-900 border-l-4 border-slate-300 dark:border-slate-600;
    }

    .inbox-low {
        @apply bg-slate-50 dark:bg-slate-800/50 border-l-4 border-slate-200 dark:border-slate-700;
    }

    /* Execution Score Gauge */
    .execution-score-ring {
        @apply rounded-full;
        background: conic-gradient(
            from 0deg,
            theme('colors.green.500') 0%,
            theme('colors.green.500') var(--score-percent, 0%),
            theme('colors.slate.200') var(--score-percent, 0%),
            theme('colors.slate.200') 100%
        );
    }

    .dark .execution-score-ring {
        background: conic-gradient(
            from 0deg,
            theme('colors.green.400') 0%,
            theme('colors.green.400') var(--score-percent, 0%),
            theme('colors.slate.700') var(--score-percent, 0%),
            theme('colors.slate.700') 100%
        );
    }

    /* Workload Heatmap Cells */
    .workload-available {
        @apply bg-green-100 dark:bg-green-900/30;
    }

    .workload-normal {
        @apply bg-blue-100 dark:bg-blue-900/30;
    }

    .workload-high {
        @apply bg-amber-100 dark:bg-amber-900/30;
    }

    .workload-overloaded {
        @apply bg-red-100 dark:bg-red-900/30;
    }

    /* Triage Action Buttons */
    .triage-accept {
        @apply bg-green-100 hover:bg-green-200 text-green-700 dark:bg-green-900/30 dark:hover:bg-green-900/50 dark:text-green-300;
    }

    .triage-schedule {
        @apply bg-blue-100 hover:bg-blue-200 text-blue-700 dark:bg-blue-900/30 dark:hover:bg-blue-900/50 dark:text-blue-300;
    }

    .triage-delegate {
        @apply bg-purple-100 hover:bg-purple-200 text-purple-700 dark:bg-purple-900/30 dark:hover:bg-purple-900/50 dark:text-purple-300;
    }

    .triage-archive {
        @apply bg-slate-100 hover:bg-slate-200 text-slate-700 dark:bg-slate-800 dark:hover:bg-slate-700 dark:text-slate-300;
    }

    .triage-reject {
        @apply bg-red-100 hover:bg-red-200 text-red-700 dark:bg-red-900/30 dark:hover:bg-red-900/50 dark:text-red-300;
    }

    /* Notification Badge Pulse */
    .notification-pulse {
        @apply animate-pulse;
    }

    .notification-badge {
        @apply absolute -top-1 -right-1 min-w-[18px] h-[18px] bg-red-500 text-white text-[10px] font-bold flex items-center justify-center rounded-full px-1 border-2 border-white dark:border-navy-900;
    }

    /* Focus Task Card States */
    .focus-task-active {
        @apply ring-2 ring-brand/50 dark:ring-brand/30;
    }

    .focus-task-completed {
        @apply opacity-60 bg-green-50/50 dark:bg-green-900/10;
    }

    .focus-task-dragging {
        @apply shadow-xl scale-105 ring-2 ring-brand;
    }

    /* Streak Badge */
    .streak-badge {
        @apply inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-gradient-to-r from-orange-500 to-red-500 text-white text-xs font-bold;
    }

    /* Custom scrollbar for My Work panels */
    .mywork-scrollbar {
        scrollbar-width: thin;
        scrollbar-color: theme('colors.slate.300') transparent;
    }

    .mywork-scrollbar::-webkit-scrollbar {
        width: 6px;
    }

    .mywork-scrollbar::-webkit-scrollbar-track {
        background: transparent;
    }

    .mywork-scrollbar::-webkit-scrollbar-thumb {
        background-color: theme('colors.slate.300');
        border-radius: 3px;
    }

    .dark .mywork-scrollbar {
        scrollbar-color: theme('colors.slate.600') transparent;
    }

    .dark .mywork-scrollbar::-webkit-scrollbar-thumb {
        background-color: theme('colors.slate.600');
    }
}