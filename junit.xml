<?xml version="1.0" encoding="UTF-8" ?>
<testsuites name="vitest tests" tests="1416" failures="196" errors="0" time="23.141592616">
    <testsuite name="tests/unit/actionProposalEngine.test.js" timestamp="2025-12-21T15:18:08.886Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.24941525">
        <testcase classname="tests/unit/actionProposalEngine.test.js" name="ActionProposalEngine &gt; should generate proposals for USER_AT_RISK" time="0.006702584">
        </testcase>
        <testcase classname="tests/unit/actionProposalEngine.test.js" name="ActionProposalEngine &gt; should generate proposals for BLOCKED_INITIATIVE" time="0.000213583">
        </testcase>
        <testcase classname="tests/unit/actionProposalEngine.test.js" name="ActionProposalEngine &gt; should generate proposals for STRONG_TEAM_MEMBER" time="0.000168958">
        </testcase>
        <testcase classname="tests/unit/actionProposalEngine.test.js" name="ActionProposalEngine &gt; should be deterministic (return same output for same input)" time="0.000150292">
        </testcase>
        <testcase classname="tests/unit/actionProposalEngine.test.js" name="ActionProposalEngine &gt; should return sorted proposals by proposal_id" time="0.00031175">
        </testcase>
        <testcase classname="tests/unit/actionProposalEngine.test.js" name="ActionProposalEngine &gt; should adhere to the mandatory output model" time="0.000337084">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/aiPlaybookRoutingEngine.test.js" timestamp="2025-12-21T15:18:08.889Z" hostname="MacBook-Pro-Piotr.local" tests="29" failures="0" errors="0" skipped="0" time="0.128890917">
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_lte &gt; should match when metric is less than threshold" time="0.000728667">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_lte &gt; should match when metric equals threshold" time="0.0001045">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_lte &gt; should not match when metric is greater than threshold" time="0.000069125">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_lte &gt; should not match when metric is not found" time="0.000073875">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_lte &gt; should return false for invalid format" time="0.000068833">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_gte &gt; should match when metric is greater than threshold" time="0.000069083">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_gte &gt; should match when metric equals threshold" time="0.000047459">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_gte &gt; should not match when metric is less than threshold" time="0.000037084">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; flag_eq &gt; should match when flag equals expected value" time="0.000051917">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; flag_eq &gt; should not match when flag does not equal expected value" time="0.000056292">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; flag_eq &gt; should work with string values" time="0.000041167">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; has_open_tasks &gt; should match when open tasks exist and condition is true" time="0.000044459">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; has_open_tasks &gt; should match when no open tasks and condition is false" time="0.000033042">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; has_open_tasks &gt; should recognize in_progress as open" time="0.000030709">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; has_open_tasks &gt; should recognize PENDING as open" time="0.000030541">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; signal_present &gt; should match when signal is present" time="0.000041334">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; signal_present &gt; should not match when signal is not present" time="0.000030958">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; signal_present &gt; should handle simple string signals" time="0.000044125">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; time_since_step_gte &gt; should match when enough time has passed" time="0.000175666">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; time_since_step_gte &gt; should not match when not enough time has passed" time="0.000051625">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; time_since_step_gte &gt; should not match when step timestamp not found" time="0.000041709">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; unknown conditions &gt; should fail safely for unknown condition type" time="0.000153417">
            <system-err>
[AIPlaybookRoutingEngine] Unknown condition type: unknown_condition

            </system-err>
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; unknown conditions &gt; should fail safely for empty condition" time="0.000041583">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateRouting &gt; should select first matching rule in first_match mode" time="0.000134375">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateRouting &gt; should use else_goto when no rules match" time="0.000047375">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateRouting &gt; should return null when no rules match and no else_goto" time="0.000049083">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateRouting &gt; should use linear flow when no branch_rules defined" time="0.00003425">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateRouting &gt; should record evaluation trace" time="0.000334125">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateRouting &gt; should skip rules with invalid conditions" time="0.000044875">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/aiResponsePostProcessor.test.js" timestamp="2025-12-21T15:18:08.890Z" hostname="MacBook-Pro-Piotr.local" tests="20" failures="0" errors="0" skipped="0" time="0.1764145">
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Memory Prefix &gt; should add memory prefix when memory count &gt; 0" time="0.000880958">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Memory Prefix &gt; should NOT add memory prefix when memory count is 0" time="0.000201458">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Memory Prefix &gt; should NOT duplicate memory prefix if already present" time="0.000095917">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; External Sources Prefix &gt; should add external prefix when external sources are used" time="0.000173541">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; External Sources Prefix &gt; should NOT add external prefix when no external sources" time="0.000130666">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; External Sources Prefix &gt; should NOT duplicate external prefix if already present" time="0.000071166">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Combined Prefixes &gt; should add both prefixes when both memory and external sources exist" time="0.000080041">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Combined Prefixes &gt; should maintain correct order: memory first, then external" time="0.000062959">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Edge Cases &gt; should handle empty response safely" time="0.000042291">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Edge Cases &gt; should handle null response safely" time="0.00005225">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Edge Cases &gt; should handle undefined context safely" time="0.000036166">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Edge Cases &gt; should handle null context safely" time="0.000030417">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Edge Cases &gt; should trim whitespace from response" time="0.000029625">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; getMemoryCount &gt; should count previous decisions" time="0.000037125">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; getMemoryCount &gt; should return memoryCount from projectMemory" time="0.000049083">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; getMemoryCount &gt; should return 1 when PMO health snapshot exists" time="0.000037292">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; getExternalSources &gt; should return externalSourcesUsed array" time="0.000304375">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; getExternalSources &gt; should derive sources from fetchedData" time="0.000313625">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; stripPrefixes &gt; should remove memory and external prefixes" time="0.000080583">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; stripPrefixes &gt; should handle text without prefixes" time="0.000056041">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/aiRoleGuard.test.js" timestamp="2025-12-21T15:18:08.892Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.174901">
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Role Definitions &gt; should define three roles in correct hierarchy" time="0.000762542">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Role Definitions &gt; should define capabilities for each role" time="0.000186458">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Role Descriptions &gt; should return correct description for each role" time="0.000122875">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Role Descriptions &gt; should default to ADVISOR description for unknown role" time="0.000055416">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; ADVISOR Role &gt; should allow explain actions" time="0.000180875">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; ADVISOR Role &gt; should block draft creation" time="0.000078708">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; ADVISOR Role &gt; should block execution actions" time="0.000062667">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; MANAGER Role &gt; should allow draft creation with approval required" time="0.000065083">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; MANAGER Role &gt; should block execution actions" time="0.000054042">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; OPERATOR Role &gt; should allow execution actions" time="0.000073958">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; OPERATOR Role &gt; should allow entity modifications" time="0.000067458">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Mutation Validation &gt; should block all mutations for ADVISOR" time="0.000071292">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Mutation Validation &gt; should allow mutations as drafts for MANAGER" time="0.000055042">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Mutation Validation &gt; should allow direct mutations for OPERATOR" time="0.000050375">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; isActionBlocked &gt; should return blocked with required role for insufficient permissions" time="0.000083">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; isActionBlocked &gt; should return not blocked for allowed actions" time="0.000044833">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/analytics.service.test.ts" timestamp="2025-12-21T15:18:08.892Z" hostname="MacBook-Pro-Piotr.local" tests="8" failures="0" errors="0" skipped="0" time="0.212894375">
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; calculateAnalytics &gt; calculates analytics for empty arrays" time="0.000580292">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; calculateAnalytics &gt; calculates completion rate correctly" time="0.00015075">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; calculateAnalytics &gt; calculates initiative statistics" time="0.00012975">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; calculateAnalytics &gt; calculates total cost and benefit" time="0.000074042">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; generateBurnDownData &gt; generates burn down data for date range" time="0.000218833">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; generateBurnDownData &gt; handles empty task list" time="0.000053583">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; generateVelocityData &gt; generates velocity data for specified weeks" time="0.000100208">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; generateVelocityData &gt; uses default 8 weeks when not specified" time="0.000049709">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/api.service.test.ts" timestamp="2025-12-21T15:18:08.893Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.179988416">
        <testcase classname="tests/unit/api.service.test.ts" name="Api Service Unit Tests &gt; login: should store token and return user on success" time="0.001785208">
            <system-out>
Api.login called: { email: &apos;test@test.com&apos;, url: &apos;/api/auth/login&apos; }

            </system-out>
        </testcase>
        <testcase classname="tests/unit/api.service.test.ts" name="Api Service Unit Tests &gt; login: should throw error on failure" time="0.001099041">
            <system-out>
Api.login called: { email: &apos;test@test.com&apos;, url: &apos;/api/auth/login&apos; }

            </system-out>
        </testcase>
        <testcase classname="tests/unit/api.service.test.ts" name="Api Service Unit Tests &gt; getUsers: should send Authorization header" time="0.000400208">
        </testcase>
        <testcase classname="tests/unit/api.service.test.ts" name="Api Service Unit Tests &gt; getLLMProviders: should return list" time="0.000116958">
        </testcase>
        <testcase classname="tests/unit/api.service.test.ts" name="Api Service Unit Tests &gt; indexKnowledgeFiles: should trigger indexing" time="0.000166208">
        </testcase>
        <testcase classname="tests/unit/api.service.test.ts" name="Api Service Unit Tests &gt; saveSession: should post data" time="0.000152792">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/asyncJobService.test.js" timestamp="2025-12-21T15:18:08.893Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.416309667">
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; JOB_TYPES Constants &gt; should export EXECUTE_DECISION type" time="0.193651458">
            <system-out>
[Queue] Using Mock Queue for ai-tasks

            </system-out>
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; JOB_TYPES Constants &gt; should export ADVANCE_PLAYBOOK_STEP type" time="0.004241916">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; JOB_STATUSES Constants &gt; should export all required statuses" time="0.005643">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; JOB_STATUSES Constants &gt; should have 6 status types" time="0.002306834">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export enqueueActionExecution" time="0.003492583">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export enqueuePlaybookAdvance" time="0.003500292">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export getJob" time="0.002284625">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export listJobs" time="0.002004084">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export retryJob" time="0.002442125">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export cancelJob" time="0.001698958">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export updateJobStatus" time="0.002449833">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export markDeadLetter" time="0.0013225">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export incrementAttempts" time="0.002141083">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="Action Error Codes &gt; should include async job error codes" time="0.004312958">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobProcessor &gt; should export processDecisionExecution" time="0.021372292">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobProcessor &gt; should export processPlaybookAdvance" time="0.000804">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/breakGlassService.test.js" timestamp="2025-12-21T15:18:08.894Z" hostname="MacBook-Pro-Piotr.local" tests="15" failures="0" errors="0" skipped="0" time="0.162380333">
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; SCOPES &gt; should define all break-glass scopes" time="0.0005895">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; DEFAULT_DURATION_MINUTES &gt; should be 2 hours (120 minutes)" time="0.000090583">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; MAX_DURATION_MINUTES &gt; should be 24 hours (1440 minutes)" time="0.000063708">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; startSession &gt; should throw error for missing required parameters" time="0.000574334">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; startSession &gt; should throw error for invalid scope" time="0.000123083">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; startSession &gt; should throw error if session already exists for scope" time="0.0002745">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; startSession &gt; should create session successfully" time="0.000245958">
            <system-out>
[BreakGlass] Session started: test-uuid-1234 (scope: policy_engine_disabled) by user-1

            </system-out>
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; startSession &gt; should cap duration at MAX_DURATION_MINUTES" time="0.000122875">
            <system-out>
[BreakGlass] Session started: test-uuid-1234 (scope: emergency_access) by user-1

            </system-out>
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; closeSession &gt; should throw error for non-existent session" time="0.000159">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; closeSession &gt; should throw error for already closed session" time="0.000172084">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; closeSession &gt; should close session successfully" time="0.000190208">
            <system-out>
[BreakGlass] Session closed: session-1 by user-1

            </system-out>
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; isBreakGlassActive &gt; should return false when no active session" time="0.000050917">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; isBreakGlassActive &gt; should return true when active session exists" time="0.000042958">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; getActiveSessions &gt; should return empty array when no sessions" time="0.000254167">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; getActiveSessions &gt; should return active sessions" time="0.000317875">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/connectorAdapter.test.js" timestamp="2025-12-21T15:18:08.895Z" hostname="MacBook-Pro-Piotr.local" tests="11" failures="0" errors="0" skipped="0" time="0.193562416">
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Dry-run Mode &gt; should return plan without execution in dry-run mode" time="0.006494125">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Dry-run Mode &gt; should respect sandbox_mode flag on config" time="0.000311583">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Error Handling &gt; should return error for unknown connector" time="0.000182667">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Error Handling &gt; should return error for unsupported action" time="0.000174958">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Error Handling &gt; should return error when connector not configured" time="0.000161875">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Error Handling &gt; should return error when connector disconnected" time="0.00015075">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Plan Generation &gt; should generate Jira plan for issue_create" time="0.000468709">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Plan Generation &gt; should generate Slack plan for message_send" time="0.000198667">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Plan Generation &gt; should generate Google Calendar plan for event_create" time="0.000153292">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Execution (Mock) &gt; should execute Slack message_send successfully" time="0.000215708">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Execution (Mock) &gt; should include duration_ms in result" time="0.000114708">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/connectorRegistry.test.js" timestamp="2025-12-21T15:18:08.895Z" hostname="MacBook-Pro-Piotr.local" tests="14" failures="0" errors="0" skipped="0" time="0.230756833">
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getAllConnectors &gt; should return all available connectors" time="0.001908125">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getConnector &gt; should return connector by key" time="0.00018825">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getConnector &gt; should return null for unknown connector" time="0.000089834">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getConnectorsByCategory &gt; should return connectors filtered by category" time="0.000123834">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getConnectorsByCategory &gt; should return empty array for unknown category" time="0.000265417">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; hasCapability &gt; should return true for supported capability" time="0.000085">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; hasCapability &gt; should return false for unsupported capability" time="0.000057333">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; hasCapability &gt; should return false for unknown connector" time="0.000040625">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; validateCredentials &gt; should validate all required credentials present" time="0.000093292">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; validateCredentials &gt; should identify missing required credentials" time="0.000104542">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; validateCredentials &gt; should handle unknown connector" time="0.000056583">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getRequiredCredentials &gt; should return required credentials for connector" time="0.000048291">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getRequiredCredentials &gt; should return empty array for unknown connector" time="0.000033041">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getAllCategories &gt; should return all categories" time="0.000095875">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/demoGuard.test.js" timestamp="2025-12-21T15:18:08.896Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.248125708">
        <testcase classname="tests/unit/demoGuard.test.js" name="Demo Guard Middleware &gt; should allow regular users to perform write operations" time="0.007945709">
        </testcase>
        <testcase classname="tests/unit/demoGuard.test.js" name="Demo Guard Middleware &gt; should allow demo users to perform read operations" time="0.001427208">
        </testcase>
        <testcase classname="tests/unit/demoGuard.test.js" name="Demo Guard Middleware &gt; should BLOCK demo users from performing write operations on protected routes" time="0.001089417">
            <system-err>
[DemoGuard] Blocked POST /api/tasks for Demo User undefined (Action: CREATE_TASKS)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/demoGuard.test.js" name="Demo Guard Middleware &gt; should ALLOW demo users to perform write operations on ALLOWED routes (AI Chat)" time="0.000829625">
        </testcase>
        <testcase classname="tests/unit/demoGuard.test.js" name="Demo Guard Middleware &gt; should ALLOW demo users to perform write operations on ALLOWED routes (Logout)" time="0.001319208">
        </testcase>
        <testcase classname="tests/unit/demoGuard.test.js" name="Demo Guard Middleware &gt; should passthrough if no user matches (unauthenticated requests handled elsewhere)" time="0.000935167">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/demoIsolation.test.js" timestamp="2025-12-21T15:18:08.896Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.24767675">
        <testcase classname="tests/unit/demoIsolation.test.js" name="Demo Guard Isolation Extension &gt; should allow Normal GET for demo user" time="0.007010333">
        </testcase>
        <testcase classname="tests/unit/demoIsolation.test.js" name="Demo Guard Isolation Extension &gt; should BLOCK demo user if they try to switch context via Query Param" time="0.00129175">
            <system-err>
[DemoGuard] Blocked cross-tenant access attempt by Demo User undefined (Target: org-real, Actual: org-demo)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/demoIsolation.test.js" name="Demo Guard Isolation Extension &gt; should BLOCK demo user if they try to switch context via Body" time="0.008360167">
            <system-err>
[DemoGuard] Blocked cross-tenant access attempt by Demo User undefined (Target: org-real, Actual: org-demo)

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/drdStructure.test.ts" timestamp="2025-12-21T15:18:08.896Z" hostname="MacBook-Pro-Piotr.local" tests="7" failures="0" errors="0" skipped="0" time="0.17829975">
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; exports DRD_STRUCTURE as array" time="0.000499625">
        </testcase>
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; each axis has required properties" time="0.0003625">
        </testcase>
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; each area has required properties" time="0.000852791">
        </testcase>
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; each level has required properties" time="0.003156417">
        </testcase>
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; getQuestionsForAxis &gt; returns areas for valid axis ID" time="0.000087709">
        </testcase>
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; getQuestionsForAxis &gt; returns empty array for invalid axis ID" time="0.000243167">
        </testcase>
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; getQuestionsForAxis &gt; returns areas for different axis IDs" time="0.000106541">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/governanceAudit.test.js" timestamp="2025-12-21T15:18:08.897Z" hostname="MacBook-Pro-Piotr.local" tests="8" failures="0" errors="0" skipped="0" time="0.159729">
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; logAudit &gt; should throw error for missing required parameters" time="0.001204417">
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; logAudit &gt; should throw error for invalid action" time="0.000230875">
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; logAudit &gt; should log audit entry successfully" time="0.000712">
            <system-out>
[GovernanceAudit] Logged: CREATE on POLICY_RULE/rule-1 by user-1

            </system-out>
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; getAuditLog &gt; should query with organization filter" time="0.000262709">
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; getAuditLog &gt; should bypass org filter for superadmin" time="0.00012075">
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; getAuditLog &gt; should support action filter" time="0.000286083">
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; exportAuditLog &gt; should export as JSON by default" time="0.00013675">
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; exportAuditLog &gt; should export as CSV when specified" time="0.00015875">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/notificationOutboxService.test.js" timestamp="2025-12-21T15:18:08.897Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.217057166">
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; NOTIFICATION_TYPES Constants &gt; should export APPROVAL_DUE type" time="0.009845042">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; NOTIFICATION_TYPES Constants &gt; should export PLAYBOOK_STUCK type" time="0.001802417">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; NOTIFICATION_TYPES Constants &gt; should export DEAD_LETTER type" time="0.002097625">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; NOTIFICATION_TYPES Constants &gt; should export ESCALATION type" time="0.001901375">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; NOTIFICATION_TYPES Constants &gt; should have 4 notification types" time="0.002155792">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; OUTBOX_STATUSES Constants &gt; should export QUEUED status" time="0.001570625">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; OUTBOX_STATUSES Constants &gt; should export SENT status" time="0.001512917">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; OUTBOX_STATUSES Constants &gt; should export FAILED status" time="0.001314167">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; MAX_ATTEMPTS &gt; should be 3" time="0.001927542">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; Service Methods Existence &gt; should export enqueue" time="0.001631208">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; Service Methods Existence &gt; should export shouldNotify" time="0.001920958">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; Service Methods Existence &gt; should export getUserPreferences" time="0.001773125">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; Service Methods Existence &gt; should export updateUserPreferences" time="0.001860583">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; Service Methods Existence &gt; should export processQueue" time="0.002117542">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; Service Methods Existence &gt; should export getOutboxStats" time="0.001429709">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService User Preferences &gt; should return true when no preferences set (default behavior)" time="0.002157">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/pdfExport.test.ts" timestamp="2025-12-21T15:18:08.898Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.210832333">
        <testcase classname="tests/unit/pdfExport.test.ts" name="Service Test: pdfExport &gt; exportReportToPDF &gt; returns false when element is not found" time="0.001179667">
            <system-err>
Element with id non-existent not found

            </system-err>
        </testcase>
        <testcase classname="tests/unit/pdfExport.test.ts" name="Service Test: pdfExport &gt; exportReportToPDF &gt; exports PDF successfully" time="0.000473583">
        </testcase>
        <testcase classname="tests/unit/pdfExport.test.ts" name="Service Test: pdfExport &gt; exportReportToPDF &gt; handles errors gracefully" time="0.001274625">
            <system-err>
PDF Export failed: Error: Canvas error
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/pdfExport.test.ts:89:52
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/pdfExport.test.ts" name="Service Test: pdfExport &gt; exportDashboardToPDF &gt; creates PDF with metadata" time="0.008862667">
        </testcase>
        <testcase classname="tests/unit/pdfExport.test.ts" name="Service Test: pdfExport &gt; exportDashboardToPDF &gt; handles optional metadata" time="0.000304875">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/piiRedactor.test.js" timestamp="2025-12-21T15:18:08.898Z" hostname="MacBook-Pro-Piotr.local" tests="17" failures="0" errors="0" skipped="0" time="0.18813025">
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redactEmails &gt; should redact email addresses" time="0.000534334">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redactEmails &gt; should redact multiple emails" time="0.000084333">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redactEmails &gt; should return non-string values unchanged" time="0.000081542">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redactTokens &gt; should redact JWT-like tokens" time="0.000185166">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redactTokens &gt; should handle partial JWT patterns" time="0.000065">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should redact email fields" time="0.000126291">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should redact name fields" time="0.000058208">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should redact password fields" time="0.000064583">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should redact token and secret fields" time="0.0000665">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should redact inline emails in string values" time="0.000059125">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should handle arrays with email strings" time="0.000063584">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should handle nested objects" time="0.000053416">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should not mutate original object" time="0.000036166">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should handle null and undefined" time="0.000047709">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redactKeys &gt; should redact specific keys" time="0.000063416">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; createAuditSnapshot &gt; should return JSON string with redacted PII" time="0.000057833">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; DEFAULT_PII_FIELDS &gt; should include common PII fields" time="0.000408667">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/policyEngine.test.js" timestamp="2025-12-21T15:18:08.899Z" hostname="MacBook-Pro-Piotr.local" tests="21" failures="0" errors="0" skipped="0" time="0.186386916">
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; Safety Guardrails Constants &gt; NEVER_AUTO_APPROVE_RISK_LEVELS should include HIGH" time="0.001204375">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; Safety Guardrails Constants &gt; ALWAYS_MANUAL_ACTION_TYPES should include MEETING_SCHEDULE" time="0.000127167">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; Safety Guardrails Constants &gt; should not include LOW in NEVER_AUTO_APPROVE_RISK_LEVELS" time="0.000117958">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; risk_level_lte &gt; should match when proposal risk is lower or equal" time="0.000157666">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; risk_level_lte &gt; should not match when proposal risk is higher" time="0.000087292">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; action_type_in &gt; should match when action type is in list" time="0.000076083">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; action_type_in &gt; should not match when action type is not in list" time="0.000059958">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; action_type_in &gt; should return false for non-array input" time="0.000041834">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; scope_eq &gt; should match when scope equals" time="0.000071959">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; scope_eq &gt; should not match when scope differs" time="0.000077875">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; signal_in &gt; should match when signal is in list" time="0.000056708">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; signal_in &gt; should not match when signal is not in list" time="0.000046167">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; signal_in &gt; should return false for non-array input" time="0.00004075">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; time_window &gt; should always match for anytime" time="0.000046666">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; time_window &gt; should return false for unrecognized values" time="0.000034875">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; evaluateConditions (Logic Tests) &gt; should return true when all conditions match" time="0.000083916">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; evaluateConditions (Logic Tests) &gt; should return false when any condition fails" time="0.000047167">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; evaluateConditions (Logic Tests) &gt; should return false for unknown conditions (safety)" time="0.000155166">
            <system-err>
[PolicyEngine] Unknown condition: unknown_condition

            </system-err>
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; evaluateConditions (Logic Tests) &gt; should return true for empty conditions" time="0.000037625">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Safety Checks &gt; HIGH risk is in NEVER_AUTO_APPROVE list" time="0.000051792">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Safety Checks &gt; MEETING_SCHEDULE is in ALWAYS_MANUAL list" time="0.000042459">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/regulatoryModeGuard.test.js" timestamp="2025-12-21T15:18:08.899Z" hostname="MacBook-Pro-Piotr.local" tests="31" failures="0" errors="0" skipped="0" time="0.12457425">
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Action Classification &gt; ALLOWED_ACTIONS &gt; should include all advisory-only actions" time="0.001173292">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Action Classification &gt; BLOCKED_ACTIONS &gt; should include all mutation actions" time="0.000219833">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should allow EXPLAIN_CONTEXT in regulatory mode" time="0.000111792">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should allow ANALYZE_RISKS in regulatory mode" time="0.000080917">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should allow EDUCATE in regulatory mode" time="0.000058">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should BLOCK CREATE_DRAFT_TASK in regulatory mode" time="0.000039875">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should BLOCK CREATE_DRAFT_INITIATIVE in regulatory mode" time="0.000044875">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should BLOCK UPDATE_STATUS in regulatory mode" time="0.000068625">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should BLOCK EXECUTE_ACTION in regulatory mode" time="0.000047834">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should BLOCK MODIFY_ENTITY in regulatory mode" time="0.000058458">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should BLOCK DELETE_ENTITY in regulatory mode" time="0.000035292">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should block actions containing mutation keywords" time="0.000066667">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should allow actions without mutation keywords" time="0.000048292">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should handle null/undefined action gracefully" time="0.000034292">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Regulatory Mode Prompt &gt; should contain prohibition statements" time="0.000056541">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Regulatory Mode Prompt &gt; should forbid action verbs" time="0.000041125">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Regulatory Mode Prompt &gt; should require advisory language" time="0.000034458">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Regulatory Mode Prompt &gt; should include example responses" time="0.00002775">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Forbidden Verbs List &gt; should contain all dangerous verbs" time="0.000139166">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Advisory Phrases List &gt; should contain recommended advisory language" time="0.000050708">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should block CREATE_DRAFT_TASK when regulatory mode is enabled" time="0.00017625">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should block UPDATE_STATUS when regulatory mode is enabled" time="0.000061958">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should allow EXPLAIN_CONTEXT when regulatory mode is enabled" time="0.000057834">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should allow ANALYZE_RISKS when regulatory mode is enabled" time="0.000061834">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should NOT block actions when regulatory mode is disabled" time="0.000040542">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should NOT block when no projectId is provided" time="0.000035583">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should log blocked attempts to audit trail" time="0.000500916">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; getStatus &gt; should return full status object when enabled" time="0.000098708">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; getStatus &gt; should return full status object when disabled" time="0.000042042">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Integration with AI Role System &gt; should override ANY role when regulatory mode is active" time="0.000106917">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Safety: Fail-Safe Behavior &gt; should default to blocking when database error occurs" time="0.000025167">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/roi.test.ts" timestamp="2025-12-21T15:18:08.901Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.193233834">
        <testcase classname="tests/unit/roi.test.ts" name="Unit Test: ROI Calculation &gt; should calculate ROI correctly for positive values" time="0.000488125">
        </testcase>
        <testcase classname="tests/unit/roi.test.ts" name="Unit Test: ROI Calculation &gt; should handle zero cost to avoid infinity" time="0.000082458">
        </testcase>
        <testcase classname="tests/unit/roi.test.ts" name="Unit Test: ROI Calculation &gt; should return 0 for break-even" time="0.000068959">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/secretsVault.test.js" timestamp="2025-12-21T15:18:08.901Z" hostname="MacBook-Pro-Piotr.local" tests="12" failures="0" errors="0" skipped="0" time="0.164395792">
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Encryption/Decryption &gt; should encrypt and decrypt a string successfully" time="0.00150775">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Encryption/Decryption &gt; should encrypt and decrypt an object successfully" time="0.000232917">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Encryption/Decryption &gt; should return null when decrypting null/undefined" time="0.000086334">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Encryption/Decryption &gt; should throw on invalid encrypted data" time="0.000306958">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Encryption/Decryption &gt; should produce different ciphertext for same plaintext (random IV)" time="0.000164708">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Redaction &gt; should redact string values showing only last 4 characters" time="0.000085667">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Redaction &gt; should fully redact short strings" time="0.000050833">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Redaction &gt; should recursively redact nested objects" time="0.000059291">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Redaction &gt; should return empty object for null/undefined" time="0.000062">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Validation &gt; should validate present fields as valid" time="0.000091042">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Validation &gt; should identify missing fields" time="0.000337042">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Validation &gt; should handle null/undefined secrets" time="0.000058291">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/slaService.test.js" timestamp="2025-12-21T15:18:08.901Z" hostname="MacBook-Pro-Piotr.local" tests="7" failures="0" errors="0" skipped="0" time="0.200634416">
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; SLA_CHECK_INTERVAL_MS &gt; should be 10 minutes in milliseconds" time="0.005605875">
        </testcase>
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; Service Methods Existence &gt; should export findExpiredAssignments" time="0.000963458">
        </testcase>
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; Service Methods Existence &gt; should export markExpired" time="0.000916791">
        </testcase>
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; Service Methods Existence &gt; should export findOrgAdmin" time="0.00109325">
        </testcase>
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; Service Methods Existence &gt; should export escalateAssignment" time="0.000759333">
        </testcase>
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; Service Methods Existence &gt; should export runSlaCheck" time="0.000843834">
        </testcase>
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; Service Methods Existence &gt; should export getSlaHealth" time="0.001046584">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/store.test.ts" timestamp="2025-12-21T15:18:08.902Z" hostname="MacBook-Pro-Piotr.local" tests="19" failures="0" errors="0" skipped="0" time="0.190479459">
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; initializes with correct default values" time="0.000850875">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets current view" time="0.000160541">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets session mode" time="0.000113417">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets current user" time="0.000317084">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; toggles sidebar open state" time="0.000103334">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; toggles sidebar collapse" time="0.00008275">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; adds chat message" time="0.000495">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets chat messages" time="0.000160958">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; clears chat" time="0.000135375">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets bot typing state" time="0.00008875">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets current stream content" time="0.000067833">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; updates free session data" time="0.000072292">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; updates free session data with function" time="0.000081708">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; updates full session data" time="0.000080375">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets AI config" time="0.000084375">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; toggles theme" time="0.000066042">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; updates last chat message" time="0.00009425">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; logout resets state" time="0.000121792">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets current project ID" time="0.0000755">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/templateGraphService.test.js" timestamp="2025-12-21T15:18:08.903Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.265681166">
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; createEmptyGraph &gt; creates a graph with START and END nodes connected" time="0.000974667">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; stepsToGraph &gt; converts empty steps to START  END graph" time="0.00022025">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; stepsToGraph &gt; converts steps array to linear graph" time="0.000236167">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; stepsToGraph &gt; preserves step data in nodes" time="0.000326584">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; graphToSteps &gt; returns empty array for invalid graph" time="0.000124042">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; graphToSteps &gt; skips START and END nodes in output" time="0.000076333">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; graphToSteps &gt; converts linear graph to ordered steps" time="0.000111708">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; validateDAG &gt; returns valid for acyclic graph" time="0.000137291">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; validateDAG &gt; detects simple cycle" time="0.00007">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; validateDAG &gt; returns invalid for null graph" time="0.000052333">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; findDeadEnds &gt; returns empty for valid graph" time="0.000079083">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; findDeadEnds &gt; finds nodes without outgoing edges" time="0.000137416">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; findBranchesWithoutElse &gt; returns empty when no BRANCH nodes" time="0.000069667">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; findBranchesWithoutElse &gt; finds BRANCH node without else path" time="0.000061334">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; findBranchesWithoutElse &gt; passes when BRANCH has else path" time="0.000047375">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; roundtrip: steps  graph  steps &gt; preserves data through roundtrip" time="0.000080541">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/templateValidationService.test.js" timestamp="2025-12-21T15:18:08.903Z" hostname="MacBook-Pro-Piotr.local" tests="9" failures="0" errors="0" skipped="0" time="0.169933416">
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validate &gt; returns error for missing template graph" time="0.000903125">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validate &gt; returns error for invalid JSON in graph" time="0.000231666">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validate &gt; validates empty trigger_signal" time="0.00036325">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validateGraph &gt; returns error for missing nodes array" time="0.000116292">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validateGraph &gt; returns error for missing edges array" time="0.000160708">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validateGraph &gt; returns error when no START node exists" time="0.000110417">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validateGraph &gt; calls validateDAG and reports cycles" time="0.000214708">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validateGraph &gt; calls findDeadEnds and reports dead-end nodes" time="0.0001495">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validateGraph &gt; calls findBranchesWithoutElse and reports missing else" time="0.000131709">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/transformationEngine.test.ts" timestamp="2025-12-21T15:18:08.904Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.17724075">
        <testcase classname="tests/unit/transformationEngine.test.ts" name="Service Test: transformationEngine &gt; generates initiatives from session" time="0.000623917">
        </testcase>
        <testcase classname="tests/unit/transformationEngine.test.ts" name="Service Test: transformationEngine &gt; generates initiatives with required properties" time="0.001627709">
        </testcase>
        <testcase classname="tests/unit/transformationEngine.test.ts" name="Service Test: transformationEngine &gt; generates initiatives only for levels above current" time="0.000371333">
        </testcase>
        <testcase classname="tests/unit/transformationEngine.test.ts" name="Service Test: transformationEngine &gt; handles session with no gaps" time="0.000080709">
        </testcase>
        <testcase classname="tests/unit/transformationEngine.test.ts" name="Service Test: transformationEngine &gt; assigns priority based on current level" time="0.000090209">
        </testcase>
        <testcase classname="tests/unit/transformationEngine.test.ts" name="Service Test: transformationEngine &gt; assigns complexity based on target level" time="0.000773">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/transformationScenarios.test.ts" timestamp="2025-12-21T15:18:08.904Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.183225042">
        <testcase classname="tests/unit/transformationScenarios.test.ts" name="Transformation Scenarios Logic &gt; should have 6 unique scenarios" time="0.000526625">
        </testcase>
        <testcase classname="tests/unit/transformationScenarios.test.ts" name="Transformation Scenarios Logic &gt; recommendScenario should return stabilize for high risk &amp; low budget" time="0.0000985">
        </testcase>
        <testcase classname="tests/unit/transformationScenarios.test.ts" name="Transformation Scenarios Logic &gt; recommendScenario should return quickwins for low risk &amp; low budget" time="0.00008">
        </testcase>
        <testcase classname="tests/unit/transformationScenarios.test.ts" name="Transformation Scenarios Logic &gt; recommendScenario should return foundation for high risk &amp; high budget" time="0.000062083">
        </testcase>
        <testcase classname="tests/unit/transformationScenarios.test.ts" name="Transformation Scenarios Logic &gt; recommendScenario should default to hybrid" time="0.000061792">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/utils.test.ts" timestamp="2025-12-21T15:18:08.904Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.205719708">
        <testcase classname="tests/unit/utils.test.ts" name="Unit Test: Utilities &gt; should have utility functions available" time="0.000559542">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/workqueueService.test.js" timestamp="2025-12-21T15:18:08.904Z" hostname="MacBook-Pro-Piotr.local" tests="13" failures="0" errors="0" skipped="0" time="0.242591625">
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; ASSIGNMENT_STATUSES Constants &gt; should export PENDING status" time="0.007834">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; ASSIGNMENT_STATUSES Constants &gt; should export ACKED status" time="0.002131459">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; ASSIGNMENT_STATUSES Constants &gt; should export DONE status" time="0.001715792">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; ASSIGNMENT_STATUSES Constants &gt; should export EXPIRED status" time="0.001330917">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; ASSIGNMENT_STATUSES Constants &gt; should have 4 status types" time="0.001607333">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; DEFAULT_SLA_HOURS &gt; should default to 48 hours" time="0.001915417">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export assignApproval" time="0.001628084">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export acknowledgeApproval" time="0.002162041">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export completeApproval" time="0.001921542">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export getMyApprovals" time="0.001093042">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export getOrgApprovals" time="0.002074458">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export getOverdueCount" time="0.001376209">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export getAssignmentByProposal" time="0.001509334">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/hooks/useAIStream.test.ts" timestamp="2025-12-21T15:18:08.905Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.235815208">
        <testcase classname="tests/unit/hooks/useAIStream.test.ts" name="Hook Test: useAIStream &gt; initializes with correct default values" time="0.006152875">
        </testcase>
        <testcase classname="tests/unit/hooks/useAIStream.test.ts" name="Hook Test: useAIStream &gt; calls API with correct parameters" time="0.005403958">
            <system-out>
[DEBUG-D] startStream entry: {
  msgLength: 12,
  historyLength: 0,
  hasSystemPrompt: true,
  hasContext: false
}
[DEBUG-A,C] startStream onDone: { responseLength: 11 }

            </system-out>
        </testcase>
        <testcase classname="tests/unit/hooks/useAIStream.test.ts" name="Hook Test: useAIStream &gt; updates stream content as chunks arrive" time="0.001532">
            <system-out>
[DEBUG-D] startStream entry: {
  msgLength: 4,
  historyLength: 0,
  hasSystemPrompt: false,
  hasContext: false
}
[DEBUG-A,C] startStream onDone: { responseLength: 11 }

            </system-out>
        </testcase>
        <testcase classname="tests/unit/hooks/useAIStream.test.ts" name="Hook Test: useAIStream &gt; calls onStreamDone callback when stream completes" time="0.003630125">
            <system-out>
[DEBUG-D] startStream entry: {
  msgLength: 4,
  historyLength: 0,
  hasSystemPrompt: false,
  hasContext: false
}
[DEBUG-A,C] startStream onDone: { responseLength: 8 }

            </system-out>
        </testcase>
        <testcase classname="tests/unit/hooks/useAIStream.test.ts" name="Hook Test: useAIStream &gt; handles stream errors" time="0.004423375">
            <system-out>
[DEBUG-D] startStream entry: {
  msgLength: 4,
  historyLength: 0,
  hasSystemPrompt: false,
  hasContext: false
}

[DEBUG-A,C] startStream error: { errorMsg: &apos;Error: Stream failed&apos; }

            </system-out>
            <system-err>
AI Stream Error: Error: Stream failed
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/hooks/useAIStream.test.ts:87:23
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/hooks/useAIStream.test.ts" name="Hook Test: useAIStream &gt; sets bot typing state correctly" time="0.003197542">
            <system-out>
[DEBUG-D] startStream entry: {
  msgLength: 4,
  historyLength: 0,
  hasSystemPrompt: false,
  hasContext: false
}
[DEBUG-A,C] startStream onDone: { responseLength: 11 }

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/hooks/useIndependentAI.test.ts" timestamp="2025-12-21T15:18:08.905Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.214780083">
        <testcase classname="tests/unit/hooks/useIndependentAI.test.ts" name="useIndependentAI &gt; initializes with default state" time="0.006080541">
        </testcase>
        <testcase classname="tests/unit/hooks/useIndependentAI.test.ts" name="useIndependentAI &gt; callAI manages loading state and accumulates stream" time="0.001503083">
        </testcase>
        <testcase classname="tests/unit/hooks/useIndependentAI.test.ts" name="useIndependentAI &gt; refineText calls callAI with correct prompt and system instruction" time="0.001898792">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/hooks/useScreenContext.test.ts" timestamp="2025-12-21T15:18:08.905Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.219042875">
        <testcase classname="tests/unit/hooks/useScreenContext.test.ts" name="Hook Test: useScreenContext &gt; sets screen context on mount after debounce" time="0.007539625">
        </testcase>
        <testcase classname="tests/unit/hooks/useScreenContext.test.ts" name="Hook Test: useScreenContext &gt; updates context when data changes" time="0.001165959">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/accessPolicyService.test.js" timestamp="2025-12-21T15:18:08.906Z" hostname="MacBook-Pro-Piotr.local" tests="11" failures="8" errors="0" skipped="0" time="0.174966666">
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; getOrganizationType &gt; should return organization type for valid org" time="0.003834666">
            <failure message="Cannot read properties of null (reading &apos;id&apos;)" type="TypeError">
TypeError: Cannot read properties of null (reading &apos;id&apos;)
  tests/unit/backend/accessPolicyService.test.js:63:27
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; getOrganizationType &gt; should return null for non-existent org" time="0.00047975">
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; getOrganizationType &gt; should handle database errors" time="0.001810792">
            <failure message="promise resolved &quot;null&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;null&quot; instead of rejecting

- Expected: 
Error {
  &quot;message&quot;: &quot;rejected promise&quot;,
}

+ Received: 
null

  tests/unit/backend/accessPolicyService.test.js:85:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; checkAccess &gt; should allow access for active trial org" time="0.002066375">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/accessPolicyService.test.js:111:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; checkAccess &gt; should deny access for expired trial" time="0.001728042">
            <failure message="expected &apos;Organization not found&apos; to contain &apos;expired&apos;" type="AssertionError">
AssertionError: expected &apos;Organization not found&apos; to contain &apos;expired&apos;

Expected: &quot;expired&quot;
Received: &quot;Organization not found&quot;

  tests/unit/backend/accessPolicyService.test.js:134:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; checkAccess &gt; should deny access when AI limit reached" time="0.000605125">
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; checkAccess &gt; should deny access for demo mode mutations" time="0.000775375">
            <failure message="expected &apos;Organization not found&apos; to contain &apos;DEMO&apos;" type="AssertionError">
AssertionError: expected &apos;Organization not found&apos; to contain &apos;DEMO&apos;

Expected: &quot;DEMO&quot;
Received: &quot;Organization not found&quot;

  tests/unit/backend/accessPolicyService.test.js:185:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; getOrganizationLimits &gt; should return default limits for trial org without custom limits" time="0.000608083">
            <failure message="Cannot read properties of null (reading &apos;max_projects&apos;)" type="TypeError">
TypeError: Cannot read properties of null (reading &apos;max_projects&apos;)
  tests/unit/backend/accessPolicyService.test.js:209:27
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; getOrganizationLimits &gt; should return custom limits when set" time="0.000995625">
            <failure message="Cannot read properties of null (reading &apos;max_projects&apos;)" type="TypeError">
TypeError: Cannot read properties of null (reading &apos;max_projects&apos;)
  tests/unit/backend/accessPolicyService.test.js:230:27
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; Multi-Tenant Isolation &gt; should only return limits for specified organization" time="0.001127083">
            <failure message="the given combination of arguments (undefined and string) is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a string" type="AssertionError">
AssertionError: the given combination of arguments (undefined and string) is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a string
  tests/unit/backend/accessPolicyService.test.js:250:39
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; Multi-Tenant Isolation &gt; should not leak data between organizations" time="0.000525">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/actionDecision.service.test.js" timestamp="2025-12-21T15:18:08.908Z" hostname="MacBook-Pro-Piotr.local" tests="12" failures="0" errors="0" skipped="6" time="0.163365375">
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; validation &gt; should throw error for missing required fields" time="0.00103225">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; validation &gt; should throw error for missing organization_id" time="0.000152292">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; validation &gt; should throw error for invalid decision type" time="0.000108792">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; MODIFIED_ALLOWLIST &gt; should define allowlist for TASK_CREATE" time="0.000349792">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; MODIFIED_ALLOWLIST &gt; should define allowlist for PLAYBOOK_ASSIGN" time="0.000101084">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; MODIFIED_ALLOWLIST &gt; should define allowlist for MEETING_SCHEDULE" time="0.000089792">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; getDecisionsByProposal &gt; should query decisions by proposal_id" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; getDecisionsByProposal &gt; should parse JSON fields" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; getAuditLog - skipped due to CJS/ESM mock interop &gt; should enforce organization isolation" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; getAuditLog - skipped due to CJS/ESM mock interop &gt; should support SUPERADMIN_BYPASS for global access" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; getAuditLog - skipped due to CJS/ESM mock interop &gt; should support filtering by actionType" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; getAuditLog - skipped due to CJS/ESM mock interop &gt; should support filtering by decision" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/activityService.test.js" timestamp="2025-12-21T15:18:08.908Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.776379958">
        <testcase classname="tests/unit/backend/activityService.test.js" name="Backend Service Test: ActivityService &gt; log &gt; logs activity with all parameters" time="0.102264416">
        </testcase>
        <testcase classname="tests/unit/backend/activityService.test.js" name="Backend Service Test: ActivityService &gt; log &gt; handles optional parameters" time="0.100856791">
        </testcase>
        <testcase classname="tests/unit/backend/activityService.test.js" name="Backend Service Test: ActivityService &gt; getRecent &gt; fetches recent activities with default limit" time="0.114162958">
        </testcase>
        <testcase classname="tests/unit/backend/activityService.test.js" name="Backend Service Test: ActivityService &gt; getRecent &gt; fetches recent activities with custom limit" time="0.1023885">
        </testcase>
        <testcase classname="tests/unit/backend/activityService.test.js" name="Backend Service Test: ActivityService &gt; getRecent &gt; handles database errors gracefully" time="0.000948792">
        </testcase>
        <testcase classname="tests/unit/backend/activityService.test.js" name="Backend Service Test: ActivityService &gt; getByOrganization &gt; fetches activities for organization" time="0.102237208">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiActionExecutor.test.js" timestamp="2025-12-21T15:18:08.908Z" hostname="MacBook-Pro-Piotr.local" tests="15" failures="6" errors="0" skipped="0" time="0.178194375">
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction() &gt; should create action request successfully" time="0.002941375">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction() &gt; should create pending action when approval required" time="0.000321916">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction() &gt; should block action when regulatory mode is enabled" time="0.000205">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction() &gt; should block action when AI role guard blocks it" time="0.000203292">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction() &gt; should require approval for MANAGER role actions" time="0.000181166">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction() &gt; should block action when policy engine denies it" time="0.000150417">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction() &gt; should allow action without projectId" time="0.000187166">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; approveAction() &gt; should approve pending action" time="0.000166167">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; approveAction() &gt; should reject approval for non-pending action" time="0.004129875">
            <failure message="promise resolved &quot;{ success: true, (2) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ success: true, (2) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;actionId&quot;: &quot;action-123&quot;,
+   &quot;status&quot;: &quot;APPROVED&quot;,
+   &quot;success&quot;: true,
  }

  tests/unit/backend/aiActionExecutor.test.js:289:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; rejectAction() &gt; should reject pending action" time="0.00034475">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; executeAction() &gt; should execute approved action" time="0.005122584">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/aiActionExecutor.test.js:336:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; executeAction() &gt; should reject execution of non-approved action" time="0.000617583">
            <failure message="promise resolved &quot;{ success: false, (1) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ success: false, (1) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;error&quot;: &quot;Action is PENDING, not APPROVED&quot;,
+   &quot;success&quot;: false,
  }

  tests/unit/backend/aiActionExecutor.test.js:352:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; getAction() &gt; should return action by ID" time="0.000275667">
            <failure message="AIActionExecutor.getAction is not a function" type="TypeError">
TypeError: AIActionExecutor.getAction is not a function
  tests/unit/backend/aiActionExecutor.test.js:368:51
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; getAction() &gt; should return null for non-existent action" time="0.000162333">
            <failure message="AIActionExecutor.getAction is not a function" type="TypeError">
TypeError: AIActionExecutor.getAction is not a function
  tests/unit/backend/aiActionExecutor.test.js:379:51
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; listActions() &gt; should return list of actions" time="0.000161291">
            <failure message="AIActionExecutor.listActions is not a function" type="TypeError">
TypeError: AIActionExecutor.listActions is not a function
  tests/unit/backend/aiActionExecutor.test.js:403:52
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiActions.test.js" timestamp="2025-12-21T15:18:08.910Z" hostname="MacBook-Pro-Piotr.local" tests="23" failures="0" errors="0" skipped="0" time="0.185577917">
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should have 7 action types" time="0.008117">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define CREATE_DRAFT_TASK type" time="0.000178083">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define CREATE_DRAFT_INITIATIVE type" time="0.000083584">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define SUGGEST_ROADMAP_CHANGE type" time="0.000076125">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define GENERATE_REPORT type" time="0.000063417">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define PREPARE_DECISION_SUMMARY type" time="0.00004825">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define EXPLAIN_CONTEXT type" time="0.000053625">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define ANALYZE_RISKS type" time="0.000049792">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_STATUS &gt; should define PENDING status" time="0.000059958">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_STATUS &gt; should define APPROVED status" time="0.000065125">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_STATUS &gt; should define REJECTED status" time="0.000048708">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_STATUS &gt; should define EXECUTED status" time="0.000035084">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; Service Structure &gt; should export requestAction function" time="0.000036958">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; Service Structure &gt; should export createDraft function" time="0.000032">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; Service Structure &gt; should export approveAction function" time="0.000034209">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; Service Structure &gt; should export rejectAction function" time="0.000038083">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; Service Structure &gt; should export getPendingActions function" time="0.000032958">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; Service Structure &gt; should export executeAction function" time="0.000031041">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIAuditLogger &gt; Service Structure &gt; should export logInteraction function" time="0.001089459">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIAuditLogger &gt; Service Structure &gt; should export logSuggestion function" time="0.000069959">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIAuditLogger &gt; Service Structure &gt; should export recordUserDecision function" time="0.000049583">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIAuditLogger &gt; Service Structure &gt; should export getAuditLogs function" time="0.000035792">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIAuditLogger &gt; Service Structure &gt; should export getAuditStats function" time="0.000032417">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiAnalyticsService.test.js" timestamp="2025-12-21T15:18:08.913Z" hostname="MacBook-Pro-Piotr.local" tests="7" failures="0" errors="0" skipped="7" time="0">
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; getLastActionTrends &gt; should aggregate action counts correctly [BLOCKED: MOCK BYPASS]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; getApprovalStats &gt; should distinguish between auto and manual approvals [BLOCKED: MOCK BYPASS]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; getPlaybookStats &gt; should calculate completion rates and average duration [BLOCKED: MOCK BYPASS]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; getDeadLetterStats &gt; should aggregate dead letter jobs by error code [BLOCKED: MOCK BYPASS]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; getROISummary &gt; should combine metrics from multiple sources [BLOCKED: MOCK BYPASS]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; exportData &gt; should export CSV format correctly [BLOCKED: MOCK BYPASS]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; exportData &gt; should export JSON format correctly [BLOCKED: MOCK BYPASS]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiAuditLogger.test.js" timestamp="2025-12-21T15:18:08.913Z" hostname="MacBook-Pro-Piotr.local" tests="24" failures="0" errors="0" skipped="0" time="0.118578542">
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logInteraction &gt; should log a basic AI interaction" time="0.000751">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logInteraction &gt; should store correlation_id if provided" time="0.0001715">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logInteraction &gt; should handle optional fields" time="0.000076209">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logInteraction &gt; should store explanation data if provided" time="0.000093541">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logInteraction &gt; should handle database error" time="0.000558584">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logWithExplanation &gt; should log interaction with full explanation object" time="0.000117834">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logWithExplanation &gt; should default actionType to AI_RESPONSE" time="0.00005825">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logSuggestion &gt; should log AI suggestion" time="0.00007325">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logSuggestion &gt; should handle minimal parameters" time="0.000059042">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; recordUserDecision &gt; should update user decision on logged suggestion" time="0.000109583">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; recordUserDecision &gt; should record rejection without feedback" time="0.000045833">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; recordUserDecision &gt; should handle non-existent audit entry" time="0.000047959">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditLogs &gt; should return audit logs for organization" time="0.000420167">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditLogs &gt; should filter by project if provided" time="0.0001005">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditLogs &gt; should filter by date range" time="0.000040167">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditLogs &gt; should limit results" time="0.000033334">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditLogs &gt; should filter by action type" time="0.000032042">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditLogs &gt; should return empty array on database error" time="0.0001">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditStats &gt; should return statistics for organization" time="0.000109709">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditStats &gt; should filter by project if provided" time="0.000194583">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getRoleDistribution &gt; should return role distribution" time="0.000169417">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; clearOldLogs &gt; should clear logs older than specified days" time="0.000102875">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; clearOldLogs &gt; should use default retention period of 90 days" time="0.000040292">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; clearOldLogs &gt; should respect custom retention period" time="0.000032625">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiContextBuilder.test.js" timestamp="2025-12-21T15:18:08.914Z" hostname="MacBook-Pro-Piotr.local" tests="9" failures="2" errors="0" skipped="0" time="0.167365666">
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; buildContext() &gt; should build complete context with all layers" time="0.003560708">
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; buildContext() &gt; should build context without projectId" time="0.000316958">
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; buildContext() &gt; should include PMO health snapshot when projectId provided" time="0.000663375">
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; buildContext() &gt; should handle PMO health service errors gracefully" time="0.000371375">
            <system-err>
[AIContextBuilder] Failed to get PMO health snapshot: Service unavailable

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; buildContext() &gt; should include options in context" time="0.000306">
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _buildPlatformContext() &gt; should build platform context with user role" time="0.000176083">
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _buildPlatformContext() &gt; should map SUPERADMIN role correctly" time="0.000121292">
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _buildOrganizationContext() &gt; should build organization context" time="0.003010167">
            <failure message="expected undefined to be &apos;Test Org&apos; // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be &apos;Test Org&apos; // Object.is equality

- Expected: 
&quot;Test Org&quot;

+ Received: 
undefined

  tests/unit/backend/aiContextBuilder.test.js:251:30
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _buildProjectContext() &gt; should build project context" time="0.000448875">
            <failure message="expected undefined to be &apos;Test Project&apos; // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be &apos;Test Project&apos; // Object.is equality

- Expected: 
&quot;Test Project&quot;

+ Received: 
undefined

  tests/unit/backend/aiContextBuilder.test.js:270:34
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiCoreLayer.test.js" timestamp="2025-12-21T15:18:08.915Z" hostname="MacBook-Pro-Piotr.local" tests="56" failures="0" errors="0" skipped="0" time="0.231513459">
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export buildContext function" time="0.006062875">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _buildPlatformContext function" time="0.000139375">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _buildOrganizationContext function" time="0.000079583">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _buildProjectContext function" time="0.000076041">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _buildExecutionContext function" time="0.00006925">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _buildKnowledgeContext function" time="0.00004725">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _buildExternalContext function" time="0.000043667">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _generateHash function" time="0.000037583">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; _generateHash &gt; should generate consistent hash" time="0.000267708">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; _generateHash &gt; should generate different hash for different inputs" time="0.000311917">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; POLICY_LEVELS &gt; should define ADVISORY level" time="0.004174458">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; POLICY_LEVELS &gt; should define ASSISTED level" time="0.0000695">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; POLICY_LEVELS &gt; should define PROACTIVE level" time="0.000041375">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; POLICY_LEVELS &gt; should define AUTOPILOT level" time="0.000034125">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; AI_ROLES &gt; should define ADVISOR role" time="0.000037958">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; AI_ROLES &gt; should define PMO_MANAGER role" time="0.000030833">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; AI_ROLES &gt; should define EXECUTOR role" time="0.000031792">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; AI_ROLES &gt; should define EDUCATOR role" time="0.000029291">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; Service Structure &gt; should export getEffectivePolicy function" time="0.000029209">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; Service Structure &gt; should export canPerformAction function" time="0.000028167">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; Service Structure &gt; should export getPolicySummary function" time="0.000038417">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; Service Structure &gt; should export updatePolicy function" time="0.000037333">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; MEMORY_TYPES &gt; should define DECISION type" time="0.003660917">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; MEMORY_TYPES &gt; should define PHASE_TRANSITION type" time="0.000061709">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; MEMORY_TYPES &gt; should define RECOMMENDATION type" time="0.000038417">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; MEMORY_TYPES &gt; should define PATTERN type" time="0.000033958">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; createSession &gt; should create session with unique conversationId" time="0.000191083">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; createSession &gt; should create session with empty messages array" time="0.000088542">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; createSession &gt; should create session with startedAt timestamp" time="0.000035125">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; addMessage &gt; should add message to session" time="0.000353166">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; addMessage &gt; should add timestamp to message" time="0.000046042">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; Service Structure &gt; should export recordProjectMemory function" time="0.000032958">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; Service Structure &gt; should export getUserPreferences function" time="0.000029166">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; Service Structure &gt; should export updateUserPreferences function" time="0.000028125">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; AI_ROLES &gt; should define all 4 roles" time="0.00627725">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; CHAT_MODES &gt; should define EXPLAIN mode" time="0.0000755">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; CHAT_MODES &gt; should define GUIDE mode" time="0.000039375">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; CHAT_MODES &gt; should define ANALYZE mode" time="0.000033417">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; CHAT_MODES &gt; should define DO mode" time="0.000031542">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; CHAT_MODES &gt; should define TEACH mode" time="0.000028959">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should detect EXPLAIN intent" time="0.0000785">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should detect GUIDE intent" time="0.000040417">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should detect ANALYZE intent" time="0.000039333">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should detect DO intent" time="0.000038708">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should detect TEACH intent" time="0.000039625">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should default to EXPLAIN" time="0.000029875">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _selectRole &gt; should select ADVISOR for EXPLAIN intent" time="0.000055958">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _selectRole &gt; should select PMO_MANAGER for GUIDE intent" time="0.000035333">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _selectRole &gt; should select EXECUTOR for DO intent" time="0.000032292">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _selectRole &gt; should select EDUCATOR for TEACH intent" time="0.000030959">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _selectRole &gt; should fallback to ADVISOR if role not active" time="0.000030917">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; getRoleDescription &gt; should return description for ADVISOR" time="0.000079583">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; getRoleDescription &gt; should return description for PMO_MANAGER" time="0.000036417">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; getRoleDescription &gt; should return description for EXECUTOR" time="0.000032791">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; getRoleDescription &gt; should return description for EDUCATOR" time="0.000031542">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; Service Structure &gt; should export processMessage function" time="0.0000295">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiCostControlService.test.js" timestamp="2025-12-21T15:18:08.917Z" hostname="MacBook-Pro-Piotr.local" tests="27" failures="0" errors="0" skipped="0" time="0.202485833">
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; setGlobalBudget &gt; should set global budget" time="0.000751917">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; setGlobalBudget &gt; should handle database errors" time="0.000605333">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; setTenantBudget &gt; should set tenant budget" time="0.000144375">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; setProjectBudget &gt; should set project budget" time="0.000117209">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; getBudget &gt; should return budget when found" time="0.000115958">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; getBudget &gt; should return null when not found" time="0.000065625">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; checkBudget &gt; should allow action when no limits set" time="0.000248209">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; checkBudget &gt; should allow action when within budget" time="0.000129125">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; checkBudget &gt; should block action when exceeding budget without auto-downgrade" time="0.000103792">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; checkBudget &gt; should trigger downgrade when exceeding budget with auto-downgrade enabled" time="0.00010775">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; checkBudget &gt; should check project budget limit" time="0.000072375">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; estimateCost &gt; should calculate cost for known models" time="0.00009075">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; estimateCost &gt; should fallback to default for unknown models" time="0.0000415">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; logUsage &gt; should log usage and update budgets" time="0.000174084">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; logUsage &gt; should handle updates without project" time="0.000048333">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; resetMonthlyUsage &gt; should reset usage for all scopes if unspecified" time="0.000091083">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; resetMonthlyUsage &gt; should reset usage for specific scope" time="0.000860333">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; Model Selection &gt; should return correct category for action" time="0.000057042">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; Model Selection &gt; should fallback to CHAT for unknown action" time="0.000031042">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; Model Selection &gt; should prioritize role if present" time="0.000027167">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; getTierForBudget &gt; should return tier 1 for non-downgraded reasoning" time="0.00004275">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; getTierForBudget &gt; should downgrade premium to standard when budget constrained" time="0.000033083">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; getTierForBudget &gt; should downgrade standard to budget when constrained" time="0.0000315">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; getTierForBudget &gt; should keep budget tier at 3 even when constrained" time="0.000030625">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; Analytics &gt; should return usage summary" time="0.000138083">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; Analytics &gt; should return user usage" time="0.000084667">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; Analytics &gt; should return all budgets" time="0.000177166">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiDecisionGovernance.test.js" timestamp="2025-12-21T15:18:08.918Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="4" time="0.082478583">
        <testcase classname="tests/unit/backend/aiDecisionGovernance.test.js" name="AI Decision Governance Service &gt; detectDecisionNeeded &gt; should detect phase transition decision" time="0.000622375">
        </testcase>
        <testcase classname="tests/unit/backend/aiDecisionGovernance.test.js" name="AI Decision Governance Service &gt; detectDecisionNeeded &gt; should check DB for blocked task reason [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiDecisionGovernance.test.js" name="AI Decision Governance Service &gt; getBlockingDecisions &gt; should calculate daysWaiting correctly [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiDecisionGovernance.test.js" name="AI Decision Governance Service &gt; prepareDecisionBrief &gt; should generate a brief and insert into DB [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiDecisionGovernance.test.js" name="AI Decision Governance Service &gt; registerImpact &gt; should record an impact with mocked UUID [BLOCKED: REQUIRE UUID FAIL]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiExecutiveReporting.test.js" timestamp="2025-12-21T15:18:08.918Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="2" time="0">
        <testcase classname="tests/unit/backend/aiExecutiveReporting.test.js" name="AI Executive Reporting Service &gt; generateReport &gt; should dispatch to project status report handler [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiExecutiveReporting.test.js" name="AI Executive Reporting Service &gt; generateReport &gt; should dispatch to portfolio overview handler [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiExplainabilityService.test.js" timestamp="2025-12-21T15:18:08.918Z" hostname="MacBook-Pro-Piotr.local" tests="35" failures="0" errors="0" skipped="0" time="0.192504375">
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; computeConfidenceLevel &gt; returns LOW when context is null" time="0.000526875">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; computeConfidenceLevel &gt; returns LOW when context is empty" time="0.000115709">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; computeConfidenceLevel &gt; returns LOW when PMOHealthSnapshot is missing and no project data" time="0.00008075">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; computeConfidenceLevel &gt; returns MEDIUM when PMOHealthSnapshot exists with blockers" time="0.000077917">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; computeConfidenceLevel &gt; returns HIGH when full context with no blockers" time="0.000084167">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; computeConfidenceLevel &gt; penalizes conflicting signals (many blockers AND many pending decisions)" time="0.000326416">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildReasoningSummary &gt; returns default message when no health data" time="0.000086125">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildReasoningSummary &gt; includes overdue tasks in reasoning" time="0.000051">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildReasoningSummary &gt; includes pending decisions in reasoning" time="0.000050458">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildReasoningSummary &gt; includes phase information" time="0.000058292">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildReasoningSummary &gt; includes project memory count when provided" time="0.000041458">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; extractConstraintsApplied &gt; includes AI role constraint" time="0.000089666">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; extractConstraintsApplied &gt; includes policy level constraint" time="0.000041125">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; extractConstraintsApplied &gt; includes phase gate constraint" time="0.000048167">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; extractConstraintsApplied &gt; includes regulatory mode constraint" time="0.000044667">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; identifyDataUsed &gt; returns projectData false when no project context" time="0.000054625">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; identifyDataUsed &gt; returns projectData true when project context exists" time="0.0000455">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; identifyDataUsed &gt; returns projectMemoryCount from options" time="0.000037125">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; identifyDataUsed &gt; returns empty externalSources when internet disabled" time="0.000212834">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; identifyDataUsed &gt; returns external sources when internet enabled" time="0.00010275">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildAIExplanation &gt; generates valid AIExplanation object" time="0.000283291">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildAIExplanation &gt; includes all required fields in correct format" time="0.000107875">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildAIExplanation &gt; timestamp is ISO 8601 format" time="0.000069334">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildAIExplanation &gt; maps orchestrator roles to project roles correctly" time="0.000044334">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildExplainabilityFooter &gt; returns empty string when explanation is null" time="0.00005125">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildExplainabilityFooter &gt; formats human-readable footer" time="0.000063291">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildExplainabilityFooter &gt; shows max 3 constraints" time="0.000066542">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildExplainabilityFooter &gt; does not expose raw internals" time="0.000045625">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; Internal Helpers &gt; _countPopulatedLayers &gt; returns 0 for null context" time="0.000026042">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; Internal Helpers &gt; _countPopulatedLayers &gt; counts populated layers correctly" time="0.000033834">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; Internal Helpers &gt; _getBlockerCount &gt; returns 0 when no blockers" time="0.000023875">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; Internal Helpers &gt; _getBlockerCount &gt; counts blockers from PMO health snapshot" time="0.00002575">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; Internal Helpers &gt; _getBlockerCount &gt; counts blockers from execution context" time="0.000025334">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; Internal Helpers &gt; _getBlockerCount &gt; sums blockers from both sources" time="0.00002475">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="Sample Output &gt; generates sample AIExplanation matching the spec" time="0.000230833">
            <system-out>

========== SAMPLE AIExplanation JSON ==========
{
  &quot;aiRole&quot;: &quot;ADVISOR&quot;,
  &quot;regulatoryMode&quot;: false,
  &quot;confidenceLevel&quot;: &quot;HIGH&quot;,
  &quot;reasoningSummary&quot;: &quot;Based on 3 overdue task(s), 1 pending decision(s), current phase: Execution, 5 project memory item(s) consulted&quot;,
  &quot;dataUsed&quot;: {
    &quot;projectData&quot;: true,
    &quot;projectMemoryCount&quot;: 5,
    &quot;externalSources&quot;: []
  },
  &quot;constraintsApplied&quot;: [
    &quot;AI Role: ADVISOR (explain/suggest only, no mutations)&quot;,
    &quot;AI Policy: ADVISORY mode&quot;,
    &quot;Phase Gate: Execution&quot;
  ],
  &quot;timestamp&quot;: &quot;2025-12-21T15:18:06.316Z&quot;
}
================================================


            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiExternalData.test.js" timestamp="2025-12-21T15:18:08.919Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.166226584">
        <testcase classname="tests/unit/backend/aiExternalData.test.js" name="AI External Data Control &gt; Internet Toggle &gt; should block external sources when internetEnabled is false" time="0.000512542">
        </testcase>
        <testcase classname="tests/unit/backend/aiExternalData.test.js" name="AI External Data Control &gt; Internet Toggle &gt; should allow external sources when internetEnabled is true" time="0.000108709">
        </testcase>
        <testcase classname="tests/unit/backend/aiExternalData.test.js" name="AI External Data Control &gt; Internet Toggle &gt; should respect project-level internet toggle" time="0.000078083">
        </testcase>
        <testcase classname="tests/unit/backend/aiExternalData.test.js" name="AI External Data Control &gt; RAG Toggle (GAP-03) &gt; should disable RAG when rag_enabled is 0" time="0.000059917">
        </testcase>
        <testcase classname="tests/unit/backend/aiExternalData.test.js" name="AI External Data Control &gt; RAG Toggle (GAP-03) &gt; should enable RAG by default" time="0.000055292">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiFailureHandler.test.js" timestamp="2025-12-21T15:18:08.920Z" hostname="MacBook-Pro-Piotr.local" tests="20" failures="7" errors="0" skipped="0" time="0.202736833">
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; withFallback() &gt; should execute AI function successfully" time="0.002538208">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; withFallback() &gt; should use fallback when AI function fails" time="0.000782375">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; withFallback() &gt; should handle timeout" time="0.001516833">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; withFallback() &gt; should return graceful degradation when fallback also fails" time="0.001085917">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; _identifyFailureType() &gt; should identify timeout errors" time="0.000432291">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; _identifyFailureType() &gt; should identify rate limit errors" time="0.000155875">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; _identifyFailureType() &gt; should identify budget exceeded errors" time="0.000111209">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; _identifyFailureType() &gt; should identify authentication errors" time="0.00009225">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; _identifyFailureType() &gt; should default to unknown error" time="0.000106959">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; logFailure() &gt; should log failure to database" time="0.002914667">
            <failure message="expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (2) ]

Number of calls: 0
" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (2) ]

Number of calls: 0

  tests/unit/backend/aiFailureHandler.test.js:165:32
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; getHealthStatus() &gt; should return health status" time="0.000360083">
            <failure message="AIFailureHandler.getHealthStatus is not a function" type="TypeError">
TypeError: AIFailureHandler.getHealthStatus is not a function
  tests/unit/backend/aiFailureHandler.test.js:182:51
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; getHealthStatus() &gt; should return default status when not found" time="0.000187083">
            <failure message="AIFailureHandler.getHealthStatus is not a function" type="TypeError">
TypeError: AIFailureHandler.getHealthStatus is not a function
  tests/unit/backend/aiFailureHandler.test.js:192:51
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; getRecentFailures() &gt; should return recent failures" time="0.001749208">
            <failure message="expected 4 to be 2 // Object.is equality" type="AssertionError">
AssertionError: expected 4 to be 2 // Object.is equality

- Expected
+ Received

- 2
+ 4

  tests/unit/backend/aiFailureHandler.test.js:209:44
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; forceHealthCheck() &gt; should return HEALTHY status when no recent failures" time="0.001333541">
            <failure message="expected &apos;degraded&apos; to be &apos;healthy&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;degraded&apos; to be &apos;healthy&apos; // Object.is equality

Expected: &quot;healthy&quot;
Received: &quot;degraded&quot;

  tests/unit/backend/aiFailureHandler.test.js:226:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; forceHealthCheck() &gt; should return DEGRADED status with 3+ failures" time="0.000586959">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; forceHealthCheck() &gt; should return UNAVAILABLE status with 10+ failures" time="0.000983625">
            <failure message="expected &apos;degraded&apos; to be &apos;unavailable&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;degraded&apos; to be &apos;unavailable&apos; // Object.is equality

Expected: &quot;unavailable&quot;
Received: &quot;degraded&quot;

  tests/unit/backend/aiFailureHandler.test.js:256:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; nonBlocking() &gt; should return AI result when successful" time="0.000247875">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; nonBlocking() &gt; should return default value when AI fails" time="0.00042175">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; explainFailure() &gt; should return user-friendly explanation for timeout" time="0.000323708">
            <failure message="expected &apos;object&apos; to be &apos;string&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;object&apos; to be &apos;string&apos; // Object.is equality

Expected: &quot;string&quot;
Received: &quot;object&quot;

  tests/unit/backend/aiFailureHandler.test.js:295:40
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; degrade() &gt; should return graceful degradation response" time="0.000112042">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiIntegrationService.test.js" timestamp="2025-12-21T15:18:08.921Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="4" time="0.18068775">
        <testcase classname="tests/unit/backend/aiIntegrationService.test.js" name="AI Integration Service &gt; Logic: getProviderCapabilities &gt; should return correct capabilities for known providers" time="0.009075875">
        </testcase>
        <testcase classname="tests/unit/backend/aiIntegrationService.test.js" name="AI Integration Service &gt; Logic: getProviderCapabilities &gt; should return empty array for unknown provider" time="0.001960291">
        </testcase>
        <testcase classname="tests/unit/backend/aiIntegrationService.test.js" name="AI Integration Service &gt; suggestSync &gt; should create pending action [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiIntegrationService.test.js" name="AI Integration Service &gt; executeAction &gt; should execute approved action and update status [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiIntegrationService.test.js" name="AI Integration Service &gt; executeAction &gt; should throw if action not found or not approved [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiIntegrationService.test.js" name="AI Integration Service &gt; handleWebhook &gt; should process webhook if integration active [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiKnowledgeManager.test.js" timestamp="2025-12-21T15:18:08.921Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="2" time="0.20137325">
        <testcase classname="tests/unit/backend/aiKnowledgeManager.test.js" name="AI Knowledge Manager Service &gt; Logic: _cosineSimilarity &gt; should calculate similarity correctly" time="0.031271209">
        </testcase>
        <testcase classname="tests/unit/backend/aiKnowledgeManager.test.js" name="AI Knowledge Manager Service &gt; Logic: _cosineSimilarity &gt; should handle empty or mismatched vectors" time="0.001805875">
        </testcase>
        <testcase classname="tests/unit/backend/aiKnowledgeManager.test.js" name="AI Knowledge Manager Service &gt; Logic: _formatKnowledgeForPrompt &gt; should format chunks with citations" time="0.001292">
        </testcase>
        <testcase classname="tests/unit/backend/aiKnowledgeManager.test.js" name="AI Knowledge Manager Service &gt; getContextualKnowledge (Integration) &gt; should retrieve and rank knowledge chunks [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiKnowledgeManager.test.js" name="AI Knowledge Manager Service &gt; captureDecision &gt; should store decision and generate embeddings [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiMaturityMonitor.test.js" timestamp="2025-12-21T15:18:08.922Z" hostname="MacBook-Pro-Piotr.local" tests="4" failures="0" errors="0" skipped="2" time="0.22805175">
        <testcase classname="tests/unit/backend/aiMaturityMonitor.test.js" name="AI Maturity Monitor Service &gt; Logic: _scoreToLevel &gt; should map score to correct level" time="0.014235583">
        </testcase>
        <testcase classname="tests/unit/backend/aiMaturityMonitor.test.js" name="AI Maturity Monitor Service &gt; Logic: _generateInsights &gt; should identify strengths and weaknesses" time="0.001762291">
        </testcase>
        <testcase classname="tests/unit/backend/aiMaturityMonitor.test.js" name="AI Maturity Monitor Service &gt; assessMaturity (Integration) &gt; should aggregate metrics into overall score [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiMaturityMonitor.test.js" name="AI Maturity Monitor Service &gt; benchmarkAgainstPractices &gt; should compare levels vs benchmarks [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiMemoryManager.test.js" timestamp="2025-12-21T15:18:08.922Z" hostname="MacBook-Pro-Piotr.local" tests="12" failures="0" errors="0" skipped="0" time="0">
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; createSession() &gt; should create new session" time="0.001230833">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; createSession() &gt; should create unique session IDs" time="0.000219">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; addMessage() &gt; should add message to session" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; addMessage() &gt; should add multiple messages" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; recordProjectMemory() &gt; should record project memory" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; recordProjectMemory() &gt; should handle database errors" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; recordDecision() &gt; should record decision with rationale" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; recordPhaseTransition() &gt; should record phase transition" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; recordRecommendation() &gt; should record recommendation and user response" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; getProjectMemory() &gt; should retrieve project memories" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; getProjectMemory() &gt; should filter by memory type" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; getRelevantMemories() &gt; should return relevant memories for context" time="0">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiOrchestrator.test.js" timestamp="2025-12-21T15:18:08.922Z" hostname="MacBook-Pro-Piotr.local" tests="12" failures="0" errors="0" skipped="0" time="0.174100209">
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; processMessage &gt; should process user message successfully" time="0.00105225">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; processMessage &gt; should handle context building failure" time="0.000581125">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; processMessage &gt; should block if trial expired" time="0.000103292">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; processMessage &gt; should block if daily AI limit reached" time="0.000078291">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should detect intent from message keywords" time="0.000063042">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should default to EXPLAIN intent" time="0.000049416">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; _selectRole &gt; should select role based on intent" time="0.000053875">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; _selectRole &gt; should downgrade role if policy restricts" time="0.000047083">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; _selectRole &gt; should force ADVISOR in regulatory mode" time="0.000048083">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; _buildPrompt &gt; should include context and user message" time="0.000132334">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; postProcessResponse &gt; should add standard footer" time="0.000658125">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; postProcessResponse &gt; should handle missing explanation" time="0.000071292">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiPolicyEngine.test.js" timestamp="2025-12-21T15:18:08.923Z" hostname="MacBook-Pro-Piotr.local" tests="10" failures="7" errors="0" skipped="0" time="0.179883291">
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; getEffectivePolicy() &gt; should return ADVISORY policy when regulatory mode is enabled" time="0.003223666">
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; getEffectivePolicy() &gt; should return organization policy when no project override" time="0.003578834">
            <failure message="expected &apos;ADVISORY&apos; to be &apos;ASSISTED&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;ADVISORY&apos; to be &apos;ASSISTED&apos; // Object.is equality

Expected: &quot;ASSISTED&quot;
Received: &quot;ADVISORY&quot;

  tests/unit/backend/aiPolicyEngine.test.js:111:40
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; getEffectivePolicy() &gt; should apply project-level override (can only reduce)" time="0.000782166">
            <failure message="expected &apos;ADVISORY&apos; to be &apos;ASSISTED&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;ADVISORY&apos; to be &apos;ASSISTED&apos; // Object.is equality

Expected: &quot;ASSISTED&quot;
Received: &quot;ADVISORY&quot;

  tests/unit/backend/aiPolicyEngine.test.js:142:40
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; getEffectivePolicy() &gt; should not allow project override to exceed max level" time="0.000766167">
            <failure message="expected &apos;ADVISORY&apos; to be &apos;ASSISTED&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;ADVISORY&apos; to be &apos;ASSISTED&apos; // Object.is equality

Expected: &quot;ASSISTED&quot;
Received: &quot;ADVISORY&quot;

  tests/unit/backend/aiPolicyEngine.test.js:170:40
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; getEffectivePolicy() &gt; should include user preferences" time="0.001154042">
            <failure message="expected &apos;EXPERT&apos; to be &apos;FRIENDLY&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;EXPERT&apos; to be &apos;FRIENDLY&apos; // Object.is equality

Expected: &quot;FRIENDLY&quot;
Received: &quot;EXPERT&quot;

  tests/unit/backend/aiPolicyEngine.test.js:192:37
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; canPerformAction() &gt; should allow EXPLAIN_CONTEXT for ADVISORY policy" time="0.000831333">
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; canPerformAction() &gt; should allow CREATE_DRAFT_TASK for ASSISTED policy" time="0.001437958">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/aiPolicyEngine.test.js:221:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; canPerformAction() &gt; should deny CREATE_DRAFT_TASK for ADVISORY policy" time="0.000623959">
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; canPerformAction() &gt; should check regulatory mode first" time="0.000801333">
            <failure message="expected &apos;Action requires ASSISTED policy level&apos; to contain &apos;Regulatory Mode&apos;" type="AssertionError">
AssertionError: expected &apos;Action requires ASSISTED policy level&apos; to contain &apos;Regulatory Mode&apos;

Expected: &quot;Regulatory Mode&quot;
Received: &quot;Action requires ASSISTED policy level, but current is ADVISORY&quot;

  tests/unit/backend/aiPolicyEngine.test.js:248:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; getPolicyLevelForAction() &gt; should return correct policy level for action" time="0.000325042">
            <failure message="AIPolicyEngine.getPolicyLevelForAction is not a function" type="TypeError">
TypeError: AIPolicyEngine.getPolicyLevelForAction is not a function
  tests/unit/backend/aiPolicyEngine.test.js:254:35
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiPromptHierarchy.test.js" timestamp="2025-12-21T15:18:08.924Z" hostname="MacBook-Pro-Piotr.local" tests="21" failures="0" errors="0" skipped="0" time="0.196550458">
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; buildPrompt() &gt; should build prompt stack with all layers" time="0.002748916">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; buildPrompt() &gt; should use default prompts when custom not found" time="0.000268625">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getSystemPrompt() &gt; should return custom system prompt when available" time="0.000175833">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getSystemPrompt() &gt; should return default system prompt when not found" time="0.000160416">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getRolePrompt() &gt; should return role prompt for ADVISOR" time="0.000176125">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getRolePrompt() &gt; should return role prompt for PMO_MANAGER" time="0.000133958">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getRolePrompt() &gt; should return default for unknown role" time="0.0001215">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getPhasePrompt() &gt; should return phase prompt for Context" time="0.000133459">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getPhasePrompt() &gt; should return phase prompt for Execution" time="0.00010525">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getPhasePrompt() &gt; should return empty string for unknown phase" time="0.00011675">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getUserOverlay() &gt; should return user preferences overlay" time="0.000129875">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getUserOverlay() &gt; should filter out disallowed preferences" time="0.000098334">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getUserOverlay() &gt; should return null when no preferences" time="0.000079459">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; stackPrompts() &gt; should combine prompts in correct order" time="0.000110917">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; stackPrompts() &gt; should handle missing layers" time="0.000109917">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; Preference Validation &gt; should allow valid tone preference" time="0.000095792">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; Preference Validation &gt; should reject invalid tone preference" time="0.000085209">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; Preference Validation &gt; should allow valid response length" time="0.00007625">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; Security: Prompt Injection Prevention &gt; should sanitize custom instructions" time="0.000189333">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; Security: Prompt Injection Prevention &gt; should allow safe custom instructions" time="0.000072459">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; Security: Prompt Injection Prevention &gt; should handle null instructions" time="0.000062291">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiRiskChangeControl.test.js" timestamp="2025-12-21T15:18:08.924Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="3" time="0.181421541">
        <testcase classname="tests/unit/backend/aiRiskChangeControl.test.js" name="AI Risk &amp; Change Control Service &gt; Logic: _suggestMitigation &gt; should return correct mitigation strategies" time="0.007992125">
        </testcase>
        <testcase classname="tests/unit/backend/aiRiskChangeControl.test.js" name="AI Risk &amp; Change Control Service &gt; detectRisks (Integration) &gt; should aggregate risks from all detectors [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiRiskChangeControl.test.js" name="AI Risk &amp; Change Control Service &gt; trackScopeChange &gt; should log scope change [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiRiskChangeControl.test.js" name="AI Risk &amp; Change Control Service &gt; preEscalationWarning &gt; should identify when escalation is NOT needed (Logic Check)" time="0.000962375">
        </testcase>
        <testcase classname="tests/unit/backend/aiRiskChangeControl.test.js" name="AI Risk &amp; Change Control Service &gt; preEscalationWarning &gt; should trigger warning for critical risks [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiRoleGuard.test.js" timestamp="2025-12-21T15:18:08.925Z" hostname="MacBook-Pro-Piotr.local" tests="24" failures="10" errors="0" skipped="0" time="0.118247875">
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getProjectRole() &gt; should return ADVISOR as default for null projectId" time="0.0007375">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getProjectRole() &gt; should return project AI role from database" time="0.004387166">
            <failure message="expected &apos;ADVISOR&apos; to be &apos;MANAGER&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;ADVISOR&apos; to be &apos;MANAGER&apos; // Object.is equality

Expected: &quot;MANAGER&quot;
Received: &quot;ADVISOR&quot;

  tests/unit/backend/aiRoleGuard.test.js:46:26
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getProjectRole() &gt; should default to ADVISOR when project not found" time="0.000408459">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getProjectRole() &gt; should default to ADVISOR on database error" time="0.0002785">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; setProjectRole() &gt; should set project AI role" time="0.0009765">
            <system-out>
[AIRoleGuard] Project proj-test-123 AI role set to OPERATOR by user user-123

            </system-out>
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/aiRoleGuard.test.js:91:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; setProjectRole() &gt; should reject invalid role" time="0.000579833">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; setProjectRole() &gt; should handle database errors" time="0.002163625">
            <system-out>
[AIRoleGuard] Project proj-test-123 AI role set to MANAGER by user user-123

            </system-out>
            <failure message="promise resolved &quot;{ updated: false, (2) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ updated: false, (2) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;projectId&quot;: &quot;proj-test-123&quot;,
+   &quot;role&quot;: &quot;MANAGER&quot;,
+   &quot;updated&quot;: false,
  }

  tests/unit/backend/aiRoleGuard.test.js:118:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; canPerformAction() &gt; should allow EXPLAIN_CONTEXT for ADVISOR" time="0.000289916">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; canPerformAction() &gt; should block CREATE_DRAFT_TASK for ADVISOR" time="0.000386416">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; canPerformAction() &gt; should allow CREATE_DRAFT_TASK for MANAGER" time="0.000373125">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/aiRoleGuard.test.js:159:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; canPerformAction() &gt; should allow EXECUTE_TASK_UPDATE for OPERATOR" time="0.00032">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/aiRoleGuard.test.js:173:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; canPerformAction() &gt; should block EXECUTE_TASK_UPDATE for MANAGER" time="0.000330417">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; canPerformAction() &gt; should allow unknown action types (default allow)" time="0.000414375">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; isActionBlocked() &gt; should return blocked=false for allowed actions" time="0.00038175">
            <failure message="expected true to be false // Object.is equality" type="AssertionError">
AssertionError: expected true to be false // Object.is equality

- Expected
+ Received

- false
+ true

  tests/unit/backend/aiRoleGuard.test.js:215:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; isActionBlocked() &gt; should return blocked=true with details for blocked actions" time="0.000219708">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; validateMutation() &gt; should block all mutations for ADVISOR" time="0.000424875">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; validateMutation() &gt; should allow mutations as drafts for MANAGER" time="0.000322459">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/aiRoleGuard.test.js:260:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; validateMutation() &gt; should allow mutations for OPERATOR" time="0.000298708">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/aiRoleGuard.test.js:275:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; validateMutation() &gt; should fail-safe to ADVISOR for unknown role" time="0.000476625">
            <failure message="expected &apos;AI is in ADVISOR mode and cannot perf&apos; to contain &apos;Unknown AI role&apos;" type="AssertionError">
AssertionError: expected &apos;AI is in ADVISOR mode and cannot perf&apos; to contain &apos;Unknown AI role&apos;

Expected: &quot;Unknown AI role&quot;
Received: &quot;AI is in ADVISOR mode and cannot perform any mutations. Only explanations and suggestions are allowed.&quot;

  tests/unit/backend/aiRoleGuard.test.js:291:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getRoleCapabilities() &gt; should return capabilities for ADVISOR" time="0.000093333">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getRoleCapabilities() &gt; should return capabilities for MANAGER" time="0.000077375">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getRoleCapabilities() &gt; should return capabilities for OPERATOR" time="0.000065375">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getRoleCapabilities() &gt; should default to ADVISOR for unknown role" time="0.00006475">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getRoleConfig() &gt; should return full role configuration" time="0.00029775">
            <failure message="expected &apos;ADVISOR&apos; to be &apos;MANAGER&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;ADVISOR&apos; to be &apos;MANAGER&apos; // Object.is equality

Expected: &quot;MANAGER&quot;
Received: &quot;ADVISOR&quot;

  tests/unit/backend/aiRoleGuard.test.js:334:39
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiService.test.js" timestamp="2025-12-21T15:18:08.926Z" hostname="MacBook-Pro-Piotr.local" tests="36" failures="0" errors="0" skipped="4" time="0.200696584">
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; callLLM &gt; should use Google Gemini by default if checks pass" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; callLLM &gt; should block if balance is insufficient" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; callLLM &gt; should call OpenAI via fetch when provider is openai" time="0.001843625">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; callLLM &gt; should call Anthropic via fetch when provider is anthropic" time="0.000182417">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; generateInitiatives &gt; should parse JSON response correctly" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; generateInitiatives &gt; should return empty array on JSON parse error" time="0.006809166">
            <system-err>
LLM Call Error Error: AI Provider not configured.
    at Object.callLLM (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:181:41)
    at Object.generateInitiatives (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:707:29)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:213:33
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:20

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; streamLLM &gt; should yield chunks from Gemini stream" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; streamLLM &gt; should handle errors in stream" time="0.001116667">
            <system-err>
Stream LLM Error Error: AI Provider not configured.
    at Object.streamLLM (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:420:41)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:241:30
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:20

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; buildRoadmap &gt; should return roadmap object on success" time="0.000379125">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; buildRoadmap &gt; should return empty object on error" time="0.000149792">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; suggestTasks &gt; should return tasks array on success" time="0.000374667">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; deepDiagnose &gt; should execute chain of thought and return diagnosis" time="0.000182">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; enrichInitiative &gt; should maintain structure and fallback to LLM" time="0.000307458">
            <system-err>
Web Search failed, using LLM knowledge Error: Web Fail
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:311:59
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; generateObservations &gt; should return observations from feedback" time="0.000233791">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; testProviderConnection &gt; should test OpenAI connection" time="0.000224625">
            <system-out>
[AiService] Testing connection for: openai

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; enhancePrompt &gt; should return base system role when no extras found" time="0.000070584">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; enhancePrompt &gt; should inject global strategies" time="0.000070875">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; enhancePrompt &gt; should inject client context when orgId provided" time="0.002366916">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Queue Operations &gt; should enqueue task and return jobId" time="0.000296417">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Queue Operations &gt; should get job status" time="0.0001035">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Queue Operations &gt; should return null for non-existent job" time="0.00005275">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Vision Capabilities &gt; should format payload correctly for OpenAI Vision" time="0.000191792">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Vision Capabilities &gt; should use Gemini 1.5 Flash for vision fallback" time="0.001182375">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Advanced Streaming &gt; should parse OpenAI SSE stream correctly" time="0.000217666">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Advanced Streaming &gt; should handle OpenAI stream error" time="0.000309042">
            <system-err>
Stream LLM Error Error: Stream Error
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:237:69
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Provider Integrations &gt; should generate JWT for Zhipu AI provider" time="0.001175042">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateTaskInsight &gt; should return parsed insights when LLM returns valid JSON" time="0.000250875">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateTaskInsight &gt; should return fallback object on LLM failure/JSON error" time="0.000214333">
            <system-err>
Task Insight Error Error: LLM Fail
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:630:42
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateExecutionStrategy &gt; should return strategy object on success" time="0.000114375">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateExecutionStrategy &gt; should return empty structure on error" time="0.00015075">
            <system-err>
Execution Gen Error SyntaxError: Unexpected token &apos;N&apos;, &quot;Not JSON&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Object.generateExecutionStrategy (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:923:25)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:658:28
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:20

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateInsights (Pre-Mortem) &gt; should return insights on success" time="0.000087208">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateInsights (Pre-Mortem) &gt; should return fallback on error" time="0.000161333">
            <system-err>
Insights Gen Error Error: Fail
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:679:42
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateStrategicFit &gt; should return fit analysis on success" time="0.000094459">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateStrategicFit &gt; should return fallback on error" time="0.000118125">
            <system-err>
Fit Check Error SyntaxError: Unexpected token &apos;B&apos;, &quot;Bad JSON&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Object.generateStrategicFit (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:985:25)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:704:28
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:20

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; simulateEconomics &gt; should combine financial simulation with AI commentary" time="0.000097667">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; simulateEconomics &gt; should return just simulation if AI fails" time="0.000062291">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiWorkloadIntelligence.test.js" timestamp="2025-12-21T15:18:08.928Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="4" time="0.193273708">
        <testcase classname="tests/unit/backend/aiWorkloadIntelligence.test.js" name="AI Workload Intelligence Service &gt; Logic: _getWorkloadStatus &gt; should classify utilization correctly" time="0.007777167">
        </testcase>
        <testcase classname="tests/unit/backend/aiWorkloadIntelligence.test.js" name="AI Workload Intelligence Service &gt; Logic: _calculateBurnoutRisk &gt; should calculate risk score based on factors" time="0.001467833">
        </testcase>
        <testcase classname="tests/unit/backend/aiWorkloadIntelligence.test.js" name="AI Workload Intelligence Service &gt; getPortfolioWorkload &gt; should calculate workload metrics from DB data [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiWorkloadIntelligence.test.js" name="AI Workload Intelligence Service &gt; detectOverAllocation &gt; should detect users with weeks exceeding capacity [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiWorkloadIntelligence.test.js" name="AI Workload Intelligence Service &gt; suggestRebalancing &gt; should return no suggestions if no over-allocation [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiWorkloadIntelligence.test.js" name="AI Workload Intelligence Service &gt; suggestRebalancing &gt; should suggest reassignment when capacity exists [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/analyticsService.test.js" timestamp="2025-12-21T15:18:08.928Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.217434583">
        <testcase classname="tests/unit/backend/analyticsService.test.js" name="AnalyticsService - Integration &gt; logUsage &gt; should log AI usage to the database without errors" time="0.0007715">
        </testcase>
        <testcase classname="tests/unit/backend/analyticsService.test.js" name="AnalyticsService - Integration &gt; getStats &gt; should retrieve aggregated stats from real database" time="0.000635084">
        </testcase>
        <testcase classname="tests/unit/backend/analyticsService.test.js" name="AnalyticsService - Integration &gt; getTopTopics &gt; should retrieve top topics from real database" time="0.000432791">
        </testcase>
        <testcase classname="tests/unit/backend/analyticsService.test.js" name="AnalyticsService - Integration &gt; saveMaturityScore &gt; should save maturity score without errors" time="0.000183334">
        </testcase>
        <testcase classname="tests/unit/backend/analyticsService.test.js" name="AnalyticsService - Integration &gt; getIndustryBenchmarks &gt; should retrieve industry benchmarks from real database" time="0.000347791">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/assessmentService.test.js" timestamp="2025-12-21T15:18:08.929Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="2" time="0.197833125">
        <testcase classname="tests/unit/backend/assessmentService.test.js" name="Assessment Service &gt; Logic: generateGapSummary &gt; should interpret gaps correctly" time="0.00602275">
        </testcase>
        <testcase classname="tests/unit/backend/assessmentService.test.js" name="Assessment Service &gt; getAssessment &gt; should retrieve and parse assessment [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/assessmentService.test.js" name="Assessment Service &gt; saveAssessment &gt; should calculate totals and save [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/attributionService.test.js" timestamp="2025-12-21T15:18:08.929Z" hostname="MacBook-Pro-Piotr.local" tests="18" failures="0" errors="0" skipped="15" time="0.086779917">
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; constants &gt; should export SOURCE_TYPES" time="0.000631583">
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; recordAttribution - skipped due to CJS/ESM mock interop &gt; should throw error for missing organizationId" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; recordAttribution - skipped due to CJS/ESM mock interop &gt; should throw error for missing sourceType" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; recordAttribution - skipped due to CJS/ESM mock interop &gt; should throw error for invalid sourceType" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; recordAttribution - skipped due to CJS/ESM mock interop &gt; should record DEMO attribution successfully" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; recordAttribution - skipped due to CJS/ESM mock interop &gt; should record PROMO_CODE attribution successfully" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; recordAttribution - skipped due to CJS/ESM mock interop &gt; should record INVITATION attribution with metadata" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; getOrganizationAttribution - skipped due to CJS/ESM mock interop &gt; should return all attribution events for org" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; getOrganizationAttribution - skipped due to CJS/ESM mock interop &gt; should return empty array for org with no attribution" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; getFirstAttribution - skipped due to CJS/ESM mock interop &gt; should return first attribution event" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; getFirstAttribution - skipped due to CJS/ESM mock interop &gt; should return null for org with no attribution" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; hasAttribution - skipped due to CJS/ESM mock interop &gt; should return true if org has attribution" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; hasAttribution - skipped due to CJS/ESM mock interop &gt; should return false if org has no attribution" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; exportAttribution - skipped due to CJS/ESM mock interop &gt; should export with filters" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; exportAttribution - skipped due to CJS/ESM mock interop &gt; should export all without filters" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; getPartnerSummary - skipped due to CJS/ESM mock interop &gt; should return partner summary for settlements" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; immutability principle &gt; should not expose update methods" time="0.0001615">
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; immutability principle &gt; should only have append-only recordAttribution" time="0.000090292">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/baselineService.test.js" timestamp="2025-12-21T15:18:08.930Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="3" time="0">
        <testcase classname="tests/unit/backend/baselineService.test.js" name="Baseline Service &gt; calculateVariance &gt; should calculate delay correctly when mocking dependencies [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/baselineService.test.js" name="Baseline Service &gt; calculateVariance &gt; should mark critical delays [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/baselineService.test.js" name="Baseline Service &gt; captureBaseline &gt; should create snapshot from roadmap initiatives [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/billingService.test.js" timestamp="2025-12-21T15:18:08.930Z" hostname="MacBook-Pro-Piotr.local" tests="19" failures="12" errors="0" skipped="0" time="0.213965167">
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getPlans() &gt; should return all active subscription plans" time="0.005292333">
            <failure message="expected [ { id: &apos;plan-trial&apos;, (10) }, (3) ] to have a length of 2 but got 4" type="AssertionError">
AssertionError: expected [ { id: &apos;plan-trial&apos;, (10) }, (3) ] to have a length of 2 but got 4

- Expected
+ Received

- 2
+ 4

  tests/unit/backend/billingService.test.js:77:27
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getPlans() &gt; should handle database errors" time="0.001403958">
            <failure message="promise resolved &quot;[ { id: &apos;plan-trial&apos;, (10) }, (3) ]&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;[ { id: &apos;plan-trial&apos;, (10) }, (3) ]&quot; instead of rejecting

- Expected: 
Error {
  &quot;message&quot;: &quot;rejected promise&quot;,
}

+ Received: 
[
  {
    &quot;created_at&quot;: &quot;2025-12-21 15:17:59&quot;,
    &quot;features&quot;: &quot;{\&quot;printing\&quot;:false,\&quot;analytics\&quot;:\&quot;basic\&quot;,\&quot;duration_days\&quot;:7}&quot;,
    &quot;id&quot;: &quot;plan-trial&quot;,
    &quot;is_active&quot;: 1,
    &quot;name&quot;: &quot;Trial (7 Days)&quot;,
    &quot;price_monthly&quot;: 0,
    &quot;storage_limit_gb&quot;: 1,
    &quot;storage_overage_rate&quot;: null,
    &quot;stripe_price_id&quot;: null,
    &quot;token_limit&quot;: 10000,
    &quot;token_overage_rate&quot;: null,
  },
  {
    &quot;created_at&quot;: &quot;2025-12-21 15:17:59&quot;,
    &quot;features&quot;: &quot;{\&quot;printing\&quot;:true,\&quot;analytics\&quot;:\&quot;standard\&quot;}&quot;,
    &quot;id&quot;: &quot;plan-pro&quot;,
    &quot;is_active&quot;: 1,
    &quot;name&quot;: &quot;Pro&quot;,
    &quot;price_monthly&quot;: 299,
    &quot;storage_limit_gb&quot;: 50,
    &quot;storage_overage_rate&quot;: null,
    &quot;stripe_price_id&quot;: null,
    &quot;token_limit&quot;: 500000,
    &quot;token_overage_rate&quot;: null,
  },
  {
    &quot;created_at&quot;: &quot;2025-12-21 15:17:59&quot;,
    &quot;features&quot;: &quot;{\&quot;printing\&quot;:true,\&quot;analytics\&quot;:\&quot;advanced\&quot;}&quot;,
    &quot;id&quot;: &quot;plan-elite&quot;,
    &quot;is_active&quot;: 1,
    &quot;name&quot;: &quot;Elite&quot;,
    &quot;price_monthly&quot;: 999,
    &quot;storage_limit_gb&quot;: 500,
    &quot;storage_overage_rate&quot;: null,
    &quot;stripe_price_id&quot;: null,
    &quot;token_limit&quot;: 2000000,
    &quot;token_overage_rate&quot;: null,
  },
  {
    &quot;created_at&quot;: &quot;2025-12-21 15:17:59&quot;,
    &quot;features&quot;: &quot;{\&quot;printing\&quot;:true,\&quot;analytics\&quot;:\&quot;full\&quot;,\&quot;support\&quot;:\&quot;dedicated\&quot;}&quot;,
    &quot;id&quot;: &quot;plan-enterprise&quot;,
    &quot;is_active&quot;: 1,
    &quot;name&quot;: &quot;Enterprise&quot;,
    &quot;price_monthly&quot;: 2999,
    &quot;storage_limit_gb&quot;: 5000,
    &quot;storage_overage_rate&quot;: null,
    &quot;stripe_price_id&quot;: null,
    &quot;token_limit&quot;: 10000000,
    &quot;token_overage_rate&quot;: null,
  },
]

  tests/unit/backend/billingService.test.js:91:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getPlanById() &gt; should return plan by ID" time="0.000474042">
            <failure message="Cannot read properties of undefined (reading &apos;id&apos;)" type="TypeError">
TypeError: Cannot read properties of undefined (reading &apos;id&apos;)
  tests/unit/backend/billingService.test.js:109:25
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getPlanById() &gt; should return null for non-existent plan" time="0.0028595">
            <failure message="expected undefined to be null" type="AssertionError">
AssertionError: expected undefined to be null

- Expected: 
null

+ Received: 
undefined

  tests/unit/backend/billingService.test.js:119:26
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; createPlan() &gt; should create a new subscription plan" time="0.002432958">
            <failure message="expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (2) ]

Number of calls: 0
" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (2) ]

Number of calls: 0

  tests/unit/backend/billingService.test.js:140:32
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getOrganizationBilling() &gt; should return billing info for organization" time="0.003449917">
            <failure message="Cannot read properties of undefined (reading &apos;organization_id&apos;)" type="TypeError">
TypeError: Cannot read properties of undefined (reading &apos;organization_id&apos;)
  tests/unit/backend/billingService.test.js:162:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getOrganizationBilling() &gt; should return null for organization without billing" time="0.006951">
            <failure message="expected undefined to be null" type="AssertionError">
AssertionError: expected undefined to be null

- Expected: 
null

+ Received: 
undefined

  tests/unit/backend/billingService.test.js:174:29
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; upsertOrganizationBilling() &gt; should create billing record for new organization" time="0.001726833">
            <failure message="expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (2) ]

Number of calls: 0
" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (2) ]

Number of calls: 0

  tests/unit/backend/billingService.test.js:193:32
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; upsertOrganizationBilling() &gt; should update existing billing record" time="0.0024925">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getOrCreateStripeCustomer() &gt; should return mock customer when Stripe not configured" time="0.000378">
            <system-err>
Stripe not configured, returning mock customer

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getOrCreateStripeCustomer() &gt; should return existing customer when found" time="0.000143125">
            <system-err>
Stripe not configured, returning mock customer

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; createSubscription() &gt; should create mock subscription when Stripe not configured" time="0.001262375">
            <failure message="Invalid plan" type="Error">
Error: Invalid plan
  Object.createSubscription server/services/billingService.js:240:22
  tests/unit/backend/billingService.test.js:273:34
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; createSubscription() &gt; should throw error for invalid plan" time="0.003196292">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; cancelSubscription() &gt; should cancel subscription" time="0.001077583">
            <failure message="No active subscription" type="Error">
Error: No active subscription
  Object.cancelSubscription server/services/billingService.js:283:15
  tests/unit/backend/billingService.test.js:312:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; cancelSubscription() &gt; should throw error when no active subscription" time="0.001675958">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getInvoices() &gt; should return invoices for organization" time="0.001361875">
            <failure message="expected [] to have a length of 2 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 2 but got +0

- Expected
+ Received

- 2
+ 0

  tests/unit/backend/billingService.test.js:343:30
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getInvoices() &gt; should only return invoices for specified organization" time="0.00047425">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; Multi-Tenant Isolation &gt; should only access billing for specified organization" time="0.000441334">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; Multi-Tenant Isolation &gt; should not leak invoices between organizations" time="0.000799833">
            <failure message="expected [] to have a length of 1 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

  tests/unit/backend/billingService.test.js:402:31
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/capacityService.test.js" timestamp="2025-12-21T15:18:08.931Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="3" errors="0" skipped="0" time="0.109584916">
        <testcase classname="tests/unit/backend/capacityService.test.js" name="CapacityService &gt; getUserCapacity &gt; should return default capacity if not found" time="0.000743167">
        </testcase>
        <testcase classname="tests/unit/backend/capacityService.test.js" name="CapacityService &gt; getUserCapacity &gt; should return stored capacity" time="0.002581167">
            <failure message="expected undefined to be 30 // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be 30 // Object.is equality

- Expected: 
30

+ Received: 
undefined

  tests/unit/backend/capacityService.test.js:61:46
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/capacityService.test.js" name="CapacityService &gt; calculateUserCapacity &gt; should calculate capacity based on tasks" time="0.0011805">
            <failure message="expected undefined to be defined" type="AssertionError">
AssertionError: expected undefined to be defined
  tests/unit/backend/capacityService.test.js:92:30
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/capacityService.test.js" name="CapacityService &gt; detectOverloads &gt; should identify users with overloaded weeks" time="0.000929958">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/capacityService.test.js:147:41
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/capacityService.test.js" name="CapacityService &gt; suggestResolutions &gt; should suggest REASSIGN for sustained overload" time="0.000104708">
        </testcase>
        <testcase classname="tests/unit/backend/capacityService.test.js" name="CapacityService &gt; suggestResolutions &gt; should suggest RESEQUENCE for peak overload" time="0.000051375">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/connectorHealthService.test.js" timestamp="2025-12-21T15:18:08.932Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.244450125">
        <testcase classname="tests/unit/backend/connectorHealthService.test.js" name="Connector Health Service &gt; should perform health check (DB interaction) [SKIPPED]" time="0.000481625">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/connectorService.test.js" timestamp="2025-12-21T15:18:08.932Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.13788025">
        <testcase classname="tests/unit/backend/connectorService.test.js" name="Connector Service &gt; should manage connectors (DB interaction) [SKIPPED]" time="0.000477792">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/contextService.test.js" timestamp="2025-12-21T15:18:08.932Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.159309875">
        <testcase classname="tests/unit/backend/contextService.test.js" name="Context Service &gt; should handle context operations (DB interaction) [SKIPPED]" time="0.000478125">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/criticalPathService.test.js" timestamp="2025-12-21T15:18:08.932Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.123746417">
        <testcase classname="tests/unit/backend/criticalPathService.test.js" name="CriticalPathService &gt; calculateCriticalPath &gt; should identify critical path correctly" time="0.001050792">
        </testcase>
        <testcase classname="tests/unit/backend/criticalPathService.test.js" name="CriticalPathService &gt; calculateCriticalPath &gt; should handle disjoint paths logic" time="0.00020775">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/dependencyService.test.js" timestamp="2025-12-21T15:18:08.932Z" hostname="MacBook-Pro-Piotr.local" tests="9" failures="0" errors="0" skipped="0" time="0.134015667">
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; addDependency &gt; should add dependency" time="0.001486125">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; addDependency &gt; should prevent self-dependency" time="0.000574833">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; removeDependency &gt; should remove dependency" time="0.000109666">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; getDependencies &gt; should return dependencies" time="0.000257083">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; buildDependencyGraph &gt; should build graph structure" time="0.000339458">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; detectDeadlocks &gt; should detect cycles" time="0.000138084">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; detectDeadlocks &gt; should return false for acyclic graph" time="0.000070916">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; canStart &gt; should be true if no blockers" time="0.000081541">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; canStart &gt; should be false if blockers exist" time="0.000107958">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/economicsService.test.js" timestamp="2025-12-21T15:18:08.933Z" hostname="MacBook-Pro-Piotr.local" tests="18" failures="8" errors="0" skipped="0" time="0.2074105">
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; createValueHypothesis() &gt; should create a value hypothesis" time="0.005129709">
            <failure message="expected &apos;24f05663-ae08-4e39-960e-119b1eb25787&apos; to be &apos;hypothesis-1&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;24f05663-ae08-4e39-960e-119b1eb25787&apos; to be &apos;hypothesis-1&apos; // Object.is equality

Expected: &quot;hypothesis-1&quot;
Received: &quot;24f05663-ae08-4e39-960e-119b1eb25787&quot;

  tests/unit/backend/economicsService.test.js:65:31
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; createValueHypothesis() &gt; should default confidenceLevel to MEDIUM" time="0.000584666">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; createValueHypothesis() &gt; should handle empty relatedInitiativeIds" time="0.000319042">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; createValueHypothesis() &gt; should handle database errors" time="0.001895083">
            <failure message="promise resolved &quot;{ (4) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ (4) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;description&quot;: &quot;Test&quot;,
+   &quot;id&quot;: &quot;d259b28c-bca5-4f35-a237-920e328abc25&quot;,
+   &quot;initiativeId&quot;: &quot;init-123&quot;,
+   &quot;type&quot;: &quot;EFFICIENCY&quot;,
  }

  tests/unit/backend/economicsService.test.js:120:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; getValueHypotheses() &gt; should retrieve value hypotheses for a project" time="0.000921708">
            <failure message="expected [ { (17) }, { (17) }, (2) ] to have a length of 1 but got 4" type="AssertionError">
AssertionError: expected [ { (17) }, { (17) }, (2) ] to have a length of 1 but got 4

- Expected
+ Received

- 1
+ 4

  tests/unit/backend/economicsService.test.js:148:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; getValueHypotheses() &gt; should filter by initiativeId when provided" time="0.000353625">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; getValueHypotheses() &gt; should handle invalid JSON in relatedInitiativeIds" time="0.000726833">
            <failure message="expected [ &apos;init-456&apos; ] to deeply equal []" type="AssertionError">
AssertionError: expected [ &apos;init-456&apos; ] to deeply equal []

- Expected
+ Received

- []
+ [
+   &quot;init-456&quot;,
+ ]

  tests/unit/backend/economicsService.test.js:180:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; validateHypothesis() &gt; should validate a value hypothesis" time="0.000370083">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/economicsService.test.js:199:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; validateHypothesis() &gt; should return false when hypothesis not found" time="0.00030875">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; addFinancialAssumption() &gt; should add financial assumption to hypothesis" time="0.004250542">
            <failure message="expected &apos;a1c79b37-dae9-46f9-b268-1ea8fe36bbc6&apos; to be &apos;hypothesis-1&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;a1c79b37-dae9-46f9-b268-1ea8fe36bbc6&apos; to be &apos;hypothesis-1&apos; // Object.is equality

Expected: &quot;hypothesis-1&quot;
Received: &quot;a1c79b37-dae9-46f9-b268-1ea8fe36bbc6&quot;

  tests/unit/backend/economicsService.test.js:241:31
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; addFinancialAssumption() &gt; should default currency to USD" time="0.003312791">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; addFinancialAssumption() &gt; should default timeframe to &quot;per year&quot;" time="0.005578417">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; detectMissingValueHypotheses() &gt; should detect initiatives without value hypotheses" time="0.003850625">
            <failure message="expected +0 to be 2 // Object.is equality" type="AssertionError">
AssertionError: expected +0 to be 2 // Object.is equality

- Expected
+ Received

- 2
+ 0

  tests/unit/backend/economicsService.test.js:297:34
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; detectMissingValueHypotheses() &gt; should return empty array when all initiatives have hypotheses" time="0.002296625">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; getValueSummary() &gt; should generate value summary for project" time="0.002146417">
            <failure message="expected [ { type: &apos;EFFICIENCY&apos;, (2) } ] to deeply equal [ { type: &apos;EFFICIENCY&apos;, (2) } ]" type="AssertionError">
AssertionError: expected [ { type: &apos;EFFICIENCY&apos;, (2) } ] to deeply equal [ { type: &apos;EFFICIENCY&apos;, (2) } ]

- Expected
+ Received

  [
    {
-     &quot;count&quot;: 2,
+     &quot;count&quot;: 4,
      &quot;type&quot;: &quot;EFFICIENCY&quot;,
-     &quot;validated&quot;: 1,
+     &quot;validated&quot;: 0,
    },
  ]

  tests/unit/backend/economicsService.test.js:345:45
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; getValueSummary() &gt; should handle missing financial data" time="0.002805667">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should export VALUE_TYPES enum" time="0.000321875">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; Multi-Tenant Isolation &gt; should filter hypotheses by project_id" time="0.000409792">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/edgeCases.test.js" timestamp="2025-12-21T15:18:08.934Z" hostname="MacBook-Pro-Piotr.local" tests="15" failures="4" errors="0" skipped="0" time="0.206360041">
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Null and Undefined Handling &gt; should handle null organizationId gracefully" time="0.001711125">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Null and Undefined Handling &gt; should handle undefined projectId in storage" time="0.000213542">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Empty Data Handling &gt; should handle empty arrays in queries" time="0.000712875">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Empty Data Handling &gt; should handle empty search results" time="0.001736625">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Boundary Conditions &gt; should handle maximum token limit" time="0.00315025">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Boundary Conditions &gt; should handle zero token limit (unlimited)" time="0.0002445">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Invalid Input Handling &gt; should reject invalid email format in invitations" time="0.003617208">
            <failure message="InvitationService.setDependencies is not a function" type="TypeError">
TypeError: InvitationService.setDependencies is not a function
  tests/unit/backend/edgeCases.test.js:132:31
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Invalid Input Handling &gt; should reject invalid evidence type" time="0.000828083">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Invalid Input Handling &gt; should reject invalid entity type in evidence linking" time="0.000180041">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Database Error Handling &gt; should handle database connection errors gracefully" time="0.003266792">
            <failure message="promise resolved &quot;{ (7) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ (7) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;createdBy&quot;: &quot;user-admin-123&quot;,
+   &quot;description&quot;: &quot;Test&quot;,
+   &quot;id&quot;: &quot;b768306a-013c-490b-b189-1d87a0ce241c&quot;,
+   &quot;projectId&quot;: &quot;project-123&quot;,
+   &quot;status&quot;: &quot;DRAFT&quot;,
+   &quot;title&quot;: &quot;Test&quot;,
+   &quot;type&quot;: &quot;TECHNICAL&quot;,
  }

  tests/unit/backend/edgeCases.test.js:195:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Database Error Handling &gt; should handle constraint violations" time="0.006161208">
            <failure message="expected [Function] to throw error including &apos;UNIQUE constraint failed&apos; but got &apos;SQLITE_CONSTRAINT: NOT NULL constrain&apos;" type="AssertionError">
AssertionError: expected [Function] to throw error including &apos;UNIQUE constraint failed&apos; but got &apos;SQLITE_CONSTRAINT: NOT NULL constrain&apos;

Expected: &quot;UNIQUE constraint failed&quot;
Received: &quot;SQLITE_CONSTRAINT: NOT NULL constraint failed: organization_members.user_id&quot;

  tests/unit/backend/edgeCases.test.js:206:13
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Concurrent Modification Handling &gt; should handle optimistic locking failures" time="0.000272583">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Large Data Handling &gt; should handle large result sets efficiently" time="0.000610667">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Large Data Handling &gt; should handle large payloads in storage" time="0.000111542">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Timeout Handling &gt; should handle slow database queries" time="0.000451084">
            <failure message="expected 0 to be greater than or equal to 100" type="AssertionError">
AssertionError: expected 0 to be greater than or equal to 100
  tests/unit/backend/edgeCases.test.js:297:30
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/emailService.test.js" timestamp="2025-12-21T15:18:08.935Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.214080208">
        <testcase classname="tests/unit/backend/emailService.test.js" name="Backend Service Test: EmailService &gt; sendEmail &gt; sends email with default config" time="0.002418458">
        </testcase>
        <testcase classname="tests/unit/backend/emailService.test.js" name="Backend Service Test: EmailService &gt; sendEmail &gt; uses SMTP settings from database" time="0.055552875">
        </testcase>
        <testcase classname="tests/unit/backend/emailService.test.js" name="Backend Service Test: EmailService &gt; sendEmail &gt; handles database errors gracefully" time="0.002138458">
        </testcase>
        <testcase classname="tests/unit/backend/emailService.test.js" name="Backend Service Test: EmailService &gt; sendEmail &gt; logs email details" time="0.000929458">
        </testcase>
        <testcase classname="tests/unit/backend/emailService.test.js" name="Backend Service Test: EmailService &gt; sendEmail &gt; uses environment variables when database settings are missing" time="0.001122083">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/escalationService.test.js" timestamp="2025-12-21T15:18:08.935Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="9" errors="0" skipped="0" time="0.177748916">
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; createEscalation() &gt; should create an escalation and send notification" time="0.006979708">
            <failure message="expected &apos;ebff1209-4cb3-4c86-bf4f-530c18674f83&apos; to be &apos;escalation-1&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;ebff1209-4cb3-4c86-bf4f-530c18674f83&apos; to be &apos;escalation-1&apos; // Object.is equality

Expected: &quot;escalation-1&quot;
Received: &quot;ebff1209-4cb3-4c86-bf4f-530c18674f83&quot;

  tests/unit/backend/escalationService.test.js:80:31
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; createEscalation() &gt; should default daysOverdue to 0" time="0.001001083">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; createEscalation() &gt; should handle database errors" time="0.002641667">
            <failure message="promise resolved &quot;{ (4) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ (4) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;id&quot;: &quot;73b98742-f71e-4a56-ba5b-0370f3bedf36&quot;,
+   &quot;projectId&quot;: &quot;proj-test-123&quot;,
+   &quot;reason&quot;: &quot;Test&quot;,
+   &quot;toUserId&quot;: &quot;user-admin-123&quot;,
  }

  tests/unit/backend/escalationService.test.js:136:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; getEscalations() &gt; should retrieve escalations for a project" time="0.001583916">
            <failure message="expected [ { (18) }, { (18) }, { (18) } ] to deeply equal [ { id: &apos;esc-1&apos;, (6) } ]" type="AssertionError">
AssertionError: expected [ { (18) }, { (18) }, { (18) } ] to deeply equal [ { id: &apos;esc-1&apos;, (6) } ]

- Expected
+ Received

  [
    {
-     &quot;from_first&quot;: &quot;John&quot;,
-     &quot;from_last&quot;: &quot;Doe&quot;,
-     &quot;id&quot;: &quot;esc-1&quot;,
+     &quot;acknowledged_at&quot;: null,
+     &quot;created_at&quot;: &quot;2025-12-21 15:17:59&quot;,
+     &quot;days_overdue&quot;: 14,
+     &quot;from_first&quot;: null,
+     &quot;from_last&quot;: null,
+     &quot;from_user_id&quot;: &quot;user-123&quot;,
+     &quot;id&quot;: &quot;ebff1209-4cb3-4c86-bf4f-530c18674f83&quot;,
+     &quot;project_id&quot;: &quot;proj-test-123&quot;,
+     &quot;reason&quot;: &quot;Decision pending for 14+ days&quot;,
+     &quot;resolved_at&quot;: null,
+     &quot;source_id&quot;: &quot;decision-123&quot;,
+     &quot;source_type&quot;: &quot;DECISION&quot;,
+     &quot;status&quot;: &quot;PENDING&quot;,
+     &quot;to_first&quot;: null,
+     &quot;to_last&quot;: null,
+     &quot;to_role&quot;: &quot;ADMIN&quot;,
+     &quot;to_user_id&quot;: &quot;user-admin-123&quot;,
+     &quot;trigger_type&quot;: &quot;OVERDUE&quot;,
+   },
+   {
+     &quot;acknowledged_at&quot;: null,
+     &quot;created_at&quot;: &quot;2025-12-21 15:17:59&quot;,
+     &quot;days_overdue&quot;: 0,
+     &quot;from_first&quot;: null,
+     &quot;from_last&quot;: null,
+     &quot;from_user_id&quot;: &quot;user-123&quot;,
+     &quot;id&quot;: &quot;356b02b5-9e65-4e44-a2a4-0cff97cc1ced&quot;,
+     &quot;project_id&quot;: &quot;proj-test-123&quot;,
+     &quot;reason&quot;: &quot;Task overdue&quot;,
+     &quot;resolved_at&quot;: null,
+     &quot;source_id&quot;: &quot;task-123&quot;,
+     &quot;source_type&quot;: &quot;TASK&quot;,
+     &quot;status&quot;: &quot;PENDING&quot;,
+     &quot;to_first&quot;: null,
+     &quot;to_last&quot;: null,
+     &quot;to_role&quot;: &quot;ADMIN&quot;,
+     &quot;to_user_id&quot;: &quot;user-admin-123&quot;,
+     &quot;trigger_type&quot;: &quot;OVERDUE&quot;,
+   },
+   {
+     &quot;acknowledged_at&quot;: null,
+     &quot;created_at&quot;: &quot;2025-12-21 15:17:59&quot;,
+     &quot;days_overdue&quot;: 0,
+     &quot;from_first&quot;: null,
+     &quot;from_last&quot;: null,
+     &quot;from_user_id&quot;: &quot;user-123&quot;,
+     &quot;id&quot;: &quot;73b98742-f71e-4a56-ba5b-0370f3bedf36&quot;,
      &quot;project_id&quot;: &quot;proj-test-123&quot;,
+     &quot;reason&quot;: &quot;Test&quot;,
+     &quot;resolved_at&quot;: null,
+     &quot;source_id&quot;: &quot;decision-123&quot;,
      &quot;source_type&quot;: &quot;DECISION&quot;,
-     &quot;to_first&quot;: &quot;Jane&quot;,
-     &quot;to_last&quot;: &quot;Smith&quot;,
+     &quot;status&quot;: &quot;PENDING&quot;,
+     &quot;to_first&quot;: null,
+     &quot;to_last&quot;: null,
+     &quot;to_role&quot;: &quot;ADMIN&quot;,
+     &quot;to_user_id&quot;: &quot;user-admin-123&quot;,
+     &quot;trigger_type&quot;: &quot;OVERDUE&quot;,
    },
  ]

  tests/unit/backend/escalationService.test.js:165:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; getEscalations() &gt; should filter by status when provided" time="0.000353375">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; getEscalations() &gt; should include user names from joins" time="0.000436666">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; acknowledgeEscalation() &gt; should acknowledge an escalation" time="0.000605375">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/escalationService.test.js:212:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; acknowledgeEscalation() &gt; should return false when escalation not found or user mismatch" time="0.000290292">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; resolveEscalation() &gt; should resolve an escalation" time="0.000472083">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/escalationService.test.js:242:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; resolveEscalation() &gt; should return false when escalation not found" time="0.00051825">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; runAutoEscalation() &gt; should escalate overdue decisions to sponsor" time="0.000625042">
            <failure message="expected undefined to be &apos;proj-test-123&apos; // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be &apos;proj-test-123&apos; // Object.is equality

- Expected: 
&quot;proj-test-123&quot;

+ Received: 
undefined

  tests/unit/backend/escalationService.test.js:297:38
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; runAutoEscalation() &gt; should not escalate if project not found" time="0.000397917">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; runAutoEscalation() &gt; should not create duplicate escalations" time="0.000598292">
            <failure message="expected undefined to be +0 // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be +0 // Object.is equality

- Expected: 
0

+ Received: 
undefined

  tests/unit/backend/escalationService.test.js:346:47
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; runAutoEscalation() &gt; should escalate stalled initiatives to PM" time="0.000780709">
            <failure message="actual value must be number or bigint, received &quot;undefined&quot;" type="TypeError">
TypeError: actual value must be number or bigint, received &quot;undefined&quot;
  tests/unit/backend/escalationService.test.js:399:47
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; Multi-Tenant Isolation &gt; should filter escalations by project_id" time="0.000468709">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; Multi-Tenant Isolation &gt; should get organization_id from project for notifications" time="0.002028125">
            <failure message="expected &quot;vi.fn()&quot; to be called with arguments: [ ObjectContaining{} ]

Number of calls: 0
" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called with arguments: [ ObjectContaining{} ]

Number of calls: 0

  tests/unit/backend/escalationService.test.js:439:52
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/evidenceLedgerService.test.js" timestamp="2025-12-21T15:18:08.936Z" hostname="MacBook-Pro-Piotr.local" tests="30" failures="4" errors="0" skipped="0" time="0.175687833">
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; redactPayload() &gt; should redact PII fields from payload" time="0.001765625">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; redactPayload() &gt; should redact nested PII fields" time="0.000226583">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; redactPayload() &gt; should redact PII in arrays" time="0.000130208">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; redactPayload() &gt; should support additional fields to redact" time="0.000104291">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; redactPayload() &gt; should handle null/undefined payloads" time="0.00009575">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; createEvidenceObject() &gt; should create an evidence object with redacted payload" time="0.000316625">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; createEvidenceObject() &gt; should reject invalid evidence type" time="0.000564959">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; createEvidenceObject() &gt; should reject missing required fields" time="0.0001165">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; linkEvidence() &gt; should link evidence to an entity" time="0.000225666">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; linkEvidence() &gt; should normalize weight to 0-1 range" time="0.00010875">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; linkEvidence() &gt; should reject invalid entity type" time="0.000104542">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; linkEvidence() &gt; should reject missing required fields" time="0.000081958">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; recordReasoning() &gt; should record reasoning entry" time="0.000380792">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; recordReasoning() &gt; should normalize confidence to 0-1 range" time="0.000067333">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; recordReasoning() &gt; should reject missing required fields" time="0.000088417">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; getExplanation() &gt; should get full explanation for an entity" time="0.004502208">
            <failure message="expected [] to have a length of 1 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

  tests/unit/backend/evidenceLedgerService.test.js:301:38
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; getExplanation() &gt; should handle empty explanation" time="0.001092083">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; getExplanation() &gt; should reject missing required fields" time="0.000197875">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; hasEvidence() &gt; should check if entity has evidence" time="0.000828417">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/evidenceLedgerService.test.js:346:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; hasEvidence() &gt; should return false when no evidence exists" time="0.00032375">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; createAndLinkEvidence() &gt; should create evidence and link it in one operation" time="0.000361333">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; getEvidencesByOrg() &gt; should get evidences for organization" time="0.000651">
            <failure message="expected [] to have a length of 1 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

  tests/unit/backend/evidenceLedgerService.test.js:410:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; getEvidencesByOrg() &gt; should filter by type when provided" time="0.000476833">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; getEvidencesByOrg() &gt; should respect limit when provided" time="0.000300375">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; exportExplanation() &gt; should export explanation as JSON pack" time="0.000674292">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; exportExplanation() &gt; should export explanation as PDF pack" time="0.001241292">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/evidenceLedgerService.test.js:487:68
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; Multi-Tenant Isolation &gt; should scope evidences by organization_id" time="0.000434375">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; Multi-Tenant Isolation &gt; should scope explanation queries by org_id" time="0.0004395">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; Enums &gt; should export EVIDENCE_TYPES" time="0.000226416">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; Enums &gt; should export ENTITY_TYPES" time="0.00014075">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/executionMonitorService.test.js" timestamp="2025-12-21T15:18:08.938Z" hostname="MacBook-Pro-Piotr.local" tests="18" failures="13" errors="0" skipped="0" time="0.24281225">
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; runDailyMonitor() &gt; should detect stalled tasks" time="0.007442833">
            <failure message="expected [] to have a length of 1 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

  tests/unit/backend/executionMonitorService.test.js:62:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; runDailyMonitor() &gt; should detect overdue tasks and generate notifications" time="0.001430208">
            <failure message="expected [] to have a length of 1 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

  tests/unit/backend/executionMonitorService.test.js:89:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; runDailyMonitor() &gt; should detect overdue decisions" time="0.008561459">
            <failure message="expected [] to have a length of 1 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

  tests/unit/backend/executionMonitorService.test.js:118:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; runDailyMonitor() &gt; should detect stalled initiatives" time="0.0095325">
            <failure message="expected [] to have a length of 1 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

  tests/unit/backend/executionMonitorService.test.js:145:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; runDailyMonitor() &gt; should detect silent blockers" time="0.007343042">
            <failure message="expected [] to have a length of 1 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

  tests/unit/backend/executionMonitorService.test.js:169:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; runDailyMonitor() &gt; should return healthy status when no issues detected" time="0.010772375">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; runDailyMonitor() &gt; should include monitoredAt timestamp" time="0.003349958">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; _detectStalledTasks() &gt; should detect tasks not updated in 7+ days" time="0.002538209">
            <failure message="expected [] to deeply equal [ { id: &apos;task-1&apos;, (2) } ]" type="AssertionError">
AssertionError: expected [] to deeply equal [ { id: &apos;task-1&apos;, (2) } ]

- Expected
+ Received

- [
-   {
-     &quot;id&quot;: &quot;task-1&quot;,
-     &quot;status&quot;: &quot;in_progress&quot;,
-     &quot;title&quot;: &quot;Stalled Task&quot;,
-   },
- ]
+ []

  tests/unit/backend/executionMonitorService.test.js:222:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; _detectOverdueTasks() &gt; should detect tasks with due_date in the past" time="0.001097792">
            <failure message="expected [] to deeply equal [ { id: &apos;task-1&apos;, (2) } ]" type="AssertionError">
AssertionError: expected [] to deeply equal [ { id: &apos;task-1&apos;, (2) } ]

- Expected
+ Received

- [
-   {
-     &quot;due_date&quot;: &quot;2024-01-01&quot;,
-     &quot;id&quot;: &quot;task-1&quot;,
-     &quot;title&quot;: &quot;Overdue Task&quot;,
-   },
- ]
+ []

  tests/unit/backend/executionMonitorService.test.js:245:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; _detectOverdueDecisions() &gt; should detect decisions pending for 7+ days" time="0.001012042">
            <failure message="expected [] to deeply equal [ { id: &apos;decision-1&apos;, (2) } ]" type="AssertionError">
AssertionError: expected [] to deeply equal [ { id: &apos;decision-1&apos;, (2) } ]

- Expected
+ Received

- [
-   {
-     &quot;id&quot;: &quot;decision-1&quot;,
-     &quot;status&quot;: &quot;PENDING&quot;,
-     &quot;title&quot;: &quot;Overdue Decision&quot;,
-   },
- ]
+ []

  tests/unit/backend/executionMonitorService.test.js:268:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; _detectStalledInitiatives() &gt; should detect initiatives not updated in 7+ days" time="0.002595791">
            <failure message="expected [] to deeply equal [ { id: &apos;init-1&apos;, (2) } ]" type="AssertionError">
AssertionError: expected [] to deeply equal [ { id: &apos;init-1&apos;, (2) } ]

- Expected
+ Received

- [
-   {
-     &quot;id&quot;: &quot;init-1&quot;,
-     &quot;name&quot;: &quot;Stalled Initiative&quot;,
-     &quot;status&quot;: &quot;IN_EXECUTION&quot;,
-   },
- ]
+ []

  tests/unit/backend/executionMonitorService.test.js:291:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; _detectSilentBlockers() &gt; should detect blocked items without reason" time="0.00127225">
            <failure message="expected [] to deeply equal [ { id: &apos;task-1&apos;, (2) } ]" type="AssertionError">
AssertionError: expected [] to deeply equal [ { id: &apos;task-1&apos;, (2) } ]

- Expected
+ Received

- [
-   {
-     &quot;id&quot;: &quot;task-1&quot;,
-     &quot;title&quot;: &quot;Blocked Task&quot;,
-     &quot;type&quot;: &quot;TASK&quot;,
-   },
- ]
+ []

  tests/unit/backend/executionMonitorService.test.js:315:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; generateExecutionSummary() &gt; should generate summary when no issues" time="0.0015255">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; generateExecutionSummary() &gt; should generate summary with issues" time="0.002448667">
            <failure message="expected &apos; Execution is healthy. No issues det&apos; to contain &apos;&apos;" type="AssertionError">
AssertionError: expected &apos; Execution is healthy. No issues det&apos; to contain &apos;&apos;

Expected: &quot;&quot;
Received: &quot; Execution is healthy. No issues detected.&quot;

  tests/unit/backend/executionMonitorService.test.js:350:40
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; generateExecutionSummary() &gt; should include all issue types in summary" time="0.004503125">
            <failure message="expected &apos; Execution is healthy. No issues det&apos; to contain &apos;OVERDUE_TASKS&apos;" type="AssertionError">
AssertionError: expected &apos; Execution is healthy. No issues det&apos; to contain &apos;OVERDUE_TASKS&apos;

Expected: &quot;OVERDUE_TASKS&quot;
Received: &quot; Execution is healthy. No issues detected.&quot;

  tests/unit/backend/executionMonitorService.test.js:374:40
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; generateExecutionSummary() &gt; should include generatedAt timestamp" time="0.001085">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; Multi-Tenant Isolation &gt; should filter all queries by project_id" time="0.001552458">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; Multi-Tenant Isolation &gt; should scope notifications to correct users" time="0.001371791">
            <failure message="Cannot read properties of undefined (reading &apos;userId&apos;)" type="TypeError">
TypeError: Cannot read properties of undefined (reading &apos;userId&apos;)
  tests/unit/backend/executionMonitorService.test.js:427:44
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/feedbackService.test.js" timestamp="2025-12-21T15:18:08.939Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.671427916">
        <testcase classname="tests/unit/backend/feedbackService.test.js" name="Backend Service Test: FeedbackService &gt; saveFeedback &gt; saves feedback with all parameters" time="0.102261125">
        </testcase>
        <testcase classname="tests/unit/backend/feedbackService.test.js" name="Backend Service Test: FeedbackService &gt; saveFeedback &gt; saves feedback without correction" time="0.100949375">
        </testcase>
        <testcase classname="tests/unit/backend/feedbackService.test.js" name="Backend Service Test: FeedbackService &gt; getLearningExamples &gt; retrieves learning examples for context" time="0.11635125">
        </testcase>
        <testcase classname="tests/unit/backend/feedbackService.test.js" name="Backend Service Test: FeedbackService &gt; getLearningExamples &gt; handles empty results" time="0.000616333">
        </testcase>
        <testcase classname="tests/unit/backend/feedbackService.test.js" name="Backend Service Test: FeedbackService &gt; getLearningExamples &gt; handles database errors gracefully" time="0.000743167">
        </testcase>
        <testcase classname="tests/unit/backend/feedbackService.test.js" name="Backend Service Test: FeedbackService &gt; getLearningExamples &gt; only returns examples with rating &gt;= 4" time="0.102243708">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/financialService.test.js" timestamp="2025-12-21T15:18:08.940Z" hostname="MacBook-Pro-Piotr.local" tests="9" failures="0" errors="0" skipped="0" time="0.187382167">
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateCost &gt; should estimate cost for High complexity" time="0.000558417">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateCost &gt; should estimate cost for Medium complexity" time="0.000099166">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateCost &gt; should fallback to Low complexity" time="0.000224542">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateBenefit &gt; should estimate benefit for High priority" time="0.000089417">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateBenefit &gt; should estimate benefit for Medium priority" time="0.000063833">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateBenefit &gt; should fallback to Low priority" time="0.000043667">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateBenefit &gt; should return correct benefit range" time="0.000092959">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; simulatePortfolio &gt; should calculate aggregated metrics" time="0.000154542">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; simulatePortfolio &gt; should handle empty portfolio" time="0.000059541">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/governanceService.test.js" timestamp="2025-12-21T15:18:08.940Z" hostname="MacBook-Pro-Piotr.local" tests="14" failures="3" errors="0" skipped="0" time="0.211957375">
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; createChangeRequest() &gt; should create a new Change Request with DRAFT status" time="0.009674792">
            <failure message="expected &apos;c9b92a93-f41a-433f-9924-4be6e6709d15&apos; to be &apos;cr-1&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;c9b92a93-f41a-433f-9924-4be6e6709d15&apos; to be &apos;cr-1&apos; // Object.is equality

Expected: &quot;cr-1&quot;
Received: &quot;c9b92a93-f41a-433f-9924-4be6e6709d15&quot;

  tests/unit/backend/governanceService.test.js:64:31
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; createChangeRequest() &gt; should default riskAssessment to LOW if not provided" time="0.00164125">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; createChangeRequest() &gt; should handle JSON stringification of impactAnalysis" time="0.000675833">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; createChangeRequest() &gt; should reject on database error" time="0.002750542">
            <failure message="promise resolved &quot;{ (7) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ (7) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;createdBy&quot;: &quot;user-admin-123&quot;,
+   &quot;description&quot;: &quot;Test&quot;,
+   &quot;id&quot;: &quot;a634cc3c-d1e0-4451-8aeb-57bbe12cf81c&quot;,
+   &quot;projectId&quot;: &quot;proj-test-123&quot;,
+   &quot;status&quot;: &quot;DRAFT&quot;,
+   &quot;title&quot;: &quot;Test CR&quot;,
+   &quot;type&quot;: &quot;TECHNICAL&quot;,
  }

  tests/unit/backend/governanceService.test.js:124:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; decideChangeRequest() &gt; should approve a Change Request" time="0.000880667">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; decideChangeRequest() &gt; should reject a Change Request" time="0.000256958">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; decideChangeRequest() &gt; should set approved_by to null when rejecting" time="0.00233775">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; decideChangeRequest() &gt; should set approved_by when approving" time="0.000417875">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; decideChangeRequest() &gt; should handle database errors" time="0.001477833">
            <failure message="promise resolved &quot;{ id: &apos;cr-123&apos;, (2) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ id: &apos;cr-123&apos;, (2) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;id&quot;: &quot;cr-123&quot;,
+   &quot;status&quot;: &quot;APPROVED&quot;,
+   &quot;userId&quot;: &quot;user-admin-123&quot;,
  }

  tests/unit/backend/governanceService.test.js:207:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; decideChangeRequest() &gt; should set approved_at timestamp" time="0.000523792">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; Multi-Tenant Isolation &gt; should associate CR with specific project" time="0.0010905">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; Multi-Tenant Isolation &gt; should track creator for audit purposes" time="0.000279583">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; Edge Cases &gt; should handle empty impactAnalysis" time="0.000283291">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; Edge Cases &gt; should handle optional reason in decideChangeRequest" time="0.000682834">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/helpService.test.js" timestamp="2025-12-21T15:18:08.941Z" hostname="MacBook-Pro-Piotr.local" tests="13" failures="0" errors="0" skipped="0" time="0.169620208">
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; EVENT_TYPES &gt; should define all required event types" time="0.008170292">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; EVENT_TYPES &gt; should have exactly 4 event types" time="0.000455834">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; TARGET_ROLES &gt; should define all valid target roles" time="0.000312917">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; TARGET_ROLES &gt; should have exactly 5 roles" time="0.000081958">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; TARGET_ORG_TYPES &gt; should define all valid org types" time="0.000142167">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; TARGET_ORG_TYPES &gt; should have exactly 4 org types" time="0.000069125">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject invalid event types in markEvent" time="0.000559833">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject createPlaybook without key" time="0.000124208">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject createPlaybook without title" time="0.000088333">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject createPlaybook with invalid target role" time="0.000090833">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject createPlaybook with invalid org type" time="0.000076708">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject createStep without required fields" time="0.000088791">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject createStep with invalid action type" time="0.000071541">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/ingestionService.test.js" timestamp="2025-12-21T15:18:08.941Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.105004125">
        <testcase classname="tests/unit/backend/ingestionService.test.js" name="Ingestion Service &gt; should handle ingestion (DB interaction) [SKIPPED]" time="0.000460334">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/initiativeService.multiTenant.test.js" timestamp="2025-12-21T15:18:08.941Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.113834625">
        <testcase classname="tests/unit/backend/initiativeService.multiTenant.test.js" name="InitiativeService - Multi-Tenant Isolation &gt; recalculateProgress with organizationId &gt; should filter tasks by organization_id AND initiative_id" time="0.000807625">
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.multiTenant.test.js" name="InitiativeService - Multi-Tenant Isolation &gt; recalculateProgress with organizationId &gt; should update initiative with org-scoped WHERE clause" time="0.000403542">
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.multiTenant.test.js" name="InitiativeService - Multi-Tenant Isolation &gt; recalculateProgress with organizationId &gt; should NOT mix tasks from different orgs" time="0.000127333">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/initiativeService.test.js" timestamp="2025-12-21T15:18:08.941Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.129650583">
        <testcase classname="tests/unit/backend/initiativeService.test.js" name="InitiativeService &gt; recalculateProgress &gt; should return 0 when no initiativeId provided" time="0.001696833">
            <system-err>
[InitiativeService] DEPRECATION WARNING: recalculateProgress called without organizationId

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.test.js" name="InitiativeService &gt; recalculateProgress &gt; should handle database error during fetch" time="0.0029885">
            <system-err>
[InitiativeService] DEPRECATION WARNING: recalculateProgress called without organizationId
Error fetching tasks for recalculation: Error: DB Fetch Error
    at Object.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/initiativeService.test.js:40:50)
    at Object.Mock [as all] (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/spy/dist/index.js:285:34)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/initiativeService.js:49:21
    at new Promise (&lt;anonymous&gt;)
    at Object.recalculateProgress (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/initiativeService.js:22:16)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/initiativeService.test.js:43:44
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.test.js" name="InitiativeService &gt; recalculateProgress &gt; should set progress to 0 if no tasks found" time="0.001085791">
            <system-err>
[InitiativeService] DEPRECATION WARNING: recalculateProgress called without organizationId

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.test.js" name="InitiativeService &gt; recalculateProgress &gt; should calculate weighted progress correctly" time="0.000272333">
            <system-err>
[InitiativeService] DEPRECATION WARNING: recalculateProgress called without organizationId

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.test.js" name="InitiativeService &gt; recalculateProgress &gt; should handle tasks with missing progress/priority" time="0.000109625">
            <system-err>
[InitiativeService] DEPRECATION WARNING: recalculateProgress called without organizationId

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.test.js" name="InitiativeService &gt; recalculateProgress &gt; should handle database error during update" time="0.000397375">
            <system-err>
[InitiativeService] DEPRECATION WARNING: recalculateProgress called without organizationId
Error updating initiative progress: Error: Update failed
    at Object.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/initiativeService.test.js:119:50)
    at Object.Mock [as run] (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/spy/dist/index.js:285:34)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/initiativeService.js:100:25
    at Object.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/initiativeService.test.js:113:21)
    at Object.Mock [as all] (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/spy/dist/index.js:285:34)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/initiativeService.js:49:21
    at new Promise (&lt;anonymous&gt;)
    at Object.recalculateProgress (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/initiativeService.js:22:16)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/initiativeService.test.js:122:44
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/invitationService.test.js" timestamp="2025-12-21T15:18:08.942Z" hostname="MacBook-Pro-Piotr.local" tests="23" failures="15" errors="0" skipped="0" time="0.164360459">
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; generateSecureToken() &gt; should generate 64-character hex token" time="0.002445541">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; generateSecureToken() &gt; should generate unique tokens" time="0.000415208">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; hashToken() &gt; should hash token using SHA256" time="0.000297834">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; hashToken() &gt; should produce consistent hash for same token" time="0.000103042">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; calculateExpiryDate() &gt; should calculate expiry date 7 days from now by default" time="0.000128375">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; calculateExpiryDate() &gt; should calculate expiry date for custom days" time="0.000083542">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; checkInvitePermission() &gt; should allow invitation when policy allows" time="0.00347675">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/invitationService.test.js:119:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; checkInvitePermission() &gt; should deny invitation when policy denies" time="0.001456834">
            <failure message="expected &apos;ORG_NOT_FOUND&apos; to be &apos;USER_LIMIT_REACHED&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;ORG_NOT_FOUND&apos; to be &apos;USER_LIMIT_REACHED&apos; // Object.is equality

Expected: &quot;USER_LIMIT_REACHED&quot;
Received: &quot;ORG_NOT_FOUND&quot;

  tests/unit/backend/invitationService.test.js:135:39
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; createOrganizationInvitation() &gt; should create organization invitation" time="0.000370583">
            <failure message="InvitationService.createOrganizationInvitation is not a function" type="TypeError">
TypeError: InvitationService.createOrganizationInvitation is not a function
  tests/unit/backend/invitationService.test.js:161:56
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; createOrganizationInvitation() &gt; should reject invalid email format" time="0.000198333">
            <failure message="InvitationService.createOrganizationInvitation is not a function" type="TypeError">
TypeError: InvitationService.createOrganizationInvitation is not a function
  tests/unit/backend/invitationService.test.js:181:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; createOrganizationInvitation() &gt; should reject when organization not found" time="0.000154583">
            <failure message="InvitationService.createOrganizationInvitation is not a function" type="TypeError">
TypeError: InvitationService.createOrganizationInvitation is not a function
  tests/unit/backend/invitationService.test.js:198:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; createOrganizationInvitation() &gt; should reject when permission denied" time="0.000144958">
            <failure message="InvitationService.createOrganizationInvitation is not a function" type="TypeError">
TypeError: InvitationService.createOrganizationInvitation is not a function
  tests/unit/backend/invitationService.test.js:220:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; createProjectInvitation() &gt; should create project invitation" time="0.0004145">
            <failure message="Project not found in this organization" type="Error">
Error: Project not found in this organization
  Object.createProjectInvitation server/services/invitationService.js:374:19
  tests/unit/backend/invitationService.test.js:252:32
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; createProjectInvitation() &gt; should reject when project not found" time="0.000895291">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; createProjectInvitation() &gt; should reject when project belongs to different organization" time="0.000333625">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; validateToken() &gt; should validate correct token" time="0.000290083">
            <failure message="InvitationService.validateToken is not a function" type="TypeError">
TypeError: InvitationService.validateToken is not a function
  tests/unit/backend/invitationService.test.js:312:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; validateToken() &gt; should reject invalid token" time="0.000197083">
            <failure message="InvitationService.validateToken is not a function" type="TypeError">
TypeError: InvitationService.validateToken is not a function
  tests/unit/backend/invitationService.test.js:330:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; validateToken() &gt; should reject expired invitation" time="0.00018775">
            <failure message="InvitationService.validateToken is not a function" type="TypeError">
TypeError: InvitationService.validateToken is not a function
  tests/unit/backend/invitationService.test.js:347:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; validateToken() &gt; should reject already accepted invitation" time="0.000157333">
            <failure message="InvitationService.validateToken is not a function" type="TypeError">
TypeError: InvitationService.validateToken is not a function
  tests/unit/backend/invitationService.test.js:364:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; acceptInvitation() &gt; should accept valid invitation" time="0.000356583">
            <failure message="The &quot;data&quot; argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received undefined" type="TypeError">
TypeError: The &quot;data&quot; argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received undefined
  Object.hashToken server/services/invitationService.js:90:44
  Object.getByToken server/services/invitationService.js:444:45
  Object.acceptInvitation server/services/invitationService.js:477:52
  tests/unit/backend/invitationService.test.js:402:52


Serialized Error: { code: &apos;ERR_INVALID_ARG_TYPE&apos; }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; acceptInvitation() &gt; should reject invitation with mismatched email" time="0.001350625">
            <failure message="expected [Function] to throw error including &apos;Email mismatch&apos; but got &apos;The &quot;data&quot; argument must be of type s&apos;" type="AssertionError">
AssertionError: expected [Function] to throw error including &apos;Email mismatch&apos; but got &apos;The &quot;data&quot; argument must be of type s&apos;

Expected: &quot;Email mismatch&quot;
Received: &quot;The &quot;data&quot; argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received undefined&quot;

  tests/unit/backend/invitationService.test.js:425:13
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; revokeInvitation() &gt; should revoke pending invitation" time="0.000324458">
            <failure message="Invitation not found" type="Error">
Error: Invitation not found
  Object.revokeInvitation server/services/invitationService.js:766:19
  tests/unit/backend/invitationService.test.js:450:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; Multi-Tenant Isolation &gt; should only return invitations for specified organization" time="0.000158542">
            <failure message="InvitationService.getOrganizationInvitations is not a function" type="TypeError">
TypeError: InvitationService.getOrganizationInvitations is not a function
  tests/unit/backend/invitationService.test.js:469:37
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/knowledgeService.test.js" timestamp="2025-12-21T15:18:08.944Z" hostname="MacBook-Pro-Piotr.local" tests="11" failures="1" errors="0" skipped="0" time="0.253676667">
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Candidate Management &gt; should add a candidate idea without throwing" time="0.000980791">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Candidate Management &gt; should get candidates without throwing" time="0.000579">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Strategies &gt; should add a global strategy without throwing" time="0.000374292">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Strategies &gt; should get active strategies without throwing" time="0.000317125">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Client Context &gt; should set and get client context" time="0.001063208">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Client Context &gt; should update existing client context" time="0.001012583">
            <failure message="SQLITE_ERROR: no such column: updated_at" type="Error">
Error: SQLITE_ERROR: no such column: updated_at

Serialized Error: { errno: 1, code: &apos;SQLITE_ERROR&apos; }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Candidate Status &gt; should update candidate status" time="0.001743">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Process Document (RAG) &gt; should process document chunks" time="0.040236209">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Access Control &gt; should restrict user access to project docs" time="0.008086792">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Strategies Toggle &gt; should toggle strategy active status" time="0.004110334">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Document Lifecycle &gt; should soft delete document" time="0.011872708">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/legalEventLogger.test.js" timestamp="2025-12-21T15:18:08.945Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.14102125">
        <testcase classname="tests/unit/backend/legalEventLogger.test.js" name="LegalEventLogger &gt; log &gt; should append log entry" time="0.001730959">
            <system-err>
[LegalEventLogger] Unknown event type: test_event

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/legalEventLogger.test.js" name="LegalEventLogger &gt; logAccept &gt; should log user acceptance" time="0.000399292">
        </testcase>
        <testcase classname="tests/unit/backend/legalEventLogger.test.js" name="LegalEventLogger &gt; getEvents &gt; should fetch events with filters" time="0.000415375">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/legalService.test.js" timestamp="2025-12-21T15:18:08.945Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="6" errors="0" skipped="0" time="0.189484375">
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; getActiveDocuments() &gt; should return active documents" time="0.003256292">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; getActiveDocuments() &gt; should filter by effective date" time="0.000300208">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; getActiveDocuments() &gt; should filter by scope when user context provided" time="0.000187125">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; getActiveDocument() &gt; should return active document by type" time="0.000338042">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; getActiveDocument() &gt; should return null when document not found" time="0.000181083">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; getUserAcceptances() &gt; should return user acceptances" time="0.000576084">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; getUserAcceptances() &gt; should filter by organization when provided" time="0.002372792">
            <failure message="expected [ &apos;user-123&apos; ] to include &apos;org-test-123&apos;" type="AssertionError">
AssertionError: expected [ &apos;user-123&apos; ] to include &apos;org-test-123&apos;
  Object.&lt;anonymous&gt; tests/unit/backend/legalService.test.js:194:32
  server/services/legalService.js:108:21
  Object.getUserAcceptances server/services/legalService.js:100:16
  tests/unit/backend/legalService.test.js:198:32
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; acceptDocument() &gt; should record user acceptance" time="0.000311542">
            <failure message="LegalService.acceptDocument is not a function" type="TypeError">
TypeError: LegalService.acceptDocument is not a function
  tests/unit/backend/legalService.test.js:225:47
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; acceptDocument() &gt; should reject when document not found" time="0.000207959">
            <failure message="LegalService.acceptDocument is not a function" type="TypeError">
TypeError: LegalService.acceptDocument is not a function
  tests/unit/backend/legalService.test.js:240:30
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; isDocumentApplicable() &gt; should return true for global scope documents" time="0.000115">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; isDocumentApplicable() &gt; should return true for matching region scope" time="0.000073667">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; isDocumentApplicable() &gt; should return false for non-matching region scope" time="0.000069083">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; isDocumentApplicable() &gt; should return true for matching license tier" time="0.000059292">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; checkAcceptanceRequired() &gt; should require acceptance for TOS" time="0.0001315">
            <failure message="LegalService.checkAcceptanceRequired is not a function" type="TypeError">
TypeError: LegalService.checkAcceptanceRequired is not a function
  tests/unit/backend/legalService.test.js:301:47
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; checkAcceptanceRequired() &gt; should not require acceptance when already accepted" time="0.000140833">
            <failure message="LegalService.checkAcceptanceRequired is not a function" type="TypeError">
TypeError: LegalService.checkAcceptanceRequired is not a function
  tests/unit/backend/legalService.test.js:327:47
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; Multi-Tenant Isolation &gt; should only return acceptances for specified user and organization" time="0.000304375">
            <failure message="expected [ &apos;user-123&apos; ] to include &apos;org-test-123&apos;" type="AssertionError">
AssertionError: expected [ &apos;user-123&apos; ] to include &apos;org-test-123&apos;
  Object.&lt;anonymous&gt; tests/unit/backend/legalService.test.js:342:32
  server/services/legalService.js:108:21
  Object.getUserAcceptances server/services/legalService.js:100:16
  tests/unit/backend/legalService.test.js:347:32
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/metricsAggregator.test.js" timestamp="2025-12-21T15:18:08.946Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.29586675">
        <testcase classname="tests/unit/backend/metricsAggregator.test.js" name="MetricsAggregator &gt; METRIC_KEYS &gt; should define all required metric keys" time="0.000547792">
        </testcase>
        <testcase classname="tests/unit/backend/metricsAggregator.test.js" name="MetricsAggregator &gt; WARNING_SEVERITY &gt; should define severity levels" time="0.000116083">
        </testcase>
        <testcase classname="tests/unit/backend/metricsAggregator.test.js" name="MetricsAggregator &gt; getFunnelMetric &gt; should calculate funnel between two events" time="0.001864084">
            <system-out>
[MetricsCollector] Recorded event: demo_started (3e5e2208-ca3a-41ee-b518-f1a0e0932129)

[MetricsCollector] Recorded event: demo_started (2e210ec5-3290-4a71-9ec4-c5e2a52b55b6)

[MetricsCollector] Recorded event: trial_started (a757d467-77a9-467a-946a-b1dea6ad97fa)

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/metricsAggregator.test.js" name="MetricsAggregator &gt; getOverview &gt; should return complete overview for dashboard" time="0.004707167">
        </testcase>
        <testcase classname="tests/unit/backend/metricsAggregator.test.js" name="MetricsAggregator &gt; buildDailySnapshots &gt; should build snapshots idempotently" time="0.007282458">
            <system-out>
[MetricsAggregator] Building daily snapshots for 2025-12-21

[MetricsAggregator] Created 6 snapshots for 2025-12-21

[MetricsAggregator] Building daily snapshots for 2025-12-21

[MetricsAggregator] Created 6 snapshots for 2025-12-21

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/metricsAggregator.test.js" name="MetricsAggregator &gt; getEarlyWarnings &gt; should return warnings (seed data needed for specific warnings)" time="0.001052417">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/metricsCollector.test.js" timestamp="2025-12-21T15:18:08.946Z" hostname="MacBook-Pro-Piotr.local" tests="4" failures="0" errors="0" skipped="0" time="0.119062125">
        <testcase classname="tests/unit/backend/metricsCollector.test.js" name="MetricsCollector &gt; recordEvent &gt; should record event successfully" time="0.001746208">
            <system-out>
[MetricsCollector] Recorded event: TEST_EVENT (uuid-1234)

            </system-out>
            <system-err>
[MetricsCollector] Unknown event type: TEST_EVENT

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/metricsCollector.test.js" name="MetricsCollector &gt; recordEvent &gt; should throw on database error" time="0.000680166">
            <system-err>
[MetricsCollector] Unknown event type: TEST_EVENT
[MetricsCollector] Failed to record event TEST_EVENT: Insert failed

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/metricsCollector.test.js" name="MetricsCollector &gt; getEvents &gt; should fetch events with filters" time="0.000382208">
        </testcase>
        <testcase classname="tests/unit/backend/metricsCollector.test.js" name="MetricsCollector &gt; getEventCount &gt; should return count" time="0.000106916">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/myWorkService.test.js" timestamp="2025-12-21T15:18:08.947Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.169176">
        <testcase classname="tests/unit/backend/myWorkService.test.js" name="MyWorkService &gt; getMyWork &gt; should aggregate work" time="0.001822708">
        </testcase>
        <testcase classname="tests/unit/backend/myWorkService.test.js" name="MyWorkService &gt; errors &gt; should propagate db error" time="0.0007635">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/organizationService.test.js" timestamp="2025-12-21T15:18:08.947Z" hostname="MacBook-Pro-Piotr.local" tests="15" failures="10" errors="0" skipped="0" time="0.177200834">
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; createOrganization() &gt; should create organization with owner" time="0.002992">
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; createOrganization() &gt; should rollback on error" time="0.004633458">
            <failure message="promise resolved &quot;{ (3) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ (3) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;id&quot;: &quot;ada25e1d-f2bc-45f0-8446-dd260553acfb&quot;,
+   &quot;name&quot;: &quot;New Organization&quot;,
+   &quot;role&quot;: &quot;OWNER&quot;,
  }

  tests/unit/backend/organizationService.test.js:96:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; createOrganization() &gt; should include attribution data when provided" time="0.001076291">
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; getOrganization() &gt; should return organization details" time="0.000426375">
            <failure message="Organization not found" type="Error">
Error: Organization not found
  Statement.&lt;anonymous&gt; server/services/organizationService.js:90:45
  Statement.replacement server/node_modules/sqlite3/lib/trace.js:25:27
  Statement.replacement server/node_modules/sqlite3/lib/trace.js:25:27
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; getOrganization() &gt; should throw error when organization not found" time="0.000505916">
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; addMember() &gt; should add member to organization" time="0.001498375">
            <failure message="expected undefined to be true // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

  tests/unit/backend/organizationService.test.js:173:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; addMember() &gt; should handle duplicate member gracefully" time="0.000853167">
            <failure message="promise resolved &quot;{ (4) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ (4) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;id&quot;: &quot;15fee282-8f48-46ab-b8fa-a450c0bb38d2&quot;,
+   &quot;organizationId&quot;: &quot;org-test-123&quot;,
+   &quot;role&quot;: &quot;MEMBER&quot;,
+   &quot;userId&quot;: &quot;user-123&quot;,
  }

  tests/unit/backend/organizationService.test.js:197:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; removeMember() &gt; should remove member from organization" time="0.000246291">
            <failure message="OrganizationService.removeMember is not a function" type="TypeError">
TypeError: OrganizationService.removeMember is not a function
  tests/unit/backend/organizationService.test.js:210:54
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; getMembers() &gt; should return organization members" time="0.000922042">
            <failure message="expected [] to have a length of 2 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 2 but got +0

- Expected
+ Received

- 2
+ 0

  tests/unit/backend/organizationService.test.js:242:29
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; getMembers() &gt; should only return members for specified organization" time="0.0004305">
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; updateMemberRole() &gt; should update member role" time="0.000230625">
            <failure message="OrganizationService.updateMemberRole is not a function" type="TypeError">
TypeError: OrganizationService.updateMemberRole is not a function
  tests/unit/backend/organizationService.test.js:275:54
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; getMemberRole() &gt; should return member role" time="0.00017575">
            <failure message="OrganizationService.getMemberRole is not a function" type="TypeError">
TypeError: OrganizationService.getMemberRole is not a function
  tests/unit/backend/organizationService.test.js:297:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; getMemberRole() &gt; should return null when member not found" time="0.000159166">
            <failure message="OrganizationService.getMemberRole is not a function" type="TypeError">
TypeError: OrganizationService.getMemberRole is not a function
  tests/unit/backend/organizationService.test.js:310:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; Multi-Tenant Isolation &gt; should only access members for specified organization" time="0.000538167">
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; Multi-Tenant Isolation &gt; should prevent cross-organization member access" time="0.000314208">
            <failure message="OrganizationService.removeMember is not a function" type="TypeError">
TypeError: OrganizationService.removeMember is not a function
  tests/unit/backend/organizationService.test.js:343:39
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/outcomeService.test.js" timestamp="2025-12-21T15:18:08.948Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.164676042">
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _computeDelta &gt; should compute positive delta correctly" time="0.000526291">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _computeDelta &gt; should handle empty baseline" time="0.000084542">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _computeDelta &gt; should handle empty after" time="0.000066541">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _computeDelta &gt; should handle identical values" time="0.00007175">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _computeDelta &gt; should be deterministic" time="0.000288291">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should return true for positive delta with no criteria" time="0.000094416">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should return false for all-zero delta with no criteria" time="0.000058333">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should evaluate &quot;&gt;&quot; criterion correctly" time="0.000140458">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should evaluate &quot;&gt;=&quot; criterion correctly" time="0.000054667">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should evaluate &quot;&lt;&quot; criterion correctly" time="0.000067792">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should evaluate &quot;&lt;=&quot; criterion correctly" time="0.000042">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should evaluate &quot;==&quot; criterion correctly" time="0.000037583">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should evaluate &quot;!=&quot; criterion correctly" time="0.000044667">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should require all criteria to pass" time="0.000054209">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should handle negative values" time="0.000041417">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should handle decimal values" time="0.000042">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/permissionService.test.js" timestamp="2025-12-21T15:18:08.949Z" hostname="MacBook-Pro-Piotr.local" tests="22" failures="8" errors="0" skipped="0" time="0.17454">
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; Legacy: can() - Role-based capability check &gt; should allow SUPERADMIN all capabilities" time="0.000732166">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; Legacy: can() - Role-based capability check &gt; should allow ADMIN to manage users" time="0.000149334">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; Legacy: can() - Role-based capability check &gt; should deny PROJECT_MANAGER from managing users" time="0.000100583">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; Legacy: can() - Role-based capability check &gt; should deny user without role" time="0.000084875">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; Legacy: can() - Role-based capability check &gt; should deny null user" time="0.000091584">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; hasPermission() - Database-backed PBAC &gt; should return false for missing userId" time="0.000095">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; hasPermission() - Database-backed PBAC &gt; should return false for missing permissionKey" time="0.000064291">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; hasPermission() - Database-backed PBAC &gt; should allow SUPERADMIN bypass" time="0.000166625">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; hasPermission() - Database-backed PBAC &gt; should grant permission from explicit org-user override" time="0.003306417">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/permissionService.test.js:107:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; hasPermission() - Database-backed PBAC &gt; should deny permission from explicit org-user override" time="0.000368667">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; hasPermission() - Database-backed PBAC &gt; should fallback to role-based permission when no override" time="0.000532583">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/permissionService.test.js:165:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; hasPermission() - Database-backed PBAC &gt; should deny permission when role permission not found" time="0.000456083">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; hasPermission() - Database-backed PBAC &gt; should handle database errors gracefully" time="0.000393917">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; Multi-Tenant Isolation &gt; should only check permissions for specified organization" time="0.001014958">
            <failure message="expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (2) ]

Number of calls: 0
" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (2) ]

Number of calls: 0

  tests/unit/backend/permissionService.test.js:236:32
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; Multi-Tenant Isolation &gt; should not leak permissions between organizations" time="0.000626208">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/permissionService.test.js:272:29
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; getUserPermissions() &gt; should return role permissions and overrides" time="0.000995">
            <failure message="expected [] to have a length of 2 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 2 but got +0

- Expected
+ Received

- 2
+ 0

  tests/unit/backend/permissionService.test.js:302:44
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; getUserPermissions() &gt; should handle empty permissions" time="0.000412833">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; grantPermission() &gt; should grant permission to user" time="0.000411292">
            <failure message="Permission not found: PLAYBOOK_PUBLISH" type="Error">
Error: Permission not found: PLAYBOOK_PUBLISH
  Object.grantPermission server/services/permissionService.js:218:19
  tests/unit/backend/permissionService.test.js:337:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; grantPermission() &gt; should handle database errors" time="0.0014565">
            <failure message="expected [Function] to throw error including &apos;DB Error&apos; but got &apos;Permission not found: PLAYBOOK_PUBLISH&apos;" type="AssertionError">
AssertionError: expected [Function] to throw error including &apos;DB Error&apos; but got &apos;Permission not found: PLAYBOOK_PUBLISH&apos;

Expected: &quot;DB Error&quot;
Received: &quot;Permission not found: PLAYBOOK_PUBLISH&quot;

  tests/unit/backend/permissionService.test.js:355:13
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; revokePermission() &gt; should revoke permission from user" time="0.0003165">
            <failure message="Permission not found: PLAYBOOK_PUBLISH" type="Error">
Error: Permission not found: PLAYBOOK_PUBLISH
  Object.revokePermission server/services/permissionService.js:258:19
  tests/unit/backend/permissionService.test.js:371:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; getCapabilitiesForRole() &gt; should return capabilities for ADMIN role" time="0.000125416">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; getCapabilitiesForRole() &gt; should return empty array for unknown role" time="0.000063584">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/pmoDomainRegistry.test.js" timestamp="2025-12-21T15:18:08.950Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.174659625">
        <testcase classname="tests/unit/backend/pmoDomainRegistry.test.js" name="PMODomainRegistry &gt; getAllDomains &gt; should return domains" time="0.002902834">
        </testcase>
        <testcase classname="tests/unit/backend/pmoDomainRegistry.test.js" name="PMODomainRegistry &gt; getDomain &gt; should return domain" time="0.000682417">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/pmoHealthService.test.js" timestamp="2025-12-21T15:18:08.950Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.182205542">
        <testcase classname="tests/unit/backend/pmoHealthService.test.js" name="PMOHealthService &gt; getHealthSnapshot &gt; should return complete snapshot" time="0.007054875">
            <system-out>
[PMOHealthService] Snapshot generated in 1ms for project proj1

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/pmoHealthService.test.js" name="PMOHealthService &gt; getHealthSnapshot &gt; should handle DB errors" time="0.00133225">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/pmoStandardsMapping.test.js" timestamp="2025-12-21T15:18:08.950Z" hostname="MacBook-Pro-Piotr.local" tests="7" failures="0" errors="0" skipped="0" time="0.236949083">
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; getMapping &gt; should return mapping for known concept" time="0.01800425">
        </testcase>
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; getMapping &gt; should return null for unknown concept" time="0.000464">
        </testcase>
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; getStandardTerm &gt; should return ISO 21500 term correctly" time="0.000326625">
        </testcase>
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; getStandardTerm &gt; should return PMBOK 7 term correctly" time="0.000298625">
        </testcase>
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; isNeutralTerm &gt; should identify neutral terms" time="0.000279333">
        </testcase>
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; isNeutralTerm &gt; should identify vendor-specific terms as non-neutral" time="0.000195">
        </testcase>
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; getConceptsByDomain &gt; should return all concepts for a given domain" time="0.00023575">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/progressService.test.js" timestamp="2025-12-21T15:18:08.951Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="3" time="0">
        <testcase classname="tests/unit/backend/progressService.test.js" name="Progress Service &gt; calculateInitiativeProgress &gt; should calculate progress from tasks [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/progressService.test.js" name="Progress Service &gt; calculateProjectProgress &gt; should calculate weighted project progress [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/progressService.test.js" name="Progress Service &gt; calculatePortfolioMetrics &gt; should calculate health score based on blocked initiatives [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/promoCodeService.test.js" timestamp="2025-12-21T15:18:08.951Z" hostname="MacBook-Pro-Piotr.local" tests="18" failures="0" errors="0" skipped="13" time="0.198527084">
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; constants &gt; should export PROMO_TYPES" time="0.000763625">
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; constants &gt; should export DISCOUNT_TYPES" time="0.000155">
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return invalid for empty code" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return invalid for null code" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return invalid when code not found" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return invalid for expired code" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return invalid for code not yet active" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return invalid when usage limit reached" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return valid for good code with discount" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return valid for partner code without discount" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; markPromoCodeUsed - skipped due to CJS/ESM mock interop &gt; should return error for already used org code" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; createPromoCode &gt; should throw error for missing required fields" time="0.000592792">
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; createPromoCode &gt; should throw error for invalid promo type" time="0.000118125">
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; createPromoCode &gt; should throw error for invalid discount type" time="0.000100583">
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; createPromoCode &gt; should create promo code successfully" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; listPromoCodes - skipped due to CJS/ESM mock interop &gt; should return list of promo codes" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; deactivatePromoCode - skipped due to CJS/ESM mock interop &gt; should deactivate promo code" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; deactivatePromoCode - skipped due to CJS/ESM mock interop &gt; should return false if code not found" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/ragService.test.js" timestamp="2025-12-21T15:18:08.952Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.215612666">
        <testcase classname="tests/unit/backend/ragService.test.js" name="RagService - Integration &gt; generateEmbedding &gt; should return null if no provider configured in database" time="0.000864958">
        </testcase>
        <testcase classname="tests/unit/backend/ragService.test.js" name="RagService - Integration &gt; getContext &gt; should return context string without throwing" time="0.000648333">
        </testcase>
        <testcase classname="tests/unit/backend/ragService.test.js" name="RagService - Integration &gt; getContext &gt; should accept limit parameter" time="0.000565084">
        </testcase>
        <testcase classname="tests/unit/backend/ragService.test.js" name="RagService - Integration &gt; getContextKeyword &gt; should perform keyword search without throwing" time="0.000319792">
        </testcase>
        <testcase classname="tests/unit/backend/ragService.test.js" name="RagService - Integration &gt; getAxisDefinitions &gt; should retrieve axis definitions without throwing" time="0.000664">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/regulatoryModeGuard.test.js" timestamp="2025-12-21T15:18:08.952Z" hostname="MacBook-Pro-Piotr.local" tests="22" failures="8" errors="0" skipped="0" time="0.14499">
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isEnabled() &gt; should return false for null projectId" time="0.000748583">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isEnabled() &gt; should return true when regulatory mode is enabled" time="0.003470959">
            <failure message="expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (2) ]

Number of calls: 0
" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (2) ]

Number of calls: 0

  tests/unit/backend/regulatoryModeGuard.test.js:54:32
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isEnabled() &gt; should return false when regulatory mode is disabled" time="0.001796583">
            <failure message="expected true to be false // Object.is equality" type="AssertionError">
AssertionError: expected true to be false // Object.is equality

- Expected
+ Received

- false
+ true

  tests/unit/backend/regulatoryModeGuard.test.js:70:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isEnabled() &gt; should default to enabled (fail-safe) when column is null" time="0.000386792">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isEnabled() &gt; should default to enabled on database error (fail-safe)" time="0.000556625">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; setEnabled() &gt; should enable regulatory mode" time="0.000747708">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/regulatoryModeGuard.test.js:108:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; setEnabled() &gt; should disable regulatory mode" time="0.000362542">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/regulatoryModeGuard.test.js:125:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; setEnabled() &gt; should handle database errors" time="0.001265041">
            <failure message="promise resolved &quot;{ success: false }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ success: false }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;success&quot;: false,
  }

  tests/unit/backend/regulatoryModeGuard.test.js:142:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isActionAllowed() &gt; should allow EXPLAIN_CONTEXT action" time="0.000148625">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isActionAllowed() &gt; should allow ANALYZE_RISKS action" time="0.000116208">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isActionAllowed() &gt; should block CREATE_DRAFT_TASK action" time="0.000099">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isActionAllowed() &gt; should block EXECUTE_ACTION action" time="0.000090834">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isActionAllowed() &gt; should block actions with mutation keywords" time="0.000110958">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isActionAllowed() &gt; should allow null/undefined action (fail-safe)" time="0.000064958">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; enforceRegulatoryMode() &gt; should not block when projectId is null" time="0.000084583">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; enforceRegulatoryMode() &gt; should not block when regulatory mode is disabled" time="0.001105375">
            <failure message="expected true to be false // Object.is equality" type="AssertionError">
AssertionError: expected true to be false // Object.is equality

- Expected
+ Received

- false
+ true

  tests/unit/backend/regulatoryModeGuard.test.js:198:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; enforceRegulatoryMode() &gt; should block mutation actions when regulatory mode is enabled" time="0.0005895">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; enforceRegulatoryMode() &gt; should allow EXPLAIN_CONTEXT even when regulatory mode is enabled" time="0.000214625">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; enforceRegulatoryMode() &gt; should log blocked attempts" time="0.009519209">
            <failure message="expected &quot;vi.fn()&quot; to be called with arguments: [ ObjectContaining{} ]

Number of calls: 0
" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called with arguments: [ ObjectContaining{} ]

Number of calls: 0

  tests/unit/backend/regulatoryModeGuard.test.js:241:58
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; getRegulatoryPrompt() &gt; should return regulatory mode prompt constraints" time="0.0001745">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; getStatus() &gt; should return status when enabled" time="0.001023541">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; getStatus() &gt; should return status when disabled" time="0.000960708">
            <failure message="expected true to be false // Object.is equality" type="AssertionError">
AssertionError: expected true to be false // Object.is equality

- Expected
+ Received

- false
+ true

  tests/unit/backend/regulatoryModeGuard.test.js:291:36
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/roadmapService.test.js" timestamp="2025-12-21T15:18:08.953Z" hostname="MacBook-Pro-Piotr.local" tests="19" failures="0" errors="0" skipped="0" time="0.181789208">
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; getWaves() &gt; should retrieve all waves for a project" time="0.001456375">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; getWaves() &gt; should return empty array when no waves exist" time="0.000235459">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; getWaves() &gt; should handle database errors" time="0.000586958">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; createWave() &gt; should create a new wave" time="0.000225834">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; createWave() &gt; should default sortOrder to 0 if not provided" time="0.000114459">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; createWave() &gt; should handle database errors" time="0.000139125">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; assignToWave() &gt; should assign initiative to wave" time="0.000176958">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; assignToWave() &gt; should handle database errors" time="0.00012025">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; baselineRoadmap() &gt; should baseline all waves and increment initiative baseline version" time="0.000246125">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; baselineRoadmap() &gt; should handle database errors on wave update" time="0.000145042">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; getRoadmapSummary() &gt; should return roadmap summary with waves and initiatives" time="0.00019675">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; getRoadmapSummary() &gt; should handle empty roadmap" time="0.000070375">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; updateInitiativeSchedule() &gt; should update schedule directly when not baselined" time="0.000180333">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; updateInitiativeSchedule() &gt; should create Change Request when baselined and governance requires CR" time="0.000141667">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; updateInitiativeSchedule() &gt; should allow direct update when baselined but governance does not require CR" time="0.000088542">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; updateInitiativeSchedule() &gt; should handle waveId update" time="0.000082583">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; updateInitiativeSchedule() &gt; should return success message when no changes to apply" time="0.000071791">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; Multi-Tenant Isolation &gt; should filter waves by project_id" time="0.000060875">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; Multi-Tenant Isolation &gt; should ensure initiatives belong to correct project in summary" time="0.000075375">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/roiService.test.js" timestamp="2025-12-21T15:18:08.954Z" hostname="MacBook-Pro-Piotr.local" tests="4" failures="4" errors="0" skipped="0" time="0.14138725">
        <testcase classname="tests/unit/backend/roiService.test.js" name="ROIService &gt; getDefaultModel &gt; should return existing model if found" time="0.004150333">
            <failure message="expected 75 to be 100 // Object.is equality" type="AssertionError">
AssertionError: expected 75 to be 100 // Object.is equality

- Expected
+ Received

- 100
+ 75

  tests/unit/backend/roiService.test.js:56:51
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/roiService.test.js" name="ROIService &gt; getDefaultModel &gt; should create default model if missing" time="0.002228792">
            <failure message="expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (2) ]

Number of calls: 0
" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (2) ]

Number of calls: 0

  tests/unit/backend/roiService.test.js:70:32
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/roiService.test.js" name="ROIService &gt; calculateROI &gt; should calculate ROI based on measurements" time="0.001205">
            <failure message="expected 75 to be 100 // Object.is equality" type="AssertionError">
AssertionError: expected 75 to be 100 // Object.is equality

- Expected
+ Received

- 100
+ 75

  tests/unit/backend/roiService.test.js:117:40
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/roiService.test.js" name="ROIService &gt; estimateHoursSaved &gt; should aggregate time saved metrics" time="0.001133333">
            <failure message="expected +0 to be 2 // Object.is equality" type="AssertionError">
AssertionError: expected +0 to be 2 // Object.is equality

- Expected
+ Received

- 2
+ 0

  tests/unit/backend/roiService.test.js:156:40
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/scenarioService.test.js" timestamp="2025-12-21T15:18:08.955Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="2" time="0.191947375">
        <testcase classname="tests/unit/backend/scenarioService.test.js" name="Scenario Service &gt; compareScenarios &gt; should compare delays correctly" time="0.006124667">
        </testcase>
        <testcase classname="tests/unit/backend/scenarioService.test.js" name="Scenario Service &gt; analyzeImpact &gt; should detect dependency breaks [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/scenarioService.test.js" name="Scenario Service &gt; createScenario &gt; should persist scenario [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/scmsGovernance.test.js" timestamp="2025-12-21T15:18:08.955Z" hostname="MacBook-Pro-Piotr.local" tests="17" failures="0" errors="0" skipped="0" time="0.2544845">
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should allow DRAFT to PLANNED transition" time="0.002513625">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should allow PLANNED to APPROVED transition" time="0.000184209">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should allow APPROVED to IN_EXECUTION transition" time="0.000080375">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should allow IN_EXECUTION to BLOCKED transition" time="0.0000655">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should allow IN_EXECUTION to COMPLETED transition" time="0.000064">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should disallow COMPLETED to DRAFT transition" time="0.000049">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should disallow invalid status transition" time="0.000042583">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Task Status Transitions &gt; should allow TODO to IN_PROGRESS transition" time="0.000064167">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Task Status Transitions &gt; should allow IN_PROGRESS to DONE transition" time="0.000057958">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Task Status Transitions &gt; should allow IN_PROGRESS to BLOCKED transition" time="0.000062208">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Task Status Transitions &gt; should allow BLOCKED to IN_PROGRESS transition" time="0.000043458">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Task Status Transitions &gt; should disallow direct DONE to TODO transition" time="0.000032666">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Blocked Status Validation &gt; should require blocked reason for BLOCKED initiative status" time="0.000105292">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Blocked Status Validation &gt; should accept blocked reason for BLOCKED status" time="0.000037833">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Status Constants &gt; should export INITIATIVE_STATUSES" time="0.000047084">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Status Constants &gt; should export TASK_STATUSES" time="0.000045041">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Status Constants &gt; should export DECISION_STATUSES" time="0.000039333">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/scmsLifecycle.test.js" timestamp="2025-12-21T15:18:08.955Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.208441833">
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Types &gt; should define READINESS_GATE" time="0.00672975">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Types &gt; should define DESIGN_GATE" time="0.000154458">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Types &gt; should define PLANNING_GATE" time="0.000081042">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Types &gt; should define EXECUTION_GATE" time="0.000064167">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Types &gt; should define CLOSURE_GATE" time="0.0000645">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Service Structure &gt; should export getGateType function" time="0.000054208">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Service Structure &gt; should export evaluateGate function" time="0.000046458">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Service Structure &gt; should export passGate function" time="0.000042292">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Mapping &gt; should map Context to Assessment with READINESS_GATE" time="0.000072792">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Mapping &gt; should map Roadmap to Execution with EXECUTION_GATE" time="0.000070292">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Mapping &gt; should map Assessment to Initiatives with DESIGN_GATE" time="0.000051041">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Mapping &gt; should map Initiatives to Roadmap with PLANNING_GATE" time="0.000043541">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Mapping &gt; should map Execution to Stabilization with CLOSURE_GATE" time="0.000040292">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="Phase Constants &gt; should have 6 phases in SCMS lifecycle" time="0.000360292">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="Phase Constants &gt; should have Context as first phase" time="0.000042458">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="Phase Constants &gt; should have Stabilization as last phase" time="0.000029125">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/scmsServices.test.js" timestamp="2025-12-21T15:18:08.956Z" hostname="MacBook-Pro-Piotr.local" tests="39" failures="0" errors="0" skipped="0" time="0.209472916">
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; NOTIFICATION_TYPES &gt; should have notification types defined" time="0.007457959">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; NOTIFICATION_TYPES &gt; should include TASK_ASSIGNED type" time="0.000184375">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; NOTIFICATION_TYPES &gt; should include DECISION_REQUIRED type" time="0.00008725">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; NOTIFICATION_TYPES &gt; should include AI_RISK_DETECTED type" time="0.000064208">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; SEVERITY &gt; should define INFO severity" time="0.0000725">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; SEVERITY &gt; should define WARNING severity" time="0.000046916">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; SEVERITY &gt; should define CRITICAL severity" time="0.00004075">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="MyWorkService &gt; Service Structure &gt; should export getMyWork function" time="0.00354375">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="MyWorkService &gt; Service Structure &gt; should export _getMyTasks helper function" time="0.000077">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="MyWorkService &gt; Service Structure &gt; should export _getMyAlerts helper function" time="0.000067959">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="ExecutionMonitorService &gt; Service Structure &gt; should export runDailyMonitor function" time="0.006778084">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="ExecutionMonitorService &gt; Service Structure &gt; should export generateExecutionSummary function" time="0.000079375">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EscalationService &gt; Service Structure &gt; should export createEscalation function" time="0.004755625">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EscalationService &gt; Service Structure &gt; should export getEscalations function" time="0.0000785">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EscalationService &gt; Service Structure &gt; should export acknowledgeEscalation function" time="0.000041459">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EscalationService &gt; Service Structure &gt; should export resolveEscalation function" time="0.000033167">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EscalationService &gt; Service Structure &gt; should export runAutoEscalation function" time="0.000028834">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; STABILIZATION_STATUSES &gt; should define STABILIZED status" time="0.003965542">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; STABILIZATION_STATUSES &gt; should define PARTIALLY_STABILIZED status" time="0.000062">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; STABILIZATION_STATUSES &gt; should define UNSTABLE status" time="0.000038291">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; STABILIZATION_STATUSES &gt; should define NOT_APPLICABLE status" time="0.00003075">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; Service Structure &gt; should export checkEntryCriteria function" time="0.00004">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; Service Structure &gt; should export checkExitCriteria function" time="0.000031916">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; Service Structure &gt; should export closeProject function" time="0.000037792">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should have 5 value types" time="0.004060792">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should define COST_REDUCTION type" time="0.000068708">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should define REVENUE_INCREASE type" time="0.000036667">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should define RISK_REDUCTION type" time="0.000029458">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should define EFFICIENCY type" time="0.000029208">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should define STRATEGIC_OPTION type" time="0.000027958">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; Service Structure &gt; should export createValueHypothesis function" time="0.000027333">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; Service Structure &gt; should export getValueSummary function" time="0.000036292">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; Service Structure &gt; should export detectMissingValueHypotheses function" time="0.000026084">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="ReportingService &gt; Service Structure &gt; should export generateExecutiveOverview function" time="0.006889625">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="ReportingService &gt; Service Structure &gt; should export generateProjectHealthReport function" time="0.00006775">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="ReportingService &gt; Service Structure &gt; should export generateGovernanceReport function" time="0.00003625">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NarrativeService &gt; Service Structure &gt; should export generateWeeklySummary function" time="0.006292375">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NarrativeService &gt; Service Structure &gt; should export generateExecutiveMemo function" time="0.0000565">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NarrativeService &gt; Service Structure &gt; should export generateProgressNarrative function" time="0.000034708">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/settlementService.test.js" timestamp="2025-12-21T15:18:08.957Z" hostname="MacBook-Pro-Piotr.local" tests="19" failures="11" errors="0" skipped="0" time="0.184985291">
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; createPeriod() &gt; should create a new settlement period" time="0.0029615">
            <system-out>
[SettlementService] Created period: 2024-01-01T00:00:00Z to 2024-01-31T23:59:59Z

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; createPeriod() &gt; should reject missing periodStart" time="0.000737042">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; createPeriod() &gt; should reject missing periodEnd" time="0.000144042">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; createPeriod() &gt; should reject invalid date range" time="0.000116833">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; createPeriod() &gt; should reject overlapping periods" time="0.000235042">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; createPeriod() &gt; should reject when open period exists" time="0.003895">
            <failure message="expected { errorCode: &apos;PERIOD_OVERLAP&apos;, (1) } to match object { errorCode: &apos;OPEN_PERIOD_EXISTS&apos; }
(1 matching property omitted from actual)" type="AssertionError">
AssertionError: expected { errorCode: &apos;PERIOD_OVERLAP&apos;, (1) } to match object { errorCode: &apos;OPEN_PERIOD_EXISTS&apos; }
(1 matching property omitted from actual)

- Expected
+ Received

  {
-   &quot;errorCode&quot;: &quot;OPEN_PERIOD_EXISTS&quot;,
+   &quot;errorCode&quot;: &quot;PERIOD_OVERLAP&quot;,
  }

  tests/unit/backend/settlementService.test.js:142:13
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; getPeriod() &gt; should return period by ID" time="0.00056575">
            <failure message="Cannot read properties of null (reading &apos;id&apos;)" type="TypeError">
TypeError: Cannot read properties of null (reading &apos;id&apos;)
  tests/unit/backend/settlementService.test.js:165:27
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; getPeriod() &gt; should return null for non-existent period" time="0.000548">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; getOpenPeriod() &gt; should return open period" time="0.000762209">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; getOpenPeriod() &gt; should return null when no open period" time="0.001340208">
            <failure message="expected { (8) } to be null" type="AssertionError">
AssertionError: expected { (8) } to be null

- Expected: 
null

+ Received: 
{
  &quot;createdAt&quot;: &quot;2025-12-21 15:17:59&quot;,
  &quot;id&quot;: &quot;4cd0becb-a8ff-4552-b6f7-148a034dd819&quot;,
  &quot;partnerCount&quot;: 0,
  &quot;periodEnd&quot;: &quot;2024-01-31T23:59:59Z&quot;,
  &quot;periodStart&quot;: &quot;2024-01-01T00:00:00Z&quot;,
  &quot;status&quot;: &quot;OPEN&quot;,
  &quot;totalRevenue&quot;: 0,
  &quot;totalSettlements&quot;: 0,
}

  tests/unit/backend/settlementService.test.js:202:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; calculateSettlements() &gt; should calculate settlements for open period" time="0.005028875">
            <failure message="Settlement period not found">
Unknown Error: Settlement period not found

Serialized Error: { errorCode: &apos;NOT_FOUND&apos; }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; calculateSettlements() &gt; should reject calculation for locked period" time="0.001461041">
            <failure message="expected { errorCode: &apos;NOT_FOUND&apos;, (1) } to match object { errorCode: &apos;PERIOD_LOCKED&apos; }
(1 matching property omitted from actual)" type="AssertionError">
AssertionError: expected { errorCode: &apos;NOT_FOUND&apos;, (1) } to match object { errorCode: &apos;PERIOD_LOCKED&apos; }
(1 matching property omitted from actual)

- Expected
+ Received

  {
-   &quot;errorCode&quot;: &quot;PERIOD_LOCKED&quot;,
+   &quot;errorCode&quot;: &quot;NOT_FOUND&quot;,
  }

  tests/unit/backend/settlementService.test.js:250:13
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; calculateSettlements() &gt; should reject calculation for non-existent period" time="0.000811375">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; lockPeriod() &gt; should lock a calculated period" time="0.0006935">
            <failure message="Settlement period not found">
Unknown Error: Settlement period not found

Serialized Error: { errorCode: &apos;NOT_FOUND&apos; }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; lockPeriod() &gt; should reject locking open period" time="0.000976292">
            <failure message="expected { errorCode: &apos;NOT_FOUND&apos;, (1) } to match object { errorCode: &apos;INVALID_STATUS&apos; }
(1 matching property omitted from actual)" type="AssertionError">
AssertionError: expected { errorCode: &apos;NOT_FOUND&apos;, (1) } to match object { errorCode: &apos;INVALID_STATUS&apos; }
(1 matching property omitted from actual)

- Expected
+ Received

  {
-   &quot;errorCode&quot;: &quot;INVALID_STATUS&quot;,
+   &quot;errorCode&quot;: &quot;NOT_FOUND&quot;,
  }

  tests/unit/backend/settlementService.test.js:311:13
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; lockPeriod() &gt; should reject locking already locked period" time="0.000543833">
            <failure message="expected { errorCode: &apos;NOT_FOUND&apos;, (1) } to match object { errorCode: &apos;PERIOD_LOCKED&apos; }
(1 matching property omitted from actual)" type="AssertionError">
AssertionError: expected { errorCode: &apos;NOT_FOUND&apos;, (1) } to match object { errorCode: &apos;PERIOD_LOCKED&apos; }
(1 matching property omitted from actual)

- Expected
+ Received

  {
-   &quot;errorCode&quot;: &quot;PERIOD_LOCKED&quot;,
+   &quot;errorCode&quot;: &quot;NOT_FOUND&quot;,
  }

  tests/unit/backend/settlementService.test.js:329:13
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; listPeriods() &gt; should return list of periods" time="0.000825459">
            <failure message="expected [ { (10) } ] to have a length of 2 but got 1" type="AssertionError">
AssertionError: expected [ { (10) } ] to have a length of 2 but got 1

- Expected
+ Received

- 2
+ 1

  tests/unit/backend/settlementService.test.js:358:29
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; listPeriods() &gt; should handle empty list" time="0.00121075">
            <failure message="expected [ { (10) } ] to deeply equal []" type="AssertionError">
AssertionError: expected [ { (10) } ] to deeply equal []

- Expected
+ Received

- []
+ [
+   {
+     &quot;calculatedAt&quot;: null,
+     &quot;createdAt&quot;: &quot;2025-12-21 15:17:59&quot;,
+     &quot;id&quot;: &quot;4cd0becb-a8ff-4552-b6f7-148a034dd819&quot;,
+     &quot;lockedAt&quot;: null,
+     &quot;partnerCount&quot;: 0,
+     &quot;periodEnd&quot;: &quot;2024-01-31T23:59:59Z&quot;,
+     &quot;periodStart&quot;: &quot;2024-01-01T00:00:00Z&quot;,
+     &quot;status&quot;: &quot;OPEN&quot;,
+     &quot;totalRevenue&quot;: 0,
+     &quot;totalSettlements&quot;: 0,
+   },
+ ]

  tests/unit/backend/settlementService.test.js:368:29
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; Immutability &gt; should prevent modifications to locked period" time="0.00061275">
            <failure message="expected { errorCode: &apos;NOT_FOUND&apos;, (1) } to match object { errorCode: &apos;PERIOD_LOCKED&apos; }
(1 matching property omitted from actual)" type="AssertionError">
AssertionError: expected { errorCode: &apos;NOT_FOUND&apos;, (1) } to match object { errorCode: &apos;PERIOD_LOCKED&apos; }
(1 matching property omitted from actual)

- Expected
+ Received

  {
-   &quot;errorCode&quot;: &quot;PERIOD_LOCKED&quot;,
+   &quot;errorCode&quot;: &quot;NOT_FOUND&quot;,
  }

  tests/unit/backend/settlementService.test.js:384:13
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/stageGateService.test.js" timestamp="2025-12-21T15:18:08.959Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.135526334">
        <testcase classname="tests/unit/backend/stageGateService.test.js" name="StageGateService &gt; getGateType &gt; should return correct gate for transition" time="0.000568625">
        </testcase>
        <testcase classname="tests/unit/backend/stageGateService.test.js" name="StageGateService &gt; getGateType &gt; should return null for unknown transition" time="0.000110125">
        </testcase>
        <testcase classname="tests/unit/backend/stageGateService.test.js" name="StageGateService &gt; evaluateGate &gt; should evaluate readiness gate criteria" time="0.000359667">
        </testcase>
        <testcase classname="tests/unit/backend/stageGateService.test.js" name="StageGateService &gt; evaluateGate &gt; should report failure if criteria missing" time="0.0001175">
        </testcase>
        <testcase classname="tests/unit/backend/stageGateService.test.js" name="StageGateService &gt; passGate &gt; should record gate passage" time="0.000931083">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/statusMachine.test.js" timestamp="2025-12-21T15:18:08.959Z" hostname="MacBook-Pro-Piotr.local" tests="11" failures="0" errors="0" skipped="0" time="0.20514">
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; canTransitionInitiative &gt; should allow valid transition" time="0.000495667">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; canTransitionInitiative &gt; should block invalid transition" time="0.000081917">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; canTransitionTask &gt; should allow valid transition" time="0.000078667">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; canTransitionTask &gt; should allow flow back" time="0.000065334">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateInitiativeTransition &gt; should return valid for simple allowed transition" time="0.000093041">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateInitiativeTransition &gt; should require reason for blocking" time="0.000098792">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateInitiativeTransition &gt; should allow blocking with reason" time="0.000042917">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateInitiativeTransition &gt; should prevent completion if pending tasks exist" time="0.000059292">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateInitiativeTransition &gt; should prevent approved state if governance failed" time="0.00005675">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateTaskTransition &gt; should validate blocker type" time="0.000077667">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateTaskTransition &gt; should pass with full blocking info" time="0.00003675">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/storageReconciliationService.test.js" timestamp="2025-12-21T15:18:08.959Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.143741583">
        <testcase classname="tests/unit/backend/storageReconciliationService.test.js" name="Storage Reconciliation Service &gt; should handle reconciliation (DB interaction) [SKIPPED]" time="0.000603833">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/storageService.test.js" timestamp="2025-12-21T15:18:08.959Z" hostname="MacBook-Pro-Piotr.local" tests="18" failures="11" errors="0" skipped="0" time="0.17729575">
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; getIsolatedPath() &gt; should generate isolated path for organization and project" time="0.004744709">
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; getIsolatedPath() &gt; should use &quot;global&quot; as project scope when projectId is null" time="0.000153666">
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; getIsolatedPath() &gt; should throw error when orgId is missing" time="0.000367083">
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; getIsolatedPath() &gt; should default type to &quot;global&quot; when not provided" time="0.000078">
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; storeFile() &gt; should move file to isolated storage" time="0.002443541">
            <failure message="ENOENT: no such file or directory, rename &apos;/tmp/upload-123.txt&apos; -&gt; &apos;/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/uploads/org-test-123/proj-test-123/knowledge/1766330279936-document.pdf&apos;" type="Error">
Error: ENOENT: no such file or directory, rename &apos;/tmp/upload-123.txt&apos; -&gt; &apos;/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/uploads/org-test-123/proj-test-123/knowledge/1766330279936-document.pdf&apos;
  StorageService.storeFile server/services/storageService.js:55:9
  tests/unit/backend/storageService.test.js:124:28


Serialized Error: { errno: -2, code: &apos;ENOENT&apos;, syscall: &apos;rename&apos;, path: &apos;/tmp/upload-123.txt&apos;, dest: &apos;/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/uploads/org-test-123/proj-test-123/knowledge/1766330279936-document.pdf&apos; }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; storeFile() &gt; should sanitize filename" time="0.000582792">
            <failure message="ENOENT: no such file or directory, rename &apos;/tmp/file.txt&apos; -&gt; &apos;/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/uploads/org-test-123/global/type/1766330279938-my_file__2024_.pdf&apos;" type="Error">
Error: ENOENT: no such file or directory, rename &apos;/tmp/file.txt&apos; -&gt; &apos;/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/uploads/org-test-123/global/type/1766330279938-my_file__2024_.pdf&apos;
  StorageService.storeFile server/services/storageService.js:55:9
  tests/unit/backend/storageService.test.js:136:13


Serialized Error: { errno: -2, code: &apos;ENOENT&apos;, syscall: &apos;rename&apos;, path: &apos;/tmp/file.txt&apos;, dest: &apos;/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/uploads/org-test-123/global/type/1766330279938-my_file__2024_.pdf&apos; }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; storeFile() &gt; should handle special characters in filename" time="0.000434417">
            <failure message="ENOENT: no such file or directory, rename &apos;/tmp/file.txt&apos; -&gt; &apos;/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/uploads/org-test-123/global/type/1766330279939-.._.._etc_passwd&apos;" type="Error">
Error: ENOENT: no such file or directory, rename &apos;/tmp/file.txt&apos; -&gt; &apos;/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/uploads/org-test-123/global/type/1766330279939-.._.._etc_passwd&apos;
  StorageService.storeFile server/services/storageService.js:55:9
  tests/unit/backend/storageService.test.js:149:13


Serialized Error: { errno: -2, code: &apos;ENOENT&apos;, syscall: &apos;rename&apos;, path: &apos;/tmp/file.txt&apos;, dest: &apos;/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/uploads/org-test-123/global/type/1766330279939-.._.._etc_passwd&apos; }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; getStorageUsage() &gt; should return storage usage for organization" time="0.000247625">
            <failure message="StorageService.getStorageUsage is not a function" type="TypeError">
TypeError: StorageService.getStorageUsage is not a function
  tests/unit/backend/storageService.test.js:164:49
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; getStorageUsage() &gt; should handle empty directories" time="0.00015225">
            <failure message="StorageService.getStorageUsage is not a function" type="TypeError">
TypeError: StorageService.getStorageUsage is not a function
  tests/unit/backend/storageService.test.js:175:49
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; getStorageUsage() &gt; should handle read errors gracefully" time="0.000167875">
            <failure message="StorageService.getStorageUsage is not a function" type="TypeError">
TypeError: StorageService.getStorageUsage is not a function
  tests/unit/backend/storageService.test.js:186:49
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; Path Security &gt; should not allow path traversal in orgId" time="0.000766666">
            <failure message="expected [Function] to throw an error" type="AssertionError">
AssertionError: expected [Function] to throw an error
  tests/unit/backend/storageService.test.js:196:16
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; Path Security &gt; should not allow path traversal in projectId" time="0.000098541">
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; Path Security &gt; should enforce organization boundary" time="0.000309417">
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; File Operations &gt; should delete file from storage" time="0.000216875">
            <failure message="The &quot;path&quot; argument must be of type string. Received undefined" type="TypeError">
TypeError: The &quot;path&quot; argument must be of type string. Received undefined
  StorageService.deleteFile server/services/storageService.js:188:31
  tests/unit/backend/storageService.test.js:223:34


Serialized Error: { code: &apos;ERR_INVALID_ARG_TYPE&apos; }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; File Operations &gt; should get file info" time="0.000096583">
            <failure message="StorageService.getFileInfo is not a function" type="TypeError">
TypeError: StorageService.getFileInfo is not a function
  tests/unit/backend/storageService.test.js:233:49
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; File Operations &gt; should list files in directory" time="0.001632959">
            <failure message="expected [] to deeply equal [ &apos;file1.pdf&apos;, &apos;file2.pdf&apos; ]" type="AssertionError">
AssertionError: expected [] to deeply equal [ &apos;file1.pdf&apos;, &apos;file2.pdf&apos; ]

- Expected
+ Received

- [
-   &quot;file1.pdf&quot;,
-   &quot;file2.pdf&quot;,
- ]
+ []

  tests/unit/backend/storageService.test.js:245:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; Multi-tenant Isolation &gt; should not allow access across organization boundaries" time="0.000100875">
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; Multi-tenant Isolation &gt; should not leak files between organizations in usage calculation" time="0.000106417">
            <failure message="StorageService.getStorageUsage is not a function" type="TypeError">
TypeError: StorageService.getStorageUsage is not a function
  tests/unit/backend/storageService.test.js:275:49
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/systemIntegrity.test.js" timestamp="2025-12-21T15:18:08.961Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.115659">
        <testcase classname="tests/unit/backend/systemIntegrity.test.js" name="System Integrity Service &gt; should perform integrity checks (DB interaction) [SKIPPED]" time="0.000483833">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/tokenBillingService.test.js" timestamp="2025-12-21T15:18:08.961Z" hostname="MacBook-Pro-Piotr.local" tests="15" failures="13" errors="0" skipped="0" time="0.233852292">
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; getBalance() &gt; should return user token balance" time="0.006009583">
            <failure message="expected +0 to be 1000 // Object.is equality" type="AssertionError">
AssertionError: expected +0 to be 1000 // Object.is equality

- Expected
+ Received

- 1000
+ 0

  tests/unit/backend/tokenBillingService.test.js:51:45
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; getBalance() &gt; should return zero balance for new user" time="0.000846708">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; getBalance() &gt; should handle database errors" time="0.00264925">
            <failure message="promise resolved &quot;{ user_id: &apos;user-123&apos;, (4) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ user_id: &apos;user-123&apos;, (4) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;byok_usage_tokens&quot;: 0,
+   &quot;local_usage_tokens&quot;: 0,
+   &quot;platform_tokens&quot;: 0,
+   &quot;platform_tokens_bonus&quot;: 0,
+   &quot;user_id&quot;: &quot;user-123&quot;,
  }

  tests/unit/backend/tokenBillingService.test.js:82:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; hasSufficientBalance() &gt; should return true when balance is sufficient" time="0.00096975">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/tokenBillingService.test.js:99:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; hasSufficientBalance() &gt; should return false when balance is insufficient" time="0.001108583">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; hasSufficientBalance() &gt; should include bonus tokens in balance check" time="0.000951208">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/tokenBillingService.test.js:129:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; deductTokens() &gt; should deduct tokens from user balance" time="0.003176834">
            <failure message="SQLITE_CONSTRAINT: NOT NULL constraint failed: token_transactions.organization_id" type="Error">
Error: SQLITE_CONSTRAINT: NOT NULL constraint failed: token_transactions.organization_id

Serialized Error: { errno: 19, code: &apos;SQLITE_CONSTRAINT&apos; }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; deductTokens() &gt; should deduct from organization balance when organizationId provided" time="0.0024415">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/tokenBillingService.test.js:206:37
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; deductTokens() &gt; should handle insufficient balance" time="0.001855292">
            <failure message="SQLITE_CONSTRAINT: NOT NULL constraint failed: token_transactions.organization_id" type="Error">
Error: SQLITE_CONSTRAINT: NOT NULL constraint failed: token_transactions.organization_id

Serialized Error: { errno: 19, code: &apos;SQLITE_CONSTRAINT&apos; }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; deductTokens() &gt; should handle database errors" time="0.0039385">
            <failure message="expected [Function] to throw error including &apos;DB Error&apos; but got &apos;SQLITE_CONSTRAINT: NOT NULL constrain&apos;" type="AssertionError">
AssertionError: expected [Function] to throw error including &apos;DB Error&apos; but got &apos;SQLITE_CONSTRAINT: NOT NULL constrain&apos;

Expected: &quot;DB Error&quot;
Received: &quot;SQLITE_CONSTRAINT: NOT NULL constraint failed: token_transactions.organization_id&quot;

  tests/unit/backend/tokenBillingService.test.js:236:13
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; creditTokens() &gt; should credit tokens to user balance" time="0.000841208">
            <failure message="SQLITE_ERROR: table token_transactions has no column named package_id" type="Error">
Error: SQLITE_ERROR: table token_transactions has no column named package_id

Serialized Error: { errno: 1, code: &apos;SQLITE_ERROR&apos; }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; creditTokens() &gt; should credit to organization balance when organizationId provided" time="0.000434667">
            <failure message="SQLITE_ERROR: table token_transactions has no column named package_id" type="Error">
Error: SQLITE_ERROR: table token_transactions has no column named package_id

Serialized Error: { errno: 1, code: &apos;SQLITE_ERROR&apos; }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; Multi-Tenant Isolation &gt; should only deduct from specified organization" time="0.001942333">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/tokenBillingService.test.js:315:38
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; getMargins() &gt; should return all billing margins" time="0.000794917">
            <failure message="expected [ { source_type: &apos;byok&apos;, (5) }, (2) ] to have a length of 2 but got 3" type="AssertionError">
AssertionError: expected [ { source_type: &apos;byok&apos;, (5) }, (2) ] to have a length of 2 but got 3

- Expected
+ Received

- 2
+ 3

  tests/unit/backend/tokenBillingService.test.js:330:29
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; getMargin() &gt; should return margin for specific source type" time="0.000368458">
            <failure message="expected 30 to be 10 // Object.is equality" type="AssertionError">
AssertionError: expected 30 to be 10 // Object.is equality

- Expected
+ Received

- 10
+ 30

  tests/unit/backend/tokenBillingService.test.js:352:43
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/tokenLedger.enterprise.test.js" timestamp="2025-12-21T15:18:08.962Z" hostname="MacBook-Pro-Piotr.local" tests="7" failures="4" errors="0" skipped="0" time="0.155342083">
        <testcase classname="tests/unit/backend/tokenLedger.enterprise.test.js" name="Token Ledger Enterprise Tests &gt; Fail-Closed for TRIAL &gt; should deny access when org not found (fail-closed)" time="0.002757">
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedger.enterprise.test.js" name="Token Ledger Enterprise Tests &gt; Fail-Closed for TRIAL &gt; should deny when TRIAL balance insufficient" time="0.005622541">
            <failure message="expected &apos;Balance check failed. Please retry.&apos; to contain &apos;Trial token limit reached&apos;" type="AssertionError">
AssertionError: expected &apos;Balance check failed. Please retry.&apos; to contain &apos;Trial token limit reached&apos;

Expected: &quot;Trial token limit reached&quot;
Received: &quot;Balance check failed. Please retry.&quot;

  tests/unit/backend/tokenLedger.enterprise.test.js:116:34
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedger.enterprise.test.js" name="Token Ledger Enterprise Tests &gt; Fail-Closed for TRIAL &gt; should allow when TRIAL balance is sufficient" time="0.002259167">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/tokenLedger.enterprise.test.js:124:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedger.enterprise.test.js" name="Token Ledger Enterprise Tests &gt; PAYGO Trigger &gt; should flag paygoTriggered when ACTIVE org has low balance" time="0.001465083">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/tokenLedger.enterprise.test.js:139:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedger.enterprise.test.js" name="Token Ledger Enterprise Tests &gt; Atomicity - Ledger Fail Rolls Back &gt; getOrgBalance uses async pattern" time="0.000308125">
            <failure message="Organization not found" type="Error">
Error: Organization not found
  TokenBillingService.getOrgBalance server/services/tokenBillingService.js:374:25
  tests/unit/backend/tokenLedger.enterprise.test.js:149:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedger.enterprise.test.js" name="Token Ledger Enterprise Tests &gt; Atomicity - Ledger Fail Rolls Back &gt; getOrgBalance throws on missing org" time="0.001302042">
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedger.enterprise.test.js" name="Token Ledger Enterprise Tests &gt; Ledger Summary &gt; returns aggregated values" time="0.00043">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/tokenLedgerService.test.js" timestamp="2025-12-21T15:18:08.963Z" hostname="MacBook-Pro-Piotr.local" tests="7" failures="7" errors="0" skipped="0" time="0.134536291">
        <testcase classname="tests/unit/backend/tokenLedgerService.test.js" name="TokenBillingService - Ledger Functionality &gt; getOrgBalance &gt; should return organization balance and billing status" time="0.005862708">
            <failure message="Organization not found" type="Error">
Error: Organization not found
  TokenBillingService.getOrgBalance server/services/tokenBillingService.js:374:25
  tests/unit/backend/tokenLedgerService.test.js:51:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedgerService.test.js" name="TokenBillingService - Ledger Functionality &gt; hasOrgSufficientBalance &gt; should allow call when balance is sufficient" time="0.00272575">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/tokenLedgerService.test.js:63:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedgerService.test.js" name="TokenBillingService - Ledger Functionality &gt; hasOrgSufficientBalance &gt; should deny call when trial balance is insufficient" time="0.000522417">
            <failure message="Cannot find module &apos;../../server/database&apos;
Require stack:
- /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/tokenLedgerService.test.js" type="Error">
Error: Cannot find module &apos;../../server/database&apos;
Require stack:
- /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/tokenLedgerService.test.js
  tests/unit/backend/tokenLedgerService.test.js:69:24


Serialized Error: { code: &apos;MODULE_NOT_FOUND&apos;, requireStack: [ &apos;/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/tokenLedgerService.test.js&apos; ] }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedgerService.test.js" name="TokenBillingService - Ledger Functionality &gt; getLedger &gt; should return ledger entries for organization" time="0.002424541">
            <failure message="expected +0 to be 2 // Object.is equality" type="AssertionError">
AssertionError: expected +0 to be 2 // Object.is equality

- Expected
+ Received

- 2
+ 0

  tests/unit/backend/tokenLedgerService.test.js:86:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedgerService.test.js" name="TokenBillingService - Ledger Functionality &gt; getLedgerSummary &gt; should return aggregated ledger summary" time="0.000349333">
            <failure message="Cannot find module &apos;../../server/database&apos;
Require stack:
- /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/tokenLedgerService.test.js" type="Error">
Error: Cannot find module &apos;../../server/database&apos;
Require stack:
- /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/tokenLedgerService.test.js
  tests/unit/backend/tokenLedgerService.test.js:94:24


Serialized Error: { code: &apos;MODULE_NOT_FOUND&apos;, requireStack: [ &apos;/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/tokenLedgerService.test.js&apos; ] }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedgerService.test.js" name="TokenBillingService - Ledger Functionality &gt; creditOrganization &gt; should add credit and create ledger entry" time="0.000190708">
            <failure message="Cannot find module &apos;../../server/database&apos;
Require stack:
- /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/tokenLedgerService.test.js" type="Error">
Error: Cannot find module &apos;../../server/database&apos;
Require stack:
- /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/tokenLedgerService.test.js
  tests/unit/backend/tokenLedgerService.test.js:110:24


Serialized Error: { code: &apos;MODULE_NOT_FOUND&apos;, requireStack: [ &apos;/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/tokenLedgerService.test.js&apos; ] }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedgerService.test.js" name="TokenBillingService - deductTokens with Ledger &gt; should create ledger entry when deducting from organization" time="0.000169417">
            <failure message="Cannot find module &apos;../../server/database&apos;
Require stack:
- /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/tokenLedgerService.test.js" type="Error">
Error: Cannot find module &apos;../../server/database&apos;
Require stack:
- /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/tokenLedgerService.test.js
  tests/unit/backend/tokenLedgerService.test.js:130:20


Serialized Error: { code: &apos;MODULE_NOT_FOUND&apos;, requireStack: [ &apos;/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/tokenLedgerService.test.js&apos; ] }
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/usageService.test.js" timestamp="2025-12-21T15:18:08.964Z" hostname="MacBook-Pro-Piotr.local" tests="21" failures="2" errors="0" skipped="0" time="0.179446375">
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; recordTokenUsage() &gt; should record token usage" time="0.005891042">
            <failure message="expected &apos;INSERT INTO usage_records (id, organi&apos; to contain &apos;type = \&apos;token\&apos;&apos;" type="AssertionError">
AssertionError: expected &apos;INSERT INTO usage_records (id, organi&apos; to contain &apos;type = \&apos;token\&apos;&apos;

- Expected
+ Received

- type = &apos;token&apos;
+ INSERT INTO usage_records (id, organization_id, user_id, type, amount, action, metadata)
+              VALUES (?, ?, ?, &apos;token&apos;, ?, ?, ?)

  Object.&lt;anonymous&gt; tests/unit/backend/usageService.test.js:51:31
  server/services/usageService.js:19:17
  Object.recordTokenUsage server/services/usageService.js:18:12
  tests/unit/backend/usageService.test.js:60:47
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; recordTokenUsage() &gt; should handle database errors" time="0.00074575">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; recordStorageUsage() &gt; should record storage usage" time="0.000581541">
            <failure message="expected &apos;INSERT INTO usage_records (id, organi&apos; to contain &apos;type = \&apos;storage\&apos;&apos;" type="AssertionError">
AssertionError: expected &apos;INSERT INTO usage_records (id, organi&apos; to contain &apos;type = \&apos;storage\&apos;&apos;

- Expected
+ Received

- type = &apos;storage&apos;
+ INSERT INTO usage_records (id, organization_id, user_id, type, amount, action, metadata)
+              VALUES (?, ?, NULL, &apos;storage&apos;, ?, ?, ?)

  Object.&lt;anonymous&gt; tests/unit/backend/usageService.test.js:88:31
  server/services/usageService.js:37:17
  Object.recordStorageUsage server/services/usageService.js:36:12
  tests/unit/backend/usageService.test.js:95:47
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; getCurrentUsage() &gt; should return current usage with token and storage limits" time="0.00036275">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; getCurrentUsage() &gt; should handle organizations without plan" time="0.000136833">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; getCurrentUsage() &gt; should calculate storage percentage correctly" time="0.000129667">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; getCurrentUsage() &gt; should ensure storage never goes below 0" time="0.000124958">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; checkQuota() &gt; should allow when quota available" time="0.000130958">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; checkQuota() &gt; should deny when quota exceeded and overage disabled" time="0.00011325">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; checkQuota() &gt; should allow when overage enabled even if quota exceeded" time="0.000144042">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; checkQuota() &gt; should allow unlimited when limit is 0" time="0.000094583">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; calculateOverage() &gt; should calculate overage charges correctly" time="0.000220583">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; calculateOverage() &gt; should return zero overage when within limits" time="0.000098333">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; updateUsageSummary() &gt; should create or update usage summary" time="0.000160375">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; getUsageHistory() &gt; should retrieve usage history" time="0.000284875">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; getUsageHistory() &gt; should respect limit parameter" time="0.000069666">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; getGlobalUsageStats() &gt; should return global usage statistics" time="0.000126834">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; checkProjectQuota() &gt; should check project storage quota" time="0.000136917">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; checkProjectQuota() &gt; should allow unlimited when limit is null" time="0.000083584">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; checkProjectQuota() &gt; should reject when project not found" time="0.000129166">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; Multi-Tenant Isolation &gt; should filter usage by organization_id" time="0.00017">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/webhookService.test.js" timestamp="2025-12-21T15:18:08.965Z" hostname="MacBook-Pro-Piotr.local" tests="21" failures="0" errors="0" skipped="0" time="0.18774975">
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; trigger() &gt; should trigger webhooks for matching event type" time="0.001649708">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; trigger() &gt; should return zero triggered when no webhooks match" time="0.000199458">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; trigger() &gt; should handle multiple webhooks" time="0.000266166">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; trigger() &gt; should handle webhook failures gracefully" time="0.0004175">
            <system-err>
[Webhook] Failed to send to https://example.com/webhook: Network error

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; trigger() &gt; should handle database errors" time="0.002531459">
            <system-err>
[Webhook] Query error: Error: Database error
    at Object.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/webhookService.test.js:144:26)
    at Object.Mock [as all] (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/spy/dist/index.js:285:34)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/webhookService.js:25:21
    at new Promise (&lt;anonymous&gt;)
    at WebhookService.trigger (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/webhookService.js:23:16)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/webhookService.test.js:147:41
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; trigger() &gt; should only trigger webhooks for specified organization" time="0.000162959">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; sendWebhook() &gt; should send webhook with correct headers" time="0.000184625">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; sendWebhook() &gt; should include payload in body" time="0.00032025">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; sendWebhook() &gt; should throw on non-ok response" time="0.000155875">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; sendSlackNotification() &gt; should send Slack notification" time="0.000785834">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; sendSlackNotification() &gt; should handle Slack API errors" time="0.000086875">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; sendSlackNotification() &gt; should handle network errors" time="0.000360125">
            <system-err>
[Slack] Notification failed: Error: Network error
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/webhookService.test.js:256:45
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; Multi-tenant Isolation &gt; should not leak webhooks between organizations" time="0.000152917">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; Multi-tenant Isolation &gt; should filter webhooks by organization_id" time="0.000068">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; Multi-tenant Isolation &gt; should only query active webhooks" time="0.000063375">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; Security &gt; should generate HMAC signature for each webhook" time="0.000110917">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; Security &gt; should include event type in headers" time="0.0000925">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; Security &gt; should generate different signatures for different secrets" time="0.000108666">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; formatInitiativeMessage() &gt; should format initiative message correctly" time="0.000156167">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; formatTaskMessage() &gt; should format task message with status emoji" time="0.000132292">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; formatTaskMessage() &gt; should handle completed status" time="0.000058792">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/adminMiddleware.test.js" timestamp="2025-12-21T15:18:08.966Z" hostname="MacBook-Pro-Piotr.local" tests="4" failures="0" errors="0" skipped="0" time="0.188845667">
        <testcase classname="tests/unit/backend/middleware/adminMiddleware.test.js" name="AdminMiddleware &gt; should call next() if user is admin" time="0.002132834">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/adminMiddleware.test.js" name="AdminMiddleware &gt; should call next() if user is superadmin" time="0.000374916">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/adminMiddleware.test.js" name="AdminMiddleware &gt; should return 403 if user is not admin" time="0.001067208">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/adminMiddleware.test.js" name="AdminMiddleware &gt; should return 401 if verify failed (bad signature)" time="0.000244958">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/auditLog.test.js" timestamp="2025-12-21T15:18:08.966Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.248108375">
        <testcase classname="tests/unit/backend/middleware/auditLog.test.js" name="AuditLog Middleware &gt; should call next() and override res.end" time="0.004448708">
            <system-out>
[Database] Selected: SQLite

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/middleware/auditLog.test.js" name="AuditLog Middleware &gt; should log activity when res.end is called for 2xx POST" time="0.052868375">
            <system-out>
[Database] Selected: SQLite

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/middleware/auditLog.test.js" name="AuditLog Middleware &gt; should NOT log for GET requests" time="0.001055417">
            <system-out>
[Database] Selected: SQLite

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/authMiddleware.test.js" timestamp="2025-12-21T15:18:08.966Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="4" time="0.075507708">
        <testcase classname="tests/unit/backend/middleware/authMiddleware.test.js" name="AuthMiddleware &gt; should return 403 if no token provided" time="0.001396292">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/authMiddleware.test.js" name="AuthMiddleware &gt; should return 401 if token expired" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/middleware/authMiddleware.test.js" name="AuthMiddleware &gt; should return 401 if token invalid" time="0.000283584">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/authMiddleware.test.js" name="AuthMiddleware &gt; should call next() if token valid and no revocation check needed (no jti)" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/middleware/authMiddleware.test.js" name="AuthMiddleware &gt; should check revocation if jti is present" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/middleware/authMiddleware.test.js" name="AuthMiddleware &gt; should return 401 if token is revoked" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/planLimits.test.js" timestamp="2025-12-21T15:18:08.966Z" hostname="MacBook-Pro-Piotr.local" tests="8" failures="0" errors="0" skipped="0" time="0.217085208">
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should return 403 if no organization found in user" time="0.008419708">
            <system-out>
[Database] Selected: SQLite

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should return 404 if organization does not exist in DB" time="0.001067041">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should allow request if within limit (Free plan)" time="0.001408333">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should block request if limit reached (Free plan)" time="0.001681541">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should allow request if within limit (Pro plan)" time="0.001261792">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should treat trial status as pro plan" time="0.001427666">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should handle undefined limits gracefully (warn and allow)" time="0.001342">
            <system-err>
Limit key unknown_limit_key not found for plan free

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should check max_members limit" time="0.001303167">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" timestamp="2025-12-21T15:18:08.967Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.222972666">
        <testcase classname="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" name="Project Quota Middleware (Integration) &gt; should skip check if no project_id provided" time="0.000876333">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" name="Project Quota Middleware (Integration) &gt; should allow request if quota is sufficient" time="0.001728875">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" name="Project Quota Middleware (Integration) &gt; should allow request if limit is NULL (unlimited)" time="0.00114925">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" name="Project Quota Middleware (Integration) &gt; should block 429 if quota exceeded" time="0.003312916">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" name="Project Quota Middleware (Integration) &gt; should cleanup temp file if quota exceeded" time="0.001204042">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" name="Project Quota Middleware (Integration) &gt; should handle errors gracefully (e.g. project not found)" time="0.001416667">
            <system-err>
Project quota check error: Error: Project not found
    at Statement.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/usageService.js:303:41)
    at Statement.replacement (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/node_modules/sqlite3/lib/trace.js:25:27)
    at Statement.replacement (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/node_modules/sqlite3/lib/trace.js:25:27)

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/quotaMiddleware.test.js" timestamp="2025-12-21T15:18:08.967Z" hostname="MacBook-Pro-Piotr.local" tests="8" failures="0" errors="0" skipped="0" time="0.268505125">
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceTokenQuota &gt; should return 401 if no orgId" time="0.000977875">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceTokenQuota &gt; should allow if usage is below limit" time="0.0025925">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceTokenQuota &gt; should block 429 if usage exceeds limit" time="0.00171575">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceTokenQuota &gt; should allow if overage is enabled even if exceeded" time="0.001212958">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceTokenQuota &gt; should set warning headers if &gt; 80%" time="0.001461167">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceStorageQuota &gt; should allow if allowed" time="0.001313">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceStorageQuota &gt; should block 429 if exceeded" time="0.001288208">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; recordTokenUsageAfterResponse &gt; should insert usage record into DB" time="0.051798167">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/superAdminMiddleware.test.js" timestamp="2025-12-21T15:18:08.967Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.194024959">
        <testcase classname="tests/unit/backend/middleware/superAdminMiddleware.test.js" name="SuperAdminMiddleware &gt; should call next() if user is superadmin" time="0.002104709">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/superAdminMiddleware.test.js" name="SuperAdminMiddleware &gt; should return 403 if user is admin (not super)" time="0.001209334">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/superAdminMiddleware.test.js" name="SuperAdminMiddleware &gt; should return 401 if token is invalid (bad signature)" time="0.000281583">
        </testcase>
    </testsuite>
</testsuites>
