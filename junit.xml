<?xml version="1.0" encoding="UTF-8" ?>
<testsuites name="vitest tests" tests="1392" failures="217" errors="0" time="23.395474961">
    <testsuite name="tests/unit/actionProposalEngine.test.js" timestamp="2025-12-21T11:11:50.056Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.19778375">
        <testcase classname="tests/unit/actionProposalEngine.test.js" name="ActionProposalEngine &gt; should generate proposals for USER_AT_RISK" time="0.006677209">
        </testcase>
        <testcase classname="tests/unit/actionProposalEngine.test.js" name="ActionProposalEngine &gt; should generate proposals for BLOCKED_INITIATIVE" time="0.000200083">
        </testcase>
        <testcase classname="tests/unit/actionProposalEngine.test.js" name="ActionProposalEngine &gt; should generate proposals for STRONG_TEAM_MEMBER" time="0.000170292">
        </testcase>
        <testcase classname="tests/unit/actionProposalEngine.test.js" name="ActionProposalEngine &gt; should be deterministic (return same output for same input)" time="0.000149791">
        </testcase>
        <testcase classname="tests/unit/actionProposalEngine.test.js" name="ActionProposalEngine &gt; should return sorted proposals by proposal_id" time="0.000300958">
        </testcase>
        <testcase classname="tests/unit/actionProposalEngine.test.js" name="ActionProposalEngine &gt; should adhere to the mandatory output model" time="0.000480417">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/aiPlaybookRoutingEngine.test.js" timestamp="2025-12-21T11:11:50.057Z" hostname="MacBook-Pro-Piotr.local" tests="29" failures="0" errors="0" skipped="0" time="0.086646083">
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_lte &gt; should match when metric is less than threshold" time="0.0007205">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_lte &gt; should match when metric equals threshold" time="0.000089125">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_lte &gt; should not match when metric is greater than threshold" time="0.000082125">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_lte &gt; should not match when metric is not found" time="0.0000805">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_lte &gt; should return false for invalid format" time="0.000070083">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_gte &gt; should match when metric is greater than threshold" time="0.000058209">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_gte &gt; should match when metric equals threshold" time="0.000045709">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_gte &gt; should not match when metric is less than threshold" time="0.000036584">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; flag_eq &gt; should match when flag equals expected value" time="0.000050542">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; flag_eq &gt; should not match when flag does not equal expected value" time="0.000054792">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; flag_eq &gt; should work with string values" time="0.000044542">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; has_open_tasks &gt; should match when open tasks exist and condition is true" time="0.000043333">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; has_open_tasks &gt; should match when no open tasks and condition is false" time="0.000033875">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; has_open_tasks &gt; should recognize in_progress as open" time="0.000029792">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; has_open_tasks &gt; should recognize PENDING as open" time="0.000029125">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; signal_present &gt; should match when signal is present" time="0.000044792">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; signal_present &gt; should not match when signal is not present" time="0.000034958">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; signal_present &gt; should handle simple string signals" time="0.000046083">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; time_since_step_gte &gt; should match when enough time has passed" time="0.000167375">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; time_since_step_gte &gt; should not match when not enough time has passed" time="0.00004875">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; time_since_step_gte &gt; should not match when step timestamp not found" time="0.00004025">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; unknown conditions &gt; should fail safely for unknown condition type" time="0.000151458">
            <system-err>
[AIPlaybookRoutingEngine] Unknown condition type: unknown_condition

            </system-err>
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; unknown conditions &gt; should fail safely for empty condition" time="0.000038">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateRouting &gt; should select first matching rule in first_match mode" time="0.000120834">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateRouting &gt; should use else_goto when no rules match" time="0.000047417">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateRouting &gt; should return null when no rules match and no else_goto" time="0.00005125">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateRouting &gt; should use linear flow when no branch_rules defined" time="0.00003625">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateRouting &gt; should record evaluation trace" time="0.000332334">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateRouting &gt; should skip rules with invalid conditions" time="0.00004525">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/aiResponsePostProcessor.test.js" timestamp="2025-12-21T11:11:50.059Z" hostname="MacBook-Pro-Piotr.local" tests="20" failures="0" errors="0" skipped="0" time="0.193724292">
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Memory Prefix &gt; should add memory prefix when memory count &gt; 0" time="0.000563042">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Memory Prefix &gt; should NOT add memory prefix when memory count is 0" time="0.000144417">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Memory Prefix &gt; should NOT duplicate memory prefix if already present" time="0.000079708">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; External Sources Prefix &gt; should add external prefix when external sources are used" time="0.000081">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; External Sources Prefix &gt; should NOT add external prefix when no external sources" time="0.000071167">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; External Sources Prefix &gt; should NOT duplicate external prefix if already present" time="0.000051125">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Combined Prefixes &gt; should add both prefixes when both memory and external sources exist" time="0.00006475">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Combined Prefixes &gt; should maintain correct order: memory first, then external" time="0.00005475">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Edge Cases &gt; should handle empty response safely" time="0.000039">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Edge Cases &gt; should handle null response safely" time="0.000047083">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Edge Cases &gt; should handle undefined context safely" time="0.000032167">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Edge Cases &gt; should handle null context safely" time="0.000026666">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Edge Cases &gt; should trim whitespace from response" time="0.000039125">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; getMemoryCount &gt; should count previous decisions" time="0.000035583">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; getMemoryCount &gt; should return memoryCount from projectMemory" time="0.000041208">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; getMemoryCount &gt; should return 1 when PMO health snapshot exists" time="0.000030916">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; getExternalSources &gt; should return externalSourcesUsed array" time="0.000244625">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; getExternalSources &gt; should derive sources from fetchedData" time="0.00029975">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; stripPrefixes &gt; should remove memory and external prefixes" time="0.000075417">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; stripPrefixes &gt; should handle text without prefixes" time="0.000037292">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/aiRoleGuard.test.js" timestamp="2025-12-21T11:11:50.060Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.187035083">
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Role Definitions &gt; should define three roles in correct hierarchy" time="0.001128875">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Role Definitions &gt; should define capabilities for each role" time="0.000191292">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Role Descriptions &gt; should return correct description for each role" time="0.000126">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Role Descriptions &gt; should default to ADVISOR description for unknown role" time="0.000052959">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; ADVISOR Role &gt; should allow explain actions" time="0.000176917">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; ADVISOR Role &gt; should block draft creation" time="0.000080542">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; ADVISOR Role &gt; should block execution actions" time="0.000063208">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; MANAGER Role &gt; should allow draft creation with approval required" time="0.000064125">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; MANAGER Role &gt; should block execution actions" time="0.00005125">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; OPERATOR Role &gt; should allow execution actions" time="0.000071834">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; OPERATOR Role &gt; should allow entity modifications" time="0.000058417">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Mutation Validation &gt; should block all mutations for ADVISOR" time="0.0000685">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Mutation Validation &gt; should allow mutations as drafts for MANAGER" time="0.000064167">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Mutation Validation &gt; should allow direct mutations for OPERATOR" time="0.000052875">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; isActionBlocked &gt; should return blocked with required role for insufficient permissions" time="0.000082541">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; isActionBlocked &gt; should return not blocked for allowed actions" time="0.000041042">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/analytics.service.test.ts" timestamp="2025-12-21T11:11:50.060Z" hostname="MacBook-Pro-Piotr.local" tests="8" failures="0" errors="0" skipped="0" time="0.190209834">
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; calculateAnalytics &gt; calculates analytics for empty arrays" time="0.00055875">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; calculateAnalytics &gt; calculates completion rate correctly" time="0.000150958">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; calculateAnalytics &gt; calculates initiative statistics" time="0.000132167">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; calculateAnalytics &gt; calculates total cost and benefit" time="0.000068542">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; generateBurnDownData &gt; generates burn down data for date range" time="0.000219458">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; generateBurnDownData &gt; handles empty task list" time="0.000054791">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; generateVelocityData &gt; generates velocity data for specified weeks" time="0.000119667">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; generateVelocityData &gt; uses default 8 weeks when not specified" time="0.00005025">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/api.service.test.ts" timestamp="2025-12-21T11:11:50.061Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.206681834">
        <testcase classname="tests/unit/api.service.test.ts" name="Api Service Unit Tests &gt; login: should store token and return user on success" time="0.002556167">
            <system-out>
Api.login called: { email: &apos;test@test.com&apos;, url: &apos;/api/auth/login&apos; }

            </system-out>
        </testcase>
        <testcase classname="tests/unit/api.service.test.ts" name="Api Service Unit Tests &gt; login: should throw error on failure" time="0.000666625">
            <system-out>
Api.login called: { email: &apos;test@test.com&apos;, url: &apos;/api/auth/login&apos; }

            </system-out>
        </testcase>
        <testcase classname="tests/unit/api.service.test.ts" name="Api Service Unit Tests &gt; getUsers: should send Authorization header" time="0.0003085">
        </testcase>
        <testcase classname="tests/unit/api.service.test.ts" name="Api Service Unit Tests &gt; getLLMProviders: should return list" time="0.00009625">
        </testcase>
        <testcase classname="tests/unit/api.service.test.ts" name="Api Service Unit Tests &gt; indexKnowledgeFiles: should trigger indexing" time="0.000157459">
        </testcase>
        <testcase classname="tests/unit/api.service.test.ts" name="Api Service Unit Tests &gt; saveSession: should post data" time="0.00014225">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/asyncJobService.test.js" timestamp="2025-12-21T11:11:50.061Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.319044666">
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; JOB_TYPES Constants &gt; should export EXECUTE_DECISION type" time="0.09612425">
            <system-out>
[Queue] Using Mock Queue for ai-tasks

            </system-out>
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; JOB_TYPES Constants &gt; should export ADVANCE_PLAYBOOK_STEP type" time="0.002299125">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; JOB_STATUSES Constants &gt; should export all required statuses" time="0.003443292">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; JOB_STATUSES Constants &gt; should have 6 status types" time="0.002268125">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export enqueueActionExecution" time="0.002176958">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export enqueuePlaybookAdvance" time="0.001344459">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export getJob" time="0.0028925">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export listJobs" time="0.00259875">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export retryJob" time="0.004171708">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export cancelJob" time="0.001182875">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export updateJobStatus" time="0.00178225">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export markDeadLetter" time="0.00168875">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export incrementAttempts" time="0.001029333">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="Action Error Codes &gt; should include async job error codes" time="0.003308167">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobProcessor &gt; should export processDecisionExecution" time="0.016628417">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobProcessor &gt; should export processPlaybookAdvance" time="0.000641625">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/breakGlassService.test.js" timestamp="2025-12-21T11:11:50.062Z" hostname="MacBook-Pro-Piotr.local" tests="15" failures="0" errors="0" skipped="0" time="0.119586333">
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; SCOPES &gt; should define all break-glass scopes" time="0.000613208">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; DEFAULT_DURATION_MINUTES &gt; should be 2 hours (120 minutes)" time="0.000091916">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; MAX_DURATION_MINUTES &gt; should be 24 hours (1440 minutes)" time="0.000063333">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; startSession &gt; should throw error for missing required parameters" time="0.000575375">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; startSession &gt; should throw error for invalid scope" time="0.000116084">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; startSession &gt; should throw error if session already exists for scope" time="0.000272417">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; startSession &gt; should create session successfully" time="0.000432125">
            <system-out>
[BreakGlass] Session started: test-uuid-1234 (scope: policy_engine_disabled) by user-1

            </system-out>
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; startSession &gt; should cap duration at MAX_DURATION_MINUTES" time="0.000183584">
            <system-out>
[BreakGlass] Session started: test-uuid-1234 (scope: emergency_access) by user-1

            </system-out>
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; closeSession &gt; should throw error for non-existent session" time="0.000200083">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; closeSession &gt; should throw error for already closed session" time="0.000187917">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; closeSession &gt; should close session successfully" time="0.000211208">
            <system-out>
[BreakGlass] Session closed: session-1 by user-1

            </system-out>
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; isBreakGlassActive &gt; should return false when no active session" time="0.000057959">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; isBreakGlassActive &gt; should return true when active session exists" time="0.000042959">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; getActiveSessions &gt; should return empty array when no sessions" time="0.000269375">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; getActiveSessions &gt; should return active sessions" time="0.000314791">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/connectorAdapter.test.js" timestamp="2025-12-21T11:11:50.063Z" hostname="MacBook-Pro-Piotr.local" tests="11" failures="0" errors="0" skipped="0" time="0.201843084">
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Dry-run Mode &gt; should return plan without execution in dry-run mode" time="0.008086125">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Dry-run Mode &gt; should respect sandbox_mode flag on config" time="0.000422125">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Error Handling &gt; should return error for unknown connector" time="0.000399875">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Error Handling &gt; should return error for unsupported action" time="0.000361666">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Error Handling &gt; should return error when connector not configured" time="0.000503">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Error Handling &gt; should return error when connector disconnected" time="0.000567958">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Plan Generation &gt; should generate Jira plan for issue_create" time="0.001116458">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Plan Generation &gt; should generate Slack plan for message_send" time="0.000345166">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Plan Generation &gt; should generate Google Calendar plan for event_create" time="0.000222166">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Execution (Mock) &gt; should execute Slack message_send successfully" time="0.000664834">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Execution (Mock) &gt; should include duration_ms in result" time="0.000319709">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/connectorRegistry.test.js" timestamp="2025-12-21T11:11:50.063Z" hostname="MacBook-Pro-Piotr.local" tests="14" failures="0" errors="0" skipped="0" time="0.196087792">
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getAllConnectors &gt; should return all available connectors" time="0.001570667">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getConnector &gt; should return connector by key" time="0.00017725">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getConnector &gt; should return null for unknown connector" time="0.00007625">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getConnectorsByCategory &gt; should return connectors filtered by category" time="0.000111167">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getConnectorsByCategory &gt; should return empty array for unknown category" time="0.000262125">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; hasCapability &gt; should return true for supported capability" time="0.000077667">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; hasCapability &gt; should return false for unsupported capability" time="0.000051042">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; hasCapability &gt; should return false for unknown connector" time="0.000039916">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; validateCredentials &gt; should validate all required credentials present" time="0.000114209">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; validateCredentials &gt; should identify missing required credentials" time="0.000105166">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; validateCredentials &gt; should handle unknown connector" time="0.000053875">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getRequiredCredentials &gt; should return required credentials for connector" time="0.000049541">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getRequiredCredentials &gt; should return empty array for unknown connector" time="0.000034417">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getAllCategories &gt; should return all categories" time="0.000098458">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/demoGuard.test.js" timestamp="2025-12-21T11:11:50.064Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.259788916">
        <testcase classname="tests/unit/demoGuard.test.js" name="Demo Guard Middleware &gt; should allow regular users to perform write operations" time="0.008440459">
        </testcase>
        <testcase classname="tests/unit/demoGuard.test.js" name="Demo Guard Middleware &gt; should allow demo users to perform read operations" time="0.0023485">
        </testcase>
        <testcase classname="tests/unit/demoGuard.test.js" name="Demo Guard Middleware &gt; should BLOCK demo users from performing write operations on protected routes" time="0.001941833">
            <system-err>
[DemoGuard] Blocked POST /api/tasks for Demo User undefined (Action: CREATE_TASKS)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/demoGuard.test.js" name="Demo Guard Middleware &gt; should ALLOW demo users to perform write operations on ALLOWED routes (AI Chat)" time="0.001016417">
        </testcase>
        <testcase classname="tests/unit/demoGuard.test.js" name="Demo Guard Middleware &gt; should ALLOW demo users to perform write operations on ALLOWED routes (Logout)" time="0.00128875">
        </testcase>
        <testcase classname="tests/unit/demoGuard.test.js" name="Demo Guard Middleware &gt; should passthrough if no user matches (unauthenticated requests handled elsewhere)" time="0.000934041">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/demoIsolation.test.js" timestamp="2025-12-21T11:11:50.064Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.218571042">
        <testcase classname="tests/unit/demoIsolation.test.js" name="Demo Guard Isolation Extension &gt; should allow Normal GET for demo user" time="0.006914708">
        </testcase>
        <testcase classname="tests/unit/demoIsolation.test.js" name="Demo Guard Isolation Extension &gt; should BLOCK demo user if they try to switch context via Query Param" time="0.001446">
            <system-err>
[DemoGuard] Blocked cross-tenant access attempt by Demo User undefined (Target: org-real, Actual: org-demo)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/demoIsolation.test.js" name="Demo Guard Isolation Extension &gt; should BLOCK demo user if they try to switch context via Body" time="0.00834425">
            <system-err>
[DemoGuard] Blocked cross-tenant access attempt by Demo User undefined (Target: org-real, Actual: org-demo)

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/drdStructure.test.ts" timestamp="2025-12-21T11:11:50.064Z" hostname="MacBook-Pro-Piotr.local" tests="7" failures="0" errors="0" skipped="0" time="0.214733625">
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; exports DRD_STRUCTURE as array" time="0.000508416">
        </testcase>
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; each axis has required properties" time="0.00040175">
        </testcase>
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; each area has required properties" time="0.001039417">
        </testcase>
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; each level has required properties" time="0.004928541">
        </testcase>
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; getQuestionsForAxis &gt; returns areas for valid axis ID" time="0.000127417">
        </testcase>
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; getQuestionsForAxis &gt; returns empty array for invalid axis ID" time="0.000273875">
        </testcase>
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; getQuestionsForAxis &gt; returns areas for different axis IDs" time="0.000106667">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/governanceAudit.test.js" timestamp="2025-12-21T11:11:50.065Z" hostname="MacBook-Pro-Piotr.local" tests="8" failures="0" errors="0" skipped="0" time="0.153512917">
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; logAudit &gt; should throw error for missing required parameters" time="0.0012315">
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; logAudit &gt; should throw error for invalid action" time="0.000236208">
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; logAudit &gt; should log audit entry successfully" time="0.000759834">
            <system-out>
[GovernanceAudit] Logged: CREATE on POLICY_RULE/rule-1 by user-1

            </system-out>
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; getAuditLog &gt; should query with organization filter" time="0.000223666">
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; getAuditLog &gt; should bypass org filter for superadmin" time="0.000124417">
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; getAuditLog &gt; should support action filter" time="0.000294292">
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; exportAuditLog &gt; should export as JSON by default" time="0.000136458">
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; exportAuditLog &gt; should export as CSV when specified" time="0.000155042">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/notificationOutboxService.test.js" timestamp="2025-12-21T11:11:50.065Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.238990584">
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; NOTIFICATION_TYPES Constants &gt; should export APPROVAL_DUE type" time="0.00881125">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; NOTIFICATION_TYPES Constants &gt; should export PLAYBOOK_STUCK type" time="0.001877584">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; NOTIFICATION_TYPES Constants &gt; should export DEAD_LETTER type" time="0.001382875">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; NOTIFICATION_TYPES Constants &gt; should export ESCALATION type" time="0.001269959">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; NOTIFICATION_TYPES Constants &gt; should have 4 notification types" time="0.002126541">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; OUTBOX_STATUSES Constants &gt; should export QUEUED status" time="0.000861458">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; OUTBOX_STATUSES Constants &gt; should export SENT status" time="0.000864542">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; OUTBOX_STATUSES Constants &gt; should export FAILED status" time="0.000796125">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; MAX_ATTEMPTS &gt; should be 3" time="0.001039958">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; Service Methods Existence &gt; should export enqueue" time="0.001247917">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; Service Methods Existence &gt; should export shouldNotify" time="0.001791458">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; Service Methods Existence &gt; should export getUserPreferences" time="0.001503709">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; Service Methods Existence &gt; should export updateUserPreferences" time="0.001316584">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; Service Methods Existence &gt; should export processQueue" time="0.001301792">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; Service Methods Existence &gt; should export getOutboxStats" time="0.002199166">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService User Preferences &gt; should return true when no preferences set (default behavior)" time="0.001959958">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/pdfExport.test.ts" timestamp="2025-12-21T11:11:50.066Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.2209535">
        <testcase classname="tests/unit/pdfExport.test.ts" name="Service Test: pdfExport &gt; exportReportToPDF &gt; returns false when element is not found" time="0.001839333">
            <system-err>
Element with id non-existent not found

            </system-err>
        </testcase>
        <testcase classname="tests/unit/pdfExport.test.ts" name="Service Test: pdfExport &gt; exportReportToPDF &gt; exports PDF successfully" time="0.00048425">
        </testcase>
        <testcase classname="tests/unit/pdfExport.test.ts" name="Service Test: pdfExport &gt; exportReportToPDF &gt; handles errors gracefully" time="0.001236625">
            <system-err>
PDF Export failed: Error: Canvas error
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/pdfExport.test.ts:89:52
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/pdfExport.test.ts" name="Service Test: pdfExport &gt; exportDashboardToPDF &gt; creates PDF with metadata" time="0.008757042">
        </testcase>
        <testcase classname="tests/unit/pdfExport.test.ts" name="Service Test: pdfExport &gt; exportDashboardToPDF &gt; handles optional metadata" time="0.00026275">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/piiRedactor.test.js" timestamp="2025-12-21T11:11:50.066Z" hostname="MacBook-Pro-Piotr.local" tests="17" failures="0" errors="0" skipped="0" time="0.170037125">
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redactEmails &gt; should redact email addresses" time="0.000534167">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redactEmails &gt; should redact multiple emails" time="0.00008475">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redactEmails &gt; should return non-string values unchanged" time="0.000078">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redactTokens &gt; should redact JWT-like tokens" time="0.000178042">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redactTokens &gt; should handle partial JWT patterns" time="0.000063916">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should redact email fields" time="0.000119917">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should redact name fields" time="0.000061042">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should redact password fields" time="0.000062916">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should redact token and secret fields" time="0.00007675">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should redact inline emails in string values" time="0.000062292">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should handle arrays with email strings" time="0.000064791">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should handle nested objects" time="0.000053666">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should not mutate original object" time="0.00004325">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should handle null and undefined" time="0.000049">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redactKeys &gt; should redact specific keys" time="0.000072833">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; createAuditSnapshot &gt; should return JSON string with redacted PII" time="0.000070208">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; DEFAULT_PII_FIELDS &gt; should include common PII fields" time="0.000407292">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/policyEngine.test.js" timestamp="2025-12-21T11:11:50.067Z" hostname="MacBook-Pro-Piotr.local" tests="21" failures="0" errors="0" skipped="0" time="0.180474208">
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; Safety Guardrails Constants &gt; NEVER_AUTO_APPROVE_RISK_LEVELS should include HIGH" time="0.001271708">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; Safety Guardrails Constants &gt; ALWAYS_MANUAL_ACTION_TYPES should include MEETING_SCHEDULE" time="0.000128416">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; Safety Guardrails Constants &gt; should not include LOW in NEVER_AUTO_APPROVE_RISK_LEVELS" time="0.000124083">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; risk_level_lte &gt; should match when proposal risk is lower or equal" time="0.000159125">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; risk_level_lte &gt; should not match when proposal risk is higher" time="0.000087125">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; action_type_in &gt; should match when action type is in list" time="0.000079708">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; action_type_in &gt; should not match when action type is not in list" time="0.000064291">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; action_type_in &gt; should return false for non-array input" time="0.000039084">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; scope_eq &gt; should match when scope equals" time="0.000064042">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; scope_eq &gt; should not match when scope differs" time="0.000070584">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; signal_in &gt; should match when signal is in list" time="0.000051875">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; signal_in &gt; should not match when signal is not in list" time="0.000041542">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; signal_in &gt; should return false for non-array input" time="0.000033541">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; time_window &gt; should always match for anytime" time="0.000041084">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; time_window &gt; should return false for unrecognized values" time="0.000030875">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; evaluateConditions (Logic Tests) &gt; should return true when all conditions match" time="0.000075917">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; evaluateConditions (Logic Tests) &gt; should return false when any condition fails" time="0.000042833">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; evaluateConditions (Logic Tests) &gt; should return false for unknown conditions (safety)" time="0.000148125">
            <system-err>
[PolicyEngine] Unknown condition: unknown_condition

            </system-err>
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; evaluateConditions (Logic Tests) &gt; should return true for empty conditions" time="0.000034875">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Safety Checks &gt; HIGH risk is in NEVER_AUTO_APPROVE list" time="0.000035209">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Safety Checks &gt; MEETING_SCHEDULE is in ALWAYS_MANUAL list" time="0.000037958">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/regulatoryModeGuard.test.js" timestamp="2025-12-21T11:11:50.068Z" hostname="MacBook-Pro-Piotr.local" tests="31" failures="0" errors="0" skipped="0" time="0.165969584">
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Action Classification &gt; ALLOWED_ACTIONS &gt; should include all advisory-only actions" time="0.000867667">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Action Classification &gt; BLOCKED_ACTIONS &gt; should include all mutation actions" time="0.000204958">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should allow EXPLAIN_CONTEXT in regulatory mode" time="0.000108959">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should allow ANALYZE_RISKS in regulatory mode" time="0.000053042">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should allow EDUCATE in regulatory mode" time="0.000056042">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should BLOCK CREATE_DRAFT_TASK in regulatory mode" time="0.000038458">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should BLOCK CREATE_DRAFT_INITIATIVE in regulatory mode" time="0.000045375">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should BLOCK UPDATE_STATUS in regulatory mode" time="0.00004575">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should BLOCK EXECUTE_ACTION in regulatory mode" time="0.000038042">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should BLOCK MODIFY_ENTITY in regulatory mode" time="0.000049375">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should BLOCK DELETE_ENTITY in regulatory mode" time="0.0000335">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should block actions containing mutation keywords" time="0.00006975">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should allow actions without mutation keywords" time="0.000044959">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should handle null/undefined action gracefully" time="0.000033792">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Regulatory Mode Prompt &gt; should contain prohibition statements" time="0.00006375">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Regulatory Mode Prompt &gt; should forbid action verbs" time="0.000056917">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Regulatory Mode Prompt &gt; should require advisory language" time="0.000042375">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Regulatory Mode Prompt &gt; should include example responses" time="0.000034292">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Forbidden Verbs List &gt; should contain all dangerous verbs" time="0.000175959">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Advisory Phrases List &gt; should contain recommended advisory language" time="0.000062167">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should block CREATE_DRAFT_TASK when regulatory mode is enabled" time="0.000171458">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should block UPDATE_STATUS when regulatory mode is enabled" time="0.000060208">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should allow EXPLAIN_CONTEXT when regulatory mode is enabled" time="0.000052417">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should allow ANALYZE_RISKS when regulatory mode is enabled" time="0.000058584">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should NOT block actions when regulatory mode is disabled" time="0.000038667">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should NOT block when no projectId is provided" time="0.000032708">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should log blocked attempts to audit trail" time="0.00049075">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; getStatus &gt; should return full status object when enabled" time="0.000094542">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; getStatus &gt; should return full status object when disabled" time="0.00004325">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Integration with AI Role System &gt; should override ANY role when regulatory mode is active" time="0.000106375">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Safety: Fail-Safe Behavior &gt; should default to blocking when database error occurs" time="0.000026084">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/roi.test.ts" timestamp="2025-12-21T11:11:50.069Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.214174625">
        <testcase classname="tests/unit/roi.test.ts" name="Unit Test: ROI Calculation &gt; should calculate ROI correctly for positive values" time="0.000926792">
        </testcase>
        <testcase classname="tests/unit/roi.test.ts" name="Unit Test: ROI Calculation &gt; should handle zero cost to avoid infinity" time="0.000101959">
        </testcase>
        <testcase classname="tests/unit/roi.test.ts" name="Unit Test: ROI Calculation &gt; should return 0 for break-even" time="0.000071875">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/secretsVault.test.js" timestamp="2025-12-21T11:11:50.070Z" hostname="MacBook-Pro-Piotr.local" tests="12" failures="0" errors="0" skipped="0" time="0.173277167">
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Encryption/Decryption &gt; should encrypt and decrypt a string successfully" time="0.002392167">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Encryption/Decryption &gt; should encrypt and decrypt an object successfully" time="0.0004415">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Encryption/Decryption &gt; should return null when decrypting null/undefined" time="0.000141792">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Encryption/Decryption &gt; should throw on invalid encrypted data" time="0.000499333">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Encryption/Decryption &gt; should produce different ciphertext for same plaintext (random IV)" time="0.0002535">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Redaction &gt; should redact string values showing only last 4 characters" time="0.000094917">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Redaction &gt; should fully redact short strings" time="0.000056917">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Redaction &gt; should recursively redact nested objects" time="0.000060875">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Redaction &gt; should return empty object for null/undefined" time="0.00006375">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Validation &gt; should validate present fields as valid" time="0.000099791">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Validation &gt; should identify missing fields" time="0.000395209">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Validation &gt; should handle null/undefined secrets" time="0.000065542">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/slaService.test.js" timestamp="2025-12-21T11:11:50.070Z" hostname="MacBook-Pro-Piotr.local" tests="7" failures="0" errors="0" skipped="0" time="0.27962025">
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; SLA_CHECK_INTERVAL_MS &gt; should be 10 minutes in milliseconds" time="0.007420084">
        </testcase>
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; Service Methods Existence &gt; should export findExpiredAssignments" time="0.001918042">
        </testcase>
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; Service Methods Existence &gt; should export markExpired" time="0.0018975">
        </testcase>
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; Service Methods Existence &gt; should export findOrgAdmin" time="0.002014958">
        </testcase>
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; Service Methods Existence &gt; should export escalateAssignment" time="0.001866084">
        </testcase>
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; Service Methods Existence &gt; should export runSlaCheck" time="0.001244958">
        </testcase>
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; Service Methods Existence &gt; should export getSlaHealth" time="0.00206025">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/store.test.ts" timestamp="2025-12-21T11:11:50.070Z" hostname="MacBook-Pro-Piotr.local" tests="19" failures="0" errors="0" skipped="0" time="0.19787675">
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; initializes with correct default values" time="0.000887541">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets current view" time="0.000165125">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets session mode" time="0.000115916">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets current user" time="0.000266792">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; toggles sidebar open state" time="0.000098209">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; toggles sidebar collapse" time="0.00008525">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; adds chat message" time="0.000513958">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets chat messages" time="0.000157417">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; clears chat" time="0.000133083">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets bot typing state" time="0.000092">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets current stream content" time="0.000068708">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; updates free session data" time="0.000065709">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; updates free session data with function" time="0.000079708">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; updates full session data" time="0.000075584">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets AI config" time="0.000080958">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; toggles theme" time="0.000086958">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; updates last chat message" time="0.000090084">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; logout resets state" time="0.000119875">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets current project ID" time="0.00007325">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/templateGraphService.test.js" timestamp="2025-12-21T11:11:50.071Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.172273875">
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; createEmptyGraph &gt; creates a graph with START and END nodes connected" time="0.000946875">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; stepsToGraph &gt; converts empty steps to START  END graph" time="0.000237875">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; stepsToGraph &gt; converts steps array to linear graph" time="0.000219959">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; stepsToGraph &gt; preserves step data in nodes" time="0.000333875">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; graphToSteps &gt; returns empty array for invalid graph" time="0.000131417">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; graphToSteps &gt; skips START and END nodes in output" time="0.000079">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; graphToSteps &gt; converts linear graph to ordered steps" time="0.000118125">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; validateDAG &gt; returns valid for acyclic graph" time="0.000140167">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; validateDAG &gt; detects simple cycle" time="0.000071125">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; validateDAG &gt; returns invalid for null graph" time="0.000050167">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; findDeadEnds &gt; returns empty for valid graph" time="0.000078917">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; findDeadEnds &gt; finds nodes without outgoing edges" time="0.00014025">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; findBranchesWithoutElse &gt; returns empty when no BRANCH nodes" time="0.000074166">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; findBranchesWithoutElse &gt; finds BRANCH node without else path" time="0.000061625">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; findBranchesWithoutElse &gt; passes when BRANCH has else path" time="0.000048">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; roundtrip: steps  graph  steps &gt; preserves data through roundtrip" time="0.000080875">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/templateValidationService.test.js" timestamp="2025-12-21T11:11:50.072Z" hostname="MacBook-Pro-Piotr.local" tests="9" failures="0" errors="0" skipped="0" time="0.203392958">
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validate &gt; returns error for missing template graph" time="0.000798333">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validate &gt; returns error for invalid JSON in graph" time="0.000202917">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validate &gt; validates empty trigger_signal" time="0.000343208">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validateGraph &gt; returns error for missing nodes array" time="0.000110833">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validateGraph &gt; returns error for missing edges array" time="0.000098791">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validateGraph &gt; returns error when no START node exists" time="0.0001015">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validateGraph &gt; calls validateDAG and reports cycles" time="0.000211958">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validateGraph &gt; calls findDeadEnds and reports dead-end nodes" time="0.000146792">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validateGraph &gt; calls findBranchesWithoutElse and reports missing else" time="0.000135666">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/transformationEngine.test.ts" timestamp="2025-12-21T11:11:50.073Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.174522833">
        <testcase classname="tests/unit/transformationEngine.test.ts" name="Service Test: transformationEngine &gt; generates initiatives from session" time="0.001064667">
        </testcase>
        <testcase classname="tests/unit/transformationEngine.test.ts" name="Service Test: transformationEngine &gt; generates initiatives with required properties" time="0.001613667">
        </testcase>
        <testcase classname="tests/unit/transformationEngine.test.ts" name="Service Test: transformationEngine &gt; generates initiatives only for levels above current" time="0.000372">
        </testcase>
        <testcase classname="tests/unit/transformationEngine.test.ts" name="Service Test: transformationEngine &gt; handles session with no gaps" time="0.000092125">
        </testcase>
        <testcase classname="tests/unit/transformationEngine.test.ts" name="Service Test: transformationEngine &gt; assigns priority based on current level" time="0.000083791">
        </testcase>
        <testcase classname="tests/unit/transformationEngine.test.ts" name="Service Test: transformationEngine &gt; assigns complexity based on target level" time="0.000725125">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/transformationScenarios.test.ts" timestamp="2025-12-21T11:11:50.073Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.170779166">
        <testcase classname="tests/unit/transformationScenarios.test.ts" name="Transformation Scenarios Logic &gt; should have 6 unique scenarios" time="0.000504417">
        </testcase>
        <testcase classname="tests/unit/transformationScenarios.test.ts" name="Transformation Scenarios Logic &gt; recommendScenario should return stabilize for high risk &amp; low budget" time="0.000095708">
        </testcase>
        <testcase classname="tests/unit/transformationScenarios.test.ts" name="Transformation Scenarios Logic &gt; recommendScenario should return quickwins for low risk &amp; low budget" time="0.00008575">
        </testcase>
        <testcase classname="tests/unit/transformationScenarios.test.ts" name="Transformation Scenarios Logic &gt; recommendScenario should return foundation for high risk &amp; high budget" time="0.000062334">
        </testcase>
        <testcase classname="tests/unit/transformationScenarios.test.ts" name="Transformation Scenarios Logic &gt; recommendScenario should default to hybrid" time="0.000061291">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/utils.test.ts" timestamp="2025-12-21T11:11:50.073Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.179352708">
        <testcase classname="tests/unit/utils.test.ts" name="Unit Test: Utilities &gt; should have utility functions available" time="0.000487541">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/workqueueService.test.js" timestamp="2025-12-21T11:11:50.073Z" hostname="MacBook-Pro-Piotr.local" tests="13" failures="0" errors="0" skipped="0" time="0.213368209">
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; ASSIGNMENT_STATUSES Constants &gt; should export PENDING status" time="0.007146917">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; ASSIGNMENT_STATUSES Constants &gt; should export ACKED status" time="0.001056458">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; ASSIGNMENT_STATUSES Constants &gt; should export DONE status" time="0.001102209">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; ASSIGNMENT_STATUSES Constants &gt; should export EXPIRED status" time="0.00073775">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; ASSIGNMENT_STATUSES Constants &gt; should have 4 status types" time="0.001271084">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; DEFAULT_SLA_HOURS &gt; should default to 48 hours" time="0.001024833">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export assignApproval" time="0.000852792">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export acknowledgeApproval" time="0.000834167">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export completeApproval" time="0.001193791">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export getMyApprovals" time="0.000798208">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export getOrgApprovals" time="0.000980792">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export getOverdueCount" time="0.001274375">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export getAssignmentByProposal" time="0.000805209">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/hooks/useAIStream.test.ts" timestamp="2025-12-21T11:11:50.074Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.1928805">
        <testcase classname="tests/unit/hooks/useAIStream.test.ts" name="Hook Test: useAIStream &gt; initializes with correct default values" time="0.006177041">
        </testcase>
        <testcase classname="tests/unit/hooks/useAIStream.test.ts" name="Hook Test: useAIStream &gt; calls API with correct parameters" time="0.005429583">
            <system-out>
[DEBUG-D] startStream entry: {
  msgLength: 12,
  historyLength: 0,
  hasSystemPrompt: true,
  hasContext: false
}
[DEBUG-A,C] startStream onDone: { responseLength: 11 }

            </system-out>
        </testcase>
        <testcase classname="tests/unit/hooks/useAIStream.test.ts" name="Hook Test: useAIStream &gt; updates stream content as chunks arrive" time="0.001500208">
            <system-out>
[DEBUG-D] startStream entry: {
  msgLength: 4,
  historyLength: 0,
  hasSystemPrompt: false,
  hasContext: false
}
[DEBUG-A,C] startStream onDone: { responseLength: 11 }

            </system-out>
        </testcase>
        <testcase classname="tests/unit/hooks/useAIStream.test.ts" name="Hook Test: useAIStream &gt; calls onStreamDone callback when stream completes" time="0.0023345">
            <system-out>
[DEBUG-D] startStream entry: {
  msgLength: 4,
  historyLength: 0,
  hasSystemPrompt: false,
  hasContext: false
}
[DEBUG-A,C] startStream onDone: { responseLength: 8 }

            </system-out>
        </testcase>
        <testcase classname="tests/unit/hooks/useAIStream.test.ts" name="Hook Test: useAIStream &gt; handles stream errors" time="0.005553833">
            <system-out>
[DEBUG-D] startStream entry: {
  msgLength: 4,
  historyLength: 0,
  hasSystemPrompt: false,
  hasContext: false
}

[DEBUG-A,C] startStream error: { errorMsg: &apos;Error: Stream failed&apos; }

            </system-out>
            <system-err>
AI Stream Error: Error: Stream failed
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/hooks/useAIStream.test.ts:87:23
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/hooks/useAIStream.test.ts" name="Hook Test: useAIStream &gt; sets bot typing state correctly" time="0.003610833">
            <system-out>
[DEBUG-D] startStream entry: {
  msgLength: 4,
  historyLength: 0,
  hasSystemPrompt: false,
  hasContext: false
}
[DEBUG-A,C] startStream onDone: { responseLength: 11 }

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/hooks/useIndependentAI.test.ts" timestamp="2025-12-21T11:11:50.074Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.226318333">
        <testcase classname="tests/unit/hooks/useIndependentAI.test.ts" name="useIndependentAI &gt; initializes with default state" time="0.007260041">
        </testcase>
        <testcase classname="tests/unit/hooks/useIndependentAI.test.ts" name="useIndependentAI &gt; callAI manages loading state and accumulates stream" time="0.001697667">
        </testcase>
        <testcase classname="tests/unit/hooks/useIndependentAI.test.ts" name="useIndependentAI &gt; refineText calls callAI with correct prompt and system instruction" time="0.001962041">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/hooks/useScreenContext.test.ts" timestamp="2025-12-21T11:11:50.074Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.170154333">
        <testcase classname="tests/unit/hooks/useScreenContext.test.ts" name="Hook Test: useScreenContext &gt; sets screen context on mount after debounce" time="0.009075458">
        </testcase>
        <testcase classname="tests/unit/hooks/useScreenContext.test.ts" name="Hook Test: useScreenContext &gt; updates context when data changes" time="0.001596291">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/accessPolicyService.test.js" timestamp="2025-12-21T11:11:50.075Z" hostname="MacBook-Pro-Piotr.local" tests="10" failures="8" errors="0" skipped="0" time="0.150635542">
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; getOrganizationType &gt; should return organization type for valid org" time="0.002863792">
            <failure message="Cannot read properties of null (reading &apos;id&apos;)" type="TypeError">
TypeError: Cannot read properties of null (reading &apos;id&apos;)
  tests/unit/backend/accessPolicyService.test.js:65:27
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; getOrganizationType &gt; should return null for non-existent org" time="0.001304833">
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; getOrganizationType &gt; should handle database errors" time="0.003675584">
            <failure message="promise resolved &quot;null&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;null&quot; instead of rejecting

- Expected: 
Error {
  &quot;message&quot;: &quot;rejected promise&quot;,
}

+ Received: 
null

  tests/unit/backend/accessPolicyService.test.js:87:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; checkAccess &gt; should allow access for active trial org" time="0.001477791">
            <system-err>
[AccessPolicyService] Error checking access: Error: SQLITE_ERROR: no such column: trial_tokens_used
--&gt; in Database#get(&apos;SELECT trial_tokens_used FROM organizations WHERE id = ?&apos;, [ &apos;org-test-123&apos; ], [Function (anonymous)])
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/accessPolicyService.js:293:16
    at new Promise (&lt;anonymous&gt;)
    at Object.getTrialUsage (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/accessPolicyService.js:292:16)
    at Object.checkAccess (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/accessPolicyService.js:318:37)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/accessPolicyService.test.js:121:54
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;) {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;,
  __augmented: true
}

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; checkAccess &gt; should deny access for expired trial" time="0.002086625">
            <system-err>
[AccessPolicyService] Error checking access: Error: SQLITE_ERROR: no such column: trial_tokens_used
--&gt; in Database#get(&apos;SELECT trial_tokens_used FROM organizations WHERE id = ?&apos;, [ &apos;org-test-123&apos; ], [Function (anonymous)])
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/accessPolicyService.js:293:16
    at new Promise (&lt;anonymous&gt;)
    at Object.getTrialUsage (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/accessPolicyService.js:292:16)
    at Object.checkAccess (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/accessPolicyService.js:318:37)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/accessPolicyService.test.js:144:54
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;) {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;,
  __augmented: true
}

            </system-err>
            <failure message="expected true to be false // Object.is equality" type="AssertionError">
AssertionError: expected true to be false // Object.is equality

- Expected
+ Received

- false
+ true

  tests/unit/backend/accessPolicyService.test.js:146:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; checkAccess &gt; should deny access when AI limit reached" time="0.001053208">
            <system-err>
[AccessPolicyService] Error checking access: Error: SQLITE_ERROR: no such column: trial_tokens_used
--&gt; in Database#get(&apos;SELECT trial_tokens_used FROM organizations WHERE id = ?&apos;, [ &apos;org-test-123&apos; ], [Function (anonymous)])
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/accessPolicyService.js:293:16
    at new Promise (&lt;anonymous&gt;)
    at Object.getTrialUsage (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/accessPolicyService.js:292:16)
    at Object.checkAccess (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/accessPolicyService.js:318:37)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/accessPolicyService.test.js:175:54
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;) {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;,
  __augmented: true
}

            </system-err>
            <failure message="expected true to be false // Object.is equality" type="AssertionError">
AssertionError: expected true to be false // Object.is equality

- Expected
+ Received

- false
+ true

  tests/unit/backend/accessPolicyService.test.js:177:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; checkAccess &gt; should deny access for demo mode mutations" time="0.0006325">
            <system-err>
[AccessPolicyService] Error checking access: Error: SQLITE_ERROR: no such column: trial_tokens_used
--&gt; in Database#get(&apos;SELECT trial_tokens_used FROM organizations WHERE id = ?&apos;, [ &apos;org-test-123&apos; ], [Function (anonymous)])
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/accessPolicyService.js:293:16
    at new Promise (&lt;anonymous&gt;)
    at Object.getTrialUsage (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/accessPolicyService.js:292:16)
    at Object.checkAccess (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/accessPolicyService.js:318:37)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/accessPolicyService.test.js:196:54
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;) {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;,
  __augmented: true
}

            </system-err>
            <failure message="expected true to be false // Object.is equality" type="AssertionError">
AssertionError: expected true to be false // Object.is equality

- Expected
+ Received

- false
+ true

  tests/unit/backend/accessPolicyService.test.js:198:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; getOrganizationLimits &gt; should return default limits for trial org without custom limits" time="0.000831292">
            <failure message="Cannot read properties of null (reading &apos;max_projects&apos;)" type="TypeError">
TypeError: Cannot read properties of null (reading &apos;max_projects&apos;)
  tests/unit/backend/accessPolicyService.test.js:223:27
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; getOrganizationLimits &gt; should return custom limits when set" time="0.000862458">
            <failure message="Cannot read properties of null (reading &apos;max_projects&apos;)" type="TypeError">
TypeError: Cannot read properties of null (reading &apos;max_projects&apos;)
  tests/unit/backend/accessPolicyService.test.js:244:27
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; Multi-Tenant Isolation &gt; should only return limits for specified organization" time="0.000816791">
            <failure message="expected &quot;vi.fn()&quot; to be called at least once" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called at least once
  tests/unit/backend/accessPolicyService.test.js:273:32
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/actionDecision.service.test.js" timestamp="2025-12-21T11:11:50.077Z" hostname="MacBook-Pro-Piotr.local" tests="12" failures="0" errors="0" skipped="6" time="0.187528209">
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; validation &gt; should throw error for missing required fields" time="0.001332208">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; validation &gt; should throw error for missing organization_id" time="0.000161792">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; validation &gt; should throw error for invalid decision type" time="0.000109791">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; MODIFIED_ALLOWLIST &gt; should define allowlist for TASK_CREATE" time="0.000344958">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; MODIFIED_ALLOWLIST &gt; should define allowlist for PLAYBOOK_ASSIGN" time="0.000102875">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; MODIFIED_ALLOWLIST &gt; should define allowlist for MEETING_SCHEDULE" time="0.000083042">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; getDecisionsByProposal &gt; should query decisions by proposal_id" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; getDecisionsByProposal &gt; should parse JSON fields" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; getAuditLog - skipped due to CJS/ESM mock interop &gt; should enforce organization isolation" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; getAuditLog - skipped due to CJS/ESM mock interop &gt; should support SUPERADMIN_BYPASS for global access" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; getAuditLog - skipped due to CJS/ESM mock interop &gt; should support filtering by actionType" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; getAuditLog - skipped due to CJS/ESM mock interop &gt; should support filtering by decision" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/activityService.test.js" timestamp="2025-12-21T11:11:50.078Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.775843542">
        <testcase classname="tests/unit/backend/activityService.test.js" name="Backend Service Test: ActivityService &gt; log &gt; logs activity with all parameters" time="0.103261666">
        </testcase>
        <testcase classname="tests/unit/backend/activityService.test.js" name="Backend Service Test: ActivityService &gt; log &gt; handles optional parameters" time="0.101950916">
        </testcase>
        <testcase classname="tests/unit/backend/activityService.test.js" name="Backend Service Test: ActivityService &gt; getRecent &gt; fetches recent activities with default limit" time="0.110627542">
        </testcase>
        <testcase classname="tests/unit/backend/activityService.test.js" name="Backend Service Test: ActivityService &gt; getRecent &gt; fetches recent activities with custom limit" time="0.103263667">
        </testcase>
        <testcase classname="tests/unit/backend/activityService.test.js" name="Backend Service Test: ActivityService &gt; getRecent &gt; handles database errors gracefully" time="0.001229667">
        </testcase>
        <testcase classname="tests/unit/backend/activityService.test.js" name="Backend Service Test: ActivityService &gt; getByOrganization &gt; fetches activities for organization" time="0.101039375">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiActionExecutor.test.js" timestamp="2025-12-21T11:11:50.078Z" hostname="MacBook-Pro-Piotr.local" tests="14" failures="7" errors="0" skipped="0" time="0.133440333">
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction() &gt; should create action request successfully" time="0.004688333">
            <failure message="expected &apos;APPROVED&apos; to be &apos;PENDING&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;APPROVED&apos; to be &apos;PENDING&apos; // Object.is equality

Expected: &quot;PENDING&quot;
Received: &quot;APPROVED&quot;

  tests/unit/backend/aiActionExecutor.test.js:79:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction() &gt; should block action when regulatory mode is enabled" time="0.000364709">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction() &gt; should block action when AI role guard blocks it" time="0.000365625">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction() &gt; should require approval for MANAGER role actions" time="0.000211875">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction() &gt; should block action when policy engine denies it" time="0.000187458">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction() &gt; should allow action without projectId" time="0.0002355">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; approveAction() &gt; should approve pending action" time="0.000195917">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; approveAction() &gt; should reject approval for non-pending action" time="0.002445917">
            <failure message="promise resolved &quot;{ success: true, (2) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ success: true, (2) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;actionId&quot;: &quot;action-123&quot;,
+   &quot;status&quot;: &quot;APPROVED&quot;,
+   &quot;success&quot;: true,
  }

  tests/unit/backend/aiActionExecutor.test.js:253:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; rejectAction() &gt; should reject pending action" time="0.000373709">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; executeAction() &gt; should execute approved action" time="0.000596542">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/aiActionExecutor.test.js:300:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; executeAction() &gt; should reject execution of non-approved action" time="0.000480083">
            <failure message="promise resolved &quot;{ success: false, (1) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ success: false, (1) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;error&quot;: &quot;Action is PENDING, not APPROVED&quot;,
+   &quot;success&quot;: false,
  }

  tests/unit/backend/aiActionExecutor.test.js:316:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; getAction() &gt; should return action by ID" time="0.000300166">
            <failure message="AIActionExecutor.getAction is not a function" type="TypeError">
TypeError: AIActionExecutor.getAction is not a function
  tests/unit/backend/aiActionExecutor.test.js:332:51
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; getAction() &gt; should return null for non-existent action" time="0.00034075">
            <failure message="AIActionExecutor.getAction is not a function" type="TypeError">
TypeError: AIActionExecutor.getAction is not a function
  tests/unit/backend/aiActionExecutor.test.js:343:51
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; listActions() &gt; should return list of actions" time="0.000187917">
            <failure message="AIActionExecutor.listActions is not a function" type="TypeError">
TypeError: AIActionExecutor.listActions is not a function
  tests/unit/backend/aiActionExecutor.test.js:367:52
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiActions.test.js" timestamp="2025-12-21T11:11:50.079Z" hostname="MacBook-Pro-Piotr.local" tests="23" failures="0" errors="0" skipped="0" time="0.194156417">
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should have 7 action types" time="0.010810583">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define CREATE_DRAFT_TASK type" time="0.000181">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define CREATE_DRAFT_INITIATIVE type" time="0.000083292">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define SUGGEST_ROADMAP_CHANGE type" time="0.000074792">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define GENERATE_REPORT type" time="0.000062292">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define PREPARE_DECISION_SUMMARY type" time="0.000046083">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define EXPLAIN_CONTEXT type" time="0.000043125">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define ANALYZE_RISKS type" time="0.000038209">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_STATUS &gt; should define PENDING status" time="0.000062333">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_STATUS &gt; should define APPROVED status" time="0.000061">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_STATUS &gt; should define REJECTED status" time="0.000042875">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_STATUS &gt; should define EXECUTED status" time="0.000034">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; Service Structure &gt; should export requestAction function" time="0.000032333">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; Service Structure &gt; should export createDraft function" time="0.000029334">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; Service Structure &gt; should export approveAction function" time="0.000028125">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; Service Structure &gt; should export rejectAction function" time="0.000028667">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; Service Structure &gt; should export getPendingActions function" time="0.000026083">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; Service Structure &gt; should export executeAction function" time="0.000026125">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIAuditLogger &gt; Service Structure &gt; should export logInteraction function" time="0.00160775">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIAuditLogger &gt; Service Structure &gt; should export logSuggestion function" time="0.000213125">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIAuditLogger &gt; Service Structure &gt; should export recordUserDecision function" time="0.000066834">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIAuditLogger &gt; Service Structure &gt; should export getAuditLogs function" time="0.0000385">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIAuditLogger &gt; Service Structure &gt; should export getAuditStats function" time="0.000039208">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiAnalyticsService.test.js" timestamp="2025-12-21T11:11:50.080Z" hostname="MacBook-Pro-Piotr.local" tests="7" failures="0" errors="0" skipped="7" time="0">
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; getLastActionTrends &gt; should aggregate action counts correctly [BLOCKED: MOCK BYPASS]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; getApprovalStats &gt; should distinguish between auto and manual approvals [BLOCKED: MOCK BYPASS]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; getPlaybookStats &gt; should calculate completion rates and average duration [BLOCKED: MOCK BYPASS]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; getDeadLetterStats &gt; should aggregate dead letter jobs by error code [BLOCKED: MOCK BYPASS]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; getROISummary &gt; should combine metrics from multiple sources [BLOCKED: MOCK BYPASS]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; exportData &gt; should export CSV format correctly [BLOCKED: MOCK BYPASS]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; exportData &gt; should export JSON format correctly [BLOCKED: MOCK BYPASS]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiAuditLogger.test.js" timestamp="2025-12-21T11:11:50.081Z" hostname="MacBook-Pro-Piotr.local" tests="24" failures="0" errors="0" skipped="0" time="0.105206375">
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logInteraction &gt; should log a basic AI interaction" time="0.000850167">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logInteraction &gt; should store correlation_id if provided" time="0.000165542">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logInteraction &gt; should handle optional fields" time="0.000082125">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logInteraction &gt; should store explanation data if provided" time="0.000075291">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logInteraction &gt; should handle database error" time="0.000614625">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logWithExplanation &gt; should log interaction with full explanation object" time="0.000132459">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logWithExplanation &gt; should default actionType to AI_RESPONSE" time="0.000057125">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logSuggestion &gt; should log AI suggestion" time="0.000074">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logSuggestion &gt; should handle minimal parameters" time="0.000055875">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; recordUserDecision &gt; should update user decision on logged suggestion" time="0.000103541">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; recordUserDecision &gt; should record rejection without feedback" time="0.000043416">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; recordUserDecision &gt; should handle non-existent audit entry" time="0.000047291">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditLogs &gt; should return audit logs for organization" time="0.000414959">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditLogs &gt; should filter by project if provided" time="0.000090291">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditLogs &gt; should filter by date range" time="0.000043041">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditLogs &gt; should limit results" time="0.000033292">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditLogs &gt; should filter by action type" time="0.000037084">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditLogs &gt; should return empty array on database error" time="0.000102375">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditStats &gt; should return statistics for organization" time="0.000115875">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditStats &gt; should filter by project if provided" time="0.000118333">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getRoleDistribution &gt; should return role distribution" time="0.000086292">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; clearOldLogs &gt; should clear logs older than specified days" time="0.000074083">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; clearOldLogs &gt; should use default retention period of 90 days" time="0.000032125">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; clearOldLogs &gt; should respect custom retention period" time="0.000033833">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiContextBuilder.test.js" timestamp="2025-12-21T11:11:50.082Z" hostname="MacBook-Pro-Piotr.local" tests="9" failures="4" errors="0" skipped="0" time="0.204723">
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; buildContext() &gt; should build complete context with all layers" time="0.007381875">
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; buildContext() &gt; should build context without projectId" time="0.001634542">
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; buildContext() &gt; should include PMO health snapshot when projectId provided" time="0.003100167">
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; buildContext() &gt; should handle PMO health service errors gracefully" time="0.002949667">
            <system-err>
[AIContextBuilder] Failed to get PMO health snapshot: Service unavailable

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; buildContext() &gt; should include options in context" time="0.001630166">
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _buildPlatformContext() &gt; should build platform context with user role" time="0.001671625">
            <failure message="expected &apos;USER&apos; to be &apos;ADMIN&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;USER&apos; to be &apos;ADMIN&apos; // Object.is equality

Expected: &quot;ADMIN&quot;
Received: &quot;USER&quot;

  tests/unit/backend/aiContextBuilder.test.js:208:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _buildPlatformContext() &gt; should map SUPERADMIN role correctly" time="0.00155825">
            <failure message="expected &apos;USER&apos; to be &apos;SUPERADMIN&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;USER&apos; to be &apos;SUPERADMIN&apos; // Object.is equality

Expected: &quot;SUPERADMIN&quot;
Received: &quot;USER&quot;

  tests/unit/backend/aiContextBuilder.test.js:228:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _buildOrganizationContext() &gt; should build organization context" time="0.001134375">
            <failure message="expected undefined to be &apos;Test Org&apos; // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be &apos;Test Org&apos; // Object.is equality

- Expected: 
&quot;Test Org&quot;

+ Received: 
undefined

  tests/unit/backend/aiContextBuilder.test.js:246:30
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _buildProjectContext() &gt; should build project context" time="0.000863917">
            <failure message="expected undefined to be &apos;Test Project&apos; // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be &apos;Test Project&apos; // Object.is equality

- Expected: 
&quot;Test Project&quot;

+ Received: 
undefined

  tests/unit/backend/aiContextBuilder.test.js:265:34
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiCoreLayer.test.js" timestamp="2025-12-21T11:11:50.083Z" hostname="MacBook-Pro-Piotr.local" tests="56" failures="0" errors="0" skipped="0" time="0.268772">
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export buildContext function" time="0.007400792">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _buildPlatformContext function" time="0.00016325">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _buildOrganizationContext function" time="0.000088334">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _buildProjectContext function" time="0.000069209">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _buildExecutionContext function" time="0.000063459">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _buildKnowledgeContext function" time="0.0000465">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _buildExternalContext function" time="0.000043292">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _generateHash function" time="0.000046042">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; _generateHash &gt; should generate consistent hash" time="0.000342708">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; _generateHash &gt; should generate different hash for different inputs" time="0.000337583">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; POLICY_LEVELS &gt; should define ADVISORY level" time="0.005198042">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; POLICY_LEVELS &gt; should define ASSISTED level" time="0.000076">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; POLICY_LEVELS &gt; should define PROACTIVE level" time="0.000037625">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; POLICY_LEVELS &gt; should define AUTOPILOT level" time="0.000030833">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; AI_ROLES &gt; should define ADVISOR role" time="0.000033167">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; AI_ROLES &gt; should define PMO_MANAGER role" time="0.00003175">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; AI_ROLES &gt; should define EXECUTOR role" time="0.000029125">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; AI_ROLES &gt; should define EDUCATOR role" time="0.000029209">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; Service Structure &gt; should export getEffectivePolicy function" time="0.000028458">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; Service Structure &gt; should export canPerformAction function" time="0.000027625">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; Service Structure &gt; should export getPolicySummary function" time="0.0001005">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; Service Structure &gt; should export updatePolicy function" time="0.000193333">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; MEMORY_TYPES &gt; should define DECISION type" time="0.004405042">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; MEMORY_TYPES &gt; should define PHASE_TRANSITION type" time="0.000071708">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; MEMORY_TYPES &gt; should define RECOMMENDATION type" time="0.000039375">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; MEMORY_TYPES &gt; should define PATTERN type" time="0.000033792">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; createSession &gt; should create session with unique conversationId" time="0.000196667">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; createSession &gt; should create session with empty messages array" time="0.000077416">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; createSession &gt; should create session with startedAt timestamp" time="0.000038333">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; addMessage &gt; should add message to session" time="0.000348375">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; addMessage &gt; should add timestamp to message" time="0.0000445">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; Service Structure &gt; should export recordProjectMemory function" time="0.000030958">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; Service Structure &gt; should export getUserPreferences function" time="0.000028916">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; Service Structure &gt; should export updateUserPreferences function" time="0.000026417">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; AI_ROLES &gt; should define all 4 roles" time="0.007606333">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; CHAT_MODES &gt; should define EXPLAIN mode" time="0.000080209">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; CHAT_MODES &gt; should define GUIDE mode" time="0.000039">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; CHAT_MODES &gt; should define ANALYZE mode" time="0.000030708">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; CHAT_MODES &gt; should define DO mode" time="0.000034292">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; CHAT_MODES &gt; should define TEACH mode" time="0.00002725">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should detect EXPLAIN intent" time="0.000074584">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should detect GUIDE intent" time="0.000035292">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should detect ANALYZE intent" time="0.000034833">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should detect DO intent" time="0.000036166">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should detect TEACH intent" time="0.00003625">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should default to EXPLAIN" time="0.000029">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _selectRole &gt; should select ADVISOR for EXPLAIN intent" time="0.000054584">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _selectRole &gt; should select PMO_MANAGER for GUIDE intent" time="0.000031583">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _selectRole &gt; should select EXECUTOR for DO intent" time="0.000030292">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _selectRole &gt; should select EDUCATOR for TEACH intent" time="0.000027833">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _selectRole &gt; should fallback to ADVISOR if role not active" time="0.000032584">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; getRoleDescription &gt; should return description for ADVISOR" time="0.000078792">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; getRoleDescription &gt; should return description for PMO_MANAGER" time="0.000032542">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; getRoleDescription &gt; should return description for EXECUTOR" time="0.000030583">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; getRoleDescription &gt; should return description for EDUCATOR" time="0.0000305">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; Service Structure &gt; should export processMessage function" time="0.000027959">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiCostControlService.test.js" timestamp="2025-12-21T11:11:50.085Z" hostname="MacBook-Pro-Piotr.local" tests="27" failures="0" errors="0" skipped="0" time="0.087393333">
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; setGlobalBudget &gt; should set global budget" time="0.000752542">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; setGlobalBudget &gt; should handle database errors" time="0.000591875">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; setTenantBudget &gt; should set tenant budget" time="0.000135667">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; setProjectBudget &gt; should set project budget" time="0.00011675">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; getBudget &gt; should return budget when found" time="0.000114">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; getBudget &gt; should return null when not found" time="0.000061">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; checkBudget &gt; should allow action when no limits set" time="0.0002385">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; checkBudget &gt; should allow action when within budget" time="0.00012">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; checkBudget &gt; should block action when exceeding budget without auto-downgrade" time="0.000097875">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; checkBudget &gt; should trigger downgrade when exceeding budget with auto-downgrade enabled" time="0.000100292">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; checkBudget &gt; should check project budget limit" time="0.000074875">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; estimateCost &gt; should calculate cost for known models" time="0.000076584">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; estimateCost &gt; should fallback to default for unknown models" time="0.000033">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; logUsage &gt; should log usage and update budgets" time="0.000164333">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; logUsage &gt; should handle updates without project" time="0.000043208">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; resetMonthlyUsage &gt; should reset usage for all scopes if unspecified" time="0.000114458">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; resetMonthlyUsage &gt; should reset usage for specific scope" time="0.000969792">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; Model Selection &gt; should return correct category for action" time="0.00008275">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; Model Selection &gt; should fallback to CHAT for unknown action" time="0.000036125">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; Model Selection &gt; should prioritize role if present" time="0.00003075">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; getTierForBudget &gt; should return tier 1 for non-downgraded reasoning" time="0.000049875">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; getTierForBudget &gt; should downgrade premium to standard when budget constrained" time="0.000033167">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; getTierForBudget &gt; should downgrade standard to budget when constrained" time="0.000035584">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; getTierForBudget &gt; should keep budget tier at 3 even when constrained" time="0.000027958">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; Analytics &gt; should return usage summary" time="0.000145583">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; Analytics &gt; should return user usage" time="0.000089625">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; Analytics &gt; should return all budgets" time="0.000185792">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiDecisionGovernance.test.js" timestamp="2025-12-21T11:11:50.086Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="4" time="0.089997791">
        <testcase classname="tests/unit/backend/aiDecisionGovernance.test.js" name="AI Decision Governance Service &gt; detectDecisionNeeded &gt; should detect phase transition decision" time="0.000637">
        </testcase>
        <testcase classname="tests/unit/backend/aiDecisionGovernance.test.js" name="AI Decision Governance Service &gt; detectDecisionNeeded &gt; should check DB for blocked task reason [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiDecisionGovernance.test.js" name="AI Decision Governance Service &gt; getBlockingDecisions &gt; should calculate daysWaiting correctly [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiDecisionGovernance.test.js" name="AI Decision Governance Service &gt; prepareDecisionBrief &gt; should generate a brief and insert into DB [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiDecisionGovernance.test.js" name="AI Decision Governance Service &gt; registerImpact &gt; should record an impact with mocked UUID [BLOCKED: REQUIRE UUID FAIL]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiExecutiveReporting.test.js" timestamp="2025-12-21T11:11:50.086Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="2" time="0">
        <testcase classname="tests/unit/backend/aiExecutiveReporting.test.js" name="AI Executive Reporting Service &gt; generateReport &gt; should dispatch to project status report handler [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiExecutiveReporting.test.js" name="AI Executive Reporting Service &gt; generateReport &gt; should dispatch to portfolio overview handler [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiExplainabilityService.test.js" timestamp="2025-12-21T11:11:50.087Z" hostname="MacBook-Pro-Piotr.local" tests="35" failures="0" errors="0" skipped="0" time="0.198312833">
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; computeConfidenceLevel &gt; returns LOW when context is null" time="0.000499791">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; computeConfidenceLevel &gt; returns LOW when context is empty" time="0.000104125">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; computeConfidenceLevel &gt; returns LOW when PMOHealthSnapshot is missing and no project data" time="0.000073208">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; computeConfidenceLevel &gt; returns MEDIUM when PMOHealthSnapshot exists with blockers" time="0.000071292">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; computeConfidenceLevel &gt; returns HIGH when full context with no blockers" time="0.000083">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; computeConfidenceLevel &gt; penalizes conflicting signals (many blockers AND many pending decisions)" time="0.0003385">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildReasoningSummary &gt; returns default message when no health data" time="0.000080834">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildReasoningSummary &gt; includes overdue tasks in reasoning" time="0.000047875">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildReasoningSummary &gt; includes pending decisions in reasoning" time="0.000044959">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildReasoningSummary &gt; includes phase information" time="0.000054708">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildReasoningSummary &gt; includes project memory count when provided" time="0.000037042">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; extractConstraintsApplied &gt; includes AI role constraint" time="0.000087917">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; extractConstraintsApplied &gt; includes policy level constraint" time="0.00004125">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; extractConstraintsApplied &gt; includes phase gate constraint" time="0.0000485">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; extractConstraintsApplied &gt; includes regulatory mode constraint" time="0.000044375">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; identifyDataUsed &gt; returns projectData false when no project context" time="0.00005025">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; identifyDataUsed &gt; returns projectData true when project context exists" time="0.000029833">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; identifyDataUsed &gt; returns projectMemoryCount from options" time="0.000028292">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; identifyDataUsed &gt; returns empty externalSources when internet disabled" time="0.000206042">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; identifyDataUsed &gt; returns external sources when internet enabled" time="0.000104042">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildAIExplanation &gt; generates valid AIExplanation object" time="0.000276417">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildAIExplanation &gt; includes all required fields in correct format" time="0.000100333">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildAIExplanation &gt; timestamp is ISO 8601 format" time="0.000063667">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildAIExplanation &gt; maps orchestrator roles to project roles correctly" time="0.000042042">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildExplainabilityFooter &gt; returns empty string when explanation is null" time="0.000045958">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildExplainabilityFooter &gt; formats human-readable footer" time="0.000065666">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildExplainabilityFooter &gt; shows max 3 constraints" time="0.000064583">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildExplainabilityFooter &gt; does not expose raw internals" time="0.000045625">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; Internal Helpers &gt; _countPopulatedLayers &gt; returns 0 for null context" time="0.00002725">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; Internal Helpers &gt; _countPopulatedLayers &gt; counts populated layers correctly" time="0.000032583">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; Internal Helpers &gt; _getBlockerCount &gt; returns 0 when no blockers" time="0.000022458">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; Internal Helpers &gt; _getBlockerCount &gt; counts blockers from PMO health snapshot" time="0.000025167">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; Internal Helpers &gt; _getBlockerCount &gt; counts blockers from execution context" time="0.0000245">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; Internal Helpers &gt; _getBlockerCount &gt; sums blockers from both sources" time="0.000025167">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="Sample Output &gt; generates sample AIExplanation matching the spec" time="0.0002235">
            <system-out>

========== SAMPLE AIExplanation JSON ==========
{
  &quot;aiRole&quot;: &quot;ADVISOR&quot;,
  &quot;regulatoryMode&quot;: false,
  &quot;confidenceLevel&quot;: &quot;HIGH&quot;,
  &quot;reasoningSummary&quot;: &quot;Based on 3 overdue task(s), 1 pending decision(s), current phase: Execution, 5 project memory item(s) consulted&quot;,
  &quot;dataUsed&quot;: {
    &quot;projectData&quot;: true,
    &quot;projectMemoryCount&quot;: 5,
    &quot;externalSources&quot;: []
  },
  &quot;constraintsApplied&quot;: [
    &quot;AI Role: ADVISOR (explain/suggest only, no mutations)&quot;,
    &quot;AI Policy: ADVISORY mode&quot;,
    &quot;Phase Gate: Execution&quot;
  ],
  &quot;timestamp&quot;: &quot;2025-12-21T11:11:48.140Z&quot;
}
================================================


            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiExternalData.test.js" timestamp="2025-12-21T11:11:50.088Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.203666417">
        <testcase classname="tests/unit/backend/aiExternalData.test.js" name="AI External Data Control &gt; Internet Toggle &gt; should block external sources when internetEnabled is false" time="0.000502167">
        </testcase>
        <testcase classname="tests/unit/backend/aiExternalData.test.js" name="AI External Data Control &gt; Internet Toggle &gt; should allow external sources when internetEnabled is true" time="0.000106834">
        </testcase>
        <testcase classname="tests/unit/backend/aiExternalData.test.js" name="AI External Data Control &gt; Internet Toggle &gt; should respect project-level internet toggle" time="0.000070333">
        </testcase>
        <testcase classname="tests/unit/backend/aiExternalData.test.js" name="AI External Data Control &gt; RAG Toggle (GAP-03) &gt; should disable RAG when rag_enabled is 0" time="0.000066916">
        </testcase>
        <testcase classname="tests/unit/backend/aiExternalData.test.js" name="AI External Data Control &gt; RAG Toggle (GAP-03) &gt; should enable RAG by default" time="0.000055334">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiFailureHandler.test.js" timestamp="2025-12-21T11:11:50.088Z" hostname="MacBook-Pro-Piotr.local" tests="20" failures="7" errors="0" skipped="0" time="0.29072575">
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; withFallback() &gt; should execute AI function successfully" time="0.002300042">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; withFallback() &gt; should use fallback when AI function fails" time="0.001387459">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; withFallback() &gt; should handle timeout" time="0.001856958">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; withFallback() &gt; should return graceful degradation when fallback also fails" time="0.001260292">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; _identifyFailureType() &gt; should identify timeout errors" time="0.000383917">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; _identifyFailureType() &gt; should identify rate limit errors" time="0.000144333">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; _identifyFailureType() &gt; should identify budget exceeded errors" time="0.000086917">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; _identifyFailureType() &gt; should identify authentication errors" time="0.000075542">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; _identifyFailureType() &gt; should default to unknown error" time="0.0000795">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; logFailure() &gt; should log failure to database" time="0.005564542">
            <failure message="expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (2) ]

Number of calls: 0
" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (2) ]

Number of calls: 0

  tests/unit/backend/aiFailureHandler.test.js:156:32
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; getHealthStatus() &gt; should return health status" time="0.000375583">
            <failure message="AIFailureHandler.getHealthStatus is not a function" type="TypeError">
TypeError: AIFailureHandler.getHealthStatus is not a function
  tests/unit/backend/aiFailureHandler.test.js:173:51
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; getHealthStatus() &gt; should return default status when not found" time="0.000161375">
            <failure message="AIFailureHandler.getHealthStatus is not a function" type="TypeError">
TypeError: AIFailureHandler.getHealthStatus is not a function
  tests/unit/backend/aiFailureHandler.test.js:183:51
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; getRecentFailures() &gt; should return recent failures" time="0.004549084">
            <failure message="expected 4 to be 2 // Object.is equality" type="AssertionError">
AssertionError: expected 4 to be 2 // Object.is equality

- Expected
+ Received

- 2
+ 4

  tests/unit/backend/aiFailureHandler.test.js:200:44
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; forceHealthCheck() &gt; should return HEALTHY status when no recent failures" time="0.005001375">
            <failure message="expected &apos;degraded&apos; to be &apos;healthy&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;degraded&apos; to be &apos;healthy&apos; // Object.is equality

Expected: &quot;healthy&quot;
Received: &quot;degraded&quot;

  tests/unit/backend/aiFailureHandler.test.js:217:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; forceHealthCheck() &gt; should return DEGRADED status with 3+ failures" time="0.005402542">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; forceHealthCheck() &gt; should return UNAVAILABLE status with 10+ failures" time="0.003569083">
            <failure message="expected &apos;degraded&apos; to be &apos;unavailable&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;degraded&apos; to be &apos;unavailable&apos; // Object.is equality

Expected: &quot;unavailable&quot;
Received: &quot;degraded&quot;

  tests/unit/backend/aiFailureHandler.test.js:247:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; nonBlocking() &gt; should return AI result when successful" time="0.0001875">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; nonBlocking() &gt; should return default value when AI fails" time="0.001467334">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; explainFailure() &gt; should return user-friendly explanation for timeout" time="0.000316458">
            <failure message="expected &apos;object&apos; to be &apos;string&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;object&apos; to be &apos;string&apos; // Object.is equality

Expected: &quot;string&quot;
Received: &quot;object&quot;

  tests/unit/backend/aiFailureHandler.test.js:286:40
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; degrade() &gt; should return graceful degradation response" time="0.000093917">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiIntegrationService.test.js" timestamp="2025-12-21T11:11:50.090Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="4" time="0.237839333">
        <testcase classname="tests/unit/backend/aiIntegrationService.test.js" name="AI Integration Service &gt; Logic: getProviderCapabilities &gt; should return correct capabilities for known providers" time="0.011074959">
        </testcase>
        <testcase classname="tests/unit/backend/aiIntegrationService.test.js" name="AI Integration Service &gt; Logic: getProviderCapabilities &gt; should return empty array for unknown provider" time="0.004210833">
        </testcase>
        <testcase classname="tests/unit/backend/aiIntegrationService.test.js" name="AI Integration Service &gt; suggestSync &gt; should create pending action [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiIntegrationService.test.js" name="AI Integration Service &gt; executeAction &gt; should execute approved action and update status [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiIntegrationService.test.js" name="AI Integration Service &gt; executeAction &gt; should throw if action not found or not approved [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiIntegrationService.test.js" name="AI Integration Service &gt; handleWebhook &gt; should process webhook if integration active [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiKnowledgeManager.test.js" timestamp="2025-12-21T11:11:50.090Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="2" time="0.214506917">
        <testcase classname="tests/unit/backend/aiKnowledgeManager.test.js" name="AI Knowledge Manager Service &gt; Logic: _cosineSimilarity &gt; should calculate similarity correctly" time="0.035897917">
        </testcase>
        <testcase classname="tests/unit/backend/aiKnowledgeManager.test.js" name="AI Knowledge Manager Service &gt; Logic: _cosineSimilarity &gt; should handle empty or mismatched vectors" time="0.001753167">
        </testcase>
        <testcase classname="tests/unit/backend/aiKnowledgeManager.test.js" name="AI Knowledge Manager Service &gt; Logic: _formatKnowledgeForPrompt &gt; should format chunks with citations" time="0.001355875">
        </testcase>
        <testcase classname="tests/unit/backend/aiKnowledgeManager.test.js" name="AI Knowledge Manager Service &gt; getContextualKnowledge (Integration) &gt; should retrieve and rank knowledge chunks [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiKnowledgeManager.test.js" name="AI Knowledge Manager Service &gt; captureDecision &gt; should store decision and generate embeddings [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiMaturityMonitor.test.js" timestamp="2025-12-21T11:11:50.090Z" hostname="MacBook-Pro-Piotr.local" tests="4" failures="0" errors="0" skipped="2" time="0.202993917">
        <testcase classname="tests/unit/backend/aiMaturityMonitor.test.js" name="AI Maturity Monitor Service &gt; Logic: _scoreToLevel &gt; should map score to correct level" time="0.009817292">
        </testcase>
        <testcase classname="tests/unit/backend/aiMaturityMonitor.test.js" name="AI Maturity Monitor Service &gt; Logic: _generateInsights &gt; should identify strengths and weaknesses" time="0.001722958">
        </testcase>
        <testcase classname="tests/unit/backend/aiMaturityMonitor.test.js" name="AI Maturity Monitor Service &gt; assessMaturity (Integration) &gt; should aggregate metrics into overall score [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiMaturityMonitor.test.js" name="AI Maturity Monitor Service &gt; benchmarkAgainstPractices &gt; should compare levels vs benchmarks [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiMemoryManager.test.js" timestamp="2025-12-21T11:11:50.091Z" hostname="MacBook-Pro-Piotr.local" tests="12" failures="0" errors="0" skipped="0" time="0">
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; createSession() &gt; should create new session" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; createSession() &gt; should create unique session IDs" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; addMessage() &gt; should add message to session" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; addMessage() &gt; should add multiple messages" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; recordProjectMemory() &gt; should record project memory" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; recordProjectMemory() &gt; should handle database errors" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; recordDecision() &gt; should record decision with rationale" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; recordPhaseTransition() &gt; should record phase transition" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; recordRecommendation() &gt; should record recommendation and user response" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; getProjectMemory() &gt; should retrieve project memories" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; getProjectMemory() &gt; should filter by memory type" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; getRelevantMemories() &gt; should return relevant memories for context" time="0">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiOrchestrator.test.js" timestamp="2025-12-21T11:11:50.092Z" hostname="MacBook-Pro-Piotr.local" tests="12" failures="0" errors="0" skipped="0" time="0.164335417">
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; processMessage &gt; should process user message successfully" time="0.001103875">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; processMessage &gt; should handle context building failure" time="0.000622292">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; processMessage &gt; should block if trial expired" time="0.000113875">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; processMessage &gt; should block if daily AI limit reached" time="0.000078625">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should detect intent from message keywords" time="0.00006325">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should default to EXPLAIN intent" time="0.000049333">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; _selectRole &gt; should select role based on intent" time="0.000056625">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; _selectRole &gt; should downgrade role if policy restricts" time="0.0000455">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; _selectRole &gt; should force ADVISOR in regulatory mode" time="0.000049">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; _buildPrompt &gt; should include context and user message" time="0.00014825">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; postProcessResponse &gt; should add standard footer" time="0.000664416">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; postProcessResponse &gt; should handle missing explanation" time="0.000402667">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiPolicyEngine.test.js" timestamp="2025-12-21T11:11:50.092Z" hostname="MacBook-Pro-Piotr.local" tests="10" failures="7" errors="0" skipped="0" time="0.1880365">
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; getEffectivePolicy() &gt; should return ADVISORY policy when regulatory mode is enabled" time="0.00217725">
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; getEffectivePolicy() &gt; should return organization policy when no project override" time="0.003172292">
            <failure message="expected &apos;ADVISORY&apos; to be &apos;ASSISTED&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;ADVISORY&apos; to be &apos;ASSISTED&apos; // Object.is equality

Expected: &quot;ASSISTED&quot;
Received: &quot;ADVISORY&quot;

  tests/unit/backend/aiPolicyEngine.test.js:96:40
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; getEffectivePolicy() &gt; should apply project-level override (can only reduce)" time="0.00044625">
            <failure message="expected &apos;ADVISORY&apos; to be &apos;ASSISTED&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;ADVISORY&apos; to be &apos;ASSISTED&apos; // Object.is equality

Expected: &quot;ASSISTED&quot;
Received: &quot;ADVISORY&quot;

  tests/unit/backend/aiPolicyEngine.test.js:127:40
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; getEffectivePolicy() &gt; should not allow project override to exceed max level" time="0.000807541">
            <failure message="expected &apos;ADVISORY&apos; to be &apos;ASSISTED&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;ADVISORY&apos; to be &apos;ASSISTED&apos; // Object.is equality

Expected: &quot;ASSISTED&quot;
Received: &quot;ADVISORY&quot;

  tests/unit/backend/aiPolicyEngine.test.js:155:40
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; getEffectivePolicy() &gt; should include user preferences" time="0.000959083">
            <failure message="expected &apos;EXPERT&apos; to be &apos;FRIENDLY&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;EXPERT&apos; to be &apos;FRIENDLY&apos; // Object.is equality

Expected: &quot;FRIENDLY&quot;
Received: &quot;EXPERT&quot;

  tests/unit/backend/aiPolicyEngine.test.js:177:37
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; canPerformAction() &gt; should allow EXPLAIN_CONTEXT for ADVISORY policy" time="0.000539458">
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; canPerformAction() &gt; should allow CREATE_DRAFT_TASK for ASSISTED policy" time="0.001038166">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/aiPolicyEngine.test.js:206:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; canPerformAction() &gt; should deny CREATE_DRAFT_TASK for ADVISORY policy" time="0.000596084">
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; canPerformAction() &gt; should check regulatory mode first" time="0.001127417">
            <failure message="expected &apos;Action requires ASSISTED policy level&apos; to contain &apos;Regulatory Mode&apos;" type="AssertionError">
AssertionError: expected &apos;Action requires ASSISTED policy level&apos; to contain &apos;Regulatory Mode&apos;

Expected: &quot;Regulatory Mode&quot;
Received: &quot;Action requires ASSISTED policy level, but current is ADVISORY&quot;

  tests/unit/backend/aiPolicyEngine.test.js:233:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; getPolicyLevelForAction() &gt; should return correct policy level for action" time="0.000309083">
            <failure message="AIPolicyEngine.getPolicyLevelForAction is not a function" type="TypeError">
TypeError: AIPolicyEngine.getPolicyLevelForAction is not a function
  tests/unit/backend/aiPolicyEngine.test.js:239:35
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiPromptHierarchy.test.js" timestamp="2025-12-21T11:11:50.093Z" hostname="MacBook-Pro-Piotr.local" tests="18" failures="18" errors="0" skipped="0" time="0.206782458">
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; buildPromptStack() &gt; should build prompt stack with all layers" time="0.002707875">
            <failure message="AIPromptHierarchy.buildPromptStack is not a function" type="TypeError">
TypeError: AIPromptHierarchy.buildPromptStack is not a function
  tests/unit/backend/aiPromptHierarchy.test.js:59:51
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; buildPromptStack() &gt; should use default prompts when custom not found" time="0.000296125">
            <failure message="AIPromptHierarchy.buildPromptStack is not a function" type="TypeError">
TypeError: AIPromptHierarchy.buildPromptStack is not a function
  tests/unit/backend/aiPromptHierarchy.test.js:83:51
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; _getSystemPrompt() &gt; should return custom system prompt when available" time="0.000612875">
            <failure message="AIPromptHierarchy._getSystemPrompt is not a function" type="TypeError">
TypeError: AIPromptHierarchy._getSystemPrompt is not a function
  tests/unit/backend/aiPromptHierarchy.test.js:105:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; _getSystemPrompt() &gt; should return default system prompt when not found" time="0.00043425">
            <failure message="AIPromptHierarchy._getSystemPrompt is not a function" type="TypeError">
TypeError: AIPromptHierarchy._getSystemPrompt is not a function
  tests/unit/backend/aiPromptHierarchy.test.js:117:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; _getRolePrompt() &gt; should return role prompt for ADVISOR" time="0.000216333">
            <failure message="AIPromptHierarchy._getRolePrompt is not a function" type="TypeError">
TypeError: AIPromptHierarchy._getRolePrompt is not a function
  tests/unit/backend/aiPromptHierarchy.test.js:126:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; _getRolePrompt() &gt; should return role prompt for PMO_MANAGER" time="0.000138917">
            <failure message="AIPromptHierarchy._getRolePrompt is not a function" type="TypeError">
TypeError: AIPromptHierarchy._getRolePrompt is not a function
  tests/unit/backend/aiPromptHierarchy.test.js:132:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; _getRolePrompt() &gt; should return default for unknown role" time="0.000128375">
            <failure message="AIPromptHierarchy._getRolePrompt is not a function" type="TypeError">
TypeError: AIPromptHierarchy._getRolePrompt is not a function
  tests/unit/backend/aiPromptHierarchy.test.js:138:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; _getPhasePrompt() &gt; should return phase prompt for Context" time="0.000120583">
            <failure message="AIPromptHierarchy._getPhasePrompt is not a function" type="TypeError">
TypeError: AIPromptHierarchy._getPhasePrompt is not a function
  tests/unit/backend/aiPromptHierarchy.test.js:145:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; _getPhasePrompt() &gt; should return phase prompt for Execution" time="0.000130041">
            <failure message="AIPromptHierarchy._getPhasePrompt is not a function" type="TypeError">
TypeError: AIPromptHierarchy._getPhasePrompt is not a function
  tests/unit/backend/aiPromptHierarchy.test.js:151:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; _getPhasePrompt() &gt; should return empty string for unknown phase" time="0.000136542">
            <failure message="AIPromptHierarchy._getPhasePrompt is not a function" type="TypeError">
TypeError: AIPromptHierarchy._getPhasePrompt is not a function
  tests/unit/backend/aiPromptHierarchy.test.js:157:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; _getUserOverlay() &gt; should return user preferences overlay" time="0.000132542">
            <failure message="AIPromptHierarchy._getUserOverlay is not a function" type="TypeError">
TypeError: AIPromptHierarchy._getUserOverlay is not a function
  tests/unit/backend/aiPromptHierarchy.test.js:174:53
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; _getUserOverlay() &gt; should filter out disallowed preferences" time="0.000143042">
            <failure message="AIPromptHierarchy._getUserOverlay is not a function" type="TypeError">
TypeError: AIPromptHierarchy._getUserOverlay is not a function
  tests/unit/backend/aiPromptHierarchy.test.js:190:53
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; _getUserOverlay() &gt; should return empty string when no preferences" time="0.000146667">
            <failure message="AIPromptHierarchy._getUserOverlay is not a function" type="TypeError">
TypeError: AIPromptHierarchy._getUserOverlay is not a function
  tests/unit/backend/aiPromptHierarchy.test.js:203:53
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; combinePrompts() &gt; should combine prompts in correct order" time="0.000115334">
            <failure message="AIPromptHierarchy.combinePrompts is not a function" type="TypeError">
TypeError: AIPromptHierarchy.combinePrompts is not a function
  tests/unit/backend/aiPromptHierarchy.test.js:218:48
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; combinePrompts() &gt; should handle missing layers" time="0.000101583">
            <failure message="AIPromptHierarchy.combinePrompts is not a function" type="TypeError">
TypeError: AIPromptHierarchy.combinePrompts is not a function
  tests/unit/backend/aiPromptHierarchy.test.js:237:48
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; _validateUserPreference() &gt; should allow valid tone preference" time="0.000094708">
            <failure message="AIPromptHierarchy._validateUserPreference is not a function" type="TypeError">
TypeError: AIPromptHierarchy._validateUserPreference is not a function
  tests/unit/backend/aiPromptHierarchy.test.js:246:47
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; _validateUserPreference() &gt; should reject invalid tone preference" time="0.000098875">
            <failure message="AIPromptHierarchy._validateUserPreference is not a function" type="TypeError">
TypeError: AIPromptHierarchy._validateUserPreference is not a function
  tests/unit/backend/aiPromptHierarchy.test.js:251:47
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; _validateUserPreference() &gt; should allow valid response length" time="0.000105166">
            <failure message="AIPromptHierarchy._validateUserPreference is not a function" type="TypeError">
TypeError: AIPromptHierarchy._validateUserPreference is not a function
  tests/unit/backend/aiPromptHierarchy.test.js:256:47
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiRiskChangeControl.test.js" timestamp="2025-12-21T11:11:50.096Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="3" time="0.185133083">
        <testcase classname="tests/unit/backend/aiRiskChangeControl.test.js" name="AI Risk &amp; Change Control Service &gt; Logic: _suggestMitigation &gt; should return correct mitigation strategies" time="0.008723583">
        </testcase>
        <testcase classname="tests/unit/backend/aiRiskChangeControl.test.js" name="AI Risk &amp; Change Control Service &gt; detectRisks (Integration) &gt; should aggregate risks from all detectors [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiRiskChangeControl.test.js" name="AI Risk &amp; Change Control Service &gt; trackScopeChange &gt; should log scope change [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiRiskChangeControl.test.js" name="AI Risk &amp; Change Control Service &gt; preEscalationWarning &gt; should identify when escalation is NOT needed (Logic Check)" time="0.001635833">
        </testcase>
        <testcase classname="tests/unit/backend/aiRiskChangeControl.test.js" name="AI Risk &amp; Change Control Service &gt; preEscalationWarning &gt; should trigger warning for critical risks [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiRoleGuard.test.js" timestamp="2025-12-21T11:11:50.097Z" hostname="MacBook-Pro-Piotr.local" tests="24" failures="10" errors="0" skipped="0" time="0.140935875">
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getProjectRole() &gt; should return ADVISOR as default for null projectId" time="0.000818417">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getProjectRole() &gt; should return project AI role from database" time="0.003491167">
            <failure message="expected &apos;ADVISOR&apos; to be &apos;MANAGER&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;ADVISOR&apos; to be &apos;MANAGER&apos; // Object.is equality

Expected: &quot;MANAGER&quot;
Received: &quot;ADVISOR&quot;

  tests/unit/backend/aiRoleGuard.test.js:46:26
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getProjectRole() &gt; should default to ADVISOR when project not found" time="0.0003985">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getProjectRole() &gt; should default to ADVISOR on database error" time="0.000306166">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; setProjectRole() &gt; should set project AI role" time="0.001218">
            <system-out>
[AIRoleGuard] Project proj-test-123 AI role set to OPERATOR by user user-123

            </system-out>
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/aiRoleGuard.test.js:91:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; setProjectRole() &gt; should reject invalid role" time="0.000654417">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; setProjectRole() &gt; should handle database errors" time="0.001547958">
            <system-out>
[AIRoleGuard] Project proj-test-123 AI role set to MANAGER by user user-123

            </system-out>
            <failure message="promise resolved &quot;{ updated: false, (2) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ updated: false, (2) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;projectId&quot;: &quot;proj-test-123&quot;,
+   &quot;role&quot;: &quot;MANAGER&quot;,
+   &quot;updated&quot;: false,
  }

  tests/unit/backend/aiRoleGuard.test.js:118:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; canPerformAction() &gt; should allow EXPLAIN_CONTEXT for ADVISOR" time="0.000314084">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; canPerformAction() &gt; should block CREATE_DRAFT_TASK for ADVISOR" time="0.000548208">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; canPerformAction() &gt; should allow CREATE_DRAFT_TASK for MANAGER" time="0.000752084">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/aiRoleGuard.test.js:159:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; canPerformAction() &gt; should allow EXECUTE_TASK_UPDATE for OPERATOR" time="0.000406958">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/aiRoleGuard.test.js:173:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; canPerformAction() &gt; should block EXECUTE_TASK_UPDATE for MANAGER" time="0.000226875">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; canPerformAction() &gt; should allow unknown action types (default allow)" time="0.00031175">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; isActionBlocked() &gt; should return blocked=false for allowed actions" time="0.000364875">
            <failure message="expected true to be false // Object.is equality" type="AssertionError">
AssertionError: expected true to be false // Object.is equality

- Expected
+ Received

- false
+ true

  tests/unit/backend/aiRoleGuard.test.js:215:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; isActionBlocked() &gt; should return blocked=true with details for blocked actions" time="0.000252917">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; validateMutation() &gt; should block all mutations for ADVISOR" time="0.000352375">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; validateMutation() &gt; should allow mutations as drafts for MANAGER" time="0.000284417">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/aiRoleGuard.test.js:260:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; validateMutation() &gt; should allow mutations for OPERATOR" time="0.000563083">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/aiRoleGuard.test.js:275:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; validateMutation() &gt; should fail-safe to ADVISOR for unknown role" time="0.000695583">
            <failure message="expected &apos;AI is in ADVISOR mode and cannot perf&apos; to contain &apos;Unknown AI role&apos;" type="AssertionError">
AssertionError: expected &apos;AI is in ADVISOR mode and cannot perf&apos; to contain &apos;Unknown AI role&apos;

Expected: &quot;Unknown AI role&quot;
Received: &quot;AI is in ADVISOR mode and cannot perform any mutations. Only explanations and suggestions are allowed.&quot;

  tests/unit/backend/aiRoleGuard.test.js:291:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getRoleCapabilities() &gt; should return capabilities for ADVISOR" time="0.000502208">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getRoleCapabilities() &gt; should return capabilities for MANAGER" time="0.000081166">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getRoleCapabilities() &gt; should return capabilities for OPERATOR" time="0.000068792">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getRoleCapabilities() &gt; should default to ADVISOR for unknown role" time="0.000072875">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getRoleConfig() &gt; should return full role configuration" time="0.000570166">
            <failure message="expected &apos;ADVISOR&apos; to be &apos;MANAGER&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;ADVISOR&apos; to be &apos;MANAGER&apos; // Object.is equality

Expected: &quot;MANAGER&quot;
Received: &quot;ADVISOR&quot;

  tests/unit/backend/aiRoleGuard.test.js:334:39
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiService.test.js" timestamp="2025-12-21T11:11:50.098Z" hostname="MacBook-Pro-Piotr.local" tests="36" failures="0" errors="0" skipped="4" time="0.208097417">
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; callLLM &gt; should use Google Gemini by default if checks pass" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; callLLM &gt; should block if balance is insufficient" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; callLLM &gt; should call OpenAI via fetch when provider is openai" time="0.001815417">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; callLLM &gt; should call Anthropic via fetch when provider is anthropic" time="0.000182833">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; generateInitiatives &gt; should parse JSON response correctly" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; generateInitiatives &gt; should return empty array on JSON parse error" time="0.008132667">
            <system-err>
LLM Call Error Error: AI Provider not configured.
    at Object.callLLM (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:181:41)
    at Object.generateInitiatives (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:707:29)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:213:33
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:20

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; streamLLM &gt; should yield chunks from Gemini stream" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; streamLLM &gt; should handle errors in stream" time="0.002360834">
            <system-err>
Stream LLM Error Error: AI Provider not configured.
    at Object.streamLLM (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:420:41)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:241:30
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:20

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; buildRoadmap &gt; should return roadmap object on success" time="0.000901084">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; buildRoadmap &gt; should return empty object on error" time="0.000199167">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; suggestTasks &gt; should return tasks array on success" time="0.000422458">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; deepDiagnose &gt; should execute chain of thought and return diagnosis" time="0.000201166">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; enrichInitiative &gt; should maintain structure and fallback to LLM" time="0.000359958">
            <system-err>
Web Search failed, using LLM knowledge Error: Web Fail
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:311:59
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; generateObservations &gt; should return observations from feedback" time="0.000240208">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; testProviderConnection &gt; should test OpenAI connection" time="0.000240375">
            <system-out>
[AiService] Testing connection for: openai

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; enhancePrompt &gt; should return base system role when no extras found" time="0.0000735">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; enhancePrompt &gt; should inject global strategies" time="0.000071458">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; enhancePrompt &gt; should inject client context when orgId provided" time="0.001698458">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Queue Operations &gt; should enqueue task and return jobId" time="0.000253958">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Queue Operations &gt; should get job status" time="0.000101375">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Queue Operations &gt; should return null for non-existent job" time="0.000059917">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Vision Capabilities &gt; should format payload correctly for OpenAI Vision" time="0.000181708">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Vision Capabilities &gt; should use Gemini 1.5 Flash for vision fallback" time="0.000874209">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Advanced Streaming &gt; should parse OpenAI SSE stream correctly" time="0.0002465">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Advanced Streaming &gt; should handle OpenAI stream error" time="0.000290834">
            <system-err>
Stream LLM Error Error: Stream Error
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:237:69
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Provider Integrations &gt; should generate JWT for Zhipu AI provider" time="0.001204166">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateTaskInsight &gt; should return parsed insights when LLM returns valid JSON" time="0.000252208">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateTaskInsight &gt; should return fallback object on LLM failure/JSON error" time="0.0002385">
            <system-err>
Task Insight Error Error: LLM Fail
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:630:42
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateExecutionStrategy &gt; should return strategy object on success" time="0.000142541">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateExecutionStrategy &gt; should return empty structure on error" time="0.000176167">
            <system-err>
Execution Gen Error SyntaxError: Unexpected token &apos;N&apos;, &quot;Not JSON&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Object.generateExecutionStrategy (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:923:25)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:658:28
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:20

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateInsights (Pre-Mortem) &gt; should return insights on success" time="0.000100875">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateInsights (Pre-Mortem) &gt; should return fallback on error" time="0.000175375">
            <system-err>
Insights Gen Error Error: Fail
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:679:42
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateStrategicFit &gt; should return fit analysis on success" time="0.00009625">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateStrategicFit &gt; should return fallback on error" time="0.0001155">
            <system-err>
Fit Check Error SyntaxError: Unexpected token &apos;B&apos;, &quot;Bad JSON&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Object.generateStrategicFit (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:985:25)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:704:28
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:20

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; simulateEconomics &gt; should combine financial simulation with AI commentary" time="0.000100834">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; simulateEconomics &gt; should return just simulation if AI fails" time="0.000062">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiWorkloadIntelligence.test.js" timestamp="2025-12-21T11:11:50.100Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="4" time="0.184867708">
        <testcase classname="tests/unit/backend/aiWorkloadIntelligence.test.js" name="AI Workload Intelligence Service &gt; Logic: _getWorkloadStatus &gt; should classify utilization correctly" time="0.008348625">
        </testcase>
        <testcase classname="tests/unit/backend/aiWorkloadIntelligence.test.js" name="AI Workload Intelligence Service &gt; Logic: _calculateBurnoutRisk &gt; should calculate risk score based on factors" time="0.001175666">
        </testcase>
        <testcase classname="tests/unit/backend/aiWorkloadIntelligence.test.js" name="AI Workload Intelligence Service &gt; getPortfolioWorkload &gt; should calculate workload metrics from DB data [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiWorkloadIntelligence.test.js" name="AI Workload Intelligence Service &gt; detectOverAllocation &gt; should detect users with weeks exceeding capacity [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiWorkloadIntelligence.test.js" name="AI Workload Intelligence Service &gt; suggestRebalancing &gt; should return no suggestions if no over-allocation [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiWorkloadIntelligence.test.js" name="AI Workload Intelligence Service &gt; suggestRebalancing &gt; should suggest reassignment when capacity exists [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/analyticsService.test.js" timestamp="2025-12-21T11:11:50.101Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.188659042">
        <testcase classname="tests/unit/backend/analyticsService.test.js" name="AnalyticsService - Integration &gt; logUsage &gt; should log AI usage to the database without errors" time="0.00081425">
        </testcase>
        <testcase classname="tests/unit/backend/analyticsService.test.js" name="AnalyticsService - Integration &gt; getStats &gt; should retrieve aggregated stats from real database" time="0.000352083">
        </testcase>
        <testcase classname="tests/unit/backend/analyticsService.test.js" name="AnalyticsService - Integration &gt; getTopTopics &gt; should retrieve top topics from real database" time="0.000365417">
        </testcase>
        <testcase classname="tests/unit/backend/analyticsService.test.js" name="AnalyticsService - Integration &gt; saveMaturityScore &gt; should save maturity score without errors" time="0.000189417">
        </testcase>
        <testcase classname="tests/unit/backend/analyticsService.test.js" name="AnalyticsService - Integration &gt; getIndustryBenchmarks &gt; should retrieve industry benchmarks from real database" time="0.00037475">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/assessmentService.test.js" timestamp="2025-12-21T11:11:50.101Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="2" time="0.205366792">
        <testcase classname="tests/unit/backend/assessmentService.test.js" name="Assessment Service &gt; Logic: generateGapSummary &gt; should interpret gaps correctly" time="0.011266875">
        </testcase>
        <testcase classname="tests/unit/backend/assessmentService.test.js" name="Assessment Service &gt; getAssessment &gt; should retrieve and parse assessment [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/assessmentService.test.js" name="Assessment Service &gt; saveAssessment &gt; should calculate totals and save [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/attributionService.test.js" timestamp="2025-12-21T11:11:50.101Z" hostname="MacBook-Pro-Piotr.local" tests="18" failures="0" errors="0" skipped="15" time="0.141542417">
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; constants &gt; should export SOURCE_TYPES" time="0.000855667">
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; recordAttribution - skipped due to CJS/ESM mock interop &gt; should throw error for missing organizationId" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; recordAttribution - skipped due to CJS/ESM mock interop &gt; should throw error for missing sourceType" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; recordAttribution - skipped due to CJS/ESM mock interop &gt; should throw error for invalid sourceType" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; recordAttribution - skipped due to CJS/ESM mock interop &gt; should record DEMO attribution successfully" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; recordAttribution - skipped due to CJS/ESM mock interop &gt; should record PROMO_CODE attribution successfully" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; recordAttribution - skipped due to CJS/ESM mock interop &gt; should record INVITATION attribution with metadata" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; getOrganizationAttribution - skipped due to CJS/ESM mock interop &gt; should return all attribution events for org" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; getOrganizationAttribution - skipped due to CJS/ESM mock interop &gt; should return empty array for org with no attribution" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; getFirstAttribution - skipped due to CJS/ESM mock interop &gt; should return first attribution event" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; getFirstAttribution - skipped due to CJS/ESM mock interop &gt; should return null for org with no attribution" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; hasAttribution - skipped due to CJS/ESM mock interop &gt; should return true if org has attribution" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; hasAttribution - skipped due to CJS/ESM mock interop &gt; should return false if org has no attribution" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; exportAttribution - skipped due to CJS/ESM mock interop &gt; should export with filters" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; exportAttribution - skipped due to CJS/ESM mock interop &gt; should export all without filters" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; getPartnerSummary - skipped due to CJS/ESM mock interop &gt; should return partner summary for settlements" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; immutability principle &gt; should not expose update methods" time="0.000136541">
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; immutability principle &gt; should only have append-only recordAttribution" time="0.000100625">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/baselineService.test.js" timestamp="2025-12-21T11:11:50.102Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="3" time="0">
        <testcase classname="tests/unit/backend/baselineService.test.js" name="Baseline Service &gt; calculateVariance &gt; should calculate delay correctly when mocking dependencies [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/baselineService.test.js" name="Baseline Service &gt; calculateVariance &gt; should mark critical delays [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/baselineService.test.js" name="Baseline Service &gt; captureBaseline &gt; should create snapshot from roadmap initiatives [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/billingService.test.js" timestamp="2025-12-21T11:11:50.102Z" hostname="MacBook-Pro-Piotr.local" tests="19" failures="12" errors="0" skipped="0" time="0.222700542">
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getPlans() &gt; should return all active subscription plans" time="0.005391542">
            <failure message="expected [ { id: &apos;plan-trial&apos;, (10) }, (3) ] to have a length of 2 but got 4" type="AssertionError">
AssertionError: expected [ { id: &apos;plan-trial&apos;, (10) }, (3) ] to have a length of 2 but got 4

- Expected
+ Received

- 2
+ 4

  tests/unit/backend/billingService.test.js:77:27
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getPlans() &gt; should handle database errors" time="0.001679625">
            <failure message="promise resolved &quot;[ { id: &apos;plan-trial&apos;, (10) }, (3) ]&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;[ { id: &apos;plan-trial&apos;, (10) }, (3) ]&quot; instead of rejecting

- Expected: 
Error {
  &quot;message&quot;: &quot;rejected promise&quot;,
}

+ Received: 
[
  {
    &quot;created_at&quot;: &quot;2025-12-21 11:11:41&quot;,
    &quot;features&quot;: &quot;{\&quot;printing\&quot;:false,\&quot;analytics\&quot;:\&quot;basic\&quot;,\&quot;duration_days\&quot;:7}&quot;,
    &quot;id&quot;: &quot;plan-trial&quot;,
    &quot;is_active&quot;: 1,
    &quot;name&quot;: &quot;Trial (7 Days)&quot;,
    &quot;price_monthly&quot;: 0,
    &quot;storage_limit_gb&quot;: 1,
    &quot;storage_overage_rate&quot;: null,
    &quot;stripe_price_id&quot;: null,
    &quot;token_limit&quot;: 10000,
    &quot;token_overage_rate&quot;: null,
  },
  {
    &quot;created_at&quot;: &quot;2025-12-21 11:11:41&quot;,
    &quot;features&quot;: &quot;{\&quot;printing\&quot;:true,\&quot;analytics\&quot;:\&quot;standard\&quot;}&quot;,
    &quot;id&quot;: &quot;plan-pro&quot;,
    &quot;is_active&quot;: 1,
    &quot;name&quot;: &quot;Pro&quot;,
    &quot;price_monthly&quot;: 299,
    &quot;storage_limit_gb&quot;: 50,
    &quot;storage_overage_rate&quot;: null,
    &quot;stripe_price_id&quot;: null,
    &quot;token_limit&quot;: 500000,
    &quot;token_overage_rate&quot;: null,
  },
  {
    &quot;created_at&quot;: &quot;2025-12-21 11:11:41&quot;,
    &quot;features&quot;: &quot;{\&quot;printing\&quot;:true,\&quot;analytics\&quot;:\&quot;advanced\&quot;}&quot;,
    &quot;id&quot;: &quot;plan-elite&quot;,
    &quot;is_active&quot;: 1,
    &quot;name&quot;: &quot;Elite&quot;,
    &quot;price_monthly&quot;: 999,
    &quot;storage_limit_gb&quot;: 500,
    &quot;storage_overage_rate&quot;: null,
    &quot;stripe_price_id&quot;: null,
    &quot;token_limit&quot;: 2000000,
    &quot;token_overage_rate&quot;: null,
  },
  {
    &quot;created_at&quot;: &quot;2025-12-21 11:11:41&quot;,
    &quot;features&quot;: &quot;{\&quot;printing\&quot;:true,\&quot;analytics\&quot;:\&quot;full\&quot;,\&quot;support\&quot;:\&quot;dedicated\&quot;}&quot;,
    &quot;id&quot;: &quot;plan-enterprise&quot;,
    &quot;is_active&quot;: 1,
    &quot;name&quot;: &quot;Enterprise&quot;,
    &quot;price_monthly&quot;: 2999,
    &quot;storage_limit_gb&quot;: 5000,
    &quot;storage_overage_rate&quot;: null,
    &quot;stripe_price_id&quot;: null,
    &quot;token_limit&quot;: 10000000,
    &quot;token_overage_rate&quot;: null,
  },
]

  tests/unit/backend/billingService.test.js:91:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getPlanById() &gt; should return plan by ID" time="0.001027125">
            <failure message="Cannot read properties of undefined (reading &apos;id&apos;)" type="TypeError">
TypeError: Cannot read properties of undefined (reading &apos;id&apos;)
  tests/unit/backend/billingService.test.js:109:25
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getPlanById() &gt; should return null for non-existent plan" time="0.000602041">
            <failure message="expected undefined to be null" type="AssertionError">
AssertionError: expected undefined to be null

- Expected: 
null

+ Received: 
undefined

  tests/unit/backend/billingService.test.js:119:26
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; createPlan() &gt; should create a new subscription plan" time="0.000925125">
            <failure message="expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (2) ]

Number of calls: 0
" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (2) ]

Number of calls: 0

  tests/unit/backend/billingService.test.js:140:32
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getOrganizationBilling() &gt; should return billing info for organization" time="0.0008425">
            <failure message="Cannot read properties of undefined (reading &apos;organization_id&apos;)" type="TypeError">
TypeError: Cannot read properties of undefined (reading &apos;organization_id&apos;)
  tests/unit/backend/billingService.test.js:162:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getOrganizationBilling() &gt; should return null for organization without billing" time="0.00085425">
            <failure message="expected undefined to be null" type="AssertionError">
AssertionError: expected undefined to be null

- Expected: 
null

+ Received: 
undefined

  tests/unit/backend/billingService.test.js:174:29
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; upsertOrganizationBilling() &gt; should create billing record for new organization" time="0.000755708">
            <failure message="expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (2) ]

Number of calls: 0
" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (2) ]

Number of calls: 0

  tests/unit/backend/billingService.test.js:193:32
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; upsertOrganizationBilling() &gt; should update existing billing record" time="0.000774709">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getOrCreateStripeCustomer() &gt; should return mock customer when Stripe not configured" time="0.000424125">
            <system-err>
Stripe not configured, returning mock customer

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getOrCreateStripeCustomer() &gt; should return existing customer when found" time="0.000153667">
            <system-err>
Stripe not configured, returning mock customer

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; createSubscription() &gt; should create mock subscription when Stripe not configured" time="0.000809167">
            <failure message="Invalid plan" type="Error">
Error: Invalid plan
  Object.createSubscription server/services/billingService.js:240:22
  tests/unit/backend/billingService.test.js:273:34
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; createSubscription() &gt; should throw error for invalid plan" time="0.004518209">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; cancelSubscription() &gt; should cancel subscription" time="0.000672959">
            <failure message="No active subscription" type="Error">
Error: No active subscription
  Object.cancelSubscription server/services/billingService.js:283:15
  tests/unit/backend/billingService.test.js:312:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; cancelSubscription() &gt; should throw error when no active subscription" time="0.000255375">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getInvoices() &gt; should return invoices for organization" time="0.001177209">
            <failure message="expected [] to have a length of 2 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 2 but got +0

- Expected
+ Received

- 2
+ 0

  tests/unit/backend/billingService.test.js:343:30
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getInvoices() &gt; should only return invoices for specified organization" time="0.000581916">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; Multi-Tenant Isolation &gt; should only access billing for specified organization" time="0.000313458">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; Multi-Tenant Isolation &gt; should not leak invoices between organizations" time="0.000945042">
            <failure message="expected [] to have a length of 1 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

  tests/unit/backend/billingService.test.js:402:31
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/capacityService.test.js" timestamp="2025-12-21T11:11:50.105Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="3" errors="0" skipped="0" time="0.14202325">
        <testcase classname="tests/unit/backend/capacityService.test.js" name="CapacityService &gt; getUserCapacity &gt; should return default capacity if not found" time="0.001063958">
        </testcase>
        <testcase classname="tests/unit/backend/capacityService.test.js" name="CapacityService &gt; getUserCapacity &gt; should return stored capacity" time="0.005226667">
            <failure message="expected undefined to be 30 // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be 30 // Object.is equality

- Expected: 
30

+ Received: 
undefined

  tests/unit/backend/capacityService.test.js:61:46
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/capacityService.test.js" name="CapacityService &gt; calculateUserCapacity &gt; should calculate capacity based on tasks" time="0.001553375">
            <failure message="expected undefined to be defined" type="AssertionError">
AssertionError: expected undefined to be defined
  tests/unit/backend/capacityService.test.js:92:30
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/capacityService.test.js" name="CapacityService &gt; detectOverloads &gt; should identify users with overloaded weeks" time="0.001626708">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/capacityService.test.js:147:41
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/capacityService.test.js" name="CapacityService &gt; suggestResolutions &gt; should suggest REASSIGN for sustained overload" time="0.000124416">
        </testcase>
        <testcase classname="tests/unit/backend/capacityService.test.js" name="CapacityService &gt; suggestResolutions &gt; should suggest RESEQUENCE for peak overload" time="0.00005775">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/connectorHealthService.test.js" timestamp="2025-12-21T11:11:50.105Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.14499375">
        <testcase classname="tests/unit/backend/connectorHealthService.test.js" name="Connector Health Service &gt; should perform health check (DB interaction) [SKIPPED]" time="0.000539208">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/connectorService.test.js" timestamp="2025-12-21T11:11:50.105Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.089162708">
        <testcase classname="tests/unit/backend/connectorService.test.js" name="Connector Service &gt; should manage connectors (DB interaction) [SKIPPED]" time="0.000477042">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/contextService.test.js" timestamp="2025-12-21T11:11:50.105Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.147998291">
        <testcase classname="tests/unit/backend/contextService.test.js" name="Context Service &gt; should handle context operations (DB interaction) [SKIPPED]" time="0.000534917">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/criticalPathService.test.js" timestamp="2025-12-21T11:11:50.105Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.151349167">
        <testcase classname="tests/unit/backend/criticalPathService.test.js" name="CriticalPathService &gt; calculateCriticalPath &gt; should identify critical path correctly" time="0.002430333">
        </testcase>
        <testcase classname="tests/unit/backend/criticalPathService.test.js" name="CriticalPathService &gt; calculateCriticalPath &gt; should handle disjoint paths logic" time="0.000285875">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/dependencyService.test.js" timestamp="2025-12-21T11:11:50.105Z" hostname="MacBook-Pro-Piotr.local" tests="9" failures="0" errors="0" skipped="0" time="0.172659583">
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; addDependency &gt; should add dependency" time="0.00151575">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; addDependency &gt; should prevent self-dependency" time="0.000581666">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; removeDependency &gt; should remove dependency" time="0.000114625">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; getDependencies &gt; should return dependencies" time="0.000255083">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; buildDependencyGraph &gt; should build graph structure" time="0.000345875">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; detectDeadlocks &gt; should detect cycles" time="0.000142209">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; detectDeadlocks &gt; should return false for acyclic graph" time="0.000070375">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; canStart &gt; should be true if no blockers" time="0.000078916">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; canStart &gt; should be false if blockers exist" time="0.00009275">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/economicsService.test.js" timestamp="2025-12-21T11:11:50.106Z" hostname="MacBook-Pro-Piotr.local" tests="18" failures="8" errors="0" skipped="0" time="0.214436917">
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; createValueHypothesis() &gt; should create a value hypothesis" time="0.004551959">
            <failure message="expected &apos;8e61e767-21c5-452d-b051-1234a8ea1254&apos; to be &apos;hypothesis-1&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;8e61e767-21c5-452d-b051-1234a8ea1254&apos; to be &apos;hypothesis-1&apos; // Object.is equality

Expected: &quot;hypothesis-1&quot;
Received: &quot;8e61e767-21c5-452d-b051-1234a8ea1254&quot;

  tests/unit/backend/economicsService.test.js:65:31
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; createValueHypothesis() &gt; should default confidenceLevel to MEDIUM" time="0.000640333">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; createValueHypothesis() &gt; should handle empty relatedInitiativeIds" time="0.00149825">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; createValueHypothesis() &gt; should handle database errors" time="0.00241175">
            <failure message="promise resolved &quot;{ (4) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ (4) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;description&quot;: &quot;Test&quot;,
+   &quot;id&quot;: &quot;3c2d13c5-2937-4508-b199-cf0917837cf1&quot;,
+   &quot;initiativeId&quot;: &quot;init-123&quot;,
+   &quot;type&quot;: &quot;EFFICIENCY&quot;,
  }

  tests/unit/backend/economicsService.test.js:120:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; getValueHypotheses() &gt; should retrieve value hypotheses for a project" time="0.000802">
            <failure message="expected [ { (17) }, { (17) }, (2) ] to have a length of 1 but got 4" type="AssertionError">
AssertionError: expected [ { (17) }, { (17) }, (2) ] to have a length of 1 but got 4

- Expected
+ Received

- 1
+ 4

  tests/unit/backend/economicsService.test.js:148:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; getValueHypotheses() &gt; should filter by initiativeId when provided" time="0.00029875">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; getValueHypotheses() &gt; should handle invalid JSON in relatedInitiativeIds" time="0.000765333">
            <failure message="expected [ &apos;init-456&apos; ] to deeply equal []" type="AssertionError">
AssertionError: expected [ &apos;init-456&apos; ] to deeply equal []

- Expected
+ Received

- []
+ [
+   &quot;init-456&quot;,
+ ]

  tests/unit/backend/economicsService.test.js:180:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; validateHypothesis() &gt; should validate a value hypothesis" time="0.00117725">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/economicsService.test.js:199:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; validateHypothesis() &gt; should return false when hypothesis not found" time="0.000542709">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; addFinancialAssumption() &gt; should add financial assumption to hypothesis" time="0.000502375">
            <failure message="expected &apos;12ccdd20-6816-4b19-9a80-20cb90b43432&apos; to be &apos;hypothesis-1&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;12ccdd20-6816-4b19-9a80-20cb90b43432&apos; to be &apos;hypothesis-1&apos; // Object.is equality

Expected: &quot;hypothesis-1&quot;
Received: &quot;12ccdd20-6816-4b19-9a80-20cb90b43432&quot;

  tests/unit/backend/economicsService.test.js:241:31
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; addFinancialAssumption() &gt; should default currency to USD" time="0.000277209">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; addFinancialAssumption() &gt; should default timeframe to &quot;per year&quot;" time="0.000266333">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; detectMissingValueHypotheses() &gt; should detect initiatives without value hypotheses" time="0.001158459">
            <failure message="expected +0 to be 2 // Object.is equality" type="AssertionError">
AssertionError: expected +0 to be 2 // Object.is equality

- Expected
+ Received

- 2
+ 0

  tests/unit/backend/economicsService.test.js:297:34
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; detectMissingValueHypotheses() &gt; should return empty array when all initiatives have hypotheses" time="0.000749375">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; getValueSummary() &gt; should generate value summary for project" time="0.001615292">
            <failure message="expected [ { type: &apos;EFFICIENCY&apos;, (2) } ] to deeply equal [ { type: &apos;EFFICIENCY&apos;, (2) } ]" type="AssertionError">
AssertionError: expected [ { type: &apos;EFFICIENCY&apos;, (2) } ] to deeply equal [ { type: &apos;EFFICIENCY&apos;, (2) } ]

- Expected
+ Received

  [
    {
-     &quot;count&quot;: 2,
+     &quot;count&quot;: 4,
      &quot;type&quot;: &quot;EFFICIENCY&quot;,
-     &quot;validated&quot;: 1,
+     &quot;validated&quot;: 0,
    },
  ]

  tests/unit/backend/economicsService.test.js:345:45
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; getValueSummary() &gt; should handle missing financial data" time="0.001376666">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should export VALUE_TYPES enum" time="0.000160958">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; Multi-Tenant Isolation &gt; should filter hypotheses by project_id" time="0.000425041">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/edgeCases.test.js" timestamp="2025-12-21T11:11:50.107Z" hostname="MacBook-Pro-Piotr.local" tests="15" failures="4" errors="0" skipped="0" time="0.225467125">
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Null and Undefined Handling &gt; should handle null organizationId gracefully" time="0.001577041">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Null and Undefined Handling &gt; should handle undefined projectId in storage" time="0.000205333">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Empty Data Handling &gt; should handle empty arrays in queries" time="0.000647416">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Empty Data Handling &gt; should handle empty search results" time="0.000927208">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Boundary Conditions &gt; should handle maximum token limit" time="0.000916125">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Boundary Conditions &gt; should handle zero token limit (unlimited)" time="0.000179916">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Invalid Input Handling &gt; should reject invalid email format in invitations" time="0.003005042">
            <failure message="InvitationService.setDependencies is not a function" type="TypeError">
TypeError: InvitationService.setDependencies is not a function
  tests/unit/backend/edgeCases.test.js:132:31
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Invalid Input Handling &gt; should reject invalid evidence type" time="0.000841">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Invalid Input Handling &gt; should reject invalid entity type in evidence linking" time="0.000199791">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Database Error Handling &gt; should handle database connection errors gracefully" time="0.003915167">
            <failure message="promise resolved &quot;{ (7) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ (7) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;createdBy&quot;: &quot;user-admin-123&quot;,
+   &quot;description&quot;: &quot;Test&quot;,
+   &quot;id&quot;: &quot;037046f0-75ea-4462-857c-4b6b75f63a26&quot;,
+   &quot;projectId&quot;: &quot;project-123&quot;,
+   &quot;status&quot;: &quot;DRAFT&quot;,
+   &quot;title&quot;: &quot;Test&quot;,
+   &quot;type&quot;: &quot;TECHNICAL&quot;,
  }

  tests/unit/backend/edgeCases.test.js:195:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Database Error Handling &gt; should handle constraint violations" time="0.0142685">
            <failure message="expected [Function] to throw error including &apos;UNIQUE constraint failed&apos; but got &apos;SQLITE_CONSTRAINT: NOT NULL constrain&apos;" type="AssertionError">
AssertionError: expected [Function] to throw error including &apos;UNIQUE constraint failed&apos; but got &apos;SQLITE_CONSTRAINT: NOT NULL constrain&apos;

Expected: &quot;UNIQUE constraint failed&quot;
Received: &quot;SQLITE_CONSTRAINT: NOT NULL constraint failed: organization_members.user_id&quot;

  tests/unit/backend/edgeCases.test.js:206:13
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Concurrent Modification Handling &gt; should handle optimistic locking failures" time="0.000271583">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Large Data Handling &gt; should handle large result sets efficiently" time="0.000730916">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Large Data Handling &gt; should handle large payloads in storage" time="0.000113625">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Timeout Handling &gt; should handle slow database queries" time="0.003364209">
            <failure message="expected 3 to be greater than or equal to 100" type="AssertionError">
AssertionError: expected 3 to be greater than or equal to 100
  tests/unit/backend/edgeCases.test.js:297:30
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/emailService.test.js" timestamp="2025-12-21T11:11:50.108Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.250497708">
        <testcase classname="tests/unit/backend/emailService.test.js" name="Backend Service Test: EmailService &gt; sendEmail &gt; sends email with default config" time="0.002448958">
        </testcase>
        <testcase classname="tests/unit/backend/emailService.test.js" name="Backend Service Test: EmailService &gt; sendEmail &gt; uses SMTP settings from database" time="0.052364458">
        </testcase>
        <testcase classname="tests/unit/backend/emailService.test.js" name="Backend Service Test: EmailService &gt; sendEmail &gt; handles database errors gracefully" time="0.000710042">
        </testcase>
        <testcase classname="tests/unit/backend/emailService.test.js" name="Backend Service Test: EmailService &gt; sendEmail &gt; logs email details" time="0.000522125">
        </testcase>
        <testcase classname="tests/unit/backend/emailService.test.js" name="Backend Service Test: EmailService &gt; sendEmail &gt; uses environment variables when database settings are missing" time="0.000795084">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/escalationService.test.js" timestamp="2025-12-21T11:11:50.109Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="9" errors="0" skipped="0" time="0.184661792">
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; createEscalation() &gt; should create an escalation and send notification" time="0.005979958">
            <failure message="expected &apos;06c90fc3-a764-404e-b0b1-7ba9843fb479&apos; to be &apos;escalation-1&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;06c90fc3-a764-404e-b0b1-7ba9843fb479&apos; to be &apos;escalation-1&apos; // Object.is equality

Expected: &quot;escalation-1&quot;
Received: &quot;06c90fc3-a764-404e-b0b1-7ba9843fb479&quot;

  tests/unit/backend/escalationService.test.js:80:31
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; createEscalation() &gt; should default daysOverdue to 0" time="0.001314459">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; createEscalation() &gt; should handle database errors" time="0.002752584">
            <failure message="promise resolved &quot;{ (4) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ (4) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;id&quot;: &quot;7d05041c-0bfc-4cab-9ecc-ce02dd0d74de&quot;,
+   &quot;projectId&quot;: &quot;proj-test-123&quot;,
+   &quot;reason&quot;: &quot;Test&quot;,
+   &quot;toUserId&quot;: &quot;user-admin-123&quot;,
  }

  tests/unit/backend/escalationService.test.js:136:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; getEscalations() &gt; should retrieve escalations for a project" time="0.00146225">
            <failure message="expected [ { (18) }, { (18) }, { (18) } ] to deeply equal [ { id: &apos;esc-1&apos;, (6) } ]" type="AssertionError">
AssertionError: expected [ { (18) }, { (18) }, { (18) } ] to deeply equal [ { id: &apos;esc-1&apos;, (6) } ]

- Expected
+ Received

  [
    {
-     &quot;from_first&quot;: &quot;John&quot;,
-     &quot;from_last&quot;: &quot;Doe&quot;,
-     &quot;id&quot;: &quot;esc-1&quot;,
+     &quot;acknowledged_at&quot;: null,
+     &quot;created_at&quot;: &quot;2025-12-21 11:11:42&quot;,
+     &quot;days_overdue&quot;: 14,
+     &quot;from_first&quot;: null,
+     &quot;from_last&quot;: null,
+     &quot;from_user_id&quot;: &quot;user-123&quot;,
+     &quot;id&quot;: &quot;06c90fc3-a764-404e-b0b1-7ba9843fb479&quot;,
+     &quot;project_id&quot;: &quot;proj-test-123&quot;,
+     &quot;reason&quot;: &quot;Decision pending for 14+ days&quot;,
+     &quot;resolved_at&quot;: null,
+     &quot;source_id&quot;: &quot;decision-123&quot;,
+     &quot;source_type&quot;: &quot;DECISION&quot;,
+     &quot;status&quot;: &quot;PENDING&quot;,
+     &quot;to_first&quot;: null,
+     &quot;to_last&quot;: null,
+     &quot;to_role&quot;: &quot;ADMIN&quot;,
+     &quot;to_user_id&quot;: &quot;user-admin-123&quot;,
+     &quot;trigger_type&quot;: &quot;OVERDUE&quot;,
+   },
+   {
+     &quot;acknowledged_at&quot;: null,
+     &quot;created_at&quot;: &quot;2025-12-21 11:11:42&quot;,
+     &quot;days_overdue&quot;: 0,
+     &quot;from_first&quot;: null,
+     &quot;from_last&quot;: null,
+     &quot;from_user_id&quot;: &quot;user-123&quot;,
+     &quot;id&quot;: &quot;0ad57a0a-5450-45ac-991f-4516a8d00905&quot;,
+     &quot;project_id&quot;: &quot;proj-test-123&quot;,
+     &quot;reason&quot;: &quot;Task overdue&quot;,
+     &quot;resolved_at&quot;: null,
+     &quot;source_id&quot;: &quot;task-123&quot;,
+     &quot;source_type&quot;: &quot;TASK&quot;,
+     &quot;status&quot;: &quot;PENDING&quot;,
+     &quot;to_first&quot;: null,
+     &quot;to_last&quot;: null,
+     &quot;to_role&quot;: &quot;ADMIN&quot;,
+     &quot;to_user_id&quot;: &quot;user-admin-123&quot;,
+     &quot;trigger_type&quot;: &quot;OVERDUE&quot;,
+   },
+   {
+     &quot;acknowledged_at&quot;: null,
+     &quot;created_at&quot;: &quot;2025-12-21 11:11:42&quot;,
+     &quot;days_overdue&quot;: 0,
+     &quot;from_first&quot;: null,
+     &quot;from_last&quot;: null,
+     &quot;from_user_id&quot;: &quot;user-123&quot;,
+     &quot;id&quot;: &quot;7d05041c-0bfc-4cab-9ecc-ce02dd0d74de&quot;,
      &quot;project_id&quot;: &quot;proj-test-123&quot;,
+     &quot;reason&quot;: &quot;Test&quot;,
+     &quot;resolved_at&quot;: null,
+     &quot;source_id&quot;: &quot;decision-123&quot;,
      &quot;source_type&quot;: &quot;DECISION&quot;,
-     &quot;to_first&quot;: &quot;Jane&quot;,
-     &quot;to_last&quot;: &quot;Smith&quot;,
+     &quot;status&quot;: &quot;PENDING&quot;,
+     &quot;to_first&quot;: null,
+     &quot;to_last&quot;: null,
+     &quot;to_role&quot;: &quot;ADMIN&quot;,
+     &quot;to_user_id&quot;: &quot;user-admin-123&quot;,
+     &quot;trigger_type&quot;: &quot;OVERDUE&quot;,
    },
  ]

  tests/unit/backend/escalationService.test.js:165:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; getEscalations() &gt; should filter by status when provided" time="0.000300958">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; getEscalations() &gt; should include user names from joins" time="0.000297042">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; acknowledgeEscalation() &gt; should acknowledge an escalation" time="0.000478917">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/escalationService.test.js:212:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; acknowledgeEscalation() &gt; should return false when escalation not found or user mismatch" time="0.000310208">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; resolveEscalation() &gt; should resolve an escalation" time="0.000528708">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/escalationService.test.js:242:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; resolveEscalation() &gt; should return false when escalation not found" time="0.000420459">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; runAutoEscalation() &gt; should escalate overdue decisions to sponsor" time="0.000774583">
            <failure message="expected undefined to be &apos;proj-test-123&apos; // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be &apos;proj-test-123&apos; // Object.is equality

- Expected: 
&quot;proj-test-123&quot;

+ Received: 
undefined

  tests/unit/backend/escalationService.test.js:297:38
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; runAutoEscalation() &gt; should not escalate if project not found" time="0.000305083">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; runAutoEscalation() &gt; should not create duplicate escalations" time="0.000396375">
            <failure message="expected undefined to be +0 // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be +0 // Object.is equality

- Expected: 
0

+ Received: 
undefined

  tests/unit/backend/escalationService.test.js:346:47
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; runAutoEscalation() &gt; should escalate stalled initiatives to PM" time="0.000498583">
            <failure message="actual value must be number or bigint, received &quot;undefined&quot;" type="TypeError">
TypeError: actual value must be number or bigint, received &quot;undefined&quot;
  tests/unit/backend/escalationService.test.js:399:47
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; Multi-Tenant Isolation &gt; should filter escalations by project_id" time="0.000266792">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; Multi-Tenant Isolation &gt; should get organization_id from project for notifications" time="0.000862375">
            <failure message="expected &quot;vi.fn()&quot; to be called with arguments: [ ObjectContaining{} ]

Number of calls: 0
" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called with arguments: [ ObjectContaining{} ]

Number of calls: 0

  tests/unit/backend/escalationService.test.js:439:52
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/evidenceLedgerService.test.js" timestamp="2025-12-21T11:11:50.110Z" hostname="MacBook-Pro-Piotr.local" tests="30" failures="4" errors="0" skipped="0" time="0.243294625">
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; redactPayload() &gt; should redact PII fields from payload" time="0.001598541">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; redactPayload() &gt; should redact nested PII fields" time="0.000199459">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; redactPayload() &gt; should redact PII in arrays" time="0.000134292">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; redactPayload() &gt; should support additional fields to redact" time="0.0001075">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; redactPayload() &gt; should handle null/undefined payloads" time="0.000099875">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; createEvidenceObject() &gt; should create an evidence object with redacted payload" time="0.000320584">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; createEvidenceObject() &gt; should reject invalid evidence type" time="0.000583666">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; createEvidenceObject() &gt; should reject missing required fields" time="0.000117917">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; linkEvidence() &gt; should link evidence to an entity" time="0.000216167">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; linkEvidence() &gt; should normalize weight to 0-1 range" time="0.00010975">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; linkEvidence() &gt; should reject invalid entity type" time="0.000107791">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; linkEvidence() &gt; should reject missing required fields" time="0.00008225">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; recordReasoning() &gt; should record reasoning entry" time="0.000390041">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; recordReasoning() &gt; should normalize confidence to 0-1 range" time="0.000070833">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; recordReasoning() &gt; should reject missing required fields" time="0.000093166">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; getExplanation() &gt; should get full explanation for an entity" time="0.004806209">
            <failure message="expected [] to have a length of 1 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

  tests/unit/backend/evidenceLedgerService.test.js:301:38
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; getExplanation() &gt; should handle empty explanation" time="0.000616792">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; getExplanation() &gt; should reject missing required fields" time="0.000192291">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; hasEvidence() &gt; should check if entity has evidence" time="0.000546917">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/evidenceLedgerService.test.js:346:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; hasEvidence() &gt; should return false when no evidence exists" time="0.000196708">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; createAndLinkEvidence() &gt; should create evidence and link it in one operation" time="0.0001725">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; getEvidencesByOrg() &gt; should get evidences for organization" time="0.000451334">
            <failure message="expected [] to have a length of 1 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

  tests/unit/backend/evidenceLedgerService.test.js:410:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; getEvidencesByOrg() &gt; should filter by type when provided" time="0.000128083">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; getEvidencesByOrg() &gt; should respect limit when provided" time="0.000198084">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; exportExplanation() &gt; should export explanation as JSON pack" time="0.000594625">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; exportExplanation() &gt; should export explanation as PDF pack" time="0.001586167">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/evidenceLedgerService.test.js:487:68
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; Multi-Tenant Isolation &gt; should scope evidences by organization_id" time="0.000682125">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; Multi-Tenant Isolation &gt; should scope explanation queries by org_id" time="0.000371416">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; Enums &gt; should export EVIDENCE_TYPES" time="0.000105375">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; Enums &gt; should export ENTITY_TYPES" time="0.000087083">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/executionMonitorService.test.js" timestamp="2025-12-21T11:11:50.111Z" hostname="MacBook-Pro-Piotr.local" tests="18" failures="13" errors="0" skipped="0" time="0.190978084">
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; runDailyMonitor() &gt; should detect stalled tasks" time="0.005913875">
            <failure message="expected [] to have a length of 1 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

  tests/unit/backend/executionMonitorService.test.js:62:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; runDailyMonitor() &gt; should detect overdue tasks and generate notifications" time="0.002073417">
            <failure message="expected [] to have a length of 1 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

  tests/unit/backend/executionMonitorService.test.js:89:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; runDailyMonitor() &gt; should detect overdue decisions" time="0.002020375">
            <failure message="expected [] to have a length of 1 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

  tests/unit/backend/executionMonitorService.test.js:118:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; runDailyMonitor() &gt; should detect stalled initiatives" time="0.001301666">
            <failure message="expected [] to have a length of 1 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

  tests/unit/backend/executionMonitorService.test.js:145:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; runDailyMonitor() &gt; should detect silent blockers" time="0.00124175">
            <failure message="expected [] to have a length of 1 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

  tests/unit/backend/executionMonitorService.test.js:169:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; runDailyMonitor() &gt; should return healthy status when no issues detected" time="0.001497666">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; runDailyMonitor() &gt; should include monitoredAt timestamp" time="0.000849042">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; _detectStalledTasks() &gt; should detect tasks not updated in 7+ days" time="0.001118583">
            <failure message="expected [] to deeply equal [ { id: &apos;task-1&apos;, (2) } ]" type="AssertionError">
AssertionError: expected [] to deeply equal [ { id: &apos;task-1&apos;, (2) } ]

- Expected
+ Received

- [
-   {
-     &quot;id&quot;: &quot;task-1&quot;,
-     &quot;status&quot;: &quot;in_progress&quot;,
-     &quot;title&quot;: &quot;Stalled Task&quot;,
-   },
- ]
+ []

  tests/unit/backend/executionMonitorService.test.js:222:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; _detectOverdueTasks() &gt; should detect tasks with due_date in the past" time="0.000640667">
            <failure message="expected [] to deeply equal [ { id: &apos;task-1&apos;, (2) } ]" type="AssertionError">
AssertionError: expected [] to deeply equal [ { id: &apos;task-1&apos;, (2) } ]

- Expected
+ Received

- [
-   {
-     &quot;due_date&quot;: &quot;2024-01-01&quot;,
-     &quot;id&quot;: &quot;task-1&quot;,
-     &quot;title&quot;: &quot;Overdue Task&quot;,
-   },
- ]
+ []

  tests/unit/backend/executionMonitorService.test.js:245:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; _detectOverdueDecisions() &gt; should detect decisions pending for 7+ days" time="0.000439167">
            <failure message="expected [] to deeply equal [ { id: &apos;decision-1&apos;, (2) } ]" type="AssertionError">
AssertionError: expected [] to deeply equal [ { id: &apos;decision-1&apos;, (2) } ]

- Expected
+ Received

- [
-   {
-     &quot;id&quot;: &quot;decision-1&quot;,
-     &quot;status&quot;: &quot;PENDING&quot;,
-     &quot;title&quot;: &quot;Overdue Decision&quot;,
-   },
- ]
+ []

  tests/unit/backend/executionMonitorService.test.js:268:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; _detectStalledInitiatives() &gt; should detect initiatives not updated in 7+ days" time="0.000489458">
            <failure message="expected [] to deeply equal [ { id: &apos;init-1&apos;, (2) } ]" type="AssertionError">
AssertionError: expected [] to deeply equal [ { id: &apos;init-1&apos;, (2) } ]

- Expected
+ Received

- [
-   {
-     &quot;id&quot;: &quot;init-1&quot;,
-     &quot;name&quot;: &quot;Stalled Initiative&quot;,
-     &quot;status&quot;: &quot;IN_EXECUTION&quot;,
-   },
- ]
+ []

  tests/unit/backend/executionMonitorService.test.js:291:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; _detectSilentBlockers() &gt; should detect blocked items without reason" time="0.000530833">
            <failure message="expected [] to deeply equal [ { id: &apos;task-1&apos;, (2) } ]" type="AssertionError">
AssertionError: expected [] to deeply equal [ { id: &apos;task-1&apos;, (2) } ]

- Expected
+ Received

- [
-   {
-     &quot;id&quot;: &quot;task-1&quot;,
-     &quot;title&quot;: &quot;Blocked Task&quot;,
-     &quot;type&quot;: &quot;TASK&quot;,
-   },
- ]
+ []

  tests/unit/backend/executionMonitorService.test.js:315:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; generateExecutionSummary() &gt; should generate summary when no issues" time="0.000966208">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; generateExecutionSummary() &gt; should generate summary with issues" time="0.001429833">
            <failure message="expected &apos; Execution is healthy. No issues det&apos; to contain &apos;&apos;" type="AssertionError">
AssertionError: expected &apos; Execution is healthy. No issues det&apos; to contain &apos;&apos;

Expected: &quot;&quot;
Received: &quot; Execution is healthy. No issues detected.&quot;

  tests/unit/backend/executionMonitorService.test.js:350:40
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; generateExecutionSummary() &gt; should include all issue types in summary" time="0.001790458">
            <failure message="expected &apos; Execution is healthy. No issues det&apos; to contain &apos;OVERDUE_TASKS&apos;" type="AssertionError">
AssertionError: expected &apos; Execution is healthy. No issues det&apos; to contain &apos;OVERDUE_TASKS&apos;

Expected: &quot;OVERDUE_TASKS&quot;
Received: &quot; Execution is healthy. No issues detected.&quot;

  tests/unit/backend/executionMonitorService.test.js:374:40
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; generateExecutionSummary() &gt; should include generatedAt timestamp" time="0.000965708">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; Multi-Tenant Isolation &gt; should filter all queries by project_id" time="0.001151125">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; Multi-Tenant Isolation &gt; should scope notifications to correct users" time="0.001353083">
            <failure message="Cannot read properties of undefined (reading &apos;userId&apos;)" type="TypeError">
TypeError: Cannot read properties of undefined (reading &apos;userId&apos;)
  tests/unit/backend/executionMonitorService.test.js:427:44
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/feedbackService.test.js" timestamp="2025-12-21T11:11:50.113Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.670698959">
        <testcase classname="tests/unit/backend/feedbackService.test.js" name="Backend Service Test: FeedbackService &gt; saveFeedback &gt; saves feedback with all parameters" time="0.103240292">
        </testcase>
        <testcase classname="tests/unit/backend/feedbackService.test.js" name="Backend Service Test: FeedbackService &gt; saveFeedback &gt; saves feedback without correction" time="0.102211209">
        </testcase>
        <testcase classname="tests/unit/backend/feedbackService.test.js" name="Backend Service Test: FeedbackService &gt; getLearningExamples &gt; retrieves learning examples for context" time="0.111752709">
        </testcase>
        <testcase classname="tests/unit/backend/feedbackService.test.js" name="Backend Service Test: FeedbackService &gt; getLearningExamples &gt; handles empty results" time="0.002544708">
        </testcase>
        <testcase classname="tests/unit/backend/feedbackService.test.js" name="Backend Service Test: FeedbackService &gt; getLearningExamples &gt; handles database errors gracefully" time="0.00139275">
        </testcase>
        <testcase classname="tests/unit/backend/feedbackService.test.js" name="Backend Service Test: FeedbackService &gt; getLearningExamples &gt; only returns examples with rating &gt;= 4" time="0.102056083">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/financialService.test.js" timestamp="2025-12-21T11:11:50.113Z" hostname="MacBook-Pro-Piotr.local" tests="9" failures="0" errors="0" skipped="0" time="0.183088416">
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateCost &gt; should estimate cost for High complexity" time="0.000521708">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateCost &gt; should estimate cost for Medium complexity" time="0.000083042">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateCost &gt; should fallback to Low complexity" time="0.000079375">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateBenefit &gt; should estimate benefit for High priority" time="0.000089834">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateBenefit &gt; should estimate benefit for Medium priority" time="0.000065042">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateBenefit &gt; should fallback to Low priority" time="0.000044583">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateBenefit &gt; should return correct benefit range" time="0.000094">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; simulatePortfolio &gt; should calculate aggregated metrics" time="0.00015825">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; simulatePortfolio &gt; should handle empty portfolio" time="0.00006325">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/governanceService.test.js" timestamp="2025-12-21T11:11:50.114Z" hostname="MacBook-Pro-Piotr.local" tests="14" failures="3" errors="0" skipped="0" time="0.207500292">
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; createChangeRequest() &gt; should create a new Change Request with DRAFT status" time="0.004359292">
            <failure message="expected &apos;f799fb11-873d-4841-8921-87d4cd292926&apos; to be &apos;cr-1&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;f799fb11-873d-4841-8921-87d4cd292926&apos; to be &apos;cr-1&apos; // Object.is equality

Expected: &quot;cr-1&quot;
Received: &quot;f799fb11-873d-4841-8921-87d4cd292926&quot;

  tests/unit/backend/governanceService.test.js:64:31
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; createChangeRequest() &gt; should default riskAssessment to LOW if not provided" time="0.000360666">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; createChangeRequest() &gt; should handle JSON stringification of impactAnalysis" time="0.000346375">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; createChangeRequest() &gt; should reject on database error" time="0.002749334">
            <failure message="promise resolved &quot;{ (7) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ (7) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;createdBy&quot;: &quot;user-admin-123&quot;,
+   &quot;description&quot;: &quot;Test&quot;,
+   &quot;id&quot;: &quot;07e0c3fa-d870-4658-aeb3-65c06caad7de&quot;,
+   &quot;projectId&quot;: &quot;proj-test-123&quot;,
+   &quot;status&quot;: &quot;DRAFT&quot;,
+   &quot;title&quot;: &quot;Test CR&quot;,
+   &quot;type&quot;: &quot;TECHNICAL&quot;,
  }

  tests/unit/backend/governanceService.test.js:124:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; decideChangeRequest() &gt; should approve a Change Request" time="0.000553833">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; decideChangeRequest() &gt; should reject a Change Request" time="0.000724791">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; decideChangeRequest() &gt; should set approved_by to null when rejecting" time="0.000632292">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; decideChangeRequest() &gt; should set approved_by when approving" time="0.000550667">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; decideChangeRequest() &gt; should handle database errors" time="0.001298334">
            <failure message="promise resolved &quot;{ id: &apos;cr-123&apos;, (2) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ id: &apos;cr-123&apos;, (2) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;id&quot;: &quot;cr-123&quot;,
+   &quot;status&quot;: &quot;APPROVED&quot;,
+   &quot;userId&quot;: &quot;user-admin-123&quot;,
  }

  tests/unit/backend/governanceService.test.js:207:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; decideChangeRequest() &gt; should set approved_at timestamp" time="0.001274916">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; Multi-Tenant Isolation &gt; should associate CR with specific project" time="0.0005185">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; Multi-Tenant Isolation &gt; should track creator for audit purposes" time="0.000588458">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; Edge Cases &gt; should handle empty impactAnalysis" time="0.000243042">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; Edge Cases &gt; should handle optional reason in decideChangeRequest" time="0.000140375">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/helpService.test.js" timestamp="2025-12-21T11:11:50.114Z" hostname="MacBook-Pro-Piotr.local" tests="13" failures="0" errors="0" skipped="0" time="0.257020333">
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; EVENT_TYPES &gt; should define all required event types" time="0.009699916">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; EVENT_TYPES &gt; should have exactly 4 event types" time="0.000427625">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; TARGET_ROLES &gt; should define all valid target roles" time="0.000287708">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; TARGET_ROLES &gt; should have exactly 5 roles" time="0.000077667">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; TARGET_ORG_TYPES &gt; should define all valid org types" time="0.000138084">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; TARGET_ORG_TYPES &gt; should have exactly 4 org types" time="0.00006775">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject invalid event types in markEvent" time="0.000544042">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject createPlaybook without key" time="0.000126">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject createPlaybook without title" time="0.000086334">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject createPlaybook with invalid target role" time="0.000093458">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject createPlaybook with invalid org type" time="0.000070084">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject createStep without required fields" time="0.000083375">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject createStep with invalid action type" time="0.000068208">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/ingestionService.test.js" timestamp="2025-12-21T11:11:50.115Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.236638">
        <testcase classname="tests/unit/backend/ingestionService.test.js" name="Ingestion Service &gt; should handle ingestion (DB interaction) [SKIPPED]" time="0.00045625">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/initiativeService.multiTenant.test.js" timestamp="2025-12-21T11:11:50.115Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.077732459">
        <testcase classname="tests/unit/backend/initiativeService.multiTenant.test.js" name="InitiativeService - Multi-Tenant Isolation &gt; recalculateProgress with organizationId &gt; should filter tasks by organization_id AND initiative_id" time="0.000806375">
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.multiTenant.test.js" name="InitiativeService - Multi-Tenant Isolation &gt; recalculateProgress with organizationId &gt; should update initiative with org-scoped WHERE clause" time="0.00038725">
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.multiTenant.test.js" name="InitiativeService - Multi-Tenant Isolation &gt; recalculateProgress with organizationId &gt; should NOT mix tasks from different orgs" time="0.00013025">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/initiativeService.test.js" timestamp="2025-12-21T11:11:50.115Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.080174959">
        <testcase classname="tests/unit/backend/initiativeService.test.js" name="InitiativeService &gt; recalculateProgress &gt; should return 0 when no initiativeId provided" time="0.00069875">
            <system-err>
[InitiativeService] DEPRECATION WARNING: recalculateProgress called without organizationId

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.test.js" name="InitiativeService &gt; recalculateProgress &gt; should handle database error during fetch" time="0.00238175">
            <system-err>
[InitiativeService] DEPRECATION WARNING: recalculateProgress called without organizationId
Error fetching tasks for recalculation: Error: DB Fetch Error
    at Object.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/initiativeService.test.js:40:50)
    at Object.Mock [as all] (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/spy/dist/index.js:285:34)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/initiativeService.js:49:21
    at new Promise (&lt;anonymous&gt;)
    at Object.recalculateProgress (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/initiativeService.js:22:16)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/initiativeService.test.js:43:44
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.test.js" name="InitiativeService &gt; recalculateProgress &gt; should set progress to 0 if no tasks found" time="0.001109875">
            <system-err>
[InitiativeService] DEPRECATION WARNING: recalculateProgress called without organizationId

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.test.js" name="InitiativeService &gt; recalculateProgress &gt; should calculate weighted progress correctly" time="0.000252875">
            <system-err>
[InitiativeService] DEPRECATION WARNING: recalculateProgress called without organizationId

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.test.js" name="InitiativeService &gt; recalculateProgress &gt; should handle tasks with missing progress/priority" time="0.000109084">
            <system-err>
[InitiativeService] DEPRECATION WARNING: recalculateProgress called without organizationId

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.test.js" name="InitiativeService &gt; recalculateProgress &gt; should handle database error during update" time="0.000308125">
            <system-err>
[InitiativeService] DEPRECATION WARNING: recalculateProgress called without organizationId
Error updating initiative progress: Error: Update failed
    at Object.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/initiativeService.test.js:119:50)
    at Object.Mock [as run] (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/spy/dist/index.js:285:34)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/initiativeService.js:100:25
    at Object.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/initiativeService.test.js:113:21)
    at Object.Mock [as all] (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/spy/dist/index.js:285:34)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/initiativeService.js:49:21
    at new Promise (&lt;anonymous&gt;)
    at Object.recalculateProgress (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/initiativeService.js:22:16)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/initiativeService.test.js:122:44
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/invitationService.test.js" timestamp="2025-12-21T11:11:50.116Z" hostname="MacBook-Pro-Piotr.local" tests="23" failures="15" errors="0" skipped="0" time="0.194391709">
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; generateSecureToken() &gt; should generate 64-character hex token" time="0.003337042">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; generateSecureToken() &gt; should generate unique tokens" time="0.000409875">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; hashToken() &gt; should hash token using SHA256" time="0.000396959">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; hashToken() &gt; should produce consistent hash for same token" time="0.000135583">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; calculateExpiryDate() &gt; should calculate expiry date 7 days from now by default" time="0.00014275">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; calculateExpiryDate() &gt; should calculate expiry date for custom days" time="0.000087708">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; checkInvitePermission() &gt; should allow invitation when policy allows" time="0.003554917">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/invitationService.test.js:119:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; checkInvitePermission() &gt; should deny invitation when policy denies" time="0.001289584">
            <failure message="expected &apos;ORG_NOT_FOUND&apos; to be &apos;USER_LIMIT_REACHED&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;ORG_NOT_FOUND&apos; to be &apos;USER_LIMIT_REACHED&apos; // Object.is equality

Expected: &quot;USER_LIMIT_REACHED&quot;
Received: &quot;ORG_NOT_FOUND&quot;

  tests/unit/backend/invitationService.test.js:135:39
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; createOrganizationInvitation() &gt; should create organization invitation" time="0.000347">
            <failure message="InvitationService.createOrganizationInvitation is not a function" type="TypeError">
TypeError: InvitationService.createOrganizationInvitation is not a function
  tests/unit/backend/invitationService.test.js:161:56
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; createOrganizationInvitation() &gt; should reject invalid email format" time="0.000188084">
            <failure message="InvitationService.createOrganizationInvitation is not a function" type="TypeError">
TypeError: InvitationService.createOrganizationInvitation is not a function
  tests/unit/backend/invitationService.test.js:181:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; createOrganizationInvitation() &gt; should reject when organization not found" time="0.000172">
            <failure message="InvitationService.createOrganizationInvitation is not a function" type="TypeError">
TypeError: InvitationService.createOrganizationInvitation is not a function
  tests/unit/backend/invitationService.test.js:198:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; createOrganizationInvitation() &gt; should reject when permission denied" time="0.000163833">
            <failure message="InvitationService.createOrganizationInvitation is not a function" type="TypeError">
TypeError: InvitationService.createOrganizationInvitation is not a function
  tests/unit/backend/invitationService.test.js:220:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; createProjectInvitation() &gt; should create project invitation" time="0.000351584">
            <failure message="Project not found in this organization" type="Error">
Error: Project not found in this organization
  Object.createProjectInvitation server/services/invitationService.js:374:19
  tests/unit/backend/invitationService.test.js:252:32
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; createProjectInvitation() &gt; should reject when project not found" time="0.001363">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; createProjectInvitation() &gt; should reject when project belongs to different organization" time="0.000522208">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; validateToken() &gt; should validate correct token" time="0.00050725">
            <failure message="InvitationService.validateToken is not a function" type="TypeError">
TypeError: InvitationService.validateToken is not a function
  tests/unit/backend/invitationService.test.js:312:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; validateToken() &gt; should reject invalid token" time="0.00019725">
            <failure message="InvitationService.validateToken is not a function" type="TypeError">
TypeError: InvitationService.validateToken is not a function
  tests/unit/backend/invitationService.test.js:330:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; validateToken() &gt; should reject expired invitation" time="0.000160541">
            <failure message="InvitationService.validateToken is not a function" type="TypeError">
TypeError: InvitationService.validateToken is not a function
  tests/unit/backend/invitationService.test.js:347:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; validateToken() &gt; should reject already accepted invitation" time="0.000137208">
            <failure message="InvitationService.validateToken is not a function" type="TypeError">
TypeError: InvitationService.validateToken is not a function
  tests/unit/backend/invitationService.test.js:364:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; acceptInvitation() &gt; should accept valid invitation" time="0.000342708">
            <failure message="The &quot;data&quot; argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received undefined" type="TypeError">
TypeError: The &quot;data&quot; argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received undefined
  Object.hashToken server/services/invitationService.js:90:44
  Object.getByToken server/services/invitationService.js:444:45
  Object.acceptInvitation server/services/invitationService.js:477:52
  tests/unit/backend/invitationService.test.js:402:52


Serialized Error: { code: &apos;ERR_INVALID_ARG_TYPE&apos; }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; acceptInvitation() &gt; should reject invitation with mismatched email" time="0.000840917">
            <failure message="expected [Function] to throw error including &apos;Email mismatch&apos; but got &apos;The &quot;data&quot; argument must be of type s&apos;" type="AssertionError">
AssertionError: expected [Function] to throw error including &apos;Email mismatch&apos; but got &apos;The &quot;data&quot; argument must be of type s&apos;

Expected: &quot;Email mismatch&quot;
Received: &quot;The &quot;data&quot; argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received undefined&quot;

  tests/unit/backend/invitationService.test.js:425:13
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; revokeInvitation() &gt; should revoke pending invitation" time="0.000782542">
            <failure message="Invitation not found" type="Error">
Error: Invitation not found
  Object.revokeInvitation server/services/invitationService.js:766:19
  tests/unit/backend/invitationService.test.js:450:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; Multi-Tenant Isolation &gt; should only return invitations for specified organization" time="0.000545667">
            <failure message="InvitationService.getOrganizationInvitations is not a function" type="TypeError">
TypeError: InvitationService.getOrganizationInvitations is not a function
  tests/unit/backend/invitationService.test.js:469:37
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/knowledgeService.test.js" timestamp="2025-12-21T11:11:50.118Z" hostname="MacBook-Pro-Piotr.local" tests="11" failures="1" errors="0" skipped="0" time="0.257342167">
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Candidate Management &gt; should add a candidate idea without throwing" time="0.000985375">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Candidate Management &gt; should get candidates without throwing" time="0.000576417">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Strategies &gt; should add a global strategy without throwing" time="0.000391">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Strategies &gt; should get active strategies without throwing" time="0.000340792">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Client Context &gt; should set and get client context" time="0.001357667">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Client Context &gt; should update existing client context" time="0.000742875">
            <failure message="SQLITE_ERROR: no such column: updated_at" type="Error">
Error: SQLITE_ERROR: no such column: updated_at

Serialized Error: { errno: 1, code: &apos;SQLITE_ERROR&apos; }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Candidate Status &gt; should update candidate status" time="0.000539542">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Process Document (RAG) &gt; should process document chunks" time="0.019082417">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Access Control &gt; should restrict user access to project docs" time="0.010166959">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Strategies Toggle &gt; should toggle strategy active status" time="0.016539666">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Document Lifecycle &gt; should soft delete document" time="0.007642709">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/legalEventLogger.test.js" timestamp="2025-12-21T11:11:50.119Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.140921666">
        <testcase classname="tests/unit/backend/legalEventLogger.test.js" name="LegalEventLogger &gt; log &gt; should append log entry" time="0.001528709">
            <system-err>
[LegalEventLogger] Unknown event type: test_event

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/legalEventLogger.test.js" name="LegalEventLogger &gt; logAccept &gt; should log user acceptance" time="0.000492458">
        </testcase>
        <testcase classname="tests/unit/backend/legalEventLogger.test.js" name="LegalEventLogger &gt; getEvents &gt; should fetch events with filters" time="0.000455166">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/legalService.test.js" timestamp="2025-12-21T11:11:50.119Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="6" errors="0" skipped="0" time="0.270116709">
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; getActiveDocuments() &gt; should return active documents" time="0.002661">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; getActiveDocuments() &gt; should filter by effective date" time="0.000293084">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; getActiveDocuments() &gt; should filter by scope when user context provided" time="0.00018275">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; getActiveDocument() &gt; should return active document by type" time="0.000160541">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; getActiveDocument() &gt; should return null when document not found" time="0.000106166">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; getUserAcceptances() &gt; should return user acceptances" time="0.000392583">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; getUserAcceptances() &gt; should filter by organization when provided" time="0.002382834">
            <failure message="expected [ &apos;user-123&apos; ] to include &apos;org-test-123&apos;" type="AssertionError">
AssertionError: expected [ &apos;user-123&apos; ] to include &apos;org-test-123&apos;
  Object.&lt;anonymous&gt; tests/unit/backend/legalService.test.js:194:32
  server/services/legalService.js:108:21
  Object.getUserAcceptances server/services/legalService.js:100:16
  tests/unit/backend/legalService.test.js:198:32
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; acceptDocument() &gt; should record user acceptance" time="0.000286166">
            <failure message="LegalService.acceptDocument is not a function" type="TypeError">
TypeError: LegalService.acceptDocument is not a function
  tests/unit/backend/legalService.test.js:225:47
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; acceptDocument() &gt; should reject when document not found" time="0.000198167">
            <failure message="LegalService.acceptDocument is not a function" type="TypeError">
TypeError: LegalService.acceptDocument is not a function
  tests/unit/backend/legalService.test.js:240:30
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; isDocumentApplicable() &gt; should return true for global scope documents" time="0.000132583">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; isDocumentApplicable() &gt; should return true for matching region scope" time="0.000080875">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; isDocumentApplicable() &gt; should return false for non-matching region scope" time="0.000077875">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; isDocumentApplicable() &gt; should return true for matching license tier" time="0.000066583">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; checkAcceptanceRequired() &gt; should require acceptance for TOS" time="0.000137791">
            <failure message="LegalService.checkAcceptanceRequired is not a function" type="TypeError">
TypeError: LegalService.checkAcceptanceRequired is not a function
  tests/unit/backend/legalService.test.js:301:47
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; checkAcceptanceRequired() &gt; should not require acceptance when already accepted" time="0.000126916">
            <failure message="LegalService.checkAcceptanceRequired is not a function" type="TypeError">
TypeError: LegalService.checkAcceptanceRequired is not a function
  tests/unit/backend/legalService.test.js:327:47
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; Multi-Tenant Isolation &gt; should only return acceptances for specified user and organization" time="0.000290375">
            <failure message="expected [ &apos;user-123&apos; ] to include &apos;org-test-123&apos;" type="AssertionError">
AssertionError: expected [ &apos;user-123&apos; ] to include &apos;org-test-123&apos;
  Object.&lt;anonymous&gt; tests/unit/backend/legalService.test.js:342:32
  server/services/legalService.js:108:21
  Object.getUserAcceptances server/services/legalService.js:100:16
  tests/unit/backend/legalService.test.js:347:32
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/metricsAggregator.test.js" timestamp="2025-12-21T11:11:50.120Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.145066916">
        <testcase classname="tests/unit/backend/metricsAggregator.test.js" name="MetricsAggregator &gt; METRIC_KEYS &gt; should define all required metric keys" time="0.000569167">
        </testcase>
        <testcase classname="tests/unit/backend/metricsAggregator.test.js" name="MetricsAggregator &gt; WARNING_SEVERITY &gt; should define severity levels" time="0.000119959">
        </testcase>
        <testcase classname="tests/unit/backend/metricsAggregator.test.js" name="MetricsAggregator &gt; getFunnelMetric &gt; should calculate funnel between two events" time="0.001574917">
            <system-out>
[MetricsCollector] Recorded event: demo_started (e4158337-e986-4574-8f73-e545839d59f7)

[MetricsCollector] Recorded event: demo_started (22064e34-7911-4bd1-aa77-8ff4392056f3)

[MetricsCollector] Recorded event: trial_started (c8e84585-881c-49c7-90d3-089e0ea676c7)

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/metricsAggregator.test.js" name="MetricsAggregator &gt; getOverview &gt; should return complete overview for dashboard" time="0.002696125">
        </testcase>
        <testcase classname="tests/unit/backend/metricsAggregator.test.js" name="MetricsAggregator &gt; buildDailySnapshots &gt; should build snapshots idempotently" time="0.003990458">
            <system-out>
[MetricsAggregator] Building daily snapshots for 2025-12-21

[MetricsAggregator] Created 6 snapshots for 2025-12-21

[MetricsAggregator] Building daily snapshots for 2025-12-21

[MetricsAggregator] Created 6 snapshots for 2025-12-21

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/metricsAggregator.test.js" name="MetricsAggregator &gt; getEarlyWarnings &gt; should return warnings (seed data needed for specific warnings)" time="0.001964958">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/metricsCollector.test.js" timestamp="2025-12-21T11:11:50.121Z" hostname="MacBook-Pro-Piotr.local" tests="4" failures="0" errors="0" skipped="0" time="0.157943625">
        <testcase classname="tests/unit/backend/metricsCollector.test.js" name="MetricsCollector &gt; recordEvent &gt; should record event successfully" time="0.001632583">
            <system-out>
[MetricsCollector] Recorded event: TEST_EVENT (uuid-1234)

            </system-out>
            <system-err>
[MetricsCollector] Unknown event type: TEST_EVENT

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/metricsCollector.test.js" name="MetricsCollector &gt; recordEvent &gt; should throw on database error" time="0.000674">
            <system-err>
[MetricsCollector] Unknown event type: TEST_EVENT
[MetricsCollector] Failed to record event TEST_EVENT: Insert failed

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/metricsCollector.test.js" name="MetricsCollector &gt; getEvents &gt; should fetch events with filters" time="0.000381875">
        </testcase>
        <testcase classname="tests/unit/backend/metricsCollector.test.js" name="MetricsCollector &gt; getEventCount &gt; should return count" time="0.000105667">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/myWorkService.test.js" timestamp="2025-12-21T11:11:50.121Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.181552625">
        <testcase classname="tests/unit/backend/myWorkService.test.js" name="MyWorkService &gt; getMyWork &gt; should aggregate work" time="0.006257292">
        </testcase>
        <testcase classname="tests/unit/backend/myWorkService.test.js" name="MyWorkService &gt; errors &gt; should propagate db error" time="0.000905292">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/organizationService.test.js" timestamp="2025-12-21T11:11:50.121Z" hostname="MacBook-Pro-Piotr.local" tests="15" failures="10" errors="0" skipped="0" time="0.293195083">
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; createOrganization() &gt; should create organization with owner" time="0.003581292">
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; createOrganization() &gt; should rollback on error" time="0.006565042">
            <failure message="promise resolved &quot;{ (3) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ (3) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;id&quot;: &quot;ab0ae443-6d69-430f-85e8-9636acc71a1a&quot;,
+   &quot;name&quot;: &quot;New Organization&quot;,
+   &quot;role&quot;: &quot;OWNER&quot;,
  }

  tests/unit/backend/organizationService.test.js:96:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; createOrganization() &gt; should include attribution data when provided" time="0.000708375">
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; getOrganization() &gt; should return organization details" time="0.000681584">
            <failure message="Organization not found" type="Error">
Error: Organization not found
  Statement.&lt;anonymous&gt; server/services/organizationService.js:90:45
  Statement.replacement server/node_modules/sqlite3/lib/trace.js:25:27
  Statement.replacement server/node_modules/sqlite3/lib/trace.js:25:27
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; getOrganization() &gt; should throw error when organization not found" time="0.002138875">
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; addMember() &gt; should add member to organization" time="0.003273625">
            <failure message="expected undefined to be true // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

  tests/unit/backend/organizationService.test.js:173:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; addMember() &gt; should handle duplicate member gracefully" time="0.000790708">
            <failure message="promise resolved &quot;{ (4) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ (4) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;id&quot;: &quot;7b4d3faf-ec9f-4136-8260-f20fe7d81362&quot;,
+   &quot;organizationId&quot;: &quot;org-test-123&quot;,
+   &quot;role&quot;: &quot;MEMBER&quot;,
+   &quot;userId&quot;: &quot;user-123&quot;,
  }

  tests/unit/backend/organizationService.test.js:197:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; removeMember() &gt; should remove member from organization" time="0.000231375">
            <failure message="OrganizationService.removeMember is not a function" type="TypeError">
TypeError: OrganizationService.removeMember is not a function
  tests/unit/backend/organizationService.test.js:210:54
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; getMembers() &gt; should return organization members" time="0.001650708">
            <failure message="expected [] to have a length of 2 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 2 but got +0

- Expected
+ Received

- 2
+ 0

  tests/unit/backend/organizationService.test.js:242:29
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; getMembers() &gt; should only return members for specified organization" time="0.00030425">
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; updateMemberRole() &gt; should update member role" time="0.000221584">
            <failure message="OrganizationService.updateMemberRole is not a function" type="TypeError">
TypeError: OrganizationService.updateMemberRole is not a function
  tests/unit/backend/organizationService.test.js:275:54
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; getMemberRole() &gt; should return member role" time="0.000145666">
            <failure message="OrganizationService.getMemberRole is not a function" type="TypeError">
TypeError: OrganizationService.getMemberRole is not a function
  tests/unit/backend/organizationService.test.js:297:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; getMemberRole() &gt; should return null when member not found" time="0.000131416">
            <failure message="OrganizationService.getMemberRole is not a function" type="TypeError">
TypeError: OrganizationService.getMemberRole is not a function
  tests/unit/backend/organizationService.test.js:310:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; Multi-Tenant Isolation &gt; should only access members for specified organization" time="0.00151275">
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; Multi-Tenant Isolation &gt; should prevent cross-organization member access" time="0.000250709">
            <failure message="OrganizationService.removeMember is not a function" type="TypeError">
TypeError: OrganizationService.removeMember is not a function
  tests/unit/backend/organizationService.test.js:343:39
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/outcomeService.test.js" timestamp="2025-12-21T11:11:50.122Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.104952542">
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _computeDelta &gt; should compute positive delta correctly" time="0.00057275">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _computeDelta &gt; should handle empty baseline" time="0.0000865">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _computeDelta &gt; should handle empty after" time="0.000078208">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _computeDelta &gt; should handle identical values" time="0.000073167">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _computeDelta &gt; should be deterministic" time="0.000292417">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should return true for positive delta with no criteria" time="0.000089208">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should return false for all-zero delta with no criteria" time="0.0000425">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should evaluate &quot;&gt;&quot; criterion correctly" time="0.000138875">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should evaluate &quot;&gt;=&quot; criterion correctly" time="0.0000515">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should evaluate &quot;&lt;&quot; criterion correctly" time="0.000065167">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should evaluate &quot;&lt;=&quot; criterion correctly" time="0.000042625">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should evaluate &quot;==&quot; criterion correctly" time="0.000037209">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should evaluate &quot;!=&quot; criterion correctly" time="0.000056209">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should require all criteria to pass" time="0.000047333">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should handle negative values" time="0.000042666">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should handle decimal values" time="0.000034875">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/permissionService.test.js" timestamp="2025-12-21T11:11:50.123Z" hostname="MacBook-Pro-Piotr.local" tests="22" failures="9" errors="0" skipped="0" time="0.247779875">
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; Legacy: can() - Role-based capability check &gt; should allow SUPERADMIN all capabilities" time="0.0007295">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; Legacy: can() - Role-based capability check &gt; should allow ADMIN to manage users" time="0.000151417">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; Legacy: can() - Role-based capability check &gt; should deny PROJECT_MANAGER from managing users" time="0.000097083">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; Legacy: can() - Role-based capability check &gt; should deny user without role" time="0.000089125">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; Legacy: can() - Role-based capability check &gt; should deny null user" time="0.000115916">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; hasPermission() - Database-backed PBAC &gt; should return false for missing userId" time="0.000426208">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; hasPermission() - Database-backed PBAC &gt; should return false for missing permissionKey" time="0.000091959">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; hasPermission() - Database-backed PBAC &gt; should allow SUPERADMIN bypass" time="0.000203042">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; hasPermission() - Database-backed PBAC &gt; should grant permission from explicit org-user override" time="0.003741167">
            <system-err>
[PermissionService] Role permission query error: Error: SQLITE_ERROR: no such column: role
--&gt; in Database#get(&apos;SELECT 1 FROM role_permissions \n&apos; +
  &apos;                         WHERE role = ? AND permission_key = ?&apos;, [ undefined, &apos;PLAYBOOK_PUBLISH&apos; ], [Function (anonymous)])
    at Statement.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/permissionService.js:137:24) {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;,
  __augmented: true
}

            </system-err>
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/permissionService.test.js:107:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; hasPermission() - Database-backed PBAC &gt; should deny permission from explicit org-user override" time="0.000639792">
            <system-err>
[PermissionService] Role permission query error: Error: SQLITE_ERROR: no such column: role
--&gt; in Database#get(&apos;SELECT 1 FROM role_permissions \n&apos; +
  &apos;                         WHERE role = ? AND permission_key = ?&apos;, [ &apos;ADMIN&apos;, &apos;PLAYBOOK_PUBLISH&apos; ], [Function (anonymous)])
    at Statement.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/permissionService.js:137:24) {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;,
  __augmented: true
}

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; hasPermission() - Database-backed PBAC &gt; should fallback to role-based permission when no override" time="0.000720792">
            <system-err>
[PermissionService] Role permission query error: Error: SQLITE_ERROR: no such column: role
--&gt; in Database#get(&apos;SELECT 1 FROM role_permissions \n&apos; +
  &apos;                         WHERE role = ? AND permission_key = ?&apos;, [ &apos;ADMIN&apos;, &apos;PLAYBOOK_PUBLISH&apos; ], [Function (anonymous)])
    at Statement.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/permissionService.js:137:24) {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;,
  __augmented: true
}

            </system-err>
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/permissionService.test.js:165:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; hasPermission() - Database-backed PBAC &gt; should deny permission when role permission not found" time="0.000458083">
            <system-err>
[PermissionService] Role permission query error: Error: SQLITE_ERROR: no such column: role
--&gt; in Database#get(&apos;SELECT 1 FROM role_permissions \n&apos; +
  &apos;                         WHERE role = ? AND permission_key = ?&apos;, [ undefined, &apos;PLAYBOOK_PUBLISH&apos; ], [Function (anonymous)])
    at Statement.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/permissionService.js:137:24) {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;,
  __augmented: true
}

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; hasPermission() - Database-backed PBAC &gt; should handle database errors gracefully" time="0.000320041">
            <system-err>
[PermissionService] Role permission query error: Error: SQLITE_ERROR: no such column: role
--&gt; in Database#get(&apos;SELECT 1 FROM role_permissions \n&apos; +
  &apos;                         WHERE role = ? AND permission_key = ?&apos;, [ &apos;ADMIN&apos;, &apos;PLAYBOOK_PUBLISH&apos; ], [Function (anonymous)])
    at Statement.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/permissionService.js:137:24) {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;,
  __augmented: true
}

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; Multi-Tenant Isolation &gt; should only check permissions for specified organization" time="0.002174125">
            <system-err>
[PermissionService] Role permission query error: Error: SQLITE_ERROR: no such column: role
--&gt; in Database#get(&apos;SELECT 1 FROM role_permissions \n&apos; +
  &apos;                         WHERE role = ? AND permission_key = ?&apos;, [ &apos;ADMIN&apos;, &apos;PLAYBOOK_PUBLISH&apos; ], [Function (anonymous)])
    at Statement.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/permissionService.js:137:24) {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;,
  __augmented: true
}

            </system-err>
            <failure message="expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (2) ]

Number of calls: 0
" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (2) ]

Number of calls: 0

  tests/unit/backend/permissionService.test.js:236:32
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; Multi-Tenant Isolation &gt; should not leak permissions between organizations" time="0.001520667">
            <system-err>
[PermissionService] Role permission query error: Error: SQLITE_ERROR: no such column: role
--&gt; in Database#get(&apos;SELECT 1 FROM role_permissions \n&apos; +
  &apos;                         WHERE role = ? AND permission_key = ?&apos;, [ &apos;ADMIN&apos;, &apos;PLAYBOOK_PUBLISH&apos; ], [Function (anonymous)])
    at Statement.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/permissionService.js:137:24) {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;,
  __augmented: true
}

[PermissionService] Role permission query error: Error: SQLITE_ERROR: no such column: role
--&gt; in Database#get(&apos;SELECT 1 FROM role_permissions \n&apos; +
  &apos;                         WHERE role = ? AND permission_key = ?&apos;, [ &apos;ADMIN&apos;, &apos;PLAYBOOK_PUBLISH&apos; ], [Function (anonymous)])
    at Statement.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/permissionService.js:137:24) {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;,
  __augmented: true
}

            </system-err>
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/permissionService.test.js:272:29
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; getUserPermissions() &gt; should return role permissions and overrides" time="0.000369208">
            <failure message="SQLITE_ERROR: no such column: permission_key" type="Error">
Error: SQLITE_ERROR: no such column: permission_key
  server/services/permissionService.js:164:16
  Object.getUserPermissions server/services/permissionService.js:162:16
  tests/unit/backend/permissionService.test.js:299:52


Serialized Error: { errno: 1, code: &apos;SQLITE_ERROR&apos;, __augmented: true }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; getUserPermissions() &gt; should handle empty permissions" time="0.00037325">
            <failure message="SQLITE_ERROR: no such column: permission_key" type="Error">
Error: SQLITE_ERROR: no such column: permission_key
  server/services/permissionService.js:164:16
  Object.getUserPermissions server/services/permissionService.js:162:16
  tests/unit/backend/permissionService.test.js:315:52


Serialized Error: { errno: 1, code: &apos;SQLITE_ERROR&apos;, __augmented: true }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; grantPermission() &gt; should grant permission to user" time="0.000902375">
            <failure message="Permission not found: PLAYBOOK_PUBLISH" type="Error">
Error: Permission not found: PLAYBOOK_PUBLISH
  Object.grantPermission server/services/permissionService.js:218:19
  tests/unit/backend/permissionService.test.js:337:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; grantPermission() &gt; should handle database errors" time="0.002655208">
            <failure message="expected [Function] to throw error including &apos;DB Error&apos; but got &apos;Permission not found: PLAYBOOK_PUBLISH&apos;" type="AssertionError">
AssertionError: expected [Function] to throw error including &apos;DB Error&apos; but got &apos;Permission not found: PLAYBOOK_PUBLISH&apos;

Expected: &quot;DB Error&quot;
Received: &quot;Permission not found: PLAYBOOK_PUBLISH&quot;

  tests/unit/backend/permissionService.test.js:355:13
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; revokePermission() &gt; should revoke permission from user" time="0.000602792">
            <failure message="Permission not found: PLAYBOOK_PUBLISH" type="Error">
Error: Permission not found: PLAYBOOK_PUBLISH
  Object.revokePermission server/services/permissionService.js:258:19
  tests/unit/backend/permissionService.test.js:371:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; getCapabilitiesForRole() &gt; should return capabilities for ADMIN role" time="0.000383208">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; getCapabilitiesForRole() &gt; should return empty array for unknown role" time="0.000267416">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/pmoDomainRegistry.test.js" timestamp="2025-12-21T11:11:50.125Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.216391708">
        <testcase classname="tests/unit/backend/pmoDomainRegistry.test.js" name="PMODomainRegistry &gt; getAllDomains &gt; should return domains" time="0.003285791">
        </testcase>
        <testcase classname="tests/unit/backend/pmoDomainRegistry.test.js" name="PMODomainRegistry &gt; getDomain &gt; should return domain" time="0.001785208">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/pmoHealthService.test.js" timestamp="2025-12-21T11:11:50.125Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.180382375">
        <testcase classname="tests/unit/backend/pmoHealthService.test.js" name="PMOHealthService &gt; getHealthSnapshot &gt; should return complete snapshot" time="0.013870833">
            <system-out>
[PMOHealthService] Snapshot generated in 1ms for project proj1

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/pmoHealthService.test.js" name="PMOHealthService &gt; getHealthSnapshot &gt; should handle DB errors" time="0.002211375">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/pmoStandardsMapping.test.js" timestamp="2025-12-21T11:11:50.125Z" hostname="MacBook-Pro-Piotr.local" tests="7" failures="0" errors="0" skipped="0" time="0.237225625">
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; getMapping &gt; should return mapping for known concept" time="0.011583209">
        </testcase>
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; getMapping &gt; should return null for unknown concept" time="0.001367542">
        </testcase>
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; getStandardTerm &gt; should return ISO 21500 term correctly" time="0.000514291">
        </testcase>
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; getStandardTerm &gt; should return PMBOK 7 term correctly" time="0.0006">
        </testcase>
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; isNeutralTerm &gt; should identify neutral terms" time="0.000520792">
        </testcase>
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; isNeutralTerm &gt; should identify vendor-specific terms as non-neutral" time="0.000366208">
        </testcase>
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; getConceptsByDomain &gt; should return all concepts for a given domain" time="0.000274917">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/progressService.test.js" timestamp="2025-12-21T11:11:50.126Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="3" time="0">
        <testcase classname="tests/unit/backend/progressService.test.js" name="Progress Service &gt; calculateInitiativeProgress &gt; should calculate progress from tasks [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/progressService.test.js" name="Progress Service &gt; calculateProjectProgress &gt; should calculate weighted project progress [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/progressService.test.js" name="Progress Service &gt; calculatePortfolioMetrics &gt; should calculate health score based on blocked initiatives [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/promoCodeService.test.js" timestamp="2025-12-21T11:11:50.126Z" hostname="MacBook-Pro-Piotr.local" tests="18" failures="0" errors="0" skipped="13" time="0.139740708">
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; constants &gt; should export PROMO_TYPES" time="0.001554291">
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; constants &gt; should export DISCOUNT_TYPES" time="0.00028175">
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return invalid for empty code" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return invalid for null code" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return invalid when code not found" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return invalid for expired code" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return invalid for code not yet active" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return invalid when usage limit reached" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return valid for good code with discount" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return valid for partner code without discount" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; markPromoCodeUsed - skipped due to CJS/ESM mock interop &gt; should return error for already used org code" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; createPromoCode &gt; should throw error for missing required fields" time="0.001177458">
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; createPromoCode &gt; should throw error for invalid promo type" time="0.000156916">
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; createPromoCode &gt; should throw error for invalid discount type" time="0.000223042">
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; createPromoCode &gt; should create promo code successfully" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; listPromoCodes - skipped due to CJS/ESM mock interop &gt; should return list of promo codes" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; deactivatePromoCode - skipped due to CJS/ESM mock interop &gt; should deactivate promo code" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; deactivatePromoCode - skipped due to CJS/ESM mock interop &gt; should return false if code not found" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/ragService.test.js" timestamp="2025-12-21T11:11:50.127Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.192682917">
        <testcase classname="tests/unit/backend/ragService.test.js" name="RagService - Integration &gt; generateEmbedding &gt; should return null if no provider configured in database" time="0.000797333">
        </testcase>
        <testcase classname="tests/unit/backend/ragService.test.js" name="RagService - Integration &gt; getContext &gt; should return context string without throwing" time="0.000806542">
        </testcase>
        <testcase classname="tests/unit/backend/ragService.test.js" name="RagService - Integration &gt; getContext &gt; should accept limit parameter" time="0.0015865">
        </testcase>
        <testcase classname="tests/unit/backend/ragService.test.js" name="RagService - Integration &gt; getContextKeyword &gt; should perform keyword search without throwing" time="0.000429667">
        </testcase>
        <testcase classname="tests/unit/backend/ragService.test.js" name="RagService - Integration &gt; getAxisDefinitions &gt; should retrieve axis definitions without throwing" time="0.000646125">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/regulatoryModeGuard.test.js" timestamp="2025-12-21T11:11:50.127Z" hostname="MacBook-Pro-Piotr.local" tests="22" failures="8" errors="0" skipped="0" time="0.163557958">
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isEnabled() &gt; should return false for null projectId" time="0.000726958">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isEnabled() &gt; should return true when regulatory mode is enabled" time="0.004770833">
            <failure message="expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (2) ]

Number of calls: 0
" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (2) ]

Number of calls: 0

  tests/unit/backend/regulatoryModeGuard.test.js:54:32
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isEnabled() &gt; should return false when regulatory mode is disabled" time="0.001919458">
            <failure message="expected true to be false // Object.is equality" type="AssertionError">
AssertionError: expected true to be false // Object.is equality

- Expected
+ Received

- false
+ true

  tests/unit/backend/regulatoryModeGuard.test.js:70:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isEnabled() &gt; should default to enabled (fail-safe) when column is null" time="0.000915416">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isEnabled() &gt; should default to enabled on database error (fail-safe)" time="0.000640958">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; setEnabled() &gt; should enable regulatory mode" time="0.0027425">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/regulatoryModeGuard.test.js:108:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; setEnabled() &gt; should disable regulatory mode" time="0.00045575">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/regulatoryModeGuard.test.js:125:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; setEnabled() &gt; should handle database errors" time="0.001679833">
            <failure message="promise resolved &quot;{ success: false }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ success: false }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;success&quot;: false,
  }

  tests/unit/backend/regulatoryModeGuard.test.js:142:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isActionAllowed() &gt; should allow EXPLAIN_CONTEXT action" time="0.000141334">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isActionAllowed() &gt; should allow ANALYZE_RISKS action" time="0.00010875">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isActionAllowed() &gt; should block CREATE_DRAFT_TASK action" time="0.00009225">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isActionAllowed() &gt; should block EXECUTE_ACTION action" time="0.000115583">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isActionAllowed() &gt; should block actions with mutation keywords" time="0.000078583">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isActionAllowed() &gt; should allow null/undefined action (fail-safe)" time="0.00007675">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; enforceRegulatoryMode() &gt; should not block when projectId is null" time="0.00008575">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; enforceRegulatoryMode() &gt; should not block when regulatory mode is disabled" time="0.005942584">
            <system-err>
RegulatoryModeGuard.logBlockedAttempt error: [Error: SQLITE_ERROR: table ai_audit_logs has no column named regulatory_mode] {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;
}

            </system-err>
            <failure message="expected true to be false // Object.is equality" type="AssertionError">
AssertionError: expected true to be false // Object.is equality

- Expected
+ Received

- false
+ true

  tests/unit/backend/regulatoryModeGuard.test.js:198:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; enforceRegulatoryMode() &gt; should block mutation actions when regulatory mode is enabled" time="0.003264625">
            <system-err>
RegulatoryModeGuard.logBlockedAttempt error: [Error: SQLITE_ERROR: table ai_audit_logs has no column named regulatory_mode] {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;
}

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; enforceRegulatoryMode() &gt; should allow EXPLAIN_CONTEXT even when regulatory mode is enabled" time="0.000599833">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; enforceRegulatoryMode() &gt; should log blocked attempts" time="0.012461209">
            <system-err>
RegulatoryModeGuard.logBlockedAttempt error: [Error: SQLITE_ERROR: table ai_audit_logs has no column named regulatory_mode] {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;
}

            </system-err>
            <failure message="expected &quot;vi.fn()&quot; to be called with arguments: [ ObjectContaining{} ]

Number of calls: 0
" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called with arguments: [ ObjectContaining{} ]

Number of calls: 0

  tests/unit/backend/regulatoryModeGuard.test.js:241:58
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; getRegulatoryPrompt() &gt; should return regulatory mode prompt constraints" time="0.000175542">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; getStatus() &gt; should return status when enabled" time="0.000731292">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; getStatus() &gt; should return status when disabled" time="0.00047825">
            <failure message="expected true to be false // Object.is equality" type="AssertionError">
AssertionError: expected true to be false // Object.is equality

- Expected
+ Received

- false
+ true

  tests/unit/backend/regulatoryModeGuard.test.js:291:36
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/roadmapService.test.js" timestamp="2025-12-21T11:11:50.128Z" hostname="MacBook-Pro-Piotr.local" tests="19" failures="0" errors="0" skipped="0" time="0.168310625">
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; getWaves() &gt; should retrieve all waves for a project" time="0.001621042">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; getWaves() &gt; should return empty array when no waves exist" time="0.000200709">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; getWaves() &gt; should handle database errors" time="0.000587167">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; createWave() &gt; should create a new wave" time="0.000234917">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; createWave() &gt; should default sortOrder to 0 if not provided" time="0.000118958">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; createWave() &gt; should handle database errors" time="0.000138792">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; assignToWave() &gt; should assign initiative to wave" time="0.000181625">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; assignToWave() &gt; should handle database errors" time="0.00011975">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; baselineRoadmap() &gt; should baseline all waves and increment initiative baseline version" time="0.000254583">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; baselineRoadmap() &gt; should handle database errors on wave update" time="0.000152042">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; getRoadmapSummary() &gt; should return roadmap summary with waves and initiatives" time="0.000200375">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; getRoadmapSummary() &gt; should handle empty roadmap" time="0.000077291">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; updateInitiativeSchedule() &gt; should update schedule directly when not baselined" time="0.000188792">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; updateInitiativeSchedule() &gt; should create Change Request when baselined and governance requires CR" time="0.00015125">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; updateInitiativeSchedule() &gt; should allow direct update when baselined but governance does not require CR" time="0.000092625">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; updateInitiativeSchedule() &gt; should handle waveId update" time="0.00008775">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; updateInitiativeSchedule() &gt; should return success message when no changes to apply" time="0.000074583">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; Multi-Tenant Isolation &gt; should filter waves by project_id" time="0.00007925">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; Multi-Tenant Isolation &gt; should ensure initiatives belong to correct project in summary" time="0.000094709">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/roiService.test.js" timestamp="2025-12-21T11:11:50.129Z" hostname="MacBook-Pro-Piotr.local" tests="4" failures="4" errors="0" skipped="0" time="0.133788083">
        <testcase classname="tests/unit/backend/roiService.test.js" name="ROIService &gt; getDefaultModel &gt; should return existing model if found" time="0.003746583">
            <failure message="expected 75 to be 100 // Object.is equality" type="AssertionError">
AssertionError: expected 75 to be 100 // Object.is equality

- Expected
+ Received

- 100
+ 75

  tests/unit/backend/roiService.test.js:56:51
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/roiService.test.js" name="ROIService &gt; getDefaultModel &gt; should create default model if missing" time="0.001667834">
            <failure message="expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (2) ]

Number of calls: 0
" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (2) ]

Number of calls: 0

  tests/unit/backend/roiService.test.js:70:32
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/roiService.test.js" name="ROIService &gt; calculateROI &gt; should calculate ROI based on measurements" time="0.000808042">
            <failure message="expected 75 to be 100 // Object.is equality" type="AssertionError">
AssertionError: expected 75 to be 100 // Object.is equality

- Expected
+ Received

- 100
+ 75

  tests/unit/backend/roiService.test.js:117:40
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/roiService.test.js" name="ROIService &gt; estimateHoursSaved &gt; should aggregate time saved metrics" time="0.000912833">
            <failure message="expected +0 to be 2 // Object.is equality" type="AssertionError">
AssertionError: expected +0 to be 2 // Object.is equality

- Expected
+ Received

- 2
+ 0

  tests/unit/backend/roiService.test.js:156:40
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/scenarioService.test.js" timestamp="2025-12-21T11:11:50.130Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="2" time="0.231431625">
        <testcase classname="tests/unit/backend/scenarioService.test.js" name="Scenario Service &gt; compareScenarios &gt; should compare delays correctly" time="0.007658292">
        </testcase>
        <testcase classname="tests/unit/backend/scenarioService.test.js" name="Scenario Service &gt; analyzeImpact &gt; should detect dependency breaks [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/scenarioService.test.js" name="Scenario Service &gt; createScenario &gt; should persist scenario [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/scmsGovernance.test.js" timestamp="2025-12-21T11:11:50.130Z" hostname="MacBook-Pro-Piotr.local" tests="17" failures="0" errors="0" skipped="0" time="0.206398834">
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should allow DRAFT to PLANNED transition" time="0.004408875">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should allow PLANNED to APPROVED transition" time="0.000164209">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should allow APPROVED to IN_EXECUTION transition" time="0.000088542">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should allow IN_EXECUTION to BLOCKED transition" time="0.000073625">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should allow IN_EXECUTION to COMPLETED transition" time="0.000066875">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should disallow COMPLETED to DRAFT transition" time="0.000051875">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should disallow invalid status transition" time="0.000050291">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Task Status Transitions &gt; should allow TODO to IN_PROGRESS transition" time="0.000124792">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Task Status Transitions &gt; should allow IN_PROGRESS to DONE transition" time="0.000210334">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Task Status Transitions &gt; should allow IN_PROGRESS to BLOCKED transition" time="0.000092834">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Task Status Transitions &gt; should allow BLOCKED to IN_PROGRESS transition" time="0.000050875">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Task Status Transitions &gt; should disallow direct DONE to TODO transition" time="0.000037417">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Blocked Status Validation &gt; should require blocked reason for BLOCKED initiative status" time="0.0001285">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Blocked Status Validation &gt; should accept blocked reason for BLOCKED status" time="0.000049417">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Status Constants &gt; should export INITIATIVE_STATUSES" time="0.000056">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Status Constants &gt; should export TASK_STATUSES" time="0.000042125">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Status Constants &gt; should export DECISION_STATUSES" time="0.000034625">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/scmsLifecycle.test.js" timestamp="2025-12-21T11:11:50.131Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.192364542">
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Types &gt; should define READINESS_GATE" time="0.002744292">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Types &gt; should define DESIGN_GATE" time="0.000137125">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Types &gt; should define PLANNING_GATE" time="0.000082833">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Types &gt; should define EXECUTION_GATE" time="0.000071416">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Types &gt; should define CLOSURE_GATE" time="0.000064791">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Service Structure &gt; should export getGateType function" time="0.000058042">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Service Structure &gt; should export evaluateGate function" time="0.000047875">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Service Structure &gt; should export passGate function" time="0.000043875">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Mapping &gt; should map Context to Assessment with READINESS_GATE" time="0.000072709">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Mapping &gt; should map Roadmap to Execution with EXECUTION_GATE" time="0.000069583">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Mapping &gt; should map Assessment to Initiatives with DESIGN_GATE" time="0.000050667">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Mapping &gt; should map Initiatives to Roadmap with PLANNING_GATE" time="0.000040375">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Mapping &gt; should map Execution to Stabilization with CLOSURE_GATE" time="0.000038">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="Phase Constants &gt; should have 6 phases in SCMS lifecycle" time="0.000341167">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="Phase Constants &gt; should have Context as first phase" time="0.000042667">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="Phase Constants &gt; should have Stabilization as last phase" time="0.000027792">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/scmsServices.test.js" timestamp="2025-12-21T11:11:50.131Z" hostname="MacBook-Pro-Piotr.local" tests="39" failures="0" errors="0" skipped="0" time="0.217590958">
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; NOTIFICATION_TYPES &gt; should have notification types defined" time="0.005073917">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; NOTIFICATION_TYPES &gt; should include TASK_ASSIGNED type" time="0.0001745">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; NOTIFICATION_TYPES &gt; should include DECISION_REQUIRED type" time="0.000079083">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; NOTIFICATION_TYPES &gt; should include AI_RISK_DETECTED type" time="0.000070209">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; SEVERITY &gt; should define INFO severity" time="0.000067584">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; SEVERITY &gt; should define WARNING severity" time="0.000047209">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; SEVERITY &gt; should define CRITICAL severity" time="0.000041917">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="MyWorkService &gt; Service Structure &gt; should export getMyWork function" time="0.000832541">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="MyWorkService &gt; Service Structure &gt; should export _getMyTasks helper function" time="0.000077041">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="MyWorkService &gt; Service Structure &gt; should export _getMyAlerts helper function" time="0.000074125">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="ExecutionMonitorService &gt; Service Structure &gt; should export runDailyMonitor function" time="0.003868459">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="ExecutionMonitorService &gt; Service Structure &gt; should export generateExecutionSummary function" time="0.000070292">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EscalationService &gt; Service Structure &gt; should export createEscalation function" time="0.003807708">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EscalationService &gt; Service Structure &gt; should export getEscalations function" time="0.000074417">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EscalationService &gt; Service Structure &gt; should export acknowledgeEscalation function" time="0.000040167">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EscalationService &gt; Service Structure &gt; should export resolveEscalation function" time="0.000031459">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EscalationService &gt; Service Structure &gt; should export runAutoEscalation function" time="0.000028875">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; STABILIZATION_STATUSES &gt; should define STABILIZED status" time="0.005870416">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; STABILIZATION_STATUSES &gt; should define PARTIALLY_STABILIZED status" time="0.000067625">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; STABILIZATION_STATUSES &gt; should define UNSTABLE status" time="0.00003725">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; STABILIZATION_STATUSES &gt; should define NOT_APPLICABLE status" time="0.000031209">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; Service Structure &gt; should export checkEntryCriteria function" time="0.000040709">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; Service Structure &gt; should export checkExitCriteria function" time="0.000031041">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; Service Structure &gt; should export closeProject function" time="0.00003875">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should have 5 value types" time="0.005208958">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should define COST_REDUCTION type" time="0.000063292">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should define REVENUE_INCREASE type" time="0.000036125">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should define RISK_REDUCTION type" time="0.000031125">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should define EFFICIENCY type" time="0.00002975">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should define STRATEGIC_OPTION type" time="0.000027958">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; Service Structure &gt; should export createValueHypothesis function" time="0.000030583">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; Service Structure &gt; should export getValueSummary function" time="0.00003925">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; Service Structure &gt; should export detectMissingValueHypotheses function" time="0.000027792">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="ReportingService &gt; Service Structure &gt; should export generateExecutiveOverview function" time="0.005113209">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="ReportingService &gt; Service Structure &gt; should export generateProjectHealthReport function" time="0.000069916">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="ReportingService &gt; Service Structure &gt; should export generateGovernanceReport function" time="0.000041375">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NarrativeService &gt; Service Structure &gt; should export generateWeeklySummary function" time="0.004231625">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NarrativeService &gt; Service Structure &gt; should export generateExecutiveMemo function" time="0.000069167">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NarrativeService &gt; Service Structure &gt; should export generateProgressNarrative function" time="0.000041">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/settlementService.test.js" timestamp="2025-12-21T11:11:50.133Z" hostname="MacBook-Pro-Piotr.local" tests="19" failures="11" errors="0" skipped="0" time="0.292570667">
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; createPeriod() &gt; should create a new settlement period" time="0.00393475">
            <system-out>
[SettlementService] Created period: 2024-01-01T00:00:00Z to 2024-01-31T23:59:59Z

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; createPeriod() &gt; should reject missing periodStart" time="0.000774167">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; createPeriod() &gt; should reject missing periodEnd" time="0.000166834">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; createPeriod() &gt; should reject invalid date range" time="0.000134667">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; createPeriod() &gt; should reject overlapping periods" time="0.00050325">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; createPeriod() &gt; should reject when open period exists" time="0.005284667">
            <failure message="expected { errorCode: &apos;PERIOD_OVERLAP&apos;, (1) } to match object { errorCode: &apos;OPEN_PERIOD_EXISTS&apos; }
(1 matching property omitted from actual)" type="AssertionError">
AssertionError: expected { errorCode: &apos;PERIOD_OVERLAP&apos;, (1) } to match object { errorCode: &apos;OPEN_PERIOD_EXISTS&apos; }
(1 matching property omitted from actual)

- Expected
+ Received

  {
-   &quot;errorCode&quot;: &quot;OPEN_PERIOD_EXISTS&quot;,
+   &quot;errorCode&quot;: &quot;PERIOD_OVERLAP&quot;,
  }

  tests/unit/backend/settlementService.test.js:142:13
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; getPeriod() &gt; should return period by ID" time="0.000568584">
            <failure message="Cannot read properties of null (reading &apos;id&apos;)" type="TypeError">
TypeError: Cannot read properties of null (reading &apos;id&apos;)
  tests/unit/backend/settlementService.test.js:165:27
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; getPeriod() &gt; should return null for non-existent period" time="0.000371959">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; getOpenPeriod() &gt; should return open period" time="0.000283375">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; getOpenPeriod() &gt; should return null when no open period" time="0.000746666">
            <failure message="expected { (8) } to be null" type="AssertionError">
AssertionError: expected { (8) } to be null

- Expected: 
null

+ Received: 
{
  &quot;createdAt&quot;: &quot;2025-12-21 11:11:42&quot;,
  &quot;id&quot;: &quot;5345435f-297e-42dd-892f-a3952e10d41b&quot;,
  &quot;partnerCount&quot;: 0,
  &quot;periodEnd&quot;: &quot;2024-01-31T23:59:59Z&quot;,
  &quot;periodStart&quot;: &quot;2024-01-01T00:00:00Z&quot;,
  &quot;status&quot;: &quot;OPEN&quot;,
  &quot;totalRevenue&quot;: 0,
  &quot;totalSettlements&quot;: 0,
}

  tests/unit/backend/settlementService.test.js:202:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; calculateSettlements() &gt; should calculate settlements for open period" time="0.004708292">
            <failure message="Settlement period not found">
Unknown Error: Settlement period not found

Serialized Error: { errorCode: &apos;NOT_FOUND&apos; }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; calculateSettlements() &gt; should reject calculation for locked period" time="0.000625417">
            <failure message="expected { errorCode: &apos;NOT_FOUND&apos;, (1) } to match object { errorCode: &apos;PERIOD_LOCKED&apos; }
(1 matching property omitted from actual)" type="AssertionError">
AssertionError: expected { errorCode: &apos;NOT_FOUND&apos;, (1) } to match object { errorCode: &apos;PERIOD_LOCKED&apos; }
(1 matching property omitted from actual)

- Expected
+ Received

  {
-   &quot;errorCode&quot;: &quot;PERIOD_LOCKED&quot;,
+   &quot;errorCode&quot;: &quot;NOT_FOUND&quot;,
  }

  tests/unit/backend/settlementService.test.js:250:13
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; calculateSettlements() &gt; should reject calculation for non-existent period" time="0.000546083">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; lockPeriod() &gt; should lock a calculated period" time="0.0003755">
            <failure message="Settlement period not found">
Unknown Error: Settlement period not found

Serialized Error: { errorCode: &apos;NOT_FOUND&apos; }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; lockPeriod() &gt; should reject locking open period" time="0.001019083">
            <failure message="expected { errorCode: &apos;NOT_FOUND&apos;, (1) } to match object { errorCode: &apos;INVALID_STATUS&apos; }
(1 matching property omitted from actual)" type="AssertionError">
AssertionError: expected { errorCode: &apos;NOT_FOUND&apos;, (1) } to match object { errorCode: &apos;INVALID_STATUS&apos; }
(1 matching property omitted from actual)

- Expected
+ Received

  {
-   &quot;errorCode&quot;: &quot;INVALID_STATUS&quot;,
+   &quot;errorCode&quot;: &quot;NOT_FOUND&quot;,
  }

  tests/unit/backend/settlementService.test.js:311:13
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; lockPeriod() &gt; should reject locking already locked period" time="0.000689459">
            <failure message="expected { errorCode: &apos;NOT_FOUND&apos;, (1) } to match object { errorCode: &apos;PERIOD_LOCKED&apos; }
(1 matching property omitted from actual)" type="AssertionError">
AssertionError: expected { errorCode: &apos;NOT_FOUND&apos;, (1) } to match object { errorCode: &apos;PERIOD_LOCKED&apos; }
(1 matching property omitted from actual)

- Expected
+ Received

  {
-   &quot;errorCode&quot;: &quot;PERIOD_LOCKED&quot;,
+   &quot;errorCode&quot;: &quot;NOT_FOUND&quot;,
  }

  tests/unit/backend/settlementService.test.js:329:13
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; listPeriods() &gt; should return list of periods" time="0.001020542">
            <failure message="expected [ { (10) } ] to have a length of 2 but got 1" type="AssertionError">
AssertionError: expected [ { (10) } ] to have a length of 2 but got 1

- Expected
+ Received

- 2
+ 1

  tests/unit/backend/settlementService.test.js:358:29
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; listPeriods() &gt; should handle empty list" time="0.000608166">
            <failure message="expected [ { (10) } ] to deeply equal []" type="AssertionError">
AssertionError: expected [ { (10) } ] to deeply equal []

- Expected
+ Received

- []
+ [
+   {
+     &quot;calculatedAt&quot;: null,
+     &quot;createdAt&quot;: &quot;2025-12-21 11:11:42&quot;,
+     &quot;id&quot;: &quot;5345435f-297e-42dd-892f-a3952e10d41b&quot;,
+     &quot;lockedAt&quot;: null,
+     &quot;partnerCount&quot;: 0,
+     &quot;periodEnd&quot;: &quot;2024-01-31T23:59:59Z&quot;,
+     &quot;periodStart&quot;: &quot;2024-01-01T00:00:00Z&quot;,
+     &quot;status&quot;: &quot;OPEN&quot;,
+     &quot;totalRevenue&quot;: 0,
+     &quot;totalSettlements&quot;: 0,
+   },
+ ]

  tests/unit/backend/settlementService.test.js:368:29
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; Immutability &gt; should prevent modifications to locked period" time="0.000882708">
            <failure message="expected { errorCode: &apos;NOT_FOUND&apos;, (1) } to match object { errorCode: &apos;PERIOD_LOCKED&apos; }
(1 matching property omitted from actual)" type="AssertionError">
AssertionError: expected { errorCode: &apos;NOT_FOUND&apos;, (1) } to match object { errorCode: &apos;PERIOD_LOCKED&apos; }
(1 matching property omitted from actual)

- Expected
+ Received

  {
-   &quot;errorCode&quot;: &quot;PERIOD_LOCKED&quot;,
+   &quot;errorCode&quot;: &quot;NOT_FOUND&quot;,
  }

  tests/unit/backend/settlementService.test.js:384:13
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/stageGateService.test.js" timestamp="2025-12-21T11:11:50.134Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.156519792">
        <testcase classname="tests/unit/backend/stageGateService.test.js" name="StageGateService &gt; getGateType &gt; should return correct gate for transition" time="0.000538375">
        </testcase>
        <testcase classname="tests/unit/backend/stageGateService.test.js" name="StageGateService &gt; getGateType &gt; should return null for unknown transition" time="0.000103042">
        </testcase>
        <testcase classname="tests/unit/backend/stageGateService.test.js" name="StageGateService &gt; evaluateGate &gt; should evaluate readiness gate criteria" time="0.0003675">
        </testcase>
        <testcase classname="tests/unit/backend/stageGateService.test.js" name="StageGateService &gt; evaluateGate &gt; should report failure if criteria missing" time="0.000114417">
        </testcase>
        <testcase classname="tests/unit/backend/stageGateService.test.js" name="StageGateService &gt; passGate &gt; should record gate passage" time="0.000927833">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/statusMachine.test.js" timestamp="2025-12-21T11:11:50.135Z" hostname="MacBook-Pro-Piotr.local" tests="11" failures="0" errors="0" skipped="0" time="0.211583833">
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; canTransitionInitiative &gt; should allow valid transition" time="0.001200167">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; canTransitionInitiative &gt; should block invalid transition" time="0.000210791">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; canTransitionTask &gt; should allow valid transition" time="0.000253791">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; canTransitionTask &gt; should allow flow back" time="0.000162375">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateInitiativeTransition &gt; should return valid for simple allowed transition" time="0.000222958">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateInitiativeTransition &gt; should require reason for blocking" time="0.000209708">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateInitiativeTransition &gt; should allow blocking with reason" time="0.000059">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateInitiativeTransition &gt; should prevent completion if pending tasks exist" time="0.000066666">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateInitiativeTransition &gt; should prevent approved state if governance failed" time="0.000061542">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateTaskTransition &gt; should validate blocker type" time="0.000081709">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateTaskTransition &gt; should pass with full blocking info" time="0.000044542">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/storageReconciliationService.test.js" timestamp="2025-12-21T11:11:50.135Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.144192875">
        <testcase classname="tests/unit/backend/storageReconciliationService.test.js" name="Storage Reconciliation Service &gt; should handle reconciliation (DB interaction) [SKIPPED]" time="0.000664375">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/storageService.test.js" timestamp="2025-12-21T11:11:50.135Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="1" errors="0" skipped="0" time="0">
        <testcase classname="tests/unit/backend/storageService.test.js" name="tests/unit/backend/storageService.test.js" time="0">
            <failure message="[vitest] There was an error when mocking a module. If you are using &quot;vi.mock&quot; factory, make sure there are no top level variables inside, since this call is hoisted to top of the file. Read more: https://vitest.dev/api/vi.html#vi-mock" type="Error">
Error: [vitest] There was an error when mocking a module. If you are using &quot;vi.mock&quot; factory, make sure there are no top level variables inside, since this call is hoisted to top of the file. Read more: https://vitest.dev/api/vi.html#vi-mock
  tests/unit/backend/storageService.test.js:10:1

Caused by: Caused by: ReferenceError: mockFs is not defined
  tests/unit/backend/storageService.test.js:8:1
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/systemIntegrity.test.js" timestamp="2025-12-21T11:11:50.135Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.194717666">
        <testcase classname="tests/unit/backend/systemIntegrity.test.js" name="System Integrity Service &gt; should perform integrity checks (DB interaction) [SKIPPED]" time="0.000508417">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/tokenBillingService.test.js" timestamp="2025-12-21T11:11:50.136Z" hostname="MacBook-Pro-Piotr.local" tests="15" failures="13" errors="0" skipped="0" time="0.245613791">
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; getBalance() &gt; should return user token balance" time="0.005989">
            <failure message="expected +0 to be 1000 // Object.is equality" type="AssertionError">
AssertionError: expected +0 to be 1000 // Object.is equality

- Expected
+ Received

- 1000
+ 0

  tests/unit/backend/tokenBillingService.test.js:51:45
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; getBalance() &gt; should return zero balance for new user" time="0.001701333">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; getBalance() &gt; should handle database errors" time="0.005125667">
            <failure message="promise resolved &quot;{ user_id: &apos;user-123&apos;, (4) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ user_id: &apos;user-123&apos;, (4) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;byok_usage_tokens&quot;: 0,
+   &quot;local_usage_tokens&quot;: 0,
+   &quot;platform_tokens&quot;: 0,
+   &quot;platform_tokens_bonus&quot;: 0,
+   &quot;user_id&quot;: &quot;user-123&quot;,
  }

  tests/unit/backend/tokenBillingService.test.js:82:14
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; hasSufficientBalance() &gt; should return true when balance is sufficient" time="0.000783667">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/tokenBillingService.test.js:99:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; hasSufficientBalance() &gt; should return false when balance is insufficient" time="0.000457875">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; hasSufficientBalance() &gt; should include bonus tokens in balance check" time="0.001458375">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/tokenBillingService.test.js:129:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; deductTokens() &gt; should deduct tokens from user balance" time="0.004054709">
            <failure message="SQLITE_CONSTRAINT: NOT NULL constraint failed: token_transactions.organization_id" type="Error">
Error: SQLITE_CONSTRAINT: NOT NULL constraint failed: token_transactions.organization_id

Serialized Error: { errno: 19, code: &apos;SQLITE_CONSTRAINT&apos; }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; deductTokens() &gt; should deduct from organization balance when organizationId provided" time="0.002819083">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/tokenBillingService.test.js:206:37
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; deductTokens() &gt; should handle insufficient balance" time="0.001513375">
            <failure message="SQLITE_CONSTRAINT: NOT NULL constraint failed: token_transactions.organization_id" type="Error">
Error: SQLITE_CONSTRAINT: NOT NULL constraint failed: token_transactions.organization_id

Serialized Error: { errno: 19, code: &apos;SQLITE_CONSTRAINT&apos; }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; deductTokens() &gt; should handle database errors" time="0.003282292">
            <failure message="expected [Function] to throw error including &apos;DB Error&apos; but got &apos;SQLITE_CONSTRAINT: NOT NULL constrain&apos;" type="AssertionError">
AssertionError: expected [Function] to throw error including &apos;DB Error&apos; but got &apos;SQLITE_CONSTRAINT: NOT NULL constrain&apos;

Expected: &quot;DB Error&quot;
Received: &quot;SQLITE_CONSTRAINT: NOT NULL constraint failed: token_transactions.organization_id&quot;

  tests/unit/backend/tokenBillingService.test.js:236:13
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; creditTokens() &gt; should credit tokens to user balance" time="0.001044125">
            <failure message="SQLITE_ERROR: table token_transactions has no column named package_id" type="Error">
Error: SQLITE_ERROR: table token_transactions has no column named package_id

Serialized Error: { errno: 1, code: &apos;SQLITE_ERROR&apos; }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; creditTokens() &gt; should credit to organization balance when organizationId provided" time="0.000671875">
            <failure message="SQLITE_ERROR: table token_transactions has no column named package_id" type="Error">
Error: SQLITE_ERROR: table token_transactions has no column named package_id

Serialized Error: { errno: 1, code: &apos;SQLITE_ERROR&apos; }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; Multi-Tenant Isolation &gt; should only deduct from specified organization" time="0.002232042">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/tokenBillingService.test.js:315:38
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; getMargins() &gt; should return all billing margins" time="0.000860292">
            <failure message="expected [ { source_type: &apos;byok&apos;, (5) }, (2) ] to have a length of 2 but got 3" type="AssertionError">
AssertionError: expected [ { source_type: &apos;byok&apos;, (5) }, (2) ] to have a length of 2 but got 3

- Expected
+ Received

- 2
+ 3

  tests/unit/backend/tokenBillingService.test.js:330:29
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; getMargin() &gt; should return margin for specific source type" time="0.000486125">
            <failure message="expected 30 to be 10 // Object.is equality" type="AssertionError">
AssertionError: expected 30 to be 10 // Object.is equality

- Expected
+ Received

- 10
+ 30

  tests/unit/backend/tokenBillingService.test.js:352:43
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/tokenLedger.enterprise.test.js" timestamp="2025-12-21T11:11:50.137Z" hostname="MacBook-Pro-Piotr.local" tests="7" failures="4" errors="0" skipped="0" time="0.141277375">
        <testcase classname="tests/unit/backend/tokenLedger.enterprise.test.js" name="Token Ledger Enterprise Tests &gt; Fail-Closed for TRIAL &gt; should deny access when org not found (fail-closed)" time="0.001865">
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedger.enterprise.test.js" name="Token Ledger Enterprise Tests &gt; Fail-Closed for TRIAL &gt; should deny when TRIAL balance insufficient" time="0.0035265">
            <failure message="expected &apos;Balance check failed. Please retry.&apos; to contain &apos;Trial token limit reached&apos;" type="AssertionError">
AssertionError: expected &apos;Balance check failed. Please retry.&apos; to contain &apos;Trial token limit reached&apos;

Expected: &quot;Trial token limit reached&quot;
Received: &quot;Balance check failed. Please retry.&quot;

  tests/unit/backend/tokenLedger.enterprise.test.js:116:34
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedger.enterprise.test.js" name="Token Ledger Enterprise Tests &gt; Fail-Closed for TRIAL &gt; should allow when TRIAL balance is sufficient" time="0.001797458">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/tokenLedger.enterprise.test.js:124:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedger.enterprise.test.js" name="Token Ledger Enterprise Tests &gt; PAYGO Trigger &gt; should flag paygoTriggered when ACTIVE org has low balance" time="0.00050575">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/tokenLedger.enterprise.test.js:139:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedger.enterprise.test.js" name="Token Ledger Enterprise Tests &gt; Atomicity - Ledger Fail Rolls Back &gt; getOrgBalance uses async pattern" time="0.000337875">
            <failure message="Organization not found" type="Error">
Error: Organization not found
  TokenBillingService.getOrgBalance server/services/tokenBillingService.js:374:25
  tests/unit/backend/tokenLedger.enterprise.test.js:149:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedger.enterprise.test.js" name="Token Ledger Enterprise Tests &gt; Atomicity - Ledger Fail Rolls Back &gt; getOrgBalance throws on missing org" time="0.000852875">
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedger.enterprise.test.js" name="Token Ledger Enterprise Tests &gt; Ledger Summary &gt; returns aggregated values" time="0.000585875">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/tokenLedgerService.test.js" timestamp="2025-12-21T11:11:50.138Z" hostname="MacBook-Pro-Piotr.local" tests="7" failures="7" errors="0" skipped="0" time="0.138389292">
        <testcase classname="tests/unit/backend/tokenLedgerService.test.js" name="TokenBillingService - Ledger Functionality &gt; getOrgBalance &gt; should return organization balance and billing status" time="0.002424833">
            <failure message="Organization not found" type="Error">
Error: Organization not found
  TokenBillingService.getOrgBalance server/services/tokenBillingService.js:374:25
  tests/unit/backend/tokenLedgerService.test.js:51:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedgerService.test.js" name="TokenBillingService - Ledger Functionality &gt; hasOrgSufficientBalance &gt; should allow call when balance is sufficient" time="0.003189125">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/tokenLedgerService.test.js:63:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedgerService.test.js" name="TokenBillingService - Ledger Functionality &gt; hasOrgSufficientBalance &gt; should deny call when trial balance is insufficient" time="0.000561375">
            <failure message="Cannot find module &apos;../../server/database&apos;
Require stack:
- /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/tokenLedgerService.test.js" type="Error">
Error: Cannot find module &apos;../../server/database&apos;
Require stack:
- /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/tokenLedgerService.test.js
  tests/unit/backend/tokenLedgerService.test.js:69:24


Serialized Error: { code: &apos;MODULE_NOT_FOUND&apos;, requireStack: [ &apos;/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/tokenLedgerService.test.js&apos; ] }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedgerService.test.js" name="TokenBillingService - Ledger Functionality &gt; getLedger &gt; should return ledger entries for organization" time="0.000972042">
            <failure message="expected +0 to be 2 // Object.is equality" type="AssertionError">
AssertionError: expected +0 to be 2 // Object.is equality

- Expected
+ Received

- 2
+ 0

  tests/unit/backend/tokenLedgerService.test.js:86:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedgerService.test.js" name="TokenBillingService - Ledger Functionality &gt; getLedgerSummary &gt; should return aggregated ledger summary" time="0.000407417">
            <failure message="Cannot find module &apos;../../server/database&apos;
Require stack:
- /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/tokenLedgerService.test.js" type="Error">
Error: Cannot find module &apos;../../server/database&apos;
Require stack:
- /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/tokenLedgerService.test.js
  tests/unit/backend/tokenLedgerService.test.js:94:24


Serialized Error: { code: &apos;MODULE_NOT_FOUND&apos;, requireStack: [ &apos;/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/tokenLedgerService.test.js&apos; ] }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedgerService.test.js" name="TokenBillingService - Ledger Functionality &gt; creditOrganization &gt; should add credit and create ledger entry" time="0.000214625">
            <failure message="Cannot find module &apos;../../server/database&apos;
Require stack:
- /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/tokenLedgerService.test.js" type="Error">
Error: Cannot find module &apos;../../server/database&apos;
Require stack:
- /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/tokenLedgerService.test.js
  tests/unit/backend/tokenLedgerService.test.js:110:24


Serialized Error: { code: &apos;MODULE_NOT_FOUND&apos;, requireStack: [ &apos;/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/tokenLedgerService.test.js&apos; ] }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedgerService.test.js" name="TokenBillingService - deductTokens with Ledger &gt; should create ledger entry when deducting from organization" time="0.0002235">
            <failure message="Cannot find module &apos;../../server/database&apos;
Require stack:
- /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/tokenLedgerService.test.js" type="Error">
Error: Cannot find module &apos;../../server/database&apos;
Require stack:
- /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/tokenLedgerService.test.js
  tests/unit/backend/tokenLedgerService.test.js:130:20


Serialized Error: { code: &apos;MODULE_NOT_FOUND&apos;, requireStack: [ &apos;/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/tokenLedgerService.test.js&apos; ] }
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/usageService.test.js" timestamp="2025-12-21T11:11:50.139Z" hostname="MacBook-Pro-Piotr.local" tests="21" failures="2" errors="0" skipped="0" time="0.199588416">
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; recordTokenUsage() &gt; should record token usage" time="0.005127166">
            <failure message="expected &apos;INSERT INTO usage_records (id, organi&apos; to contain &apos;type = \&apos;token\&apos;&apos;" type="AssertionError">
AssertionError: expected &apos;INSERT INTO usage_records (id, organi&apos; to contain &apos;type = \&apos;token\&apos;&apos;

- Expected
+ Received

- type = &apos;token&apos;
+ INSERT INTO usage_records (id, organization_id, user_id, type, amount, action, metadata)
+              VALUES (?, ?, ?, &apos;token&apos;, ?, ?, ?)

  Object.&lt;anonymous&gt; tests/unit/backend/usageService.test.js:51:31
  server/services/usageService.js:19:17
  Object.recordTokenUsage server/services/usageService.js:18:12
  tests/unit/backend/usageService.test.js:60:47
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; recordTokenUsage() &gt; should handle database errors" time="0.000709583">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; recordStorageUsage() &gt; should record storage usage" time="0.000600084">
            <failure message="expected &apos;INSERT INTO usage_records (id, organi&apos; to contain &apos;type = \&apos;storage\&apos;&apos;" type="AssertionError">
AssertionError: expected &apos;INSERT INTO usage_records (id, organi&apos; to contain &apos;type = \&apos;storage\&apos;&apos;

- Expected
+ Received

- type = &apos;storage&apos;
+ INSERT INTO usage_records (id, organization_id, user_id, type, amount, action, metadata)
+              VALUES (?, ?, NULL, &apos;storage&apos;, ?, ?, ?)

  Object.&lt;anonymous&gt; tests/unit/backend/usageService.test.js:88:31
  server/services/usageService.js:37:17
  Object.recordStorageUsage server/services/usageService.js:36:12
  tests/unit/backend/usageService.test.js:95:47
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; getCurrentUsage() &gt; should return current usage with token and storage limits" time="0.000373833">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; getCurrentUsage() &gt; should handle organizations without plan" time="0.000144333">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; getCurrentUsage() &gt; should calculate storage percentage correctly" time="0.000128625">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; getCurrentUsage() &gt; should ensure storage never goes below 0" time="0.000128291">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; checkQuota() &gt; should allow when quota available" time="0.000138042">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; checkQuota() &gt; should deny when quota exceeded and overage disabled" time="0.00011225">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; checkQuota() &gt; should allow when overage enabled even if quota exceeded" time="0.00014225">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; checkQuota() &gt; should allow unlimited when limit is 0" time="0.000101958">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; calculateOverage() &gt; should calculate overage charges correctly" time="0.000244875">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; calculateOverage() &gt; should return zero overage when within limits" time="0.000126167">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; updateUsageSummary() &gt; should create or update usage summary" time="0.000235459">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; getUsageHistory() &gt; should retrieve usage history" time="0.00028825">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; getUsageHistory() &gt; should respect limit parameter" time="0.000071333">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; getGlobalUsageStats() &gt; should return global usage statistics" time="0.000131458">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; checkProjectQuota() &gt; should check project storage quota" time="0.000138666">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; checkProjectQuota() &gt; should allow unlimited when limit is null" time="0.000078583">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; checkProjectQuota() &gt; should reject when project not found" time="0.000135291">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; Multi-Tenant Isolation &gt; should filter usage by organization_id" time="0.000177875">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/webhookService.test.js" timestamp="2025-12-21T11:11:50.140Z" hostname="MacBook-Pro-Piotr.local" tests="19" failures="9" errors="0" skipped="0" time="0.189630542">
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; trigger() &gt; should trigger webhooks for matching event type" time="0.009854167">
            <system-err>
[Webhook] Failed to send to https://example.com/webhook: fetch is not a function

            </system-err>
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/webhookService.test.js:93:47
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; trigger() &gt; should return zero triggered when no webhooks match" time="0.000333791">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; trigger() &gt; should handle multiple webhooks" time="0.000557291">
            <system-err>
[Webhook] Failed to send to https://example.com/webhook1: fetch is not a function

[Webhook] Failed to send to https://example.com/webhook2: fetch is not a function

            </system-err>
            <failure message="expected &quot;vi.fn()&quot; to be called 2 times, but got 0 times" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called 2 times, but got 0 times
  tests/unit/backend/webhookService.test.js:142:31
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; trigger() &gt; should handle webhook failures gracefully" time="0.000241875">
            <system-err>
[Webhook] Failed to send to https://example.com/webhook: fetch is not a function

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; trigger() &gt; should handle database errors" time="0.000716167">
            <system-err>
[Webhook] Query error: Error: Database error
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/webhookService.test.js:172:29
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; sendWebhook() &gt; should send webhook with correct headers and signature" time="0.000265041">
            <failure message="fetch is not a function" type="TypeError">
TypeError: fetch is not a function
  WebhookService.sendWebhook server/services/webhookService.js:68:32
  tests/unit/backend/webhookService.test.js:201:49
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; sendWebhook() &gt; should include timestamp in payload" time="0.000185667">
            <failure message="fetch is not a function" type="TypeError">
TypeError: fetch is not a function
  WebhookService.sendWebhook server/services/webhookService.js:68:32
  tests/unit/backend/webhookService.test.js:235:34
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; sendWebhook() &gt; should throw error when webhook returns non-OK status" time="0.001130958">
            <failure message="expected [Function] to throw error including &apos;Webhook returned 500&apos; but got &apos;fetch is not a function&apos;" type="AssertionError">
AssertionError: expected [Function] to throw error including &apos;Webhook returned 500&apos; but got &apos;fetch is not a function&apos;

Expected: &quot;Webhook returned 500&quot;
Received: &quot;fetch is not a function&quot;
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; sendWebhook() &gt; should generate HMAC signature" time="0.000215166">
            <failure message="fetch is not a function" type="TypeError">
TypeError: fetch is not a function
  WebhookService.sendWebhook server/services/webhookService.js:68:32
  tests/unit/backend/webhookService.test.js:276:34
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; sendSlackNotification() &gt; should send Slack notification" time="0.000461458">
            <system-err>
[Slack] Notification failed: TypeError: fetch is not a function
    at WebhookService.sendSlackNotification (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/webhookService.js:95:36)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/webhookService.test.js:296:49
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)

            </system-err>
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/webhookService.test.js:298:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; sendSlackNotification() &gt; should handle Slack notification failures" time="0.000258417">
            <system-err>
[Slack] Notification failed: TypeError: fetch is not a function
    at WebhookService.sendSlackNotification (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/webhookService.js:95:36)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/webhookService.test.js:317:49
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; formatInitiativeMessage() &gt; should format initiative message for Slack" time="0.000239209">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; formatTaskMessage() &gt; should format task message with status emoji" time="0.000130875">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; formatTaskMessage() &gt; should use correct emoji for each status" time="0.000123042">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; formatTaskMessage() &gt; should default to  for unknown status" time="0.000065375">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; Multi-Tenant Isolation &gt; should only trigger webhooks for specified organization" time="0.000540292">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; Multi-Tenant Isolation &gt; should only match active webhooks" time="0.000091208">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; Security &gt; should generate unique signature for each webhook" time="0.000207708">
            <failure message="fetch is not a function" type="TypeError">
TypeError: fetch is not a function
  WebhookService.sendWebhook server/services/webhookService.js:68:32
  tests/unit/backend/webhookService.test.js:440:34
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; Security &gt; should include event type in headers" time="0.000183958">
            <failure message="fetch is not a function" type="TypeError">
TypeError: fetch is not a function
  WebhookService.sendWebhook server/services/webhookService.js:68:32
  tests/unit/backend/webhookService.test.js:465:34
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/adminMiddleware.test.js" timestamp="2025-12-21T11:11:50.141Z" hostname="MacBook-Pro-Piotr.local" tests="4" failures="0" errors="0" skipped="0" time="0.174826791">
        <testcase classname="tests/unit/backend/middleware/adminMiddleware.test.js" name="AdminMiddleware &gt; should call next() if user is admin" time="0.002553666">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/adminMiddleware.test.js" name="AdminMiddleware &gt; should call next() if user is superadmin" time="0.000421541">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/adminMiddleware.test.js" name="AdminMiddleware &gt; should return 403 if user is not admin" time="0.001095333">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/adminMiddleware.test.js" name="AdminMiddleware &gt; should return 401 if verify failed (bad signature)" time="0.00024525">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/auditLog.test.js" timestamp="2025-12-21T11:11:50.141Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.235095584">
        <testcase classname="tests/unit/backend/middleware/auditLog.test.js" name="AuditLog Middleware &gt; should call next() and override res.end" time="0.006169667">
            <system-out>
[Database] Selected: SQLite

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/middleware/auditLog.test.js" name="AuditLog Middleware &gt; should log activity when res.end is called for 2xx POST" time="0.052808125">
            <system-out>
[Database] Selected: SQLite

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/middleware/auditLog.test.js" name="AuditLog Middleware &gt; should NOT log for GET requests" time="0.0005865">
            <system-out>
[Database] Selected: SQLite

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/authMiddleware.test.js" timestamp="2025-12-21T11:11:50.142Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="4" time="0.143888208">
        <testcase classname="tests/unit/backend/middleware/authMiddleware.test.js" name="AuthMiddleware &gt; should return 403 if no token provided" time="0.001634042">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/authMiddleware.test.js" name="AuthMiddleware &gt; should return 401 if token expired" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/middleware/authMiddleware.test.js" name="AuthMiddleware &gt; should return 401 if token invalid" time="0.000366958">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/authMiddleware.test.js" name="AuthMiddleware &gt; should call next() if token valid and no revocation check needed (no jti)" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/middleware/authMiddleware.test.js" name="AuthMiddleware &gt; should check revocation if jti is present" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/middleware/authMiddleware.test.js" name="AuthMiddleware &gt; should return 401 if token is revoked" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/planLimits.test.js" timestamp="2025-12-21T11:11:50.142Z" hostname="MacBook-Pro-Piotr.local" tests="8" failures="0" errors="0" skipped="0" time="0.1999815">
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should return 403 if no organization found in user" time="0.010578417">
            <system-out>
[Database] Selected: SQLite

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should return 404 if organization does not exist in DB" time="0.001826125">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should allow request if within limit (Free plan)" time="0.002629792">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should block request if limit reached (Free plan)" time="0.0021135">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should allow request if within limit (Pro plan)" time="0.00176075">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should treat trial status as pro plan" time="0.001994417">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should handle undefined limits gracefully (warn and allow)" time="0.001154125">
            <system-err>
Limit key unknown_limit_key not found for plan free

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should check max_members limit" time="0.001913375">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" timestamp="2025-12-21T11:11:50.142Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.184420584">
        <testcase classname="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" name="Project Quota Middleware (Integration) &gt; should skip check if no project_id provided" time="0.000966875">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" name="Project Quota Middleware (Integration) &gt; should allow request if quota is sufficient" time="0.0013725">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" name="Project Quota Middleware (Integration) &gt; should allow request if limit is NULL (unlimited)" time="0.001319125">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" name="Project Quota Middleware (Integration) &gt; should block 429 if quota exceeded" time="0.002891333">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" name="Project Quota Middleware (Integration) &gt; should cleanup temp file if quota exceeded" time="0.001319167">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" name="Project Quota Middleware (Integration) &gt; should handle errors gracefully (e.g. project not found)" time="0.001193667">
            <system-err>
Project quota check error: Error: Project not found
    at Statement.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/usageService.js:303:41)
    at Statement.replacement (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/node_modules/sqlite3/lib/trace.js:25:27)
    at Statement.replacement (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/node_modules/sqlite3/lib/trace.js:25:27)

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/quotaMiddleware.test.js" timestamp="2025-12-21T11:11:50.143Z" hostname="MacBook-Pro-Piotr.local" tests="8" failures="0" errors="0" skipped="0" time="0.31885925">
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceTokenQuota &gt; should return 401 if no orgId" time="0.001052083">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceTokenQuota &gt; should allow if usage is below limit" time="0.003875375">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceTokenQuota &gt; should block 429 if usage exceeds limit" time="0.001817916">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceTokenQuota &gt; should allow if overage is enabled even if exceeded" time="0.002279792">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceTokenQuota &gt; should set warning headers if &gt; 80%" time="0.002168084">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceStorageQuota &gt; should allow if allowed" time="0.002680708">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceStorageQuota &gt; should block 429 if exceeded" time="0.002893667">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; recordTokenUsageAfterResponse &gt; should insert usage record into DB" time="0.052959709">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/superAdminMiddleware.test.js" timestamp="2025-12-21T11:11:50.143Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.208948583">
        <testcase classname="tests/unit/backend/middleware/superAdminMiddleware.test.js" name="SuperAdminMiddleware &gt; should call next() if user is superadmin" time="0.002271583">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/superAdminMiddleware.test.js" name="SuperAdminMiddleware &gt; should return 403 if user is admin (not super)" time="0.001207458">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/superAdminMiddleware.test.js" name="SuperAdminMiddleware &gt; should return 401 if token is invalid (bad signature)" time="0.000263666">
        </testcase>
    </testsuite>
</testsuites>
