<?xml version="1.0" encoding="UTF-8" ?>
<testsuites name="vitest tests" tests="1475" failures="32" errors="0" time="94.751522293">
    <testsuite name="tests/unit/actionProposalEngine.test.js" timestamp="2025-12-21T19:48:14.568Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.214127916">
        <testcase classname="tests/unit/actionProposalEngine.test.js" name="ActionProposalEngine &gt; should generate proposals for USER_AT_RISK" time="0.007826209">
        </testcase>
        <testcase classname="tests/unit/actionProposalEngine.test.js" name="ActionProposalEngine &gt; should generate proposals for BLOCKED_INITIATIVE" time="0.000282834">
        </testcase>
        <testcase classname="tests/unit/actionProposalEngine.test.js" name="ActionProposalEngine &gt; should generate proposals for STRONG_TEAM_MEMBER" time="0.000412125">
        </testcase>
        <testcase classname="tests/unit/actionProposalEngine.test.js" name="ActionProposalEngine &gt; should be deterministic (return same output for same input)" time="0.000280041">
        </testcase>
        <testcase classname="tests/unit/actionProposalEngine.test.js" name="ActionProposalEngine &gt; should return sorted proposals by proposal_id" time="0.000494791">
        </testcase>
        <testcase classname="tests/unit/actionProposalEngine.test.js" name="ActionProposalEngine &gt; should adhere to the mandatory output model" time="0.0003755">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/aiModeResolver.test.js" timestamp="2025-12-21T19:48:14.570Z" hostname="MacBook-Pro-Piotr.local" tests="29" failures="0" errors="0" skipped="0" time="0.194992792">
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; Mode Constants &gt; should have all 6 AI modes" time="0.00066725">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; Phase to Mode Mapping &gt; Phase A maps to OFF (no AI)" time="0.000117416">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; Phase to Mode Mapping &gt; Phase B maps to NARRATOR" time="0.000069833">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; Phase to Mode Mapping &gt; Phase C maps to GUIDE" time="0.000054334">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; Phase to Mode Mapping &gt; Phase D maps to GUIDE" time="0.000058708">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; Phase to Mode Mapping &gt; Phase E maps to THINKING_PARTNER" time="0.000044">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; Phase to Mode Mapping &gt; Phase F maps to FACILITATOR" time="0.000038292">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; Phase to Mode Mapping &gt; Phase G maps to META_ANALYST" time="0.000036125">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; Mode Capabilities &gt; OFF mode cannot respond" time="0.000080083">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; Mode Capabilities &gt; NARRATOR can explain but not recommend" time="0.000077041">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; Mode Capabilities &gt; GUIDE can explain but not recommend or analyze" time="0.000058333">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; Mode Capabilities &gt; THINKING_PARTNER can recommend and analyze" time="0.0000645">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; Mode Capabilities &gt; FACILITATOR can facilitate but not benchmark" time="0.000047375">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; Mode Capabilities &gt; META_ANALYST has all capabilities" time="0.000049167">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; canAIRespond &gt; returns false for OFF mode" time="0.000043916">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; canAIRespond &gt; returns true for all other modes" time="0.000062125">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; Request Validation &gt; OFF mode blocks all requests" time="0.00011075">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; Request Validation &gt; NARRATOR blocks recommendations" time="0.000037375">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; Request Validation &gt; GUIDE blocks analysis" time="0.000031125">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; Request Validation &gt; THINKING_PARTNER allows recommendations" time="0.000031459">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; Request Validation &gt; THINKING_PARTNER blocks benchmarks" time="0.000028625">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; Request Validation &gt; META_ANALYST allows benchmarks" time="0.00002675">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; System Instructions &gt; OFF mode returns null" time="0.000040209">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; System Instructions &gt; NARRATOR instruction contains mode declaration" time="0.000037875">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; System Instructions &gt; GUIDE instruction contains forbidden actions" time="0.000036375">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; System Instructions &gt; THINKING_PARTNER instruction contains 5-7 questions rule" time="0.000027625">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; System Instructions &gt; FACILITATOR instruction forbids taking sides" time="0.000026583">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; System Instructions &gt; META_ANALYST instruction forbids exposing identities" time="0.00002525">
        </testcase>
        <testcase classname="tests/unit/aiModeResolver.test.js" name="AIModeResolver &gt; Off Mode Response &gt; returns appropriate message for Phase A users" time="0.000039125">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/aiPlaybookRoutingEngine.test.js" timestamp="2025-12-21T19:48:14.573Z" hostname="MacBook-Pro-Piotr.local" tests="29" failures="0" errors="0" skipped="0" time="0.091119458">
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_lte &gt; should match when metric is less than threshold" time="0.000688792">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_lte &gt; should match when metric equals threshold" time="0.000091584">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_lte &gt; should not match when metric is greater than threshold" time="0.000079666">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_lte &gt; should not match when metric is not found" time="0.00008425">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_lte &gt; should return false for invalid format" time="0.000071416">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_gte &gt; should match when metric is greater than threshold" time="0.00006025">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_gte &gt; should match when metric equals threshold" time="0.000044875">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_gte &gt; should not match when metric is less than threshold" time="0.000038041">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; flag_eq &gt; should match when flag equals expected value" time="0.000046083">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; flag_eq &gt; should not match when flag does not equal expected value" time="0.000053792">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; flag_eq &gt; should work with string values" time="0.0000405">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; has_open_tasks &gt; should match when open tasks exist and condition is true" time="0.000048791">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; has_open_tasks &gt; should match when no open tasks and condition is false" time="0.000034">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; has_open_tasks &gt; should recognize in_progress as open" time="0.000029375">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; has_open_tasks &gt; should recognize PENDING as open" time="0.000027375">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; signal_present &gt; should match when signal is present" time="0.000037042">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; signal_present &gt; should not match when signal is not present" time="0.000030708">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; signal_present &gt; should handle simple string signals" time="0.000041958">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; time_since_step_gte &gt; should match when enough time has passed" time="0.00016625">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; time_since_step_gte &gt; should not match when not enough time has passed" time="0.000044542">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; time_since_step_gte &gt; should not match when step timestamp not found" time="0.000038959">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; unknown conditions &gt; should fail safely for unknown condition type" time="0.000165125">
            <system-err>
[AIPlaybookRoutingEngine] Unknown condition type: unknown_condition

            </system-err>
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; unknown conditions &gt; should fail safely for empty condition" time="0.000036833">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateRouting &gt; should select first matching rule in first_match mode" time="0.0001205">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateRouting &gt; should use else_goto when no rules match" time="0.00004475">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateRouting &gt; should return null when no rules match and no else_goto" time="0.000050333">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateRouting &gt; should use linear flow when no branch_rules defined" time="0.00003425">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateRouting &gt; should record evaluation trace" time="0.000327958">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateRouting &gt; should skip rules with invalid conditions" time="0.000042833">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/aiResponsePostProcessor.test.js" timestamp="2025-12-21T19:48:14.575Z" hostname="MacBook-Pro-Piotr.local" tests="20" failures="0" errors="0" skipped="0" time="0.31134675">
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Memory Prefix &gt; should add memory prefix when memory count &gt; 0" time="0.00078575">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Memory Prefix &gt; should NOT add memory prefix when memory count is 0" time="0.000166333">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Memory Prefix &gt; should NOT duplicate memory prefix if already present" time="0.000091375">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; External Sources Prefix &gt; should add external prefix when external sources are used" time="0.000091417">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; External Sources Prefix &gt; should NOT add external prefix when no external sources" time="0.000080917">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; External Sources Prefix &gt; should NOT duplicate external prefix if already present" time="0.000163708">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Combined Prefixes &gt; should add both prefixes when both memory and external sources exist" time="0.000078125">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Combined Prefixes &gt; should maintain correct order: memory first, then external" time="0.000067">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Edge Cases &gt; should handle empty response safely" time="0.000044666">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Edge Cases &gt; should handle null response safely" time="0.000053333">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Edge Cases &gt; should handle undefined context safely" time="0.000038958">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Edge Cases &gt; should handle null context safely" time="0.000031083">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Edge Cases &gt; should trim whitespace from response" time="0.000034917">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; getMemoryCount &gt; should count previous decisions" time="0.000129125">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; getMemoryCount &gt; should return memoryCount from projectMemory" time="0.000074542">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; getMemoryCount &gt; should return 1 when PMO health snapshot exists" time="0.000049208">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; getExternalSources &gt; should return externalSourcesUsed array" time="0.000675292">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; getExternalSources &gt; should derive sources from fetchedData" time="0.000392917">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; stripPrefixes &gt; should remove memory and external prefixes" time="0.000097667">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; stripPrefixes &gt; should handle text without prefixes" time="0.000044334">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/aiRoleGuard.test.js" timestamp="2025-12-21T19:48:14.576Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.135847542">
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Role Definitions &gt; should define three roles in correct hierarchy" time="0.000819167">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Role Definitions &gt; should define capabilities for each role" time="0.000192458">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Role Descriptions &gt; should return correct description for each role" time="0.000125834">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Role Descriptions &gt; should default to ADVISOR description for unknown role" time="0.000052">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; ADVISOR Role &gt; should allow explain actions" time="0.000177291">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; ADVISOR Role &gt; should block draft creation" time="0.000080041">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; ADVISOR Role &gt; should block execution actions" time="0.000053917">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; MANAGER Role &gt; should allow draft creation with approval required" time="0.00006075">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; MANAGER Role &gt; should block execution actions" time="0.000057625">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; OPERATOR Role &gt; should allow execution actions" time="0.000074167">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; OPERATOR Role &gt; should allow entity modifications" time="0.000060041">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Mutation Validation &gt; should block all mutations for ADVISOR" time="0.000072334">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Mutation Validation &gt; should allow mutations as drafts for MANAGER" time="0.000059458">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Mutation Validation &gt; should allow direct mutations for OPERATOR" time="0.000052166">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; isActionBlocked &gt; should return blocked with required role for insufficient permissions" time="0.000091417">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; isActionBlocked &gt; should return not blocked for allowed actions" time="0.000050667">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/analytics.service.test.ts" timestamp="2025-12-21T19:48:14.577Z" hostname="MacBook-Pro-Piotr.local" tests="8" failures="0" errors="0" skipped="0" time="0.236101042">
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; calculateAnalytics &gt; calculates analytics for empty arrays" time="0.000732166">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; calculateAnalytics &gt; calculates completion rate correctly" time="0.000171958">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; calculateAnalytics &gt; calculates initiative statistics" time="0.000141834">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; calculateAnalytics &gt; calculates total cost and benefit" time="0.00007525">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; generateBurnDownData &gt; generates burn down data for date range" time="0.000231875">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; generateBurnDownData &gt; handles empty task list" time="0.000057458">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; generateVelocityData &gt; generates velocity data for specified weeks" time="0.000116625">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; generateVelocityData &gt; uses default 8 weeks when not specified" time="0.00005475">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/api.service.test.ts" timestamp="2025-12-21T19:48:14.577Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.185553666">
        <testcase classname="tests/unit/api.service.test.ts" name="Api Service Unit Tests &gt; login: should store token and return user on success" time="0.001727667">
            <system-out>
Api.login called: { email: &apos;test@test.com&apos;, url: &apos;/api/auth/login&apos; }

            </system-out>
        </testcase>
        <testcase classname="tests/unit/api.service.test.ts" name="Api Service Unit Tests &gt; login: should throw error on failure" time="0.00070425">
            <system-out>
Api.login called: { email: &apos;test@test.com&apos;, url: &apos;/api/auth/login&apos; }

            </system-out>
        </testcase>
        <testcase classname="tests/unit/api.service.test.ts" name="Api Service Unit Tests &gt; getUsers: should send Authorization header" time="0.000335916">
        </testcase>
        <testcase classname="tests/unit/api.service.test.ts" name="Api Service Unit Tests &gt; getLLMProviders: should return list" time="0.000149875">
        </testcase>
        <testcase classname="tests/unit/api.service.test.ts" name="Api Service Unit Tests &gt; indexKnowledgeFiles: should trigger indexing" time="0.000167459">
        </testcase>
        <testcase classname="tests/unit/api.service.test.ts" name="Api Service Unit Tests &gt; saveSession: should post data" time="0.000150667">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/asyncJobService.test.js" timestamp="2025-12-21T19:48:14.578Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.412702584">
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; JOB_TYPES Constants &gt; should export EXECUTE_DECISION type" time="0.063333834">
            <system-out>
[Queue] Using Mock Queue for ai-tasks

            </system-out>
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; JOB_TYPES Constants &gt; should export ADVANCE_PLAYBOOK_STEP type" time="0.001881833">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; JOB_STATUSES Constants &gt; should export all required statuses" time="0.001648875">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; JOB_STATUSES Constants &gt; should have 6 status types" time="0.001474042">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export enqueueActionExecution" time="0.001064875">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export enqueuePlaybookAdvance" time="0.003128125">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export getJob" time="0.001105958">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export listJobs" time="0.002370166">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export retryJob" time="0.000806375">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export cancelJob" time="0.000750958">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export updateJobStatus" time="0.000531458">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export markDeadLetter" time="0.002358">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export incrementAttempts" time="0.000688584">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="Action Error Codes &gt; should include async job error codes" time="0.002934542">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobProcessor &gt; should export processDecisionExecution" time="0.142651333">
            <system-out>
[Redis] Initializing client...
[Redis] Using Mock Client

            </system-out>
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobProcessor &gt; should export processPlaybookAdvance" time="0.0007225">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/breakGlassService.test.js" timestamp="2025-12-21T19:48:14.578Z" hostname="MacBook-Pro-Piotr.local" tests="15" failures="0" errors="0" skipped="0" time="0.109932459">
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; SCOPES &gt; should define all break-glass scopes" time="0.000591917">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; DEFAULT_DURATION_MINUTES &gt; should be 2 hours (120 minutes)" time="0.000087416">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; MAX_DURATION_MINUTES &gt; should be 24 hours (1440 minutes)" time="0.000064167">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; startSession &gt; should throw error for missing required parameters" time="0.000612458">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; startSession &gt; should throw error for invalid scope" time="0.000125792">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; startSession &gt; should throw error if session already exists for scope" time="0.000268292">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; startSession &gt; should create session successfully" time="0.000230459">
            <system-out>
[BreakGlass] Session started: test-uuid-1234 (scope: policy_engine_disabled) by user-1

            </system-out>
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; startSession &gt; should cap duration at MAX_DURATION_MINUTES" time="0.000121708">
            <system-out>
[BreakGlass] Session started: test-uuid-1234 (scope: emergency_access) by user-1

            </system-out>
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; closeSession &gt; should throw error for non-existent session" time="0.000156917">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; closeSession &gt; should throw error for already closed session" time="0.00012675">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; closeSession &gt; should close session successfully" time="0.000190833">
            <system-out>
[BreakGlass] Session closed: session-1 by user-1

            </system-out>
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; isBreakGlassActive &gt; should return false when no active session" time="0.000064708">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; isBreakGlassActive &gt; should return true when active session exists" time="0.0000435">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; getActiveSessions &gt; should return empty array when no sessions" time="0.000250875">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; getActiveSessions &gt; should return active sessions" time="0.000291583">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/connectorAdapter.test.js" timestamp="2025-12-21T19:48:14.580Z" hostname="MacBook-Pro-Piotr.local" tests="11" failures="0" errors="0" skipped="0" time="0.203358958">
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Dry-run Mode &gt; should return plan without execution in dry-run mode" time="0.006213875">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Dry-run Mode &gt; should respect sandbox_mode flag on config" time="0.000364458">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Error Handling &gt; should return error for unknown connector" time="0.000204584">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Error Handling &gt; should return error for unsupported action" time="0.000188458">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Error Handling &gt; should return error when connector not configured" time="0.0002225">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Error Handling &gt; should return error when connector disconnected" time="0.000178709">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Plan Generation &gt; should generate Jira plan for issue_create" time="0.000777125">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Plan Generation &gt; should generate Slack plan for message_send" time="0.0003305">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Plan Generation &gt; should generate Google Calendar plan for event_create" time="0.000247583">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Execution (Mock) &gt; should execute Slack message_send successfully" time="0.00029975">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Execution (Mock) &gt; should include duration_ms in result" time="0.000167292">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/connectorRegistry.test.js" timestamp="2025-12-21T19:48:14.580Z" hostname="MacBook-Pro-Piotr.local" tests="14" failures="0" errors="0" skipped="0" time="0.193576583">
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getAllConnectors &gt; should return all available connectors" time="0.001513208">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getConnector &gt; should return connector by key" time="0.000160875">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getConnector &gt; should return null for unknown connector" time="0.00008025">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getConnectorsByCategory &gt; should return connectors filtered by category" time="0.000110042">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getConnectorsByCategory &gt; should return empty array for unknown category" time="0.000250542">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; hasCapability &gt; should return true for supported capability" time="0.000081292">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; hasCapability &gt; should return false for unsupported capability" time="0.000058208">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; hasCapability &gt; should return false for unknown connector" time="0.000042292">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; validateCredentials &gt; should validate all required credentials present" time="0.000097708">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; validateCredentials &gt; should identify missing required credentials" time="0.000203834">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; validateCredentials &gt; should handle unknown connector" time="0.000078">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getRequiredCredentials &gt; should return required credentials for connector" time="0.000060167">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getRequiredCredentials &gt; should return empty array for unknown connector" time="0.000039791">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getAllCategories &gt; should return all categories" time="0.000114084">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/demoGuard.test.js" timestamp="2025-12-21T19:48:14.581Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.327678084">
        <testcase classname="tests/unit/demoGuard.test.js" name="Demo Guard Middleware &gt; should allow regular users to perform write operations" time="0.008077208">
        </testcase>
        <testcase classname="tests/unit/demoGuard.test.js" name="Demo Guard Middleware &gt; should allow demo users to perform read operations" time="0.001469208">
        </testcase>
        <testcase classname="tests/unit/demoGuard.test.js" name="Demo Guard Middleware &gt; should BLOCK demo users from performing write operations on protected routes" time="0.001157125">
            <system-err>
[DemoGuard] Blocked POST /api/tasks for Demo User undefined (Action: CREATE_TASKS)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/demoGuard.test.js" name="Demo Guard Middleware &gt; should ALLOW demo users to perform write operations on ALLOWED routes (AI Chat)" time="0.000829208">
        </testcase>
        <testcase classname="tests/unit/demoGuard.test.js" name="Demo Guard Middleware &gt; should ALLOW demo users to perform write operations on ALLOWED routes (Logout)" time="0.001239583">
        </testcase>
        <testcase classname="tests/unit/demoGuard.test.js" name="Demo Guard Middleware &gt; should passthrough if no user matches (unauthenticated requests handled elsewhere)" time="0.000955709">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/demoIsolation.test.js" timestamp="2025-12-21T19:48:14.582Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.217218125">
        <testcase classname="tests/unit/demoIsolation.test.js" name="Demo Guard Isolation Extension &gt; should allow Normal GET for demo user" time="0.007138958">
        </testcase>
        <testcase classname="tests/unit/demoIsolation.test.js" name="Demo Guard Isolation Extension &gt; should BLOCK demo user if they try to switch context via Query Param" time="0.001574625">
            <system-err>
[DemoGuard] Blocked cross-tenant access attempt by Demo User undefined (Target: org-real, Actual: org-demo)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/demoIsolation.test.js" name="Demo Guard Isolation Extension &gt; should BLOCK demo user if they try to switch context via Body" time="0.008988167">
            <system-err>
[DemoGuard] Blocked cross-tenant access attempt by Demo User undefined (Target: org-real, Actual: org-demo)

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/drdStructure.test.ts" timestamp="2025-12-21T19:48:14.582Z" hostname="MacBook-Pro-Piotr.local" tests="7" failures="0" errors="0" skipped="0" time="0.248371958">
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; exports DRD_STRUCTURE as array" time="0.000497667">
        </testcase>
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; each axis has required properties" time="0.000365709">
        </testcase>
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; each area has required properties" time="0.000868583">
        </testcase>
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; each level has required properties" time="0.003192583">
        </testcase>
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; getQuestionsForAxis &gt; returns areas for valid axis ID" time="0.000080709">
        </testcase>
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; getQuestionsForAxis &gt; returns empty array for invalid axis ID" time="0.000235208">
        </testcase>
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; getQuestionsForAxis &gt; returns areas for different axis IDs" time="0.000139792">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/governanceAudit.test.js" timestamp="2025-12-21T19:48:14.583Z" hostname="MacBook-Pro-Piotr.local" tests="8" failures="0" errors="0" skipped="0" time="0.1295145">
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; logAudit &gt; should throw error for missing required parameters" time="0.00122125">
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; logAudit &gt; should throw error for invalid action" time="0.000262375">
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; logAudit &gt; should log audit entry successfully" time="0.000723166">
            <system-out>
[GovernanceAudit] Logged: CREATE on POLICY_RULE/rule-1 by user-1

            </system-out>
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; getAuditLog &gt; should query with organization filter" time="0.000225125">
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; getAuditLog &gt; should bypass org filter for superadmin" time="0.000127458">
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; getAuditLog &gt; should support action filter" time="0.000289584">
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; exportAuditLog &gt; should export as JSON by default" time="0.000147666">
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; exportAuditLog &gt; should export as CSV when specified" time="0.000174959">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/notificationOutboxService.test.js" timestamp="2025-12-21T19:48:14.583Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.23396425">
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; NOTIFICATION_TYPES Constants &gt; should export APPROVAL_DUE type" time="0.006496333">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; NOTIFICATION_TYPES Constants &gt; should export PLAYBOOK_STUCK type" time="0.001429292">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; NOTIFICATION_TYPES Constants &gt; should export DEAD_LETTER type" time="0.001329833">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; NOTIFICATION_TYPES Constants &gt; should export ESCALATION type" time="0.001261125">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; NOTIFICATION_TYPES Constants &gt; should have 4 notification types" time="0.0018045">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; OUTBOX_STATUSES Constants &gt; should export QUEUED status" time="0.001684125">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; OUTBOX_STATUSES Constants &gt; should export SENT status" time="0.001187375">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; OUTBOX_STATUSES Constants &gt; should export FAILED status" time="0.001344875">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; MAX_ATTEMPTS &gt; should be 3" time="0.001127958">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; Service Methods Existence &gt; should export enqueue" time="0.000942583">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; Service Methods Existence &gt; should export shouldNotify" time="0.001419125">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; Service Methods Existence &gt; should export getUserPreferences" time="0.001055792">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; Service Methods Existence &gt; should export updateUserPreferences" time="0.001026375">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; Service Methods Existence &gt; should export processQueue" time="0.001074708">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; Service Methods Existence &gt; should export getOutboxStats" time="0.001174958">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService User Preferences &gt; should return true when no preferences set (default behavior)" time="0.001613083">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/pdfExport.test.ts" timestamp="2025-12-21T19:48:14.584Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.229494292">
        <testcase classname="tests/unit/pdfExport.test.ts" name="Service Test: pdfExport &gt; exportReportToPDF &gt; returns false when element is not found" time="0.001094333">
            <system-err>
Element with id non-existent not found

            </system-err>
        </testcase>
        <testcase classname="tests/unit/pdfExport.test.ts" name="Service Test: pdfExport &gt; exportReportToPDF &gt; exports PDF successfully" time="0.000469708">
        </testcase>
        <testcase classname="tests/unit/pdfExport.test.ts" name="Service Test: pdfExport &gt; exportReportToPDF &gt; handles errors gracefully" time="0.001201334">
            <system-err>
PDF Export failed: Error: Canvas error
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/pdfExport.test.ts:89:52
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/pdfExport.test.ts" name="Service Test: pdfExport &gt; exportDashboardToPDF &gt; creates PDF with metadata" time="0.008906583">
        </testcase>
        <testcase classname="tests/unit/pdfExport.test.ts" name="Service Test: pdfExport &gt; exportDashboardToPDF &gt; handles optional metadata" time="0.0002995">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/piiRedactor.test.js" timestamp="2025-12-21T19:48:14.584Z" hostname="MacBook-Pro-Piotr.local" tests="17" failures="0" errors="0" skipped="0" time="0.304796208">
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redactEmails &gt; should redact email addresses" time="0.000556625">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redactEmails &gt; should redact multiple emails" time="0.000085">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redactEmails &gt; should return non-string values unchanged" time="0.00007825">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redactTokens &gt; should redact JWT-like tokens" time="0.000187083">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redactTokens &gt; should handle partial JWT patterns" time="0.000060875">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should redact email fields" time="0.000126334">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should redact name fields" time="0.000058541">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should redact password fields" time="0.000060917">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should redact token and secret fields" time="0.000217792">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should redact inline emails in string values" time="0.000208666">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should handle arrays with email strings" time="0.000180625">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should handle nested objects" time="0.000102625">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should not mutate original object" time="0.000054584">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should handle null and undefined" time="0.000053291">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redactKeys &gt; should redact specific keys" time="0.0001035">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; createAuditSnapshot &gt; should return JSON string with redacted PII" time="0.000074584">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; DEFAULT_PII_FIELDS &gt; should include common PII fields" time="0.000413958">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/policyEngine.test.js" timestamp="2025-12-21T19:48:14.585Z" hostname="MacBook-Pro-Piotr.local" tests="21" failures="0" errors="0" skipped="0" time="0.243396417">
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; Safety Guardrails Constants &gt; NEVER_AUTO_APPROVE_RISK_LEVELS should include HIGH" time="0.00149825">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; Safety Guardrails Constants &gt; ALWAYS_MANUAL_ACTION_TYPES should include MEETING_SCHEDULE" time="0.000141334">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; Safety Guardrails Constants &gt; should not include LOW in NEVER_AUTO_APPROVE_RISK_LEVELS" time="0.000124291">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; risk_level_lte &gt; should match when proposal risk is lower or equal" time="0.000156583">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; risk_level_lte &gt; should not match when proposal risk is higher" time="0.000088833">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; action_type_in &gt; should match when action type is in list" time="0.00007225">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; action_type_in &gt; should not match when action type is not in list" time="0.00006">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; action_type_in &gt; should return false for non-array input" time="0.000041291">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; scope_eq &gt; should match when scope equals" time="0.0000715">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; scope_eq &gt; should not match when scope differs" time="0.000075459">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; signal_in &gt; should match when signal is in list" time="0.000057417">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; signal_in &gt; should not match when signal is not in list" time="0.000045666">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; signal_in &gt; should return false for non-array input" time="0.000042458">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; time_window &gt; should always match for anytime" time="0.000049125">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; time_window &gt; should return false for unrecognized values" time="0.000034458">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; evaluateConditions (Logic Tests) &gt; should return true when all conditions match" time="0.000149833">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; evaluateConditions (Logic Tests) &gt; should return false when any condition fails" time="0.000052708">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; evaluateConditions (Logic Tests) &gt; should return false for unknown conditions (safety)" time="0.0001585">
            <system-err>
[PolicyEngine] Unknown condition: unknown_condition

            </system-err>
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; evaluateConditions (Logic Tests) &gt; should return true for empty conditions" time="0.000034792">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Safety Checks &gt; HIGH risk is in NEVER_AUTO_APPROVE list" time="0.000034834">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Safety Checks &gt; MEETING_SCHEDULE is in ALWAYS_MANUAL list" time="0.000033625">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/regulatoryModeGuard.test.js" timestamp="2025-12-21T19:48:14.586Z" hostname="MacBook-Pro-Piotr.local" tests="31" failures="0" errors="0" skipped="0" time="0.121390208">
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Action Classification &gt; ALLOWED_ACTIONS &gt; should include all advisory-only actions" time="0.000834875">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Action Classification &gt; BLOCKED_ACTIONS &gt; should include all mutation actions" time="0.000201416">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should allow EXPLAIN_CONTEXT in regulatory mode" time="0.00010075">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should allow ANALYZE_RISKS in regulatory mode" time="0.00005025">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should allow EDUCATE in regulatory mode" time="0.000057416">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should BLOCK CREATE_DRAFT_TASK in regulatory mode" time="0.000039">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should BLOCK CREATE_DRAFT_INITIATIVE in regulatory mode" time="0.000045167">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should BLOCK UPDATE_STATUS in regulatory mode" time="0.000040875">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should BLOCK EXECUTE_ACTION in regulatory mode" time="0.000038709">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should BLOCK MODIFY_ENTITY in regulatory mode" time="0.00005">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should BLOCK DELETE_ENTITY in regulatory mode" time="0.000034208">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should block actions containing mutation keywords" time="0.000074417">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should allow actions without mutation keywords" time="0.000049125">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should handle null/undefined action gracefully" time="0.000034333">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Regulatory Mode Prompt &gt; should contain prohibition statements" time="0.000077459">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Regulatory Mode Prompt &gt; should forbid action verbs" time="0.000061125">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Regulatory Mode Prompt &gt; should require advisory language" time="0.000052417">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Regulatory Mode Prompt &gt; should include example responses" time="0.000029709">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Forbidden Verbs List &gt; should contain all dangerous verbs" time="0.000145792">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Advisory Phrases List &gt; should contain recommended advisory language" time="0.000051333">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should block CREATE_DRAFT_TASK when regulatory mode is enabled" time="0.000169375">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should block UPDATE_STATUS when regulatory mode is enabled" time="0.000060042">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should allow EXPLAIN_CONTEXT when regulatory mode is enabled" time="0.000053958">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should allow ANALYZE_RISKS when regulatory mode is enabled" time="0.00005675">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should NOT block actions when regulatory mode is disabled" time="0.000040334">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should NOT block when no projectId is provided" time="0.000034166">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should log blocked attempts to audit trail" time="0.00047775">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; getStatus &gt; should return full status object when enabled" time="0.000094084">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; getStatus &gt; should return full status object when disabled" time="0.000041458">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Integration with AI Role System &gt; should override ANY role when regulatory mode is active" time="0.000101791">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Safety: Fail-Safe Behavior &gt; should default to blocking when database error occurs" time="0.000024333">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/roi.test.ts" timestamp="2025-12-21T19:48:14.588Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.17431025">
        <testcase classname="tests/unit/roi.test.ts" name="Unit Test: ROI Calculation &gt; should calculate ROI correctly for positive values" time="0.00047575">
        </testcase>
        <testcase classname="tests/unit/roi.test.ts" name="Unit Test: ROI Calculation &gt; should handle zero cost to avoid infinity" time="0.000080417">
        </testcase>
        <testcase classname="tests/unit/roi.test.ts" name="Unit Test: ROI Calculation &gt; should return 0 for break-even" time="0.000068209">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/secretsVault.test.js" timestamp="2025-12-21T19:48:14.588Z" hostname="MacBook-Pro-Piotr.local" tests="12" failures="0" errors="0" skipped="0" time="0.196651583">
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Encryption/Decryption &gt; should encrypt and decrypt a string successfully" time="0.001850791">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Encryption/Decryption &gt; should encrypt and decrypt an object successfully" time="0.000256875">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Encryption/Decryption &gt; should return null when decrypting null/undefined" time="0.000093209">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Encryption/Decryption &gt; should throw on invalid encrypted data" time="0.000327959">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Encryption/Decryption &gt; should produce different ciphertext for same plaintext (random IV)" time="0.000175708">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Redaction &gt; should redact string values showing only last 4 characters" time="0.000080875">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Redaction &gt; should fully redact short strings" time="0.000052041">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Redaction &gt; should recursively redact nested objects" time="0.000061084">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Redaction &gt; should return empty object for null/undefined" time="0.000062917">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Validation &gt; should validate present fields as valid" time="0.000090667">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Validation &gt; should identify missing fields" time="0.000348084">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Validation &gt; should handle null/undefined secrets" time="0.000059583">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/slaService.test.js" timestamp="2025-12-21T19:48:14.588Z" hostname="MacBook-Pro-Piotr.local" tests="7" failures="0" errors="0" skipped="0" time="0.505601333">
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; SLA_CHECK_INTERVAL_MS &gt; should be 10 minutes in milliseconds" time="0.00679025">
        </testcase>
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; Service Methods Existence &gt; should export findExpiredAssignments" time="0.001793125">
        </testcase>
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; Service Methods Existence &gt; should export markExpired" time="0.001332416">
        </testcase>
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; Service Methods Existence &gt; should export findOrgAdmin" time="0.0010425">
        </testcase>
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; Service Methods Existence &gt; should export escalateAssignment" time="0.002023708">
        </testcase>
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; Service Methods Existence &gt; should export runSlaCheck" time="0.002487792">
        </testcase>
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; Service Methods Existence &gt; should export getSlaHealth" time="0.002169959">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/store.test.ts" timestamp="2025-12-21T19:48:14.589Z" hostname="MacBook-Pro-Piotr.local" tests="19" failures="0" errors="0" skipped="0" time="0.325461708">
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; initializes with correct default values" time="0.001051667">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets current view" time="0.000173666">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets session mode" time="0.000112875">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets current user" time="0.000276083">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; toggles sidebar open state" time="0.000106">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; toggles sidebar collapse" time="0.000084833">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; adds chat message" time="0.000577292">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets chat messages" time="0.000161375">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; clears chat" time="0.000147541">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets bot typing state" time="0.000092209">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets current stream content" time="0.000073375">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; updates free session data" time="0.000074083">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; updates free session data with function" time="0.000076833">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; updates full session data" time="0.000078583">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets AI config" time="0.000072542">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; toggles theme" time="0.000062208">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; updates last chat message" time="0.00008325">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; logout resets state" time="0.0001735">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets current project ID" time="0.000326792">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/templateGraphService.test.js" timestamp="2025-12-21T19:48:14.590Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.186676875">
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; createEmptyGraph &gt; creates a graph with START and END nodes connected" time="0.000921792">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; stepsToGraph &gt; converts empty steps to START  END graph" time="0.00022075">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; stepsToGraph &gt; converts steps array to linear graph" time="0.000216041">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; stepsToGraph &gt; preserves step data in nodes" time="0.0003345">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; graphToSteps &gt; returns empty array for invalid graph" time="0.0001255">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; graphToSteps &gt; skips START and END nodes in output" time="0.000081208">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; graphToSteps &gt; converts linear graph to ordered steps" time="0.000117959">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; validateDAG &gt; returns valid for acyclic graph" time="0.000128209">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; validateDAG &gt; detects simple cycle" time="0.000067791">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; validateDAG &gt; returns invalid for null graph" time="0.000047917">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; findDeadEnds &gt; returns empty for valid graph" time="0.000080958">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; findDeadEnds &gt; finds nodes without outgoing edges" time="0.0001325">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; findBranchesWithoutElse &gt; returns empty when no BRANCH nodes" time="0.000068542">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; findBranchesWithoutElse &gt; finds BRANCH node without else path" time="0.00006225">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; findBranchesWithoutElse &gt; passes when BRANCH has else path" time="0.000047792">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; roundtrip: steps  graph  steps &gt; preserves data through roundtrip" time="0.00008625">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/templateValidationService.test.js" timestamp="2025-12-21T19:48:14.590Z" hostname="MacBook-Pro-Piotr.local" tests="9" failures="0" errors="0" skipped="0" time="0.188496959">
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validate &gt; returns error for missing template graph" time="0.000986416">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validate &gt; returns error for invalid JSON in graph" time="0.000225042">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validate &gt; validates empty trigger_signal" time="0.000389791">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validateGraph &gt; returns error for missing nodes array" time="0.000108958">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validateGraph &gt; returns error for missing edges array" time="0.000098916">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validateGraph &gt; returns error when no START node exists" time="0.000112416">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validateGraph &gt; calls validateDAG and reports cycles" time="0.00021625">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validateGraph &gt; calls findDeadEnds and reports dead-end nodes" time="0.000148583">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validateGraph &gt; calls findBranchesWithoutElse and reports missing else" time="0.000136209">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/transformationEngine.test.ts" timestamp="2025-12-21T19:48:14.591Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.204157041">
        <testcase classname="tests/unit/transformationEngine.test.ts" name="Service Test: transformationEngine &gt; generates initiatives from session" time="0.000638583">
        </testcase>
        <testcase classname="tests/unit/transformationEngine.test.ts" name="Service Test: transformationEngine &gt; generates initiatives with required properties" time="0.002097375">
        </testcase>
        <testcase classname="tests/unit/transformationEngine.test.ts" name="Service Test: transformationEngine &gt; generates initiatives only for levels above current" time="0.000388">
        </testcase>
        <testcase classname="tests/unit/transformationEngine.test.ts" name="Service Test: transformationEngine &gt; handles session with no gaps" time="0.000095541">
        </testcase>
        <testcase classname="tests/unit/transformationEngine.test.ts" name="Service Test: transformationEngine &gt; assigns priority based on current level" time="0.000096709">
        </testcase>
        <testcase classname="tests/unit/transformationEngine.test.ts" name="Service Test: transformationEngine &gt; assigns complexity based on target level" time="0.000761792">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/transformationScenarios.test.ts" timestamp="2025-12-21T19:48:14.591Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.4078135">
        <testcase classname="tests/unit/transformationScenarios.test.ts" name="Transformation Scenarios Logic &gt; should have 6 unique scenarios" time="0.000500792">
        </testcase>
        <testcase classname="tests/unit/transformationScenarios.test.ts" name="Transformation Scenarios Logic &gt; recommendScenario should return stabilize for high risk &amp; low budget" time="0.000094125">
        </testcase>
        <testcase classname="tests/unit/transformationScenarios.test.ts" name="Transformation Scenarios Logic &gt; recommendScenario should return quickwins for low risk &amp; low budget" time="0.00007125">
        </testcase>
        <testcase classname="tests/unit/transformationScenarios.test.ts" name="Transformation Scenarios Logic &gt; recommendScenario should return foundation for high risk &amp; high budget" time="0.000066042">
        </testcase>
        <testcase classname="tests/unit/transformationScenarios.test.ts" name="Transformation Scenarios Logic &gt; recommendScenario should default to hybrid" time="0.000060292">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/userStateMachine.test.js" timestamp="2025-12-21T19:48:14.591Z" hostname="MacBook-Pro-Piotr.local" tests="20" failures="0" errors="0" skipped="0" time="0.195665">
        <testcase classname="tests/unit/userStateMachine.test.js" name="UserStateMachine &gt; State Constants &gt; should have all 7 canonical states" time="0.000647666">
        </testcase>
        <testcase classname="tests/unit/userStateMachine.test.js" name="UserStateMachine &gt; State Constants &gt; should have all 7 phases (A-G)" time="0.0001005">
        </testcase>
        <testcase classname="tests/unit/userStateMachine.test.js" name="UserStateMachine &gt; State Transitions &gt; ANON can only transition to DEMO_SESSION" time="0.000131208">
        </testcase>
        <testcase classname="tests/unit/userStateMachine.test.js" name="UserStateMachine &gt; State Transitions &gt; DEMO_SESSION can transition to TRIAL_TRUSTED or ANON" time="0.000068584">
        </testcase>
        <testcase classname="tests/unit/userStateMachine.test.js" name="UserStateMachine &gt; State Transitions &gt; TRIAL_TRUSTED can only transition to ORG_CREATOR" time="0.000080667">
        </testcase>
        <testcase classname="tests/unit/userStateMachine.test.js" name="UserStateMachine &gt; State Transitions &gt; linear progression from ORG_CREATOR to ECOSYSTEM_NODE" time="0.000058208">
        </testcase>
        <testcase classname="tests/unit/userStateMachine.test.js" name="UserStateMachine &gt; State Transitions &gt; ECOSYSTEM_NODE is terminal (no further transitions)" time="0.00004575">
        </testcase>
        <testcase classname="tests/unit/userStateMachine.test.js" name="UserStateMachine &gt; State Transitions &gt; no backward transitions allowed (except DEMO_SESSION to ANON)" time="0.000049084">
        </testcase>
        <testcase classname="tests/unit/userStateMachine.test.js" name="UserStateMachine &gt; Transition Validation &gt; ANON to DEMO_SESSION requires login" time="0.000132625">
        </testcase>
        <testcase classname="tests/unit/userStateMachine.test.js" name="UserStateMachine &gt; Transition Validation &gt; DEMO_SESSION to TRIAL_TRUSTED requires access code/invite" time="0.000122334">
        </testcase>
        <testcase classname="tests/unit/userStateMachine.test.js" name="UserStateMachine &gt; Transition Validation &gt; TRIAL_TRUSTED to ORG_CREATOR requires explicit decision" time="0.000067875">
        </testcase>
        <testcase classname="tests/unit/userStateMachine.test.js" name="UserStateMachine &gt; Transition Validation &gt; ORG_CREATOR to ORG_MEMBER requires organization to exist" time="0.000039458">
        </testcase>
        <testcase classname="tests/unit/userStateMachine.test.js" name="UserStateMachine &gt; Phase Mapping &gt; each state maps to correct phase" time="0.000067042">
        </testcase>
        <testcase classname="tests/unit/userStateMachine.test.js" name="UserStateMachine &gt; Permissions &gt; ANON has no AI interaction" time="0.000032791">
        </testcase>
        <testcase classname="tests/unit/userStateMachine.test.js" name="UserStateMachine &gt; Permissions &gt; DEMO_SESSION has read-only AI" time="0.000027292">
        </testcase>
        <testcase classname="tests/unit/userStateMachine.test.js" name="UserStateMachine &gt; Permissions &gt; ORG_MEMBER has full working capabilities" time="0.000038042">
        </testcase>
        <testcase classname="tests/unit/userStateMachine.test.js" name="UserStateMachine &gt; Permissions &gt; ECOSYSTEM_NODE has all capabilities" time="0.000034958">
        </testcase>
        <testcase classname="tests/unit/userStateMachine.test.js" name="UserStateMachine &gt; Permissions &gt; hasPermission helper works correctly" time="0.000036459">
        </testcase>
        <testcase classname="tests/unit/userStateMachine.test.js" name="UserStateMachine &gt; Validation Helpers &gt; isValidState returns true for valid states" time="0.000036625">
        </testcase>
        <testcase classname="tests/unit/userStateMachine.test.js" name="UserStateMachine &gt; Validation Helpers &gt; isValidPhase returns true for valid phases" time="0.000035375">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/utils.test.ts" timestamp="2025-12-21T19:48:14.592Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.218783">
        <testcase classname="tests/unit/utils.test.ts" name="Unit Test: Utilities &gt; should have utility functions available" time="0.000772042">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/workqueueService.test.js" timestamp="2025-12-21T19:48:14.592Z" hostname="MacBook-Pro-Piotr.local" tests="13" failures="0" errors="0" skipped="0" time="0.223874583">
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; ASSIGNMENT_STATUSES Constants &gt; should export PENDING status" time="0.007603375">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; ASSIGNMENT_STATUSES Constants &gt; should export ACKED status" time="0.001585667">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; ASSIGNMENT_STATUSES Constants &gt; should export DONE status" time="0.001880791">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; ASSIGNMENT_STATUSES Constants &gt; should export EXPIRED status" time="0.001843083">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; ASSIGNMENT_STATUSES Constants &gt; should have 4 status types" time="0.001857209">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; DEFAULT_SLA_HOURS &gt; should default to 48 hours" time="0.001854917">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export assignApproval" time="0.002638625">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export acknowledgeApproval" time="0.003270709">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export completeApproval" time="0.001984959">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export getMyApprovals" time="0.001630417">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export getOrgApprovals" time="0.001357375">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export getOverdueCount" time="0.00184525">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export getAssignmentByProposal" time="0.001944375">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/hooks/useAIStream.test.ts" timestamp="2025-12-21T19:48:14.593Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.222554125">
        <testcase classname="tests/unit/hooks/useAIStream.test.ts" name="Hook Test: useAIStream &gt; initializes with correct default values" time="0.006204291">
        </testcase>
        <testcase classname="tests/unit/hooks/useAIStream.test.ts" name="Hook Test: useAIStream &gt; calls API with correct parameters" time="0.0055805">
            <system-out>
[DEBUG-D] startStream entry: {
  msgLength: 12,
  historyLength: 0,
  hasSystemPrompt: true,
  hasContext: false
}
[DEBUG-A,C] startStream onDone: { responseLength: 11 }

            </system-out>
        </testcase>
        <testcase classname="tests/unit/hooks/useAIStream.test.ts" name="Hook Test: useAIStream &gt; updates stream content as chunks arrive" time="0.001601709">
            <system-out>
[DEBUG-D] startStream entry: {
  msgLength: 4,
  historyLength: 0,
  hasSystemPrompt: false,
  hasContext: false
}
[DEBUG-A,C] startStream onDone: { responseLength: 11 }

            </system-out>
        </testcase>
        <testcase classname="tests/unit/hooks/useAIStream.test.ts" name="Hook Test: useAIStream &gt; calls onStreamDone callback when stream completes" time="0.004116583">
            <system-out>
[DEBUG-D] startStream entry: {
  msgLength: 4,
  historyLength: 0,
  hasSystemPrompt: false,
  hasContext: false
}
[DEBUG-A,C] startStream onDone: { responseLength: 8 }

            </system-out>
        </testcase>
        <testcase classname="tests/unit/hooks/useAIStream.test.ts" name="Hook Test: useAIStream &gt; handles stream errors" time="0.002872291">
            <system-out>
[DEBUG-D] startStream entry: {
  msgLength: 4,
  historyLength: 0,
  hasSystemPrompt: false,
  hasContext: false
}

[DEBUG-A,C] startStream error: { errorMsg: &apos;Error: Stream failed&apos; }

            </system-out>
            <system-err>
AI Stream Error: Error: Stream failed
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/hooks/useAIStream.test.ts:87:23
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/hooks/useAIStream.test.ts" name="Hook Test: useAIStream &gt; sets bot typing state correctly" time="0.002746667">
            <system-out>
[DEBUG-D] startStream entry: {
  msgLength: 4,
  historyLength: 0,
  hasSystemPrompt: false,
  hasContext: false
}
[DEBUG-A,C] startStream onDone: { responseLength: 11 }

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/hooks/useIndependentAI.test.ts" timestamp="2025-12-21T19:48:14.593Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.421386333">
        <testcase classname="tests/unit/hooks/useIndependentAI.test.ts" name="useIndependentAI &gt; initializes with default state" time="0.013802833">
        </testcase>
        <testcase classname="tests/unit/hooks/useIndependentAI.test.ts" name="useIndependentAI &gt; callAI manages loading state and accumulates stream" time="0.001584875">
        </testcase>
        <testcase classname="tests/unit/hooks/useIndependentAI.test.ts" name="useIndependentAI &gt; refineText calls callAI with correct prompt and system instruction" time="0.006888291">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/hooks/useScreenContext.test.ts" timestamp="2025-12-21T19:48:14.593Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.2097625">
        <testcase classname="tests/unit/hooks/useScreenContext.test.ts" name="Hook Test: useScreenContext &gt; sets screen context on mount after debounce" time="0.007644458">
        </testcase>
        <testcase classname="tests/unit/hooks/useScreenContext.test.ts" name="Hook Test: useScreenContext &gt; updates context when data changes" time="0.001424875">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/accessPolicyService.test.js" timestamp="2025-12-21T19:48:14.593Z" hostname="MacBook-Pro-Piotr.local" tests="11" failures="0" errors="0" skipped="0" time="0.259461333">
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; getOrganizationType &gt; should return organization type for valid org" time="0.002915208">
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; getOrganizationType &gt; should return null for non-existent org" time="0.000238292">
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; getOrganizationType &gt; should handle database errors" time="0.000649916">
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; checkAccess &gt; should allow access for active trial org" time="0.000437375">
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; checkAccess &gt; should deny access for expired trial" time="0.000272083">
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; checkAccess &gt; should deny access when AI limit reached" time="0.0001845">
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; checkAccess &gt; should deny access for demo mode mutations" time="0.000144">
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; getOrganizationLimits &gt; should return default limits for trial org without custom limits" time="0.000126917">
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; getOrganizationLimits &gt; should return custom limits when set" time="0.00012">
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; Multi-Tenant Isolation &gt; should only return limits for specified organization" time="0.000158083">
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService &gt; Multi-Tenant Isolation &gt; should not leak data between organizations" time="0.000099458">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/actionDecision.service.test.js" timestamp="2025-12-21T19:48:14.594Z" hostname="MacBook-Pro-Piotr.local" tests="12" failures="0" errors="0" skipped="2" time="0.095347833">
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; validation &gt; should throw error for missing required fields" time="0.001111666">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; validation &gt; should throw error for missing organization_id" time="0.000146333">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; validation &gt; should throw error for invalid decision type" time="0.000123417">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; MODIFIED_ALLOWLIST &gt; should define allowlist for TASK_CREATE" time="0.000367334">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; MODIFIED_ALLOWLIST &gt; should define allowlist for PLAYBOOK_ASSIGN" time="0.000108458">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; MODIFIED_ALLOWLIST &gt; should define allowlist for MEETING_SCHEDULE" time="0.000084375">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; getDecisionsByProposal &gt; should query decisions by proposal_id" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; getDecisionsByProposal &gt; should parse JSON fields" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; getAuditLog &gt; should enforce organization isolation" time="0.000231083">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; getAuditLog &gt; should support SUPERADMIN_BYPASS for global access" time="0.000120833">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; getAuditLog &gt; should support filtering by actionType" time="0.000171708">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; getAuditLog &gt; should support filtering by decision" time="0.000122584">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/activityService.test.js" timestamp="2025-12-21T19:48:14.595Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.798986417">
        <testcase classname="tests/unit/backend/activityService.test.js" name="Backend Service Test: ActivityService &gt; log &gt; logs activity with all parameters" time="0.103224167">
        </testcase>
        <testcase classname="tests/unit/backend/activityService.test.js" name="Backend Service Test: ActivityService &gt; log &gt; handles optional parameters" time="0.101330042">
        </testcase>
        <testcase classname="tests/unit/backend/activityService.test.js" name="Backend Service Test: ActivityService &gt; getRecent &gt; fetches recent activities with default limit" time="0.108651833">
        </testcase>
        <testcase classname="tests/unit/backend/activityService.test.js" name="Backend Service Test: ActivityService &gt; getRecent &gt; fetches recent activities with custom limit" time="0.101625375">
        </testcase>
        <testcase classname="tests/unit/backend/activityService.test.js" name="Backend Service Test: ActivityService &gt; getRecent &gt; handles database errors gracefully" time="0.000927625">
        </testcase>
        <testcase classname="tests/unit/backend/activityService.test.js" name="Backend Service Test: ActivityService &gt; getByOrganization &gt; fetches activities for organization" time="0.101872042">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiActionExecutor.test.js" timestamp="2025-12-21T19:48:14.595Z" hostname="MacBook-Pro-Piotr.local" tests="15" failures="0" errors="0" skipped="0" time="0.219768083">
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction() &gt; should create action request successfully" time="0.00484375">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction() &gt; should create pending action when approval required" time="0.000325">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction() &gt; should block action when regulatory mode is enabled" time="0.000221458">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction() &gt; should block action when AI role guard blocks it" time="0.000216375">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction() &gt; should require approval for MANAGER role actions" time="0.000187667">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction() &gt; should block action when policy engine denies it" time="0.000155042">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction() &gt; should allow action without projectId" time="0.00018475">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; approveAction() &gt; should approve pending action" time="0.000240458">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; approveAction() &gt; should reject approval for non-pending action" time="0.000145459">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; rejectAction() &gt; should reject pending action" time="0.000244416">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; executeAction() &gt; should execute approved action" time="0.000215166">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; executeAction() &gt; should reject execution of non-approved action" time="0.000131584">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; getAction() &gt; should return action by ID" time="0.000122708">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; getAction() &gt; should return null for non-existent action" time="0.000085584">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; listActions() &gt; should return list of actions" time="0.001156291">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiActions.test.js" timestamp="2025-12-21T19:48:14.596Z" hostname="MacBook-Pro-Piotr.local" tests="23" failures="0" errors="0" skipped="0" time="0.215681667">
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should have 7 action types" time="0.010665625">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define CREATE_DRAFT_TASK type" time="0.000182708">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define CREATE_DRAFT_INITIATIVE type" time="0.000079666">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define SUGGEST_ROADMAP_CHANGE type" time="0.000062166">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define GENERATE_REPORT type" time="0.000059834">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define PREPARE_DECISION_SUMMARY type" time="0.000050542">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define EXPLAIN_CONTEXT type" time="0.000043042">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define ANALYZE_RISKS type" time="0.00004125">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_STATUS &gt; should define PENDING status" time="0.000059208">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_STATUS &gt; should define APPROVED status" time="0.000064084">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_STATUS &gt; should define REJECTED status" time="0.00004825">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_STATUS &gt; should define EXECUTED status" time="0.000039167">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; Service Structure &gt; should export requestAction function" time="0.000038125">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; Service Structure &gt; should export createDraft function" time="0.000034042">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; Service Structure &gt; should export approveAction function" time="0.000033541">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; Service Structure &gt; should export rejectAction function" time="0.000032291">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; Service Structure &gt; should export getPendingActions function" time="0.000031541">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; Service Structure &gt; should export executeAction function" time="0.000030625">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIAuditLogger &gt; Service Structure &gt; should export logInteraction function" time="0.004958791">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIAuditLogger &gt; Service Structure &gt; should export logSuggestion function" time="0.000074166">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIAuditLogger &gt; Service Structure &gt; should export recordUserDecision function" time="0.000047209">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIAuditLogger &gt; Service Structure &gt; should export getAuditLogs function" time="0.00003225">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIAuditLogger &gt; Service Structure &gt; should export getAuditStats function" time="0.000029416">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiAnalyticsService.test.js" timestamp="2025-12-21T19:48:14.597Z" hostname="MacBook-Pro-Piotr.local" tests="7" failures="0" errors="0" skipped="0" time="0.200178375">
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; getActionStats &gt; should aggregate action counts correctly" time="0.003328083">
        </testcase>
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; getApprovalStats &gt; should distinguish between auto and manual approvals" time="0.000637125">
        </testcase>
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; getPlaybookStats &gt; should calculate completion rates and average duration" time="0.000525875">
        </testcase>
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; getDeadLetterStats &gt; should aggregate dead letter jobs by error code" time="0.000285541">
        </testcase>
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; getROISummary &gt; should combine metrics from multiple sources" time="0.000422209">
        </testcase>
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; exportData &gt; should export CSV format correctly" time="0.0003015">
        </testcase>
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; exportData &gt; should export JSON format correctly" time="0.0001965">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiAuditLogger.test.js" timestamp="2025-12-21T19:48:14.597Z" hostname="MacBook-Pro-Piotr.local" tests="24" failures="0" errors="0" skipped="0" time="0.094777292">
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logInteraction &gt; should log a basic AI interaction" time="0.000868916">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logInteraction &gt; should store correlation_id if provided" time="0.000166625">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logInteraction &gt; should handle optional fields" time="0.000093125">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logInteraction &gt; should store explanation data if provided" time="0.000081375">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logInteraction &gt; should handle database error" time="0.00073875">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logWithExplanation &gt; should log interaction with full explanation object" time="0.000139042">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logWithExplanation &gt; should default actionType to AI_RESPONSE" time="0.000064583">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logSuggestion &gt; should log AI suggestion" time="0.000068583">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logSuggestion &gt; should handle minimal parameters" time="0.000058709">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; recordUserDecision &gt; should update user decision on logged suggestion" time="0.000115709">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; recordUserDecision &gt; should record rejection without feedback" time="0.000045042">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; recordUserDecision &gt; should handle non-existent audit entry" time="0.000049125">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditLogs &gt; should return audit logs for organization" time="0.000428542">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditLogs &gt; should filter by project if provided" time="0.00008725">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditLogs &gt; should filter by date range" time="0.000036041">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditLogs &gt; should limit results" time="0.000032666">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditLogs &gt; should filter by action type" time="0.000030833">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditLogs &gt; should return empty array on database error" time="0.000111041">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditStats &gt; should return statistics for organization" time="0.000107584">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditStats &gt; should filter by project if provided" time="0.000116959">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getRoleDistribution &gt; should return role distribution" time="0.000113708">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; clearOldLogs &gt; should clear logs older than specified days" time="0.000079917">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; clearOldLogs &gt; should use default retention period of 90 days" time="0.000033708">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; clearOldLogs &gt; should respect custom retention period" time="0.0000315">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiContextBuilder.test.js" timestamp="2025-12-21T19:48:14.598Z" hostname="MacBook-Pro-Piotr.local" tests="9" failures="0" errors="0" skipped="0" time="0.204771084">
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; buildContext() &gt; should build complete context with all layers" time="0.003443209">
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; buildContext() &gt; should build context without projectId" time="0.000323416">
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; buildContext() &gt; should include PMO health snapshot when projectId provided" time="0.000677708">
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; buildContext() &gt; should handle PMO health service errors gracefully" time="0.000400209">
            <system-err>
[AIContextBuilder] Failed to get PMO health snapshot: Service unavailable

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; buildContext() &gt; should include options in context" time="0.00024975">
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _buildPlatformContext() &gt; should build platform context with user role" time="0.00019975">
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _buildPlatformContext() &gt; should map SUPERADMIN role correctly" time="0.000127917">
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _buildOrganizationContext() &gt; should build organization context" time="0.000142">
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _buildProjectContext() &gt; should build project context" time="0.000145292">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiCoreLayer.test.js" timestamp="2025-12-21T19:48:14.598Z" hostname="MacBook-Pro-Piotr.local" tests="56" failures="0" errors="0" skipped="0" time="0.192263291">
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export buildContext function" time="0.005654292">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _buildPlatformContext function" time="0.000143625">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _buildOrganizationContext function" time="0.000088417">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _buildProjectContext function" time="0.000069917">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _buildExecutionContext function" time="0.000061333">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _buildKnowledgeContext function" time="0.000045125">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _buildExternalContext function" time="0.000043167">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _generateHash function" time="0.000045292">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; _generateHash &gt; should generate consistent hash" time="0.000278375">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; _generateHash &gt; should generate different hash for different inputs" time="0.000315667">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; POLICY_LEVELS &gt; should define ADVISORY level" time="0.003976209">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; POLICY_LEVELS &gt; should define ASSISTED level" time="0.0000685">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; POLICY_LEVELS &gt; should define PROACTIVE level" time="0.000039208">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; POLICY_LEVELS &gt; should define AUTOPILOT level" time="0.000032041">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; AI_ROLES &gt; should define ADVISOR role" time="0.000030208">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; AI_ROLES &gt; should define PMO_MANAGER role" time="0.000030417">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; AI_ROLES &gt; should define EXECUTOR role" time="0.000026875">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; AI_ROLES &gt; should define EDUCATOR role" time="0.000026375">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; Service Structure &gt; should export getEffectivePolicy function" time="0.000029417">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; Service Structure &gt; should export canPerformAction function" time="0.00015175">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; Service Structure &gt; should export getPolicySummary function" time="0.000061125">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; Service Structure &gt; should export updatePolicy function" time="0.000045209">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; MEMORY_TYPES &gt; should define DECISION type" time="0.003119291">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; MEMORY_TYPES &gt; should define PHASE_TRANSITION type" time="0.000062708">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; MEMORY_TYPES &gt; should define RECOMMENDATION type" time="0.000041792">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; MEMORY_TYPES &gt; should define PATTERN type" time="0.000033708">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; createSession &gt; should create session with unique conversationId" time="0.000205166">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; createSession &gt; should create session with empty messages array" time="0.00008525">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; createSession &gt; should create session with startedAt timestamp" time="0.000040709">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; addMessage &gt; should add message to session" time="0.000359458">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; addMessage &gt; should add timestamp to message" time="0.000044667">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; Service Structure &gt; should export recordProjectMemory function" time="0.000032583">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; Service Structure &gt; should export getUserPreferences function" time="0.000028">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; Service Structure &gt; should export updateUserPreferences function" time="0.000027875">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; AI_ROLES &gt; should define all 4 roles" time="0.005464833">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; CHAT_MODES &gt; should define EXPLAIN mode" time="0.000068708">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; CHAT_MODES &gt; should define GUIDE mode" time="0.000040584">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; CHAT_MODES &gt; should define ANALYZE mode" time="0.000031959">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; CHAT_MODES &gt; should define DO mode" time="0.000031416">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; CHAT_MODES &gt; should define TEACH mode" time="0.000029042">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should detect EXPLAIN intent" time="0.000074541">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should detect GUIDE intent" time="0.000038583">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should detect ANALYZE intent" time="0.000038208">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should detect DO intent" time="0.000042">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should detect TEACH intent" time="0.000039625">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should default to EXPLAIN" time="0.000029125">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _selectRole &gt; should select ADVISOR for EXPLAIN intent" time="0.00005075">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _selectRole &gt; should select PMO_MANAGER for GUIDE intent" time="0.000034084">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _selectRole &gt; should select EXECUTOR for DO intent" time="0.000029916">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _selectRole &gt; should select EDUCATOR for TEACH intent" time="0.000031583">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _selectRole &gt; should fallback to ADVISOR if role not active" time="0.000029667">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; getRoleDescription &gt; should return description for ADVISOR" time="0.000079375">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; getRoleDescription &gt; should return description for PMO_MANAGER" time="0.000033208">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; getRoleDescription &gt; should return description for EXECUTOR" time="0.000029834">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; getRoleDescription &gt; should return description for EDUCATOR" time="0.00002875">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; Service Structure &gt; should export processMessage function" time="0.000027459">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiCostControlService.test.js" timestamp="2025-12-21T19:48:14.600Z" hostname="MacBook-Pro-Piotr.local" tests="27" failures="0" errors="0" skipped="0" time="0.190409">
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; setGlobalBudget &gt; should set global budget" time="0.000754959">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; setGlobalBudget &gt; should handle database errors" time="0.000588">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; setTenantBudget &gt; should set tenant budget" time="0.000136875">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; setProjectBudget &gt; should set project budget" time="0.00011125">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; getBudget &gt; should return budget when found" time="0.000124459">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; getBudget &gt; should return null when not found" time="0.000066125">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; checkBudget &gt; should allow action when no limits set" time="0.000251167">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; checkBudget &gt; should allow action when within budget" time="0.0001205">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; checkBudget &gt; should block action when exceeding budget without auto-downgrade" time="0.000101125">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; checkBudget &gt; should trigger downgrade when exceeding budget with auto-downgrade enabled" time="0.000110209">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; checkBudget &gt; should check project budget limit" time="0.000070333">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; estimateCost &gt; should calculate cost for known models" time="0.000070833">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; estimateCost &gt; should fallback to default for unknown models" time="0.000032125">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; logUsage &gt; should log usage and update budgets" time="0.000161208">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; logUsage &gt; should handle updates without project" time="0.000043208">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; resetMonthlyUsage &gt; should reset usage for all scopes if unspecified" time="0.000078375">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; resetMonthlyUsage &gt; should reset usage for specific scope" time="0.000859917">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; Model Selection &gt; should return correct category for action" time="0.00005525">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; Model Selection &gt; should fallback to CHAT for unknown action" time="0.000032834">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; Model Selection &gt; should prioritize role if present" time="0.000029292">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; getTierForBudget &gt; should return tier 1 for non-downgraded reasoning" time="0.000048666">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; getTierForBudget &gt; should downgrade premium to standard when budget constrained" time="0.000033542">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; getTierForBudget &gt; should downgrade standard to budget when constrained" time="0.000030042">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; getTierForBudget &gt; should keep budget tier at 3 even when constrained" time="0.000027875">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; Analytics &gt; should return usage summary" time="0.000135208">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; Analytics &gt; should return user usage" time="0.000082333">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; Analytics &gt; should return all budgets" time="0.000175875">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiDecisionGovernance.test.js" timestamp="2025-12-21T19:48:14.601Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.197840667">
        <testcase classname="tests/unit/backend/aiDecisionGovernance.test.js" name="AI Decision Governance Service &gt; detectDecisionNeeded &gt; should detect phase transition decision" time="0.002194583">
        </testcase>
        <testcase classname="tests/unit/backend/aiDecisionGovernance.test.js" name="AI Decision Governance Service &gt; detectDecisionNeeded &gt; should check DB for blocked task reason" time="0.000337666">
        </testcase>
        <testcase classname="tests/unit/backend/aiDecisionGovernance.test.js" name="AI Decision Governance Service &gt; getBlockingDecisions &gt; should calculate daysWaiting correctly" time="0.000598833">
        </testcase>
        <testcase classname="tests/unit/backend/aiDecisionGovernance.test.js" name="AI Decision Governance Service &gt; prepareDecisionBrief &gt; should generate a brief and insert into DB" time="0.000828167">
        </testcase>
        <testcase classname="tests/unit/backend/aiDecisionGovernance.test.js" name="AI Decision Governance Service &gt; registerImpact &gt; should record an impact with mocked UUID" time="0.000250416">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiExecutiveReporting.test.js" timestamp="2025-12-21T19:48:14.602Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.213904375">
        <testcase classname="tests/unit/backend/aiExecutiveReporting.test.js" name="AI Executive Reporting Service &gt; generateReport &gt; should dispatch to project status report handler" time="0.002687959">
        </testcase>
        <testcase classname="tests/unit/backend/aiExecutiveReporting.test.js" name="AI Executive Reporting Service &gt; generateReport &gt; should dispatch to portfolio overview handler" time="0.000415791">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiExplainabilityService.test.js" timestamp="2025-12-21T19:48:14.602Z" hostname="MacBook-Pro-Piotr.local" tests="35" failures="0" errors="0" skipped="0" time="0.319325916">
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; computeConfidenceLevel &gt; returns LOW when context is null" time="0.000519167">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; computeConfidenceLevel &gt; returns LOW when context is empty" time="0.000105375">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; computeConfidenceLevel &gt; returns LOW when PMOHealthSnapshot is missing and no project data" time="0.000072667">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; computeConfidenceLevel &gt; returns MEDIUM when PMOHealthSnapshot exists with blockers" time="0.000072084">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; computeConfidenceLevel &gt; returns HIGH when full context with no blockers" time="0.0000885">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; computeConfidenceLevel &gt; penalizes conflicting signals (many blockers AND many pending decisions)" time="0.000337375">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildReasoningSummary &gt; returns default message when no health data" time="0.000086833">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildReasoningSummary &gt; includes overdue tasks in reasoning" time="0.00005075">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildReasoningSummary &gt; includes pending decisions in reasoning" time="0.000048583">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildReasoningSummary &gt; includes phase information" time="0.000059584">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildReasoningSummary &gt; includes project memory count when provided" time="0.000039">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; extractConstraintsApplied &gt; includes AI role constraint" time="0.000085">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; extractConstraintsApplied &gt; includes policy level constraint" time="0.000044458">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; extractConstraintsApplied &gt; includes phase gate constraint" time="0.000049083">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; extractConstraintsApplied &gt; includes regulatory mode constraint" time="0.00004525">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; identifyDataUsed &gt; returns projectData false when no project context" time="0.000054667">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; identifyDataUsed &gt; returns projectData true when project context exists" time="0.000031792">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; identifyDataUsed &gt; returns projectMemoryCount from options" time="0.000028208">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; identifyDataUsed &gt; returns empty externalSources when internet disabled" time="0.000213167">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; identifyDataUsed &gt; returns external sources when internet enabled" time="0.000147084">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildAIExplanation &gt; generates valid AIExplanation object" time="0.000306666">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildAIExplanation &gt; includes all required fields in correct format" time="0.000100958">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildAIExplanation &gt; timestamp is ISO 8601 format" time="0.000067958">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildAIExplanation &gt; maps orchestrator roles to project roles correctly" time="0.00004425">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildExplainabilityFooter &gt; returns empty string when explanation is null" time="0.0000485">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildExplainabilityFooter &gt; formats human-readable footer" time="0.000061333">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildExplainabilityFooter &gt; shows max 3 constraints" time="0.000065208">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildExplainabilityFooter &gt; does not expose raw internals" time="0.000044125">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; Internal Helpers &gt; _countPopulatedLayers &gt; returns 0 for null context" time="0.000024084">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; Internal Helpers &gt; _countPopulatedLayers &gt; counts populated layers correctly" time="0.000033042">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; Internal Helpers &gt; _getBlockerCount &gt; returns 0 when no blockers" time="0.000021917">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; Internal Helpers &gt; _getBlockerCount &gt; counts blockers from PMO health snapshot" time="0.000024958">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; Internal Helpers &gt; _getBlockerCount &gt; counts blockers from execution context" time="0.000024458">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; Internal Helpers &gt; _getBlockerCount &gt; sums blockers from both sources" time="0.000026">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="Sample Output &gt; generates sample AIExplanation matching the spec" time="0.000240333">
            <system-out>

========== SAMPLE AIExplanation JSON ==========
{
  &quot;aiRole&quot;: &quot;ADVISOR&quot;,
  &quot;regulatoryMode&quot;: false,
  &quot;confidenceLevel&quot;: &quot;HIGH&quot;,
  &quot;reasoningSummary&quot;: &quot;Based on 3 overdue task(s), 1 pending decision(s), current phase: Execution, 5 project memory item(s) consulted&quot;,
  &quot;dataUsed&quot;: {
    &quot;projectData&quot;: true,
    &quot;projectMemoryCount&quot;: 5,
    &quot;externalSources&quot;: []
  },
  &quot;constraintsApplied&quot;: [
    &quot;AI Role: ADVISOR (explain/suggest only, no mutations)&quot;,
    &quot;AI Policy: ADVISORY mode&quot;,
    &quot;Phase Gate: Execution&quot;
  ],
  &quot;timestamp&quot;: &quot;2025-12-21T19:47:50.055Z&quot;
}
================================================


            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiExternalData.test.js" timestamp="2025-12-21T19:48:14.603Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.489244875">
        <testcase classname="tests/unit/backend/aiExternalData.test.js" name="AI External Data Control &gt; Internet Toggle &gt; should block external sources when internetEnabled is false" time="0.001118125">
        </testcase>
        <testcase classname="tests/unit/backend/aiExternalData.test.js" name="AI External Data Control &gt; Internet Toggle &gt; should allow external sources when internetEnabled is true" time="0.000140458">
        </testcase>
        <testcase classname="tests/unit/backend/aiExternalData.test.js" name="AI External Data Control &gt; Internet Toggle &gt; should respect project-level internet toggle" time="0.000084666">
        </testcase>
        <testcase classname="tests/unit/backend/aiExternalData.test.js" name="AI External Data Control &gt; RAG Toggle (GAP-03) &gt; should disable RAG when rag_enabled is 0" time="0.000069875">
        </testcase>
        <testcase classname="tests/unit/backend/aiExternalData.test.js" name="AI External Data Control &gt; RAG Toggle (GAP-03) &gt; should enable RAG by default" time="0.000060833">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiFailureHandler.test.js" timestamp="2025-12-21T19:48:14.603Z" hostname="MacBook-Pro-Piotr.local" tests="20" failures="0" errors="0" skipped="0" time="0.303854833">
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; withFallback() &gt; should execute AI function successfully" time="0.00263575">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; withFallback() &gt; should use fallback when AI function fails" time="0.000393375">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; withFallback() &gt; should handle timeout" time="0.000972875">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; withFallback() &gt; should return graceful degradation when fallback also fails" time="0.000347959">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; _identifyFailureType() &gt; should identify timeout errors" time="0.000155041">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; _identifyFailureType() &gt; should identify rate limit errors" time="0.000122125">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; _identifyFailureType() &gt; should identify budget exceeded errors" time="0.000108667">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; _identifyFailureType() &gt; should identify authentication errors" time="0.000098791">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; _identifyFailureType() &gt; should default to unknown error" time="0.000105709">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; logFailure() &gt; should log failure to database" time="0.000887084">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; getRecentFailures() &gt; should return recent failures" time="0.000204">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; degrade() &gt; should return degradation info for model unavailable" time="0.000108167">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; degrade() &gt; should return degradation info for budget exceeded" time="0.00028225">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; degrade() &gt; should return degradation info for timeout" time="0.000079917">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; explainFailure() &gt; should return user-friendly explanation for timeout" time="0.000090875">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; explainFailure() &gt; should return explanation for budget exceeded" time="0.000082625">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; nonBlocking() &gt; should return AI result when successful" time="0.000111959">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; nonBlocking() &gt; should return default value when AI fails" time="0.000117958">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; FAILURE_SCENARIOS and HEALTH_STATUS constants &gt; should have all expected failure scenarios" time="0.000087875">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AIFailureHandler &gt; FAILURE_SCENARIOS and HEALTH_STATUS constants &gt; should have all expected health statuses" time="0.000107875">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiIntegrationService.test.js" timestamp="2025-12-21T19:48:14.604Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="2" errors="0" skipped="0" time="0.231882167">
        <testcase classname="tests/unit/backend/aiIntegrationService.test.js" name="AI Integration Service &gt; Logic: getProviderCapabilities &gt; should return correct capabilities for known providers" time="0.010913584">
        </testcase>
        <testcase classname="tests/unit/backend/aiIntegrationService.test.js" name="AI Integration Service &gt; Logic: getProviderCapabilities &gt; should return empty array for unknown provider" time="0.00094125">
        </testcase>
        <testcase classname="tests/unit/backend/aiIntegrationService.test.js" name="AI Integration Service &gt; suggestSync &gt; should create pending action" time="0.001253833">
        </testcase>
        <testcase classname="tests/unit/backend/aiIntegrationService.test.js" name="AI Integration Service &gt; executeAction &gt; should execute approved action and update status" time="0.003399208">
            <failure message="Action not found or not approved" type="Error">
Error: Action not found or not approved
  Object.executeAction server/services/aiIntegrationService.js:290:19
  tests/unit/backend/aiIntegrationService.test.js:92:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiIntegrationService.test.js" name="AI Integration Service &gt; executeAction &gt; should throw if action not found or not approved" time="0.00173625">
        </testcase>
        <testcase classname="tests/unit/backend/aiIntegrationService.test.js" name="AI Integration Service &gt; handleWebhook &gt; should process webhook if integration active" time="0.002250708">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/aiIntegrationService.test.js:118:36
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiKnowledgeManager.test.js" timestamp="2025-12-21T19:48:14.605Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.235965417">
        <testcase classname="tests/unit/backend/aiKnowledgeManager.test.js" name="AI Knowledge Manager Service &gt; Logic: _cosineSimilarity &gt; should calculate similarity correctly" time="0.046259084">
        </testcase>
        <testcase classname="tests/unit/backend/aiKnowledgeManager.test.js" name="AI Knowledge Manager Service &gt; Logic: _cosineSimilarity &gt; should handle empty or mismatched vectors" time="0.0003595">
        </testcase>
        <testcase classname="tests/unit/backend/aiKnowledgeManager.test.js" name="AI Knowledge Manager Service &gt; Logic: _formatKnowledgeForPrompt &gt; should format chunks with citations" time="0.000300959">
        </testcase>
        <testcase classname="tests/unit/backend/aiKnowledgeManager.test.js" name="AI Knowledge Manager Service &gt; getContextualKnowledge &gt; should retrieve and rank knowledge chunks" time="0.000862125">
        </testcase>
        <testcase classname="tests/unit/backend/aiKnowledgeManager.test.js" name="AI Knowledge Manager Service &gt; getContextualKnowledge &gt; should return empty when organizationId missing" time="0.000829792">
            <system-err>
[AIKnowledgeManager] No organization ID provided - returning empty

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiKnowledgeManager.test.js" name="AI Knowledge Manager Service &gt; captureDecision &gt; should store decision and generate embeddings" time="0.00029">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiMaturityMonitor.test.js" timestamp="2025-12-21T19:48:14.605Z" hostname="MacBook-Pro-Piotr.local" tests="4" failures="2" errors="0" skipped="0" time="0.234356417">
        <testcase classname="tests/unit/backend/aiMaturityMonitor.test.js" name="AI Maturity Monitor Service &gt; Logic: _scoreToLevel &gt; should map score to correct level" time="0.012211542">
        </testcase>
        <testcase classname="tests/unit/backend/aiMaturityMonitor.test.js" name="AI Maturity Monitor Service &gt; Logic: _generateInsights &gt; should identify strengths and weaknesses" time="0.001208833">
        </testcase>
        <testcase classname="tests/unit/backend/aiMaturityMonitor.test.js" name="AI Maturity Monitor Service &gt; assessMaturity (Integration) &gt; should aggregate metrics into overall score" time="0.002981292">
            <failure message="db is not defined" type="ReferenceError">
ReferenceError: db is not defined
  initiatives server/services/aiMaturityMonitor.js:162:13
  Object._assessPlanningDiscipline server/services/aiMaturityMonitor.js:158:35
  Object.assessMaturity server/services/aiMaturityMonitor.js:69:55
  tests/unit/backend/aiMaturityMonitor.test.js:95:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiMaturityMonitor.test.js" name="AI Maturity Monitor Service &gt; benchmarkAgainstPractices &gt; should compare levels vs benchmarks" time="0.001319958">
            <failure message="db is not defined" type="ReferenceError">
ReferenceError: db is not defined
  initiatives server/services/aiMaturityMonitor.js:162:13
  Object._assessPlanningDiscipline server/services/aiMaturityMonitor.js:158:35
  Object.assessMaturity server/services/aiMaturityMonitor.js:69:55
  Object.benchmarkAgainstPractices server/services/aiMaturityMonitor.js:588:52
  tests/unit/backend/aiMaturityMonitor.test.js:139:52
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiMemoryManager.test.js" timestamp="2025-12-21T19:48:14.606Z" hostname="MacBook-Pro-Piotr.local" tests="12" failures="0" errors="0" skipped="0" time="0.195481875">
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; createSession() &gt; should create new session" time="0.002651375">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; createSession() &gt; should create unique session IDs" time="0.000552917">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; addMessage() &gt; should add message to session" time="0.000825333">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; addMessage() &gt; should add multiple messages" time="0.000470875">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; recordProjectMemory() &gt; should record project memory" time="0.000811125">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; recordProjectMemory() &gt; should handle database errors" time="0.000729042">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; recordDecision() &gt; should record decision with rationale" time="0.000317875">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; recordPhaseTransition() &gt; should record phase transition" time="0.000261375">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; recordRecommendation() &gt; should record recommendation and user response" time="0.000310958">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; getProjectMemory() &gt; should retrieve project memories" time="0.000426584">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; getProjectMemory() &gt; should filter by memory type" time="0.000214167">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; buildProjectMemorySummary() &gt; should build project memory summary" time="0.000279333">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiOrchestrator.test.js" timestamp="2025-12-21T19:48:14.606Z" hostname="MacBook-Pro-Piotr.local" tests="12" failures="0" errors="0" skipped="0" time="0.189906959">
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; processMessage &gt; should process user message successfully" time="0.001107">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; processMessage &gt; should handle context building failure" time="0.000618958">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; processMessage &gt; should block if trial expired" time="0.000115375">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; processMessage &gt; should block if daily AI limit reached" time="0.000077459">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should detect intent from message keywords" time="0.000066958">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should default to EXPLAIN intent" time="0.000053208">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; _selectRole &gt; should select role based on intent" time="0.000056208">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; _selectRole &gt; should downgrade role if policy restricts" time="0.000042666">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; _selectRole &gt; should force ADVISOR in regulatory mode" time="0.000051625">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; _buildPrompt &gt; should include context and user message" time="0.00013125">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; postProcessResponse &gt; should add standard footer" time="0.000407083">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; postProcessResponse &gt; should handle missing explanation" time="0.000049792">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiPolicyEngine.test.js" timestamp="2025-12-21T19:48:14.607Z" hostname="MacBook-Pro-Piotr.local" tests="10" failures="0" errors="0" skipped="0" time="0.166150167">
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; getEffectivePolicy() &gt; should return ADVISORY policy when regulatory mode is enabled" time="0.003520417">
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; getEffectivePolicy() &gt; should return organization policy when no project override" time="0.000406459">
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; getEffectivePolicy() &gt; should apply project-level override (can only reduce)" time="0.000654542">
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; getEffectivePolicy() &gt; should not allow project override to exceed max level" time="0.000220583">
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; getEffectivePolicy() &gt; should include user preferences" time="0.000208541">
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; canPerformAction() &gt; should allow EXPLAIN_CONTEXT for ADVISORY policy" time="0.000198958">
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; canPerformAction() &gt; should allow CREATE_DRAFT_TASK for ASSISTED policy" time="0.000155791">
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; canPerformAction() &gt; should deny CREATE_DRAFT_TASK for ADVISORY policy" time="0.000186333">
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; canPerformAction() &gt; should check regulatory mode first" time="0.000209833">
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AIPolicyEngine &gt; getPolicyLevelForAction() &gt; should return correct policy level for action" time="0.000188">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiPromptHierarchy.test.js" timestamp="2025-12-21T19:48:14.607Z" hostname="MacBook-Pro-Piotr.local" tests="21" failures="0" errors="0" skipped="0" time="0.211993542">
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; buildPrompt() &gt; should build prompt stack with all layers" time="0.0028325">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; buildPrompt() &gt; should use default prompts when custom not found" time="0.0002665">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getSystemPrompt() &gt; should return custom system prompt when available" time="0.000162958">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getSystemPrompt() &gt; should return default system prompt when not found" time="0.000158125">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getRolePrompt() &gt; should return role prompt for ADVISOR" time="0.000166625">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getRolePrompt() &gt; should return role prompt for PMO_MANAGER" time="0.000124333">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getRolePrompt() &gt; should return default for unknown role" time="0.000463125">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getPhasePrompt() &gt; should return phase prompt for Context" time="0.000180292">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getPhasePrompt() &gt; should return phase prompt for Execution" time="0.0001325">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getPhasePrompt() &gt; should return empty string for unknown phase" time="0.000138375">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getUserOverlay() &gt; should return user preferences overlay" time="0.000132208">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getUserOverlay() &gt; should filter out disallowed preferences" time="0.000095958">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getUserOverlay() &gt; should return null when no preferences" time="0.000082">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; stackPrompts() &gt; should combine prompts in correct order" time="0.000114958">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; stackPrompts() &gt; should handle missing layers" time="0.000122541">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; Preference Validation &gt; should allow valid tone preference" time="0.000101209">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; Preference Validation &gt; should reject invalid tone preference" time="0.000096458">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; Preference Validation &gt; should allow valid response length" time="0.000096375">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; Security: Prompt Injection Prevention &gt; should sanitize custom instructions" time="0.000231125">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; Security: Prompt Injection Prevention &gt; should allow safe custom instructions" time="0.00009375">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; Security: Prompt Injection Prevention &gt; should handle null instructions" time="0.000082792">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiRiskChangeControl.test.js" timestamp="2025-12-21T19:48:14.608Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="1" errors="0" skipped="0" time="0.242139083">
        <testcase classname="tests/unit/backend/aiRiskChangeControl.test.js" name="AI Risk &amp; Change Control Service &gt; Logic: _suggestMitigation &gt; should return correct mitigation strategies" time="0.009454458">
        </testcase>
        <testcase classname="tests/unit/backend/aiRiskChangeControl.test.js" name="AI Risk &amp; Change Control Service &gt; detectRisks (Integration) &gt; should aggregate risks from all detectors" time="0.008054416">
            <failure message="expected 0 to be greater than or equal to 1" type="AssertionError">
AssertionError: expected 0 to be greater than or equal to 1
  tests/unit/backend/aiRiskChangeControl.test.js:75:42
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiRiskChangeControl.test.js" name="AI Risk &amp; Change Control Service &gt; trackScopeChange &gt; should log scope change" time="0.001990291">
        </testcase>
        <testcase classname="tests/unit/backend/aiRiskChangeControl.test.js" name="AI Risk &amp; Change Control Service &gt; preEscalationWarning &gt; should identify when escalation is NOT needed (Logic Check)" time="0.001430375">
        </testcase>
        <testcase classname="tests/unit/backend/aiRiskChangeControl.test.js" name="AI Risk &amp; Change Control Service &gt; preEscalationWarning &gt; should trigger warning for critical risks" time="0.001687208">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiRoleGuard.test.js" timestamp="2025-12-21T19:48:14.608Z" hostname="MacBook-Pro-Piotr.local" tests="24" failures="0" errors="0" skipped="0" time="0.282069958">
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getProjectRole() &gt; should return ADVISOR as default for null projectId" time="0.002324708">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getProjectRole() &gt; should return project AI role from database" time="0.001511">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getProjectRole() &gt; should default to ADVISOR when project not found" time="0.00021875">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getProjectRole() &gt; should default to ADVISOR on database error" time="0.002125792">
            <system-err>
[AIRoleGuard] Error fetching project role: Error: DB Error
    at Object.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiRoleGuard.test.js:80:26)
    at Object.Mock [as get] (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/spy/dist/index.js:285:34)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiRoleGuard.js:99:21
    at new Promise (&lt;anonymous&gt;)
    at Object.getProjectRole (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiRoleGuard.js:98:16)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiRoleGuard.test.js:83:44
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; setProjectRole() &gt; should set project AI role" time="0.000483625">
            <system-out>
[AIRoleGuard] Project proj-test-123 AI role set to OPERATOR by user user-123

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; setProjectRole() &gt; should reject invalid role" time="0.000640583">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; setProjectRole() &gt; should handle database errors" time="0.000396875">
            <system-err>
[AIRoleGuard] Error setting project role: Error: DB Error
    at Object.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiRoleGuard.test.js:123:26)
    at Object.Mock [as run] (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/spy/dist/index.js:285:34)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiRoleGuard.js:122:21
    at new Promise (&lt;anonymous&gt;)
    at Object.setProjectRole (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiRoleGuard.js:121:16)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiRoleGuard.test.js:127:29
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; canPerformAction() &gt; should allow EXPLAIN_CONTEXT for ADVISOR" time="0.000165875">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; canPerformAction() &gt; should block CREATE_DRAFT_TASK for ADVISOR" time="0.000181458">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; canPerformAction() &gt; should allow CREATE_DRAFT_TASK for MANAGER" time="0.003134375">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; canPerformAction() &gt; should allow EXECUTE_TASK_UPDATE for OPERATOR" time="0.000345541">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; canPerformAction() &gt; should block EXECUTE_TASK_UPDATE for MANAGER" time="0.000170416">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; canPerformAction() &gt; should allow unknown action types (default allow)" time="0.000143333">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; isActionBlocked() &gt; should return blocked=false for allowed actions" time="0.000126708">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; isActionBlocked() &gt; should return blocked=true with details for blocked actions" time="0.000136042">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; validateMutation() &gt; should block all mutations for ADVISOR" time="0.000124375">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; validateMutation() &gt; should allow mutations as drafts for MANAGER" time="0.000143958">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; validateMutation() &gt; should allow mutations for OPERATOR" time="0.000097666">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; validateMutation() &gt; should fail-safe to ADVISOR for unknown role" time="0.000085292">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getRoleCapabilities() &gt; should return capabilities for ADVISOR" time="0.000091417">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getRoleCapabilities() &gt; should return capabilities for MANAGER" time="0.000103875">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getRoleCapabilities() &gt; should return capabilities for OPERATOR" time="0.000102333">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getRoleCapabilities() &gt; should default to ADVISOR for unknown role" time="0.000094166">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AIRoleGuard &gt; getRoleConfig() &gt; should return full role configuration" time="0.000163167">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiService.test.js" timestamp="2025-12-21T19:48:14.609Z" hostname="MacBook-Pro-Piotr.local" tests="36" failures="5" errors="0" skipped="0" time="0.188264">
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; callLLM &gt; should use Google Gemini by default if checks pass" time="0.0105575">
            <system-err>
LLM Call Error Error: AI Provider not configured.
    at deps.CircuitBreakerService.execute.failureThreshold (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:206:45)
    at CircuitBreaker.execute (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/circuitBreakerService.js:48:34)
    at Object.execute (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/circuitBreakerService.js:124:30)
    at Object.callLLM (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:199:64)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:153:28
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:20

            </system-err>
            <failure message="AI Provider not configured." type="Error">
Error: AI Provider not configured.
  deps.CircuitBreakerService.execute.failureThreshold server/services/aiService.js:206:45
  CircuitBreaker.execute server/services/circuitBreakerService.js:48:34
  Object.execute server/services/circuitBreakerService.js:124:30
  Object.callLLM server/services/aiService.js:199:64
  tests/unit/backend/aiService.test.js:153:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; callLLM &gt; should block if balance is insufficient" time="0.00778225">
            <system-err>
LLM Call Error Error: AI Provider not configured.
    at deps.CircuitBreakerService.execute.failureThreshold (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:206:45)
    at CircuitBreaker.execute (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/circuitBreakerService.js:48:34)
    at Object.execute (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/circuitBreakerService.js:124:30)
    at Object.callLLM (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:199:64)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:178:13
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:20

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; callLLM &gt; should call OpenAI via fetch when provider is openai" time="0.001305667">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; callLLM &gt; should call Anthropic via fetch when provider is anthropic" time="0.000152625">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; generateInitiatives &gt; should parse JSON response correctly" time="0.002056042">
            <system-err>
[CircuitBreaker:llm-fallback] Transitioned to OPEN. Failures: 3. Next attempt in 30000ms

LLM Call Error Error: AI Provider not configured.
    at deps.CircuitBreakerService.execute.failureThreshold (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:206:45)
    at CircuitBreaker.execute (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/circuitBreakerService.js:48:34)
    at Object.execute (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/circuitBreakerService.js:124:30)
    at Object.callLLM (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:199:64)
    at Object.generateInitiatives (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:724:29)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:259:33
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:20

            </system-err>
            <failure message="expected [] to have a length of 1 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

  tests/unit/backend/aiService.test.js:260:33
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; generateInitiatives &gt; should return empty array on JSON parse error" time="0.000607">
            <system-err>
LLM Call Error Error: Circuit breaker [llm-fallback] is OPEN. Next attempt in 30s
    at CircuitBreaker.execute (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/circuitBreakerService.js:40:29)
    at Object.execute (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/circuitBreakerService.js:124:30)
    at Object.callLLM (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:199:64)
    at Object.generateInitiatives (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:724:29)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:270:33
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:20 {
  isCircuitOpen: true,
  breakerName: &apos;llm-fallback&apos;
}

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; streamLLM &gt; should yield chunks from Gemini stream" time="0.0019615">
            <system-err>
Stream LLM Error Error: Circuit breaker [llm-fallback] is OPEN. Failing fast.
    at Object.streamLLM (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:414:27)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:296:30
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:20

            </system-err>
            <failure message="expected [ &apos; [Error generating response]&apos; ] to deeply equal [ &apos;Chunk 1&apos;, &apos;Chunk 2&apos; ]" type="AssertionError">
AssertionError: expected [ &apos; [Error generating response]&apos; ] to deeply equal [ &apos;Chunk 1&apos;, &apos;Chunk 2&apos; ]

- Expected
+ Received

  [
-   &quot;Chunk 1&quot;,
-   &quot;Chunk 2&quot;,
+   &quot; [Error generating response]&quot;,
  ]

  tests/unit/backend/aiService.test.js:299:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; streamLLM &gt; should handle errors in stream" time="0.003027666">
            <system-err>
Stream LLM Error Error: Circuit breaker [llm-fallback] is OPEN. Failing fast.
    at Object.streamLLM (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:414:27)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:307:30
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:20

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; buildRoadmap &gt; should return roadmap object on success" time="0.00027875">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; buildRoadmap &gt; should return empty object on error" time="0.000141792">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; suggestTasks &gt; should return tasks array on success" time="0.000171333">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; deepDiagnose &gt; should execute chain of thought and return diagnosis" time="0.000243667">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; enrichInitiative &gt; should maintain structure and fallback to LLM" time="0.000247375">
            <system-err>
Web Search failed, using LLM knowledge Error: Web Fail
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:377:59
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; generateObservations &gt; should return observations from feedback" time="0.00022375">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; testProviderConnection &gt; should test OpenAI connection" time="0.000241375">
            <system-out>
[AiService] Testing connection for: openai

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; enhancePrompt &gt; should return base system role when no extras found" time="0.000077667">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; enhancePrompt &gt; should inject global strategies" time="0.000081208">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; enhancePrompt &gt; should inject client context when orgId provided" time="0.032069458">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Queue Operations &gt; should enqueue task and return jobId" time="0.00028325">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Queue Operations &gt; should get job status" time="0.000109791">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Queue Operations &gt; should return null for non-existent job" time="0.000051791">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Vision Capabilities &gt; should format payload correctly for OpenAI Vision" time="0.000185708">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Vision Capabilities &gt; should use Gemini 1.5 Flash for vision fallback" time="0.000595167">
            <system-err>
LLM Call Error Error: Circuit breaker [llm-fallback] is OPEN. Next attempt in 30s
    at CircuitBreaker.execute (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/circuitBreakerService.js:40:29)
    at Object.execute (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/circuitBreakerService.js:124:30)
    at Object.callLLM (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:199:64)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:573:13
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:20 {
  isCircuitOpen: true,
  breakerName: &apos;llm-fallback&apos;
}

            </system-err>
            <failure message="Circuit breaker [llm-fallback] is OPEN. Next attempt in 30s" type="Error">
Error: Circuit breaker [llm-fallback] is OPEN. Next attempt in 30s
  CircuitBreaker.execute server/services/circuitBreakerService.js:40:29
  Object.execute server/services/circuitBreakerService.js:124:30
  Object.callLLM server/services/aiService.js:199:64
  tests/unit/backend/aiService.test.js:573:13


Serialized Error: { isCircuitOpen: true, breakerName: &apos;llm-fallback&apos; }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Advanced Streaming &gt; should parse OpenAI SSE stream correctly" time="0.000239958">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Advanced Streaming &gt; should handle OpenAI stream error" time="0.000733542">
            <failure message="expected &apos;Chunk 1&apos; to contain &apos;[Error generating response]&apos;" type="AssertionError">
AssertionError: expected &apos;Chunk 1&apos; to contain &apos;[Error generating response]&apos;

Expected: &quot;[Error generating response]&quot;
Received: &quot;Chunk 1&quot;

  tests/unit/backend/aiService.test.js:629:31
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Provider Integrations &gt; should generate JWT for Zhipu AI provider" time="0.001223">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateTaskInsight &gt; should return parsed insights when LLM returns valid JSON" time="0.000256167">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateTaskInsight &gt; should return fallback object on LLM failure/JSON error" time="0.000223167">
            <system-err>
Task Insight Error Error: LLM Fail
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:696:42
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateExecutionStrategy &gt; should return strategy object on success" time="0.000107">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateExecutionStrategy &gt; should return empty structure on error" time="0.000135">
            <system-err>
Execution Gen Error SyntaxError: Unexpected token &apos;N&apos;, &quot;Not JSON&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Object.generateExecutionStrategy (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:940:25)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:724:28
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:20

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateInsights (Pre-Mortem) &gt; should return insights on success" time="0.000090041">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateInsights (Pre-Mortem) &gt; should return fallback on error" time="0.000137083">
            <system-err>
Insights Gen Error Error: Fail
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:745:42
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateStrategicFit &gt; should return fit analysis on success" time="0.000083417">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateStrategicFit &gt; should return fallback on error" time="0.000099">
            <system-err>
Fit Check Error SyntaxError: Unexpected token &apos;B&apos;, &quot;Bad JSON&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Object.generateStrategicFit (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:1002:25)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:770:28
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:20

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; simulateEconomics &gt; should combine financial simulation with AI commentary" time="0.000111583">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; simulateEconomics &gt; should return just simulation if AI fails" time="0.000061">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiWorkloadIntelligence.test.js" timestamp="2025-12-21T19:48:14.612Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="3" errors="0" skipped="0" time="0.210818209">
        <testcase classname="tests/unit/backend/aiWorkloadIntelligence.test.js" name="AI Workload Intelligence Service &gt; Logic: _getWorkloadStatus &gt; should classify utilization correctly" time="0.010751167">
        </testcase>
        <testcase classname="tests/unit/backend/aiWorkloadIntelligence.test.js" name="AI Workload Intelligence Service &gt; Logic: _calculateBurnoutRisk &gt; should calculate risk score based on factors" time="0.001047792">
        </testcase>
        <testcase classname="tests/unit/backend/aiWorkloadIntelligence.test.js" name="AI Workload Intelligence Service &gt; getPortfolioWorkload &gt; should calculate workload metrics from DB data" time="0.004589667">
            <failure message="expected +0 to be 1 // Object.is equality" type="AssertionError">
AssertionError: expected +0 to be 1 // Object.is equality

- Expected
+ Received

- 1
+ 0

  tests/unit/backend/aiWorkloadIntelligence.test.js:64:47
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiWorkloadIntelligence.test.js" name="AI Workload Intelligence Service &gt; detectOverAllocation &gt; should detect users with weeks exceeding capacity" time="0.002409375">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/aiWorkloadIntelligence.test.js:92:46
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiWorkloadIntelligence.test.js" name="AI Workload Intelligence Service &gt; suggestRebalancing &gt; should return no suggestions if no over-allocation" time="0.001595333">
        </testcase>
        <testcase classname="tests/unit/backend/aiWorkloadIntelligence.test.js" name="AI Workload Intelligence Service &gt; suggestRebalancing &gt; should suggest reassignment when capacity exists" time="0.002014875">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/aiWorkloadIntelligence.test.js:139:46
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/analyticsService.test.js" timestamp="2025-12-21T19:48:14.613Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.198429792">
        <testcase classname="tests/unit/backend/analyticsService.test.js" name="AnalyticsService - Integration &gt; logUsage &gt; should log AI usage to the database without errors" time="0.000773458">
        </testcase>
        <testcase classname="tests/unit/backend/analyticsService.test.js" name="AnalyticsService - Integration &gt; getStats &gt; should retrieve aggregated stats from real database" time="0.00047725">
        </testcase>
        <testcase classname="tests/unit/backend/analyticsService.test.js" name="AnalyticsService - Integration &gt; getTopTopics &gt; should retrieve top topics from real database" time="0.000266583">
        </testcase>
        <testcase classname="tests/unit/backend/analyticsService.test.js" name="AnalyticsService - Integration &gt; saveMaturityScore &gt; should save maturity score without errors" time="0.000186666">
        </testcase>
        <testcase classname="tests/unit/backend/analyticsService.test.js" name="AnalyticsService - Integration &gt; getIndustryBenchmarks &gt; should retrieve industry benchmarks from real database" time="0.000506">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/assessmentService.test.js" timestamp="2025-12-21T19:48:14.613Z" hostname="MacBook-Pro-Piotr.local" tests="4" failures="0" errors="0" skipped="0" time="0.18485975">
        <testcase classname="tests/unit/backend/assessmentService.test.js" name="Assessment Service &gt; Logic: generateGapSummary &gt; should interpret gaps correctly" time="0.002601958">
        </testcase>
        <testcase classname="tests/unit/backend/assessmentService.test.js" name="Assessment Service &gt; getAssessment &gt; should retrieve and parse assessment" time="0.000640875">
        </testcase>
        <testcase classname="tests/unit/backend/assessmentService.test.js" name="Assessment Service &gt; getAssessment &gt; should return null for non-existent assessment" time="0.00020875">
        </testcase>
        <testcase classname="tests/unit/backend/assessmentService.test.js" name="Assessment Service &gt; saveAssessment &gt; should calculate totals and save" time="0.000766042">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/attributionService.test.js" timestamp="2025-12-21T19:48:14.613Z" hostname="MacBook-Pro-Piotr.local" tests="18" failures="0" errors="0" skipped="15" time="0.177681958">
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; constants &gt; should export SOURCE_TYPES" time="0.000768416">
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; recordAttribution - skipped due to CJS/ESM mock interop &gt; should throw error for missing organizationId" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; recordAttribution - skipped due to CJS/ESM mock interop &gt; should throw error for missing sourceType" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; recordAttribution - skipped due to CJS/ESM mock interop &gt; should throw error for invalid sourceType" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; recordAttribution - skipped due to CJS/ESM mock interop &gt; should record DEMO attribution successfully" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; recordAttribution - skipped due to CJS/ESM mock interop &gt; should record PROMO_CODE attribution successfully" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; recordAttribution - skipped due to CJS/ESM mock interop &gt; should record INVITATION attribution with metadata" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; getOrganizationAttribution - skipped due to CJS/ESM mock interop &gt; should return all attribution events for org" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; getOrganizationAttribution - skipped due to CJS/ESM mock interop &gt; should return empty array for org with no attribution" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; getFirstAttribution - skipped due to CJS/ESM mock interop &gt; should return first attribution event" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; getFirstAttribution - skipped due to CJS/ESM mock interop &gt; should return null for org with no attribution" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; hasAttribution - skipped due to CJS/ESM mock interop &gt; should return true if org has attribution" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; hasAttribution - skipped due to CJS/ESM mock interop &gt; should return false if org has no attribution" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; exportAttribution - skipped due to CJS/ESM mock interop &gt; should export with filters" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; exportAttribution - skipped due to CJS/ESM mock interop &gt; should export all without filters" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; getPartnerSummary - skipped due to CJS/ESM mock interop &gt; should return partner summary for settlements" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; immutability principle &gt; should not expose update methods" time="0.000143958">
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; immutability principle &gt; should only have append-only recordAttribution" time="0.000101792">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/baselineService.test.js" timestamp="2025-12-21T19:48:14.614Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.165178959">
        <testcase classname="tests/unit/backend/baselineService.test.js" name="Baseline Service &gt; calculateVariance &gt; should calculate delay correctly when mocking dependencies" time="0.002491042">
        </testcase>
        <testcase classname="tests/unit/backend/baselineService.test.js" name="Baseline Service &gt; calculateVariance &gt; should mark critical delays" time="0.000290292">
        </testcase>
        <testcase classname="tests/unit/backend/baselineService.test.js" name="Baseline Service &gt; captureBaseline &gt; should create snapshot from roadmap initiatives" time="0.000366834">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/billingService.test.js" timestamp="2025-12-21T19:48:14.614Z" hostname="MacBook-Pro-Piotr.local" tests="19" failures="0" errors="0" skipped="0" time="0.485064167">
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getPlans() &gt; should return all active subscription plans" time="0.003943791">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getPlans() &gt; should handle database errors" time="0.000703917">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getPlanById() &gt; should return plan by ID" time="0.000216583">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getPlanById() &gt; should return null for non-existent plan" time="0.000174417">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; createPlan() &gt; should create a new subscription plan" time="0.000347708">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getOrganizationBilling() &gt; should return billing info for organization" time="0.000183458">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getOrganizationBilling() &gt; should return null for organization without billing" time="0.000140459">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; upsertOrganizationBilling() &gt; should create billing record for new organization" time="0.000301">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; upsertOrganizationBilling() &gt; should update existing billing record" time="0.000130584">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getOrCreateStripeCustomer() &gt; should return mock customer when Stripe not configured" time="0.000569584">
            <system-err>
Stripe not configured, returning mock customer

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getOrCreateStripeCustomer() &gt; should return existing customer when found" time="0.000201458">
            <system-err>
Stripe not configured, returning mock customer

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; createSubscription() &gt; should create mock subscription when Stripe not configured" time="0.000253542">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; createSubscription() &gt; should throw error for invalid plan" time="0.00020425">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; cancelSubscription() &gt; should cancel subscription" time="0.000141375">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; cancelSubscription() &gt; should throw error when no active subscription" time="0.000125541">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getInvoices() &gt; should return invoices for organization" time="0.00026575">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getInvoices() &gt; should only return invoices for specified organization" time="0.000218291">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; Multi-Tenant Isolation &gt; should only access billing for specified organization" time="0.000119291">
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; Multi-Tenant Isolation &gt; should not leak invoices between organizations" time="0.000166333">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/capacityService.test.js" timestamp="2025-12-21T19:48:14.615Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.2044925">
        <testcase classname="tests/unit/backend/capacityService.test.js" name="CapacityService &gt; getUserCapacity &gt; should return default capacity if not found" time="0.002283542">
        </testcase>
        <testcase classname="tests/unit/backend/capacityService.test.js" name="CapacityService &gt; getUserCapacity &gt; should return stored capacity" time="0.000226416">
        </testcase>
        <testcase classname="tests/unit/backend/capacityService.test.js" name="CapacityService &gt; calculateUserCapacity &gt; should calculate capacity based on tasks" time="0.000815458">
        </testcase>
        <testcase classname="tests/unit/backend/capacityService.test.js" name="CapacityService &gt; detectOverloads &gt; should identify users with overloaded weeks" time="0.000438958">
        </testcase>
        <testcase classname="tests/unit/backend/capacityService.test.js" name="CapacityService &gt; suggestResolutions &gt; should suggest REASSIGN for sustained overload" time="0.000187167">
        </testcase>
        <testcase classname="tests/unit/backend/capacityService.test.js" name="CapacityService &gt; suggestResolutions &gt; should suggest RESEQUENCE for peak overload" time="0.000130333">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/connectorHealthService.test.js" timestamp="2025-12-21T19:48:14.615Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.176119291">
        <testcase classname="tests/unit/backend/connectorHealthService.test.js" name="Connector Health Service &gt; should perform health check (DB interaction) [SKIPPED]" time="0.000489417">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/connectorService.test.js" timestamp="2025-12-21T19:48:14.615Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.135965834">
        <testcase classname="tests/unit/backend/connectorService.test.js" name="Connector Service &gt; should manage connectors (DB interaction) [SKIPPED]" time="0.000521083">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/contextService.test.js" timestamp="2025-12-21T19:48:14.615Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.088572209">
        <testcase classname="tests/unit/backend/contextService.test.js" name="Context Service &gt; should handle context operations (DB interaction) [SKIPPED]" time="0.000483916">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/criticalPathService.test.js" timestamp="2025-12-21T19:48:14.615Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.15303725">
        <testcase classname="tests/unit/backend/criticalPathService.test.js" name="CriticalPathService &gt; calculateCriticalPath &gt; should identify critical path correctly" time="0.001068125">
        </testcase>
        <testcase classname="tests/unit/backend/criticalPathService.test.js" name="CriticalPathService &gt; calculateCriticalPath &gt; should handle disjoint paths logic" time="0.000217333">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/dependencyService.test.js" timestamp="2025-12-21T19:48:14.616Z" hostname="MacBook-Pro-Piotr.local" tests="9" failures="0" errors="0" skipped="0" time="0.125988333">
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; addDependency &gt; should add dependency" time="0.001594333">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; addDependency &gt; should prevent self-dependency" time="0.000588125">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; removeDependency &gt; should remove dependency" time="0.000116041">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; getDependencies &gt; should return dependencies" time="0.000250625">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; buildDependencyGraph &gt; should build graph structure" time="0.0003405">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; detectDeadlocks &gt; should detect cycles" time="0.000143375">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; detectDeadlocks &gt; should return false for acyclic graph" time="0.000070625">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; canStart &gt; should be true if no blockers" time="0.000080791">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; canStart &gt; should be false if blockers exist" time="0.000114167">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/economicsService.test.js" timestamp="2025-12-21T19:48:14.616Z" hostname="MacBook-Pro-Piotr.local" tests="18" failures="0" errors="0" skipped="0" time="0.315319875">
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; createValueHypothesis() &gt; should create a value hypothesis" time="0.002534667">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; createValueHypothesis() &gt; should default confidenceLevel to MEDIUM" time="0.000240375">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; createValueHypothesis() &gt; should handle empty relatedInitiativeIds" time="0.000426417">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; createValueHypothesis() &gt; should handle database errors" time="0.000644125">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; getValueHypotheses() &gt; should retrieve value hypotheses for a project" time="0.000515833">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; getValueHypotheses() &gt; should filter by initiativeId when provided" time="0.000206333">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; getValueHypotheses() &gt; should handle invalid JSON in relatedInitiativeIds" time="0.00013325">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; validateHypothesis() &gt; should validate a value hypothesis" time="0.000176542">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; validateHypothesis() &gt; should return false when hypothesis not found" time="0.00011575">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; addFinancialAssumption() &gt; should add financial assumption to hypothesis" time="0.000231375">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; addFinancialAssumption() &gt; should default currency to USD" time="0.000109083">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; addFinancialAssumption() &gt; should default timeframe to &quot;per year&quot;" time="0.00008175">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; detectMissingValueHypotheses() &gt; should detect initiatives without value hypotheses" time="0.0001985">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; detectMissingValueHypotheses() &gt; should return empty array when all initiatives have hypotheses" time="0.000087459">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; getValueSummary() &gt; should generate value summary for project" time="0.00020925">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; getValueSummary() &gt; should handle missing financial data" time="0.000114791">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should export VALUE_TYPES enum" time="0.000104083">
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="EconomicsService &gt; Multi-Tenant Isolation &gt; should filter hypotheses by project_id" time="0.000087958">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/edgeCases.test.js" timestamp="2025-12-21T19:48:14.617Z" hostname="MacBook-Pro-Piotr.local" tests="15" failures="0" errors="0" skipped="0" time="0.66352175">
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Null and Undefined Handling &gt; should handle null organizationId gracefully" time="0.005271875">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Null and Undefined Handling &gt; should handle undefined projectId in storage" time="0.000587583">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Empty Data Handling &gt; should handle empty arrays in queries" time="0.006005125">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Empty Data Handling &gt; should handle empty search results" time="0.002707542">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Boundary Conditions &gt; should handle maximum token limit" time="0.006452333">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Boundary Conditions &gt; should handle zero token limit (unlimited)" time="0.000485792">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Invalid Input Handling &gt; should reject invalid email format in invitations" time="0.010246542">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Invalid Input Handling &gt; should reject invalid evidence type" time="0.002003583">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Invalid Input Handling &gt; should reject invalid entity type in evidence linking" time="0.000524875">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Database Error Handling &gt; should handle database connection errors gracefully" time="0.003514">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Database Error Handling &gt; should handle constraint violations" time="0.00159125">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Concurrent Modification Handling &gt; should handle optimistic locking failures" time="0.000437416">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Large Data Handling &gt; should handle large result sets efficiently" time="0.00097475">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Large Data Handling &gt; should handle large payloads in storage" time="0.000288125">
        </testcase>
        <testcase classname="tests/unit/backend/edgeCases.test.js" name="Edge Cases and Error Scenarios &gt; Timeout Handling &gt; should handle slow database queries" time="0.100404125">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/emailService.test.js" timestamp="2025-12-21T19:48:14.617Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.207569958">
        <testcase classname="tests/unit/backend/emailService.test.js" name="Backend Service Test: EmailService &gt; sendEmail &gt; sends email with default config" time="0.002023833">
        </testcase>
        <testcase classname="tests/unit/backend/emailService.test.js" name="Backend Service Test: EmailService &gt; sendEmail &gt; uses SMTP settings from database" time="0.098002167">
            <system-err>
[EMAIL SERVICE] SMTP Failed: getaddrinfo ENOTFOUND smtp.example.com

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/emailService.test.js" name="Backend Service Test: EmailService &gt; sendEmail &gt; handles database errors gracefully" time="0.001253167">
        </testcase>
        <testcase classname="tests/unit/backend/emailService.test.js" name="Backend Service Test: EmailService &gt; sendEmail &gt; logs email details" time="0.000717625">
        </testcase>
        <testcase classname="tests/unit/backend/emailService.test.js" name="Backend Service Test: EmailService &gt; sendEmail &gt; uses environment variables when database settings are missing" time="0.000826292">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/escalationService.test.js" timestamp="2025-12-21T19:48:14.618Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.199751792">
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; createEscalation() &gt; should create an escalation and send notification" time="0.004192208">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; createEscalation() &gt; should default daysOverdue to 0" time="0.000483834">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; createEscalation() &gt; should handle database errors" time="0.000990875">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; getEscalations() &gt; should retrieve escalations for a project" time="0.000625">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; getEscalations() &gt; should filter by status when provided" time="0.000486208">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; getEscalations() &gt; should include user names from joins" time="0.000589625">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; acknowledgeEscalation() &gt; should acknowledge an escalation" time="0.000420292">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; acknowledgeEscalation() &gt; should return false when escalation not found or user mismatch" time="0.000287334">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; resolveEscalation() &gt; should resolve an escalation" time="0.000397542">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; resolveEscalation() &gt; should return false when escalation not found" time="0.000664959">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; runAutoEscalation() &gt; should escalate overdue decisions to sponsor" time="0.000601708">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; runAutoEscalation() &gt; should not escalate if project not found" time="0.000339167">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; runAutoEscalation() &gt; should not create duplicate escalations" time="0.000437084">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; runAutoEscalation() &gt; should escalate stalled initiatives to PM" time="0.000441375">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; Multi-Tenant Isolation &gt; should filter escalations by project_id" time="0.000294917">
        </testcase>
        <testcase classname="tests/unit/backend/escalationService.test.js" name="EscalationService &gt; Multi-Tenant Isolation &gt; should get organization_id from project for notifications" time="0.0003765">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/evidenceLedgerService.test.js" timestamp="2025-12-21T19:48:14.618Z" hostname="MacBook-Pro-Piotr.local" tests="30" failures="4" errors="0" skipped="0" time="0.226424625">
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; redactPayload() &gt; should redact PII fields from payload" time="0.009857792">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; redactPayload() &gt; should redact nested PII fields" time="0.000443416">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; redactPayload() &gt; should redact PII in arrays" time="0.000396417">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; redactPayload() &gt; should support additional fields to redact" time="0.0002575">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; redactPayload() &gt; should handle null/undefined payloads" time="0.000227625">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; createEvidenceObject() &gt; should create an evidence object with redacted payload" time="0.000674792">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; createEvidenceObject() &gt; should reject invalid evidence type" time="0.000904375">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; createEvidenceObject() &gt; should reject missing required fields" time="0.000300458">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; linkEvidence() &gt; should link evidence to an entity" time="0.000378667">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; linkEvidence() &gt; should normalize weight to 0-1 range" time="0.000242708">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; linkEvidence() &gt; should reject invalid entity type" time="0.000245292">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; linkEvidence() &gt; should reject missing required fields" time="0.00022275">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; recordReasoning() &gt; should record reasoning entry" time="0.000489542">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; recordReasoning() &gt; should normalize confidence to 0-1 range" time="0.00019175">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; recordReasoning() &gt; should reject missing required fields" time="0.000255208">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; getExplanation() &gt; should get full explanation for an entity" time="0.004860792">
            <failure message="expected [] to have a length of 1 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

  tests/unit/backend/evidenceLedgerService.test.js:304:38
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; getExplanation() &gt; should handle empty explanation" time="0.000769875">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; getExplanation() &gt; should reject missing required fields" time="0.000637541">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; hasEvidence() &gt; should check if entity has evidence" time="0.001273875">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/evidenceLedgerService.test.js:351:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; hasEvidence() &gt; should return false when no evidence exists" time="0.000732959">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; createAndLinkEvidence() &gt; should create evidence and link it in one operation" time="0.001195">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; getEvidencesByOrg() &gt; should get evidences for organization" time="0.001000084">
            <failure message="expected [] to have a length of 1 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

  tests/unit/backend/evidenceLedgerService.test.js:419:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; getEvidencesByOrg() &gt; should filter by type when provided" time="0.000606875">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; getEvidencesByOrg() &gt; should respect limit when provided" time="0.000491208">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; exportExplanation() &gt; should export explanation as JSON pack" time="0.000847125">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; exportExplanation() &gt; should export explanation as PDF pack" time="0.000987958">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

  tests/unit/backend/evidenceLedgerService.test.js:509:68
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; Multi-Tenant Isolation &gt; should scope evidences by organization_id" time="0.000391333">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; Multi-Tenant Isolation &gt; should scope explanation queries by org_id" time="0.000556292">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; Enums &gt; should export EVIDENCE_TYPES" time="0.000318542">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; Enums &gt; should export ENTITY_TYPES" time="0.000240583">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/executionMonitorService.test.js" timestamp="2025-12-21T19:48:14.620Z" hostname="MacBook-Pro-Piotr.local" tests="18" failures="0" errors="0" skipped="0" time="0.193635167">
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; runDailyMonitor() &gt; should detect stalled tasks" time="0.002968292">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; runDailyMonitor() &gt; should detect overdue tasks and generate notifications" time="0.000444542">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; runDailyMonitor() &gt; should detect overdue decisions" time="0.000305083">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; runDailyMonitor() &gt; should detect stalled initiatives" time="0.000331375">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; runDailyMonitor() &gt; should detect silent blockers" time="0.00027325">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; runDailyMonitor() &gt; should return healthy status when no issues detected" time="0.000375167">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; runDailyMonitor() &gt; should include monitoredAt timestamp" time="0.000198833">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; _detectStalledTasks() &gt; should detect tasks not updated in 7+ days" time="0.000217583">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; _detectOverdueTasks() &gt; should detect tasks with due_date in the past" time="0.000334042">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; _detectOverdueDecisions() &gt; should detect decisions pending for 7+ days" time="0.000312083">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; _detectStalledInitiatives() &gt; should detect initiatives not updated in 7+ days" time="0.000205583">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; _detectSilentBlockers() &gt; should detect blocked items without reason" time="0.000191875">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; generateExecutionSummary() &gt; should generate summary when no issues" time="0.000430667">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; generateExecutionSummary() &gt; should generate summary with issues" time="0.000384417">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; generateExecutionSummary() &gt; should include all issue types in summary" time="0.000235416">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; generateExecutionSummary() &gt; should include generatedAt timestamp" time="0.000164">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; Multi-Tenant Isolation &gt; should filter all queries by project_id" time="0.000235333">
        </testcase>
        <testcase classname="tests/unit/backend/executionMonitorService.test.js" name="ExecutionMonitorService &gt; Multi-Tenant Isolation &gt; should scope notifications to correct users" time="0.000169416">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/feedbackService.test.js" timestamp="2025-12-21T19:48:14.620Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.667772583">
        <testcase classname="tests/unit/backend/feedbackService.test.js" name="Backend Service Test: FeedbackService &gt; saveFeedback &gt; saves feedback with all parameters" time="0.102210875">
        </testcase>
        <testcase classname="tests/unit/backend/feedbackService.test.js" name="Backend Service Test: FeedbackService &gt; saveFeedback &gt; saves feedback without correction" time="0.101123125">
        </testcase>
        <testcase classname="tests/unit/backend/feedbackService.test.js" name="Backend Service Test: FeedbackService &gt; getLearningExamples &gt; retrieves learning examples for context" time="0.106778584">
        </testcase>
        <testcase classname="tests/unit/backend/feedbackService.test.js" name="Backend Service Test: FeedbackService &gt; getLearningExamples &gt; handles empty results" time="0.000385167">
        </testcase>
        <testcase classname="tests/unit/backend/feedbackService.test.js" name="Backend Service Test: FeedbackService &gt; getLearningExamples &gt; handles database errors gracefully" time="0.000379709">
        </testcase>
        <testcase classname="tests/unit/backend/feedbackService.test.js" name="Backend Service Test: FeedbackService &gt; getLearningExamples &gt; only returns examples with rating &gt;= 4" time="0.101533667">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/financialService.test.js" timestamp="2025-12-21T19:48:14.621Z" hostname="MacBook-Pro-Piotr.local" tests="9" failures="0" errors="0" skipped="0" time="0.367223417">
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateCost &gt; should estimate cost for High complexity" time="0.000554417">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateCost &gt; should estimate cost for Medium complexity" time="0.000080541">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateCost &gt; should fallback to Low complexity" time="0.000067708">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateBenefit &gt; should estimate benefit for High priority" time="0.000080291">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateBenefit &gt; should estimate benefit for Medium priority" time="0.000058333">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateBenefit &gt; should fallback to Low priority" time="0.00004025">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateBenefit &gt; should return correct benefit range" time="0.000086084">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; simulatePortfolio &gt; should calculate aggregated metrics" time="0.000143917">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; simulatePortfolio &gt; should handle empty portfolio" time="0.00005375">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/governanceService.test.js" timestamp="2025-12-21T19:48:14.621Z" hostname="MacBook-Pro-Piotr.local" tests="14" failures="0" errors="0" skipped="0" time="0.212987042">
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; createChangeRequest() &gt; should create a new Change Request with DRAFT status" time="0.001863125">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; createChangeRequest() &gt; should default riskAssessment to LOW if not provided" time="0.00043225">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; createChangeRequest() &gt; should handle JSON stringification of impactAnalysis" time="0.00082325">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; createChangeRequest() &gt; should reject on database error" time="0.001146208">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; decideChangeRequest() &gt; should approve a Change Request" time="0.000519">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; decideChangeRequest() &gt; should reject a Change Request" time="0.000301042">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; decideChangeRequest() &gt; should set approved_by to null when rejecting" time="0.000288417">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; decideChangeRequest() &gt; should set approved_by when approving" time="0.000244709">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; decideChangeRequest() &gt; should handle database errors" time="0.000311334">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; decideChangeRequest() &gt; should set approved_at timestamp" time="0.000271417">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; Multi-Tenant Isolation &gt; should associate CR with specific project" time="0.000250875">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; Multi-Tenant Isolation &gt; should track creator for audit purposes" time="0.000187625">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; Edge Cases &gt; should handle empty impactAnalysis" time="0.000196292">
        </testcase>
        <testcase classname="tests/unit/backend/governanceService.test.js" name="GovernanceService &gt; Edge Cases &gt; should handle optional reason in decideChangeRequest" time="0.000170125">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/helpService.test.js" timestamp="2025-12-21T19:48:14.622Z" hostname="MacBook-Pro-Piotr.local" tests="13" failures="0" errors="0" skipped="0" time="0.273943584">
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; EVENT_TYPES &gt; should define all required event types" time="0.006931041">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; EVENT_TYPES &gt; should have exactly 4 event types" time="0.000467417">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; TARGET_ROLES &gt; should define all valid target roles" time="0.000298542">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; TARGET_ROLES &gt; should have exactly 5 roles" time="0.000078792">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; TARGET_ORG_TYPES &gt; should define all valid org types" time="0.000136959">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; TARGET_ORG_TYPES &gt; should have exactly 4 org types" time="0.000066209">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject invalid event types in markEvent" time="0.000545417">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject createPlaybook without key" time="0.00013125">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject createPlaybook without title" time="0.00010775">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject createPlaybook with invalid target role" time="0.000089417">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject createPlaybook with invalid org type" time="0.000071625">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject createStep without required fields" time="0.000086417">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject createStep with invalid action type" time="0.000065917">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/ingestionService.test.js" timestamp="2025-12-21T19:48:14.622Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.279457666">
        <testcase classname="tests/unit/backend/ingestionService.test.js" name="Ingestion Service &gt; chunkText &gt; should split text into chunks" time="0.035166375">
            <system-err>
Warning: Cannot access the `require` function: &quot;TypeError [ERR_INVALID_ARG_VALUE]: The argument &apos;filename&apos; must be a file URL object, file URL string, or absolute path string. Received &apos;http://localhost:3000/index.cjs&apos;&quot;.
Warning: Cannot polyfill `ImageData`, rendering may be broken.
Warning: Cannot polyfill `Path2D`, rendering may be broken.

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/ingestionService.test.js" name="Ingestion Service &gt; chunkText &gt; should handle empty text" time="0.00049075">
        </testcase>
        <testcase classname="tests/unit/backend/ingestionService.test.js" name="Ingestion Service &gt; storeDocument &gt; should store document in database" time="0.000560458">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/initiativeService.multiTenant.test.js" timestamp="2025-12-21T19:48:14.622Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="3" errors="0" skipped="0" time="0.138480833">
        <testcase classname="tests/unit/backend/initiativeService.multiTenant.test.js" name="InitiativeService - Multi-Tenant Isolation &gt; recalculateProgress with organizationId &gt; should filter tasks by organization_id AND initiative_id" time="0.003449667">
            <failure message="expected +0 to be 100 // Object.is equality" type="AssertionError">
AssertionError: expected +0 to be 100 // Object.is equality

- Expected
+ Received

- 100
+ 0

  tests/unit/backend/initiativeService.multiTenant.test.js:50:30
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.multiTenant.test.js" name="InitiativeService - Multi-Tenant Isolation &gt; recalculateProgress with organizationId &gt; should update initiative with org-scoped WHERE clause" time="0.000612542">
            <failure message="expected &apos;&apos; to contain &apos;organization_id = ?&apos;" type="AssertionError">
AssertionError: expected &apos;&apos; to contain &apos;organization_id = ?&apos;

- Expected
+ Received

- organization_id = ?

  tests/unit/backend/initiativeService.multiTenant.test.js:70:33
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.multiTenant.test.js" name="InitiativeService - Multi-Tenant Isolation &gt; recalculateProgress with organizationId &gt; should NOT mix tasks from different orgs" time="0.000669792">
            <failure message="expected +0 to be 100 // Object.is equality" type="AssertionError">
AssertionError: expected +0 to be 100 // Object.is equality

- Expected
+ Received

- 100
+ 0

  tests/unit/backend/initiativeService.multiTenant.test.js:104:31
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/initiativeService.test.js" timestamp="2025-12-21T19:48:14.623Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="4" errors="0" skipped="0" time="0.143003834">
        <testcase classname="tests/unit/backend/initiativeService.test.js" name="InitiativeService &gt; recalculateProgress &gt; should return 0 when no initiativeId provided" time="0.000804041">
            <system-err>
[InitiativeService] DEPRECATION WARNING: recalculateProgress called without organizationId

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.test.js" name="InitiativeService &gt; recalculateProgress &gt; should handle database error during fetch" time="0.003016791">
            <failure message="promise resolved &quot;+0&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;+0&quot; instead of rejecting

- Expected: 
Error {
  &quot;message&quot;: &quot;rejected promise&quot;,
}

+ Received: 
0

  tests/unit/backend/initiativeService.test.js:43:117
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.test.js" name="InitiativeService &gt; recalculateProgress &gt; should set progress to 0 if no tasks found" time="0.001038875">
            <failure message="expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (1) ]

Number of calls: 0
" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{}, (1) ]

Number of calls: 0

  tests/unit/backend/initiativeService.test.js:52:47
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.test.js" name="InitiativeService &gt; recalculateProgress &gt; should calculate weighted progress correctly" time="0.001228459">
            <failure message="expected +0 to be 67 // Object.is equality" type="AssertionError">
AssertionError: expected +0 to be 67 // Object.is equality

- Expected
+ Received

- 67
+ 0

  tests/unit/backend/initiativeService.test.js:74:30
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.test.js" name="InitiativeService &gt; recalculateProgress &gt; should handle tasks with missing progress/priority" time="0.000305041">
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.test.js" name="InitiativeService &gt; recalculateProgress &gt; should handle database error during update" time="0.000585167">
            <failure message="promise resolved &quot;+0&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;+0&quot; instead of rejecting

- Expected: 
Error {
  &quot;message&quot;: &quot;rejected promise&quot;,
}

+ Received: 
0

  tests/unit/backend/initiativeService.test.js:96:117
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/invitationService.test.js" timestamp="2025-12-21T19:48:14.623Z" hostname="MacBook-Pro-Piotr.local" tests="23" failures="0" errors="0" skipped="0" time="0.250490583">
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; generateSecureToken() &gt; should generate 64-character hex token" time="0.004947667">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; generateSecureToken() &gt; should generate unique tokens" time="0.00097725">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; hashToken() &gt; should hash token using SHA256" time="0.000851875">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; hashToken() &gt; should produce consistent hash for same token" time="0.000465084">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; calculateExpiryDate() &gt; should calculate expiry date 7 days from now by default" time="0.00075">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; calculateExpiryDate() &gt; should calculate expiry date for custom days" time="0.000557">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; checkInvitePermission() &gt; should allow invitation when policy allows" time="0.00082625">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; checkInvitePermission() &gt; should deny invitation when policy denies" time="0.000480375">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; createOrgInvitation() &gt; should create organization invitation" time="0.000952667">
            <system-out>

[EMAIL SERVICE] Sending ORG invitation to newuser@test.com
[EMAIL SERVICE] Link: http://localhost:5173/join?token=01aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa


            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; createOrgInvitation() &gt; should reject invalid email format" time="0.000901584">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; createOrgInvitation() &gt; should reject when organization not found" time="0.000473625">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; createOrgInvitation() &gt; should reject when permission denied" time="0.000536583">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; createProjectInvitation() &gt; should create project invitation" time="0.000700833">
            <system-out>

[EMAIL SERVICE] Sending PROJECT invitation to user@test.com
[EMAIL SERVICE] Project: Test Project
[EMAIL SERVICE] Link: http://localhost:5173/join?token=01aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa


            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; createProjectInvitation() &gt; should reject when project not found" time="0.000511958">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; createProjectInvitation() &gt; should reject when project belongs to different organization" time="0.001067458">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; validateToken() &gt; should validate correct token" time="0.000846">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; validateToken() &gt; should reject invalid token" time="0.000566292">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; validateToken() &gt; should reject expired invitation" time="0.000662167">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; validateToken() &gt; should reject already accepted invitation" time="0.000529292">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; acceptInvitation() &gt; should accept valid invitation" time="0.0010325">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; acceptInvitation() &gt; should reject invitation with mismatched email" time="0.000602584">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; revokeInvitation() &gt; should revoke pending invitation" time="0.000721666">
        </testcase>
        <testcase classname="tests/unit/backend/invitationService.test.js" name="InvitationService &gt; Multi-Tenant Isolation &gt; should only return invitations for specified organization" time="0.001134542">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/knowledgeService.test.js" timestamp="2025-12-21T19:48:14.624Z" hostname="MacBook-Pro-Piotr.local" tests="11" failures="0" errors="0" skipped="9" time="0">
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Candidate Management &gt; should add a candidate idea without throwing" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Candidate Management &gt; should get candidates without throwing" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Strategies &gt; should add a global strategy without throwing" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Strategies &gt; should get active strategies without throwing" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Client Context &gt; should set and get client context" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Client Context &gt; should update existing client context" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Candidate Status &gt; should update candidate status" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Process Document (RAG) &gt; should process document chunks" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Access Control &gt; should restrict user access to project docs" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Strategies Toggle &gt; should toggle strategy active status" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Document Lifecycle &gt; should soft delete document" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/legalEventLogger.test.js" timestamp="2025-12-21T19:48:14.625Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.127259209">
        <testcase classname="tests/unit/backend/legalEventLogger.test.js" name="LegalEventLogger &gt; log &gt; should append log entry" time="0.001525375">
            <system-err>
[LegalEventLogger] Unknown event type: test_event

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/legalEventLogger.test.js" name="LegalEventLogger &gt; logAccept &gt; should log user acceptance" time="0.000391792">
        </testcase>
        <testcase classname="tests/unit/backend/legalEventLogger.test.js" name="LegalEventLogger &gt; getEvents &gt; should fetch events with filters" time="0.000413166">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/legalService.test.js" timestamp="2025-12-21T19:48:14.625Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.210460625">
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; getActiveDocuments() &gt; should return active documents" time="0.0074395">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; getActiveDocuments() &gt; should filter by effective date" time="0.000824083">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; getActiveDocuments() &gt; should filter by scope when user context provided" time="0.000604958">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; getActiveDocument() &gt; should return active document by type" time="0.000504208">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; getActiveDocument() &gt; should return null when document not found" time="0.00038125">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; getUserAcceptances() &gt; should return user acceptances" time="0.000727208">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; getUserAcceptances() &gt; should filter by organization when provided" time="0.000697875">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; acceptDocuments() &gt; should record user acceptance" time="0.002714208">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; acceptDocuments() &gt; should reject when document not found" time="0.000552334">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; isDocumentApplicable() &gt; should return true for global scope documents" time="0.000357542">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; isDocumentApplicable() &gt; should return true for matching region scope" time="0.000319917">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; isDocumentApplicable() &gt; should return false for non-matching region scope" time="0.000385625">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; isDocumentApplicable() &gt; should return true for matching license tier" time="0.000305417">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; checkAcceptanceRequired() &gt; should require acceptance for TOS" time="0.000319">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; checkAcceptanceRequired() &gt; should not require acceptance when already accepted" time="0.000573167">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; Multi-Tenant Isolation &gt; should only return acceptances for specified user and organization" time="0.000555875">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/metricsAggregator.test.js" timestamp="2025-12-21T19:48:14.626Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.158053125">
        <testcase classname="tests/unit/backend/metricsAggregator.test.js" name="MetricsAggregator &gt; METRIC_KEYS &gt; should define all required metric keys" time="0.000637542">
        </testcase>
        <testcase classname="tests/unit/backend/metricsAggregator.test.js" name="MetricsAggregator &gt; WARNING_SEVERITY &gt; should define severity levels" time="0.000117709">
        </testcase>
        <testcase classname="tests/unit/backend/metricsAggregator.test.js" name="MetricsAggregator &gt; getFunnelMetric &gt; should calculate funnel between two events" time="0.001380084">
            <system-out>
[MetricsCollector] Recorded event: demo_started (d4f00ce3-bc84-4c06-a378-b059a8e241e1)

[MetricsCollector] Recorded event: demo_started (8ff43dba-d9ad-43f8-95ac-826890f82ba4)

[MetricsCollector] Recorded event: trial_started (97b65d0b-b701-4a64-9ef5-bb633cb5977e)

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/metricsAggregator.test.js" name="MetricsAggregator &gt; getOverview &gt; should return complete overview for dashboard" time="0.001958167">
        </testcase>
        <testcase classname="tests/unit/backend/metricsAggregator.test.js" name="MetricsAggregator &gt; buildDailySnapshots &gt; should build snapshots idempotently" time="0.004488125">
            <system-out>
[MetricsAggregator] Building daily snapshots for 2025-12-21

[MetricsAggregator] Created 6 snapshots for 2025-12-21

[MetricsAggregator] Building daily snapshots for 2025-12-21

[MetricsAggregator] Created 6 snapshots for 2025-12-21

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/metricsAggregator.test.js" name="MetricsAggregator &gt; getEarlyWarnings &gt; should return warnings (seed data needed for specific warnings)" time="0.001267333">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/metricsCollector.test.js" timestamp="2025-12-21T19:48:14.626Z" hostname="MacBook-Pro-Piotr.local" tests="4" failures="0" errors="0" skipped="0" time="0.186767542">
        <testcase classname="tests/unit/backend/metricsCollector.test.js" name="MetricsCollector &gt; recordEvent &gt; should record event successfully" time="0.00165675">
            <system-out>
[MetricsCollector] Recorded event: TEST_EVENT (uuid-1234)

            </system-out>
            <system-err>
[MetricsCollector] Unknown event type: TEST_EVENT

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/metricsCollector.test.js" name="MetricsCollector &gt; recordEvent &gt; should throw on database error" time="0.000711583">
            <system-err>
[MetricsCollector] Unknown event type: TEST_EVENT
[MetricsCollector] Failed to record event TEST_EVENT: Insert failed

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/metricsCollector.test.js" name="MetricsCollector &gt; getEvents &gt; should fetch events with filters" time="0.000404166">
        </testcase>
        <testcase classname="tests/unit/backend/metricsCollector.test.js" name="MetricsCollector &gt; getEventCount &gt; should return count" time="0.000103333">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/myWorkService.test.js" timestamp="2025-12-21T19:48:14.627Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="1" errors="0" skipped="0" time="0.297758959">
        <testcase classname="tests/unit/backend/myWorkService.test.js" name="MyWorkService &gt; getMyWork &gt; should aggregate work" time="0.077075">
            <system-out>
[Redis] Initializing client...
[Redis] Using Mock Client

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/myWorkService.test.js" name="MyWorkService &gt; errors &gt; should propagate db error" time="0.004467541">
            <failure message="promise resolved &quot;{ userId: &apos;user1&apos;, (5) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ userId: &apos;user1&apos;, (5) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;generatedAt&quot;: &quot;2025-12-21T19:47:44.535Z&quot;,
+   &quot;myAlerts&quot;: {
+     &quot;critical&quot;: 0,
+     &quot;items&quot;: [],
+     &quot;total&quot;: 0,
+   },
+   &quot;myDecisions&quot;: null,
+   &quot;myInitiatives&quot;: null,
+   &quot;myTasks&quot;: {
+     &quot;blocked&quot;: 0,
+     &quot;dueToday&quot;: 0,
+     &quot;items&quot;: [],
+     &quot;overdue&quot;: 0,
+     &quot;total&quot;: 0,
+   },
+   &quot;userId&quot;: &quot;user1&quot;,
  }

  tests/unit/backend/myWorkService.test.js:88:59
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/organizationService.test.js" timestamp="2025-12-21T19:48:14.627Z" hostname="MacBook-Pro-Piotr.local" tests="18" failures="2" errors="0" skipped="0" time="30.232494542">
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; createOrganization() &gt; should create organization with owner" time="15.013840666">
            <failure message="Test timed out in 15000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with &quot;testTimeout&quot;." type="Error">
Error: Test timed out in 15000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with &quot;testTimeout&quot;.
  tests/unit/backend/organizationService.test.js:33:11
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; createOrganization() &gt; should rollback on error" time="0.0012245">
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; createOrganization() &gt; should include attribution data when provided" time="15.003923291">
            <failure message="Test timed out in 15000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with &quot;testTimeout&quot;." type="Error">
Error: Test timed out in 15000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with &quot;testTimeout&quot;.
  tests/unit/backend/organizationService.test.js:131:11
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; getOrganization() &gt; should return organization details" time="0.002429917">
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; getOrganization() &gt; should throw error when organization not found" time="0.001296625">
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; addMember() &gt; should add member to organization" time="0.003951667">
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; addMember() &gt; should handle duplicate member gracefully" time="0.001443792">
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; removeMember() &gt; should remove member from organization" time="0.001010167">
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; removeMember() &gt; should throw error when member not found" time="0.00053975">
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; getMembers() &gt; should return organization members" time="0.001184125">
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; getMembers() &gt; should only return members for specified organization" time="0.000421375">
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; updateMemberRole() &gt; should update member role" time="0.000545167">
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; updateMemberRole() &gt; should throw error on invalid role" time="0.000880208">
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; updateMemberRole() &gt; should throw error when member not found" time="0.000565417">
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; getMemberRole() &gt; should return member role" time="0.000509917">
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; getMemberRole() &gt; should return null when member not found" time="0.000322">
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; Multi-Tenant Isolation &gt; should only access members for specified organization" time="0.000310042">
        </testcase>
        <testcase classname="tests/unit/backend/organizationService.test.js" name="OrganizationService &gt; Multi-Tenant Isolation &gt; should prevent cross-organization member access" time="0.000248875">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/outcomeService.test.js" timestamp="2025-12-21T19:48:14.628Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.141669333">
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _computeDelta &gt; should compute positive delta correctly" time="0.000519584">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _computeDelta &gt; should handle empty baseline" time="0.000080459">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _computeDelta &gt; should handle empty after" time="0.000073459">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _computeDelta &gt; should handle identical values" time="0.000077209">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _computeDelta &gt; should be deterministic" time="0.000282542">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should return true for positive delta with no criteria" time="0.000084209">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should return false for all-zero delta with no criteria" time="0.000041125">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should evaluate &quot;&gt;&quot; criterion correctly" time="0.000135167">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should evaluate &quot;&gt;=&quot; criterion correctly" time="0.000051208">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should evaluate &quot;&lt;&quot; criterion correctly" time="0.000067166">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should evaluate &quot;&lt;=&quot; criterion correctly" time="0.000044458">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should evaluate &quot;==&quot; criterion correctly" time="0.00004075">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should evaluate &quot;!=&quot; criterion correctly" time="0.000044042">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should require all criteria to pass" time="0.000049042">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should handle negative values" time="0.000043792">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should handle decimal values" time="0.000037958">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/permissionService.test.js" timestamp="2025-12-21T19:48:14.628Z" hostname="MacBook-Pro-Piotr.local" tests="22" failures="0" errors="0" skipped="0" time="0.21781225">
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; Legacy: can() - Role-based capability check &gt; should allow SUPERADMIN all capabilities" time="0.007632916">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; Legacy: can() - Role-based capability check &gt; should allow ADMIN to manage users" time="0.000385583">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; Legacy: can() - Role-based capability check &gt; should deny PROJECT_MANAGER from managing users" time="0.000275958">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; Legacy: can() - Role-based capability check &gt; should deny user without role" time="0.000278292">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; Legacy: can() - Role-based capability check &gt; should deny null user" time="0.000261334">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; hasPermission() - Database-backed PBAC &gt; should return false for missing userId" time="0.000226708">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; hasPermission() - Database-backed PBAC &gt; should return false for missing permissionKey" time="0.000160083">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; hasPermission() - Database-backed PBAC &gt; should allow SUPERADMIN bypass" time="0.000309333">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; hasPermission() - Database-backed PBAC &gt; should grant permission from explicit org-user override" time="0.001196084">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; hasPermission() - Database-backed PBAC &gt; should deny permission from explicit org-user override" time="0.000274042">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; hasPermission() - Database-backed PBAC &gt; should fallback to role-based permission when no override" time="0.00022525">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; hasPermission() - Database-backed PBAC &gt; should deny permission when role permission not found" time="0.000217042">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; hasPermission() - Database-backed PBAC &gt; should handle database errors gracefully" time="0.003523666">
            <system-err>
[PermissionService] Override query error: Error: DB Error
    at Object.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/permissionService.test.js:204:26)
    at Object.Mock [as get] (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/spy/dist/index.js:285:34)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/permissionService.js:130:21
    at new Promise (&lt;anonymous&gt;)
    at Object.hasPermission (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/permissionService.js:128:16)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/permissionService.test.js:207:52
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
[PermissionService] Role permission query error: Error: DB Error
    at Object.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/permissionService.test.js:204:26)
    at Object.Mock [as get] (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/spy/dist/index.js:285:34)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/permissionService.js:145:29
    at Object.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/permissionService.test.js:204:17)
    at Object.Mock [as get] (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/spy/dist/index.js:285:34)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/permissionService.js:130:21
    at new Promise (&lt;anonymous&gt;)
    at Object.hasPermission (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/permissionService.js:128:16)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/permissionService.test.js:207:52
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; Multi-Tenant Isolation &gt; should only check permissions for specified organization" time="0.000654375">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; Multi-Tenant Isolation &gt; should not leak permissions between organizations" time="0.000269458">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; getUserPermissions() &gt; should return role permissions and overrides" time="0.000549083">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; getUserPermissions() &gt; should handle empty permissions" time="0.00031325">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; grantPermission() &gt; should grant permission to user" time="0.000513041">
            <system-out>
[PermissionService] Permission granted: PLAYBOOK_PUBLISH to user-123 by undefined

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; grantPermission() &gt; should handle database errors" time="0.001038958">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; revokePermission() &gt; should revoke permission from user" time="0.000641416">
            <system-out>
[PermissionService] Permission revoked: PLAYBOOK_PUBLISH from user-123 by undefined

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; getCapabilitiesForRole() &gt; should return capabilities for ADMIN role" time="0.000426958">
        </testcase>
        <testcase classname="tests/unit/backend/permissionService.test.js" name="PermissionService &gt; getCapabilitiesForRole() &gt; should return empty array for unknown role" time="0.00029175">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/pmoDomainRegistry.test.js" timestamp="2025-12-21T19:48:14.629Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.181016292">
        <testcase classname="tests/unit/backend/pmoDomainRegistry.test.js" name="PMODomainRegistry &gt; getAllDomains &gt; should return domains" time="0.002309458">
        </testcase>
        <testcase classname="tests/unit/backend/pmoDomainRegistry.test.js" name="PMODomainRegistry &gt; getDomain &gt; should return domain" time="0.000602083">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/pmoHealthService.test.js" timestamp="2025-12-21T19:48:14.629Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.453973792">
        <testcase classname="tests/unit/backend/pmoHealthService.test.js" name="PMOHealthService &gt; getHealthSnapshot &gt; should return complete snapshot" time="0.003503">
            <system-out>
[PMOHealthService] Snapshot generated in 0ms for project proj1

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/pmoHealthService.test.js" name="PMOHealthService &gt; getHealthSnapshot &gt; should handle DB errors" time="0.000714333">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/pmoStandardsMapping.test.js" timestamp="2025-12-21T19:48:14.630Z" hostname="MacBook-Pro-Piotr.local" tests="7" failures="0" errors="0" skipped="0" time="0.257856042">
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; getMapping &gt; should return mapping for known concept" time="0.010901417">
        </testcase>
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; getMapping &gt; should return null for unknown concept" time="0.00122325">
        </testcase>
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; getStandardTerm &gt; should return ISO 21500 term correctly" time="0.000460125">
        </testcase>
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; getStandardTerm &gt; should return PMBOK 7 term correctly" time="0.000356459">
        </testcase>
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; isNeutralTerm &gt; should identify neutral terms" time="0.000325208">
        </testcase>
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; isNeutralTerm &gt; should identify vendor-specific terms as non-neutral" time="0.000275042">
        </testcase>
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; getConceptsByDomain &gt; should return all concepts for a given domain" time="0.000268167">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/progressService.test.js" timestamp="2025-12-21T19:48:14.630Z" hostname="MacBook-Pro-Piotr.local" tests="4" failures="0" errors="0" skipped="0" time="0.197629458">
        <testcase classname="tests/unit/backend/progressService.test.js" name="Progress Service &gt; calculateInitiativeProgress &gt; should calculate progress from tasks" time="0.002050666">
        </testcase>
        <testcase classname="tests/unit/backend/progressService.test.js" name="Progress Service &gt; calculateInitiativeProgress &gt; should detect blocked initiatives" time="0.000247875">
        </testcase>
        <testcase classname="tests/unit/backend/progressService.test.js" name="Progress Service &gt; calculateProjectProgress &gt; should calculate weighted project progress" time="0.000226667">
        </testcase>
        <testcase classname="tests/unit/backend/progressService.test.js" name="Progress Service &gt; calculatePortfolioMetrics &gt; should calculate health score based on blocked initiatives" time="0.000238292">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/promoCodeService.test.js" timestamp="2025-12-21T19:48:14.630Z" hostname="MacBook-Pro-Piotr.local" tests="18" failures="0" errors="0" skipped="13" time="0.129271375">
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; constants &gt; should export PROMO_TYPES" time="0.000696083">
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; constants &gt; should export DISCOUNT_TYPES" time="0.000118208">
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return invalid for empty code" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return invalid for null code" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return invalid when code not found" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return invalid for expired code" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return invalid for code not yet active" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return invalid when usage limit reached" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return valid for good code with discount" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return valid for partner code without discount" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; markPromoCodeUsed - skipped due to CJS/ESM mock interop &gt; should return error for already used org code" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; createPromoCode &gt; should throw error for missing required fields" time="0.000574083">
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; createPromoCode &gt; should throw error for invalid promo type" time="0.000120583">
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; createPromoCode &gt; should throw error for invalid discount type" time="0.000103041">
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; createPromoCode &gt; should create promo code successfully" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; listPromoCodes - skipped due to CJS/ESM mock interop &gt; should return list of promo codes" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; deactivatePromoCode - skipped due to CJS/ESM mock interop &gt; should deactivate promo code" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; deactivatePromoCode - skipped due to CJS/ESM mock interop &gt; should return false if code not found" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/ragService.test.js" timestamp="2025-12-21T19:48:14.631Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.265801583">
        <testcase classname="tests/unit/backend/ragService.test.js" name="RagService - Integration &gt; generateEmbedding &gt; should return null if no provider configured in database" time="0.000753167">
        </testcase>
        <testcase classname="tests/unit/backend/ragService.test.js" name="RagService - Integration &gt; getContext &gt; should return context string without throwing" time="0.000680625">
        </testcase>
        <testcase classname="tests/unit/backend/ragService.test.js" name="RagService - Integration &gt; getContext &gt; should accept limit parameter" time="0.000333167">
        </testcase>
        <testcase classname="tests/unit/backend/ragService.test.js" name="RagService - Integration &gt; getContextKeyword &gt; should perform keyword search without throwing" time="0.000353833">
        </testcase>
        <testcase classname="tests/unit/backend/ragService.test.js" name="RagService - Integration &gt; getAxisDefinitions &gt; should retrieve axis definitions without throwing" time="0.000594917">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/regulatoryModeGuard.test.js" timestamp="2025-12-21T19:48:14.631Z" hostname="MacBook-Pro-Piotr.local" tests="22" failures="0" errors="0" skipped="0" time="0.296222875">
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isEnabled() &gt; should return false for null projectId" time="0.006862875">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isEnabled() &gt; should return true when regulatory mode is enabled" time="0.002084917">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isEnabled() &gt; should return false when regulatory mode is disabled" time="0.000386042">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isEnabled() &gt; should default to enabled (fail-safe) when column is null" time="0.000325709">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isEnabled() &gt; should default to enabled on database error (fail-safe)" time="0.002477833">
            <system-err>
RegulatoryModeGuard.isEnabled error: Error: DB Error
    at Object.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/regulatoryModeGuard.test.js:91:26)
    at Object.Mock [as get] (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/spy/dist/index.js:285:34)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/regulatoryModeGuard.js:80:21
    at new Promise (&lt;anonymous&gt;)
    at Object.isEnabled (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/regulatoryModeGuard.js:79:16)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/regulatoryModeGuard.test.js:94:54
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; setEnabled() &gt; should enable regulatory mode" time="0.000483">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; setEnabled() &gt; should disable regulatory mode" time="0.000315542">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; setEnabled() &gt; should handle database errors" time="0.00071225">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isActionAllowed() &gt; should allow EXPLAIN_CONTEXT action" time="0.000206458">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isActionAllowed() &gt; should allow ANALYZE_RISKS action" time="0.000201583">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isActionAllowed() &gt; should block CREATE_DRAFT_TASK action" time="0.000189042">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isActionAllowed() &gt; should block EXECUTE_ACTION action" time="0.00016225">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isActionAllowed() &gt; should block actions with mutation keywords" time="0.000140625">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; isActionAllowed() &gt; should allow null/undefined action (fail-safe)" time="0.0001645">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; enforceRegulatoryMode() &gt; should not block when projectId is null" time="0.000180833">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; enforceRegulatoryMode() &gt; should not block when regulatory mode is disabled" time="0.00029625">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; enforceRegulatoryMode() &gt; should block mutation actions when regulatory mode is enabled" time="0.000984584">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; enforceRegulatoryMode() &gt; should allow EXPLAIN_CONTEXT even when regulatory mode is enabled" time="0.0003625">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; enforceRegulatoryMode() &gt; should log blocked attempts" time="0.000755584">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; getRegulatoryPrompt() &gt; should return regulatory mode prompt constraints" time="0.000263208">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; getStatus() &gt; should return status when enabled" time="0.000269625">
        </testcase>
        <testcase classname="tests/unit/backend/regulatoryModeGuard.test.js" name="RegulatoryModeGuard &gt; getStatus() &gt; should return status when disabled" time="0.000187958">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/roadmapService.test.js" timestamp="2025-12-21T19:48:14.632Z" hostname="MacBook-Pro-Piotr.local" tests="19" failures="0" errors="0" skipped="0" time="0.261765458">
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; getWaves() &gt; should retrieve all waves for a project" time="0.001897209">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; getWaves() &gt; should return empty array when no waves exist" time="0.000220875">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; getWaves() &gt; should handle database errors" time="0.000599875">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; createWave() &gt; should create a new wave" time="0.00024375">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; createWave() &gt; should default sortOrder to 0 if not provided" time="0.000121709">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; createWave() &gt; should handle database errors" time="0.000147041">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; assignToWave() &gt; should assign initiative to wave" time="0.000178541">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; assignToWave() &gt; should handle database errors" time="0.000132833">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; baselineRoadmap() &gt; should baseline all waves and increment initiative baseline version" time="0.000309333">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; baselineRoadmap() &gt; should handle database errors on wave update" time="0.00015175">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; getRoadmapSummary() &gt; should return roadmap summary with waves and initiatives" time="0.000197417">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; getRoadmapSummary() &gt; should handle empty roadmap" time="0.000071125">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; updateInitiativeSchedule() &gt; should update schedule directly when not baselined" time="0.000180333">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; updateInitiativeSchedule() &gt; should create Change Request when baselined and governance requires CR" time="0.000144167">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; updateInitiativeSchedule() &gt; should allow direct update when baselined but governance does not require CR" time="0.000087542">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; updateInitiativeSchedule() &gt; should handle waveId update" time="0.000079041">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; updateInitiativeSchedule() &gt; should return success message when no changes to apply" time="0.000068917">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; Multi-Tenant Isolation &gt; should filter waves by project_id" time="0.000054333">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; Multi-Tenant Isolation &gt; should ensure initiatives belong to correct project in summary" time="0.000060166">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/roiService.test.js" timestamp="2025-12-21T19:48:14.633Z" hostname="MacBook-Pro-Piotr.local" tests="4" failures="0" errors="0" skipped="0" time="0.102876208">
        <testcase classname="tests/unit/backend/roiService.test.js" name="ROIService &gt; getDefaultModel &gt; should return existing model if found" time="0.000684292">
        </testcase>
        <testcase classname="tests/unit/backend/roiService.test.js" name="ROIService &gt; getDefaultModel &gt; should create default model if missing" time="0.000969542">
        </testcase>
        <testcase classname="tests/unit/backend/roiService.test.js" name="ROIService &gt; calculateROI &gt; should calculate ROI based on measurements" time="0.000377875">
        </testcase>
        <testcase classname="tests/unit/backend/roiService.test.js" name="ROIService &gt; estimateHoursSaved &gt; should aggregate time saved metrics" time="0.000181792">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/scenarioService.test.js" timestamp="2025-12-21T19:48:14.633Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.187245791">
        <testcase classname="tests/unit/backend/scenarioService.test.js" name="Scenario Service &gt; compareScenarios &gt; should compare delays correctly" time="0.002890458">
        </testcase>
        <testcase classname="tests/unit/backend/scenarioService.test.js" name="Scenario Service &gt; analyzeImpact &gt; should detect dependency breaks" time="0.00053375">
        </testcase>
        <testcase classname="tests/unit/backend/scenarioService.test.js" name="Scenario Service &gt; createScenario &gt; should persist scenario" time="0.000286458">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/scmsGovernance.test.js" timestamp="2025-12-21T19:48:14.633Z" hostname="MacBook-Pro-Piotr.local" tests="17" failures="0" errors="0" skipped="0" time="0.455473458">
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should allow DRAFT to PLANNED transition" time="0.004106541">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should allow PLANNED to APPROVED transition" time="0.000146625">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should allow APPROVED to IN_EXECUTION transition" time="0.000084417">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should allow IN_EXECUTION to BLOCKED transition" time="0.000068291">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should allow IN_EXECUTION to COMPLETED transition" time="0.000064">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should disallow COMPLETED to DRAFT transition" time="0.000053916">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should disallow invalid status transition" time="0.000045542">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Task Status Transitions &gt; should allow TODO to IN_PROGRESS transition" time="0.00005875">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Task Status Transitions &gt; should allow IN_PROGRESS to DONE transition" time="0.000056459">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Task Status Transitions &gt; should allow IN_PROGRESS to BLOCKED transition" time="0.000067792">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Task Status Transitions &gt; should allow BLOCKED to IN_PROGRESS transition" time="0.000048833">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Task Status Transitions &gt; should disallow direct DONE to TODO transition" time="0.000039">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Blocked Status Validation &gt; should require blocked reason for BLOCKED initiative status" time="0.000123958">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Blocked Status Validation &gt; should accept blocked reason for BLOCKED status" time="0.000078917">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Status Constants &gt; should export INITIATIVE_STATUSES" time="0.000063125">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Status Constants &gt; should export TASK_STATUSES" time="0.000044">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Status Constants &gt; should export DECISION_STATUSES" time="0.000041417">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/scmsLifecycle.test.js" timestamp="2025-12-21T19:48:14.634Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.21291275">
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Types &gt; should define READINESS_GATE" time="0.005815125">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Types &gt; should define DESIGN_GATE" time="0.000131791">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Types &gt; should define PLANNING_GATE" time="0.000082917">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Types &gt; should define EXECUTION_GATE" time="0.000072333">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Types &gt; should define CLOSURE_GATE" time="0.000062625">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Service Structure &gt; should export getGateType function" time="0.000051125">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Service Structure &gt; should export evaluateGate function" time="0.000043083">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Service Structure &gt; should export passGate function" time="0.000044">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Mapping &gt; should map Context to Assessment with READINESS_GATE" time="0.000063041">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Mapping &gt; should map Roadmap to Execution with EXECUTION_GATE" time="0.000062292">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Mapping &gt; should map Assessment to Initiatives with DESIGN_GATE" time="0.000046042">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Mapping &gt; should map Initiatives to Roadmap with PLANNING_GATE" time="0.000036458">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Mapping &gt; should map Execution to Stabilization with CLOSURE_GATE" time="0.0000345">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="Phase Constants &gt; should have 6 phases in SCMS lifecycle" time="0.000334583">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="Phase Constants &gt; should have Context as first phase" time="0.000035667">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="Phase Constants &gt; should have Stabilization as last phase" time="0.000042041">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/scmsServices.test.js" timestamp="2025-12-21T19:48:14.634Z" hostname="MacBook-Pro-Piotr.local" tests="39" failures="0" errors="0" skipped="0" time="0.4622015">
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; NOTIFICATION_TYPES &gt; should have notification types defined" time="0.0045915">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; NOTIFICATION_TYPES &gt; should include TASK_ASSIGNED type" time="0.000178125">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; NOTIFICATION_TYPES &gt; should include DECISION_REQUIRED type" time="0.000081708">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; NOTIFICATION_TYPES &gt; should include AI_RISK_DETECTED type" time="0.00007075">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; SEVERITY &gt; should define INFO severity" time="0.000066875">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; SEVERITY &gt; should define WARNING severity" time="0.000050875">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; SEVERITY &gt; should define CRITICAL severity" time="0.000044166">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="MyWorkService &gt; Service Structure &gt; should export getMyWork function" time="0.131297458">
            <system-out>
[Redis] Initializing client...
[Redis] Using Mock Client

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="MyWorkService &gt; Service Structure &gt; should export _getMyTasks helper function" time="0.000101125">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="MyWorkService &gt; Service Structure &gt; should export _getMyAlerts helper function" time="0.000069542">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="ExecutionMonitorService &gt; Service Structure &gt; should export runDailyMonitor function" time="0.014612417">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="ExecutionMonitorService &gt; Service Structure &gt; should export generateExecutionSummary function" time="0.000095792">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EscalationService &gt; Service Structure &gt; should export createEscalation function" time="0.019619041">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EscalationService &gt; Service Structure &gt; should export getEscalations function" time="0.000090833">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EscalationService &gt; Service Structure &gt; should export acknowledgeEscalation function" time="0.00004425">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EscalationService &gt; Service Structure &gt; should export resolveEscalation function" time="0.000040292">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EscalationService &gt; Service Structure &gt; should export runAutoEscalation function" time="0.00003275">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; STABILIZATION_STATUSES &gt; should define STABILIZED status" time="0.022678708">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; STABILIZATION_STATUSES &gt; should define PARTIALLY_STABILIZED status" time="0.000091917">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; STABILIZATION_STATUSES &gt; should define UNSTABLE status" time="0.000043875">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; STABILIZATION_STATUSES &gt; should define NOT_APPLICABLE status" time="0.000034">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; Service Structure &gt; should export checkEntryCriteria function" time="0.000033333">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; Service Structure &gt; should export checkExitCriteria function" time="0.000615875">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; Service Structure &gt; should export closeProject function" time="0.000093375">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should have 5 value types" time="0.007194042">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should define COST_REDUCTION type" time="0.000292667">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should define REVENUE_INCREASE type" time="0.00011">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should define RISK_REDUCTION type" time="0.00007375">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should define EFFICIENCY type" time="0.000070333">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should define STRATEGIC_OPTION type" time="0.000065209">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; Service Structure &gt; should export createValueHypothesis function" time="0.000229042">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; Service Structure &gt; should export getValueSummary function" time="0.000083958">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; Service Structure &gt; should export detectMissingValueHypotheses function" time="0.000046041">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="ReportingService &gt; Service Structure &gt; should export generateExecutiveOverview function" time="0.0016315">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="ReportingService &gt; Service Structure &gt; should export generateProjectHealthReport function" time="0.000050958">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="ReportingService &gt; Service Structure &gt; should export generateGovernanceReport function" time="0.000032042">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NarrativeService &gt; Service Structure &gt; should export generateWeeklySummary function" time="0.006761875">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NarrativeService &gt; Service Structure &gt; should export generateExecutiveMemo function" time="0.000137625">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NarrativeService &gt; Service Structure &gt; should export generateProgressNarrative function" time="0.00009275">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/settlementService.test.js" timestamp="2025-12-21T19:48:14.636Z" hostname="MacBook-Pro-Piotr.local" tests="19" failures="0" errors="0" skipped="0" time="0.408264125">
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; createPeriod() &gt; should create a new settlement period" time="0.0165835">
            <system-out>
[SettlementService] Created period: 2024-01-01T00:00:00Z to 2024-01-31T23:59:59Z

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; createPeriod() &gt; should reject missing periodStart" time="0.00104725">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; createPeriod() &gt; should reject missing periodEnd" time="0.001113459">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; createPeriod() &gt; should reject invalid date range" time="0.001210375">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; createPeriod() &gt; should reject overlapping periods" time="0.002205875">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; createPeriod() &gt; should reject when open period exists" time="0.000866458">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; getPeriod() &gt; should return period by ID" time="0.000510959">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; getPeriod() &gt; should return null for non-existent period" time="0.000279875">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; getOpenPeriod() &gt; should return open period" time="0.0002615">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; getOpenPeriod() &gt; should return null when no open period" time="0.001882083">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; calculateSettlements() &gt; should calculate settlements for open period" time="0.005125375">
            <system-out>
[SettlementService] Found 0 partner attributions in period

[SettlementService] Calculated 0 settlements for period period-123

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; calculateSettlements() &gt; should reject calculation for locked period" time="0.00054625">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; calculateSettlements() &gt; should reject calculation for non-existent period" time="0.000282083">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; lockPeriod() &gt; should lock a calculated period" time="0.001571417">
            <system-out>
[SettlementService] Locked period period-123 by user user-123

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; lockPeriod() &gt; should reject locking open period" time="0.003950459">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; lockPeriod() &gt; should return already locked status for already locked period" time="0.000612375">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; listPeriods() &gt; should return list of periods" time="0.000620667">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; listPeriods() &gt; should handle empty list" time="0.000326416">
        </testcase>
        <testcase classname="tests/unit/backend/settlementService.test.js" name="SettlementService &gt; Immutability &gt; should prevent modifications to locked period" time="0.000267208">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/stageGateService.test.js" timestamp="2025-12-21T19:48:14.637Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.190989875">
        <testcase classname="tests/unit/backend/stageGateService.test.js" name="StageGateService &gt; getGateType &gt; should return correct gate for transition" time="0.000600708">
        </testcase>
        <testcase classname="tests/unit/backend/stageGateService.test.js" name="StageGateService &gt; getGateType &gt; should return null for unknown transition" time="0.000159083">
        </testcase>
        <testcase classname="tests/unit/backend/stageGateService.test.js" name="StageGateService &gt; evaluateGate &gt; should evaluate readiness gate criteria" time="0.0004535">
        </testcase>
        <testcase classname="tests/unit/backend/stageGateService.test.js" name="StageGateService &gt; evaluateGate &gt; should report failure if criteria missing" time="0.000124083">
        </testcase>
        <testcase classname="tests/unit/backend/stageGateService.test.js" name="StageGateService &gt; passGate &gt; should record gate passage" time="0.001405333">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/statusMachine.test.js" timestamp="2025-12-21T19:48:14.637Z" hostname="MacBook-Pro-Piotr.local" tests="11" failures="0" errors="0" skipped="0" time="0.237199">
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; canTransitionInitiative &gt; should allow valid transition" time="0.000532125">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; canTransitionInitiative &gt; should block invalid transition" time="0.000084708">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; canTransitionTask &gt; should allow valid transition" time="0.000076834">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; canTransitionTask &gt; should allow flow back" time="0.000058458">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateInitiativeTransition &gt; should return valid for simple allowed transition" time="0.000088667">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateInitiativeTransition &gt; should require reason for blocking" time="0.000100166">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateInitiativeTransition &gt; should allow blocking with reason" time="0.000040125">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateInitiativeTransition &gt; should prevent completion if pending tasks exist" time="0.000055209">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateInitiativeTransition &gt; should prevent approved state if governance failed" time="0.000053042">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateTaskTransition &gt; should validate blocker type" time="0.000076">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateTaskTransition &gt; should pass with full blocking info" time="0.000042583">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/storageReconciliationService.test.js" timestamp="2025-12-21T19:48:14.637Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.099004">
        <testcase classname="tests/unit/backend/storageReconciliationService.test.js" name="Storage Reconciliation Service &gt; should handle reconciliation (DB interaction) [SKIPPED]" time="0.000480166">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/storageService.test.js" timestamp="2025-12-21T19:48:14.638Z" hostname="MacBook-Pro-Piotr.local" tests="18" failures="0" errors="0" skipped="0" time="0.2180385">
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; getIsolatedPath() &gt; should generate isolated path for organization and project" time="0.002358125">
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; getIsolatedPath() &gt; should use &quot;global&quot; as project scope when projectId is null" time="0.000352208">
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; getIsolatedPath() &gt; should throw error when orgId is missing" time="0.000544917">
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; getIsolatedPath() &gt; should default type to &quot;global&quot; when not provided" time="0.000699875">
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; storeFile() &gt; should move file to isolated storage" time="0.001319">
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; storeFile() &gt; should sanitize filename" time="0.00042925">
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; storeFile() &gt; should handle special characters in filename" time="0.00044725">
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; getUsageByOrganization() &gt; should return storage usage for organization" time="0.000413208">
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; getUsageByOrganization() &gt; should handle empty directories" time="0.000375458">
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; getUsageByOrganization() &gt; should handle read errors gracefully" time="0.000478">
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; Path Security &gt; should not allow path traversal in orgId" time="0.000503417">
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; Path Security &gt; should include path in result (basic check)" time="0.00031675">
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; Path Security &gt; should enforce organization boundary" time="0.00030825">
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; File Operations &gt; should delete file from storage" time="0.000264">
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; File Operations &gt; should get file stats" time="0.000252125">
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; File Operations &gt; should list files for organization" time="0.000226708">
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; Multi-tenant Isolation &gt; should not allow access across organization boundaries" time="0.000185792">
        </testcase>
        <testcase classname="tests/unit/backend/storageService.test.js" name="StorageService &gt; Multi-tenant Isolation &gt; should not leak files between organizations in usage calculation" time="0.000226625">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/systemIntegrity.test.js" timestamp="2025-12-21T19:48:14.638Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.200896042">
        <testcase classname="tests/unit/backend/systemIntegrity.test.js" name="System Integrity Service &gt; check &gt; should detect missing DBR77 anchor" time="0.002608041">
        </testcase>
        <testcase classname="tests/unit/backend/systemIntegrity.test.js" name="System Integrity Service &gt; check &gt; should detect valid DBR77 anchor" time="0.000311042">
        </testcase>
        <testcase classname="tests/unit/backend/systemIntegrity.test.js" name="System Integrity Service &gt; check &gt; should check LLM providers" time="0.000219333">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/tokenBillingService.test.js" timestamp="2025-12-21T19:48:14.638Z" hostname="MacBook-Pro-Piotr.local" tests="15" failures="4" errors="0" skipped="0" time="20.221238667">
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; getBalance() &gt; should return user token balance" time="0.003915458">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; getBalance() &gt; should return zero balance for new user" time="0.000316042">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; getBalance() &gt; should handle database errors" time="0.00067575">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; hasSufficientBalance() &gt; should return true when balance is sufficient" time="0.000178667">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; hasSufficientBalance() &gt; should return false when balance is insufficient" time="0.000159375">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; hasSufficientBalance() &gt; should include bonus tokens in balance check" time="0.000142583">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; deductTokens() &gt; should deduct tokens from user balance" time="5.008347042">
            <failure message="Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with &quot;testTimeout&quot;." type="Error">
Error: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with &quot;testTimeout&quot;.
  tests/unit/backend/tokenBillingService.test.js:168:11
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; deductTokens() &gt; should deduct from organization balance when organizationId provided" time="5.002949083">
            <failure message="Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with &quot;testTimeout&quot;." type="Error">
Error: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with &quot;testTimeout&quot;.
  tests/unit/backend/tokenBillingService.test.js:227:11
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; deductTokens() &gt; should handle insufficient balance" time="5.001397833">
            <failure message="Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with &quot;testTimeout&quot;." type="Error">
Error: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with &quot;testTimeout&quot;.
  tests/unit/backend/tokenBillingService.test.js:280:11
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; deductTokens() &gt; should handle database errors" time="0.000424792">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; creditTokens() &gt; should credit tokens to user balance" time="0.00038975">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; creditTokens() &gt; should credit to organization balance when organizationId provided" time="0.00022525">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; Multi-Tenant Isolation &gt; should only deduct from specified organization" time="5.001306">
            <failure message="Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with &quot;testTimeout&quot;." type="Error">
Error: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with &quot;testTimeout&quot;.
  tests/unit/backend/tokenBillingService.test.js:428:11
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; getMargins() &gt; should return all billing margins" time="0.001237417">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService &gt; getMargin() &gt; should return margin for specific source type" time="0.000404583">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/tokenLedger.enterprise.test.js" timestamp="2025-12-21T19:48:14.639Z" hostname="MacBook-Pro-Piotr.local" tests="7" failures="0" errors="0" skipped="0" time="0.243454875">
        <testcase classname="tests/unit/backend/tokenLedger.enterprise.test.js" name="Token Ledger Enterprise Tests &gt; Fail-Closed for TRIAL &gt; should deny access when org not found (fail-closed)" time="0.002959541">
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedger.enterprise.test.js" name="Token Ledger Enterprise Tests &gt; Fail-Closed for TRIAL &gt; should deny when TRIAL balance insufficient" time="0.000412042">
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedger.enterprise.test.js" name="Token Ledger Enterprise Tests &gt; Fail-Closed for TRIAL &gt; should allow when TRIAL balance is sufficient" time="0.000233292">
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedger.enterprise.test.js" name="Token Ledger Enterprise Tests &gt; PAYGO Trigger &gt; should flag paygoTriggered when ACTIVE org has low balance" time="0.00043325">
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedger.enterprise.test.js" name="Token Ledger Enterprise Tests &gt; Atomicity - Ledger Fail Rolls Back &gt; getOrgBalance uses async pattern" time="0.0007125">
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedger.enterprise.test.js" name="Token Ledger Enterprise Tests &gt; Atomicity - Ledger Fail Rolls Back &gt; getOrgBalance throws on missing org" time="0.001133291">
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedger.enterprise.test.js" name="Token Ledger Enterprise Tests &gt; Ledger Summary &gt; returns aggregated values" time="0.000304584">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/tokenLedgerService.test.js" timestamp="2025-12-21T19:48:14.640Z" hostname="MacBook-Pro-Piotr.local" tests="7" failures="1" errors="0" skipped="0" time="15.20183825">
        <testcase classname="tests/unit/backend/tokenLedgerService.test.js" name="TokenBillingService - Ledger Functionality &gt; getOrgBalance &gt; should return organization balance and billing status" time="0.00338025">
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedgerService.test.js" name="TokenBillingService - Ledger Functionality &gt; hasOrgSufficientBalance &gt; should allow call when balance is sufficient" time="0.000350667">
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedgerService.test.js" name="TokenBillingService - Ledger Functionality &gt; hasOrgSufficientBalance &gt; should deny call when trial balance is insufficient" time="0.000253542">
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedgerService.test.js" name="TokenBillingService - Ledger Functionality &gt; getLedger &gt; should return ledger entries for organization" time="0.000433291">
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedgerService.test.js" name="TokenBillingService - Ledger Functionality &gt; getLedgerSummary &gt; should return aggregated ledger summary" time="0.000247791">
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedgerService.test.js" name="TokenBillingService - Ledger Functionality &gt; creditOrganization &gt; should add credit and create ledger entry" time="0.000270375">
        </testcase>
        <testcase classname="tests/unit/backend/tokenLedgerService.test.js" name="TokenBillingService - deductTokens with Ledger &gt; should create ledger entry when deducting from organization" time="15.0083545">
            <failure message="Test timed out in 15000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with &quot;testTimeout&quot;." type="Error">
Error: Test timed out in 15000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with &quot;testTimeout&quot;.
  tests/unit/backend/tokenLedgerService.test.js:228:7
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/usageService.test.js" timestamp="2025-12-21T19:48:14.640Z" hostname="MacBook-Pro-Piotr.local" tests="21" failures="0" errors="0" skipped="0" time="0.178733791">
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; recordTokenUsage() &gt; should record token usage" time="0.002712208">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; recordTokenUsage() &gt; should handle database errors" time="0.001033791">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; recordStorageUsage() &gt; should record storage usage" time="0.000299959">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; getCurrentUsage() &gt; should return current usage with token and storage limits" time="0.000319875">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; getCurrentUsage() &gt; should handle organizations without plan" time="0.000150125">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; getCurrentUsage() &gt; should calculate storage percentage correctly" time="0.000137833">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; getCurrentUsage() &gt; should ensure storage never goes below 0" time="0.000127958">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; checkQuota() &gt; should allow when quota available" time="0.00014075">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; checkQuota() &gt; should deny when quota exceeded and overage disabled" time="0.000109291">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; checkQuota() &gt; should allow when overage enabled even if quota exceeded" time="0.000120625">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; checkQuota() &gt; should allow unlimited when limit is 0" time="0.000089958">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; calculateOverage() &gt; should calculate overage charges correctly" time="0.000248125">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; calculateOverage() &gt; should return zero overage when within limits" time="0.000095875">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; updateUsageSummary() &gt; should create or update usage summary" time="0.000205292">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; getUsageHistory() &gt; should retrieve usage history" time="0.0002885">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; getUsageHistory() &gt; should respect limit parameter" time="0.000065625">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; getGlobalUsageStats() &gt; should return global usage statistics" time="0.0001235">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; checkProjectQuota() &gt; should check project storage quota" time="0.000131125">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; checkProjectQuota() &gt; should allow unlimited when limit is null" time="0.000069084">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; checkProjectQuota() &gt; should reject when project not found" time="0.000137667">
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; Multi-Tenant Isolation &gt; should filter usage by organization_id" time="0.000294333">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/webhookService.test.js" timestamp="2025-12-21T19:48:14.641Z" hostname="MacBook-Pro-Piotr.local" tests="21" failures="0" errors="0" skipped="0" time="0.353144166">
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; trigger() &gt; should trigger webhooks for matching event type" time="0.001665334">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; trigger() &gt; should return zero triggered when no webhooks match" time="0.000195334">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; trigger() &gt; should handle multiple webhooks" time="0.000180167">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; trigger() &gt; should handle webhook failures gracefully" time="0.000296792">
            <system-err>
[Webhook] Failed to send to https://example.com/webhook: Network error

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; trigger() &gt; should handle database errors" time="0.002425625">
            <system-err>
[Webhook] Query error: Error: Database error
    at Object.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/webhookService.test.js:144:26)
    at Object.Mock [as all] (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/spy/dist/index.js:285:34)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/webhookService.js:25:21
    at new Promise (&lt;anonymous&gt;)
    at WebhookService.trigger (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/webhookService.js:23:16)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/webhookService.test.js:147:41
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; trigger() &gt; should only trigger webhooks for specified organization" time="0.000154625">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; sendWebhook() &gt; should send webhook with correct headers" time="0.000183167">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; sendWebhook() &gt; should include payload in body" time="0.000306042">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; sendWebhook() &gt; should throw on non-ok response" time="0.000164584">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; sendSlackNotification() &gt; should send Slack notification" time="0.000828166">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; sendSlackNotification() &gt; should handle Slack API errors" time="0.000097083">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; sendSlackNotification() &gt; should handle network errors" time="0.000336167">
            <system-err>
[Slack] Notification failed: Error: Network error
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/webhookService.test.js:256:45
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; Multi-tenant Isolation &gt; should not leak webhooks between organizations" time="0.0001405">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; Multi-tenant Isolation &gt; should filter webhooks by organization_id" time="0.00006325">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; Multi-tenant Isolation &gt; should only query active webhooks" time="0.000064417">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; Security &gt; should generate HMAC signature for each webhook" time="0.00013375">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; Security &gt; should include event type in headers" time="0.000078375">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; Security &gt; should generate different signatures for different secrets" time="0.000110917">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; formatInitiativeMessage() &gt; should format initiative message correctly" time="0.00016375">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; formatTaskMessage() &gt; should format task message with status emoji" time="0.00013325">
        </testcase>
        <testcase classname="tests/unit/backend/webhookService.test.js" name="WebhookService &gt; formatTaskMessage() &gt; should handle completed status" time="0.000067042">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/adminMiddleware.test.js" timestamp="2025-12-21T19:48:14.642Z" hostname="MacBook-Pro-Piotr.local" tests="4" failures="0" errors="0" skipped="0" time="0.25562525">
        <testcase classname="tests/unit/backend/middleware/adminMiddleware.test.js" name="AdminMiddleware &gt; should call next() if user is admin" time="0.002126292">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/adminMiddleware.test.js" name="AdminMiddleware &gt; should call next() if user is superadmin" time="0.000369917">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/adminMiddleware.test.js" name="AdminMiddleware &gt; should return 403 if user is not admin" time="0.001047959">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/adminMiddleware.test.js" name="AdminMiddleware &gt; should return 401 if verify failed (bad signature)" time="0.000227667">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/auditLog.test.js" timestamp="2025-12-21T19:48:14.642Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.374074166">
        <testcase classname="tests/unit/backend/middleware/auditLog.test.js" name="AuditLog Middleware &gt; should call next() and override res.end" time="0.057005458">
            <system-out>
[Database] Selected: SQLite

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/middleware/auditLog.test.js" name="AuditLog Middleware &gt; should log activity when res.end is called for 2xx POST" time="0.064539375">
            <system-out>
[Database] Selected: SQLite

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/middleware/auditLog.test.js" name="AuditLog Middleware &gt; should NOT log for GET requests" time="0.004539">
            <system-out>
[Database] Selected: SQLite

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/authMiddleware.test.js" timestamp="2025-12-21T19:48:14.642Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0">
        <testcase classname="tests/unit/backend/middleware/authMiddleware.test.js" name="AuthMiddleware &gt; should return 403 if no token provided" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/authMiddleware.test.js" name="AuthMiddleware &gt; should return 401 if token expired" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/authMiddleware.test.js" name="AuthMiddleware &gt; should return 401 if token invalid" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/authMiddleware.test.js" name="AuthMiddleware &gt; should call next() if token valid and no revocation check needed (no jti)" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/authMiddleware.test.js" name="AuthMiddleware &gt; should check revocation if jti is present" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/authMiddleware.test.js" name="AuthMiddleware &gt; should return 401 if token is revoked" time="0">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/planLimits.test.js" timestamp="2025-12-21T19:48:14.643Z" hostname="MacBook-Pro-Piotr.local" tests="8" failures="0" errors="0" skipped="0" time="0.200571917">
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should return 403 if no organization found in user" time="0.006058625">
            <system-out>
[Database] Selected: SQLite

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should return 404 if organization does not exist in DB" time="0.002235666">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should allow request if within limit (Free plan)" time="0.0017225">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should block request if limit reached (Free plan)" time="0.001595042">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should allow request if within limit (Pro plan)" time="0.001772">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should treat trial status as pro plan" time="0.002313875">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should handle undefined limits gracefully (warn and allow)" time="0.000967917">
            <system-err>
Limit key unknown_limit_key not found for plan free

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should check max_members limit" time="0.001456833">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" timestamp="2025-12-21T19:48:14.643Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.2170835">
        <testcase classname="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" name="Project Quota Middleware (Integration) &gt; should skip check if no project_id provided" time="0.000981292">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" name="Project Quota Middleware (Integration) &gt; should allow request if quota is sufficient" time="0.001255166">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" name="Project Quota Middleware (Integration) &gt; should allow request if limit is NULL (unlimited)" time="0.000814042">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" name="Project Quota Middleware (Integration) &gt; should block 429 if quota exceeded" time="0.001809958">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" name="Project Quota Middleware (Integration) &gt; should cleanup temp file if quota exceeded" time="0.002064208">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" name="Project Quota Middleware (Integration) &gt; should handle errors gracefully (e.g. project not found)" time="0.001068334">
            <system-err>
Project quota check error: Error: Project not found
    at Statement.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/usageService.js:303:41)
    at Statement.replacement (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/node_modules/sqlite3/lib/trace.js:25:27)
    at Statement.replacement (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/node_modules/sqlite3/lib/trace.js:25:27)

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/quotaMiddleware.test.js" timestamp="2025-12-21T19:48:14.643Z" hostname="MacBook-Pro-Piotr.local" tests="8" failures="0" errors="0" skipped="0" time="0.255142541">
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceTokenQuota &gt; should return 401 if no orgId" time="0.00102675">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceTokenQuota &gt; should allow if usage is below limit" time="0.002178916">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceTokenQuota &gt; should block 429 if usage exceeds limit" time="0.00158025">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceTokenQuota &gt; should allow if overage is enabled even if exceeded" time="0.001801625">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceTokenQuota &gt; should set warning headers if &gt; 80%" time="0.002081083">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceStorageQuota &gt; should allow if allowed" time="0.001468917">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceStorageQuota &gt; should block 429 if exceeded" time="0.001593833">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; recordTokenUsageAfterResponse &gt; should insert usage record into DB" time="0.051421584">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/superAdminMiddleware.test.js" timestamp="2025-12-21T19:48:14.644Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.214207292">
        <testcase classname="tests/unit/backend/middleware/superAdminMiddleware.test.js" name="SuperAdminMiddleware &gt; should call next() if user is superadmin" time="0.002126917">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/superAdminMiddleware.test.js" name="SuperAdminMiddleware &gt; should return 403 if user is admin (not super)" time="0.001186791">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/superAdminMiddleware.test.js" name="SuperAdminMiddleware &gt; should return 401 if token is invalid (bad signature)" time="0.000277458">
        </testcase>
    </testsuite>
</testsuites>
