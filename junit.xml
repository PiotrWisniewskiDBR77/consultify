<?xml version="1.0" encoding="UTF-8" ?>
<testsuites name="vitest tests" tests="97" failures="0" errors="0" time="5.041663833">
    <testsuite name="tests/integration/api.test.ts" timestamp="2025-12-13T07:18:44.456Z" hostname="MacBook-Air-Piotr.local" tests="2" failures="0" errors="0" skipped="1" time="0.048379667">
        <testcase classname="tests/integration/api.test.ts" name="Integration Test: API Health &gt; GET /health should return 200 OK" time="0.047844875">
            <system-out>
[DB:83conl] Initializing database at :memory:
Connected to the SQLite database.
Created billing tables and seeded default subscription plans.
Seeded SuperAdmin and DBR77 Users.

Projects table created successfully (or already exists).

Database initialization complete.

            </system-out>
            <system-err>
Error: connect ECONNREFUSED 127.0.0.1:6379
[90m    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1637:16)[39m {
  errno: [33m-61[39m,
  code: [32m&apos;ECONNREFUSED&apos;[39m,
  syscall: [32m&apos;connect&apos;[39m,
  address: [32m&apos;127.0.0.1&apos;[39m,
  port: [33m6379[39m
}

            </system-err>
        </testcase>
        <testcase classname="tests/integration/api.test.ts" name="Integration Test: API Health &gt; GET /non-existent-route should return 404 (handled by catchall serving index.html)" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/apiFullFlow.test.js" timestamp="2025-12-13T07:18:44.457Z" hostname="MacBook-Air-Piotr.local" tests="3" failures="0" errors="0" skipped="2" time="0.099548083">
        <testcase classname="tests/integration/apiFullFlow.test.js" name="Integration Test: Full API Flow &gt; Project Lifecycle &gt; should create, read, update, and delete a project" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/apiFullFlow.test.js" name="Integration Test: Full API Flow &gt; Task Lifecycle &gt; should create and manage tasks" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/apiFullFlow.test.js" name="Integration Test: Full API Flow &gt; Session Management &gt; should save and retrieve session data" time="0.002704833">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/auth.test.js" timestamp="2025-12-13T07:18:44.458Z" hostname="MacBook-Air-Piotr.local" tests="4" failures="0" errors="0" skipped="0" time="0.357065625">
        <testcase classname="tests/integration/auth.test.js" name="Auth Integration &gt; should login successfully with valid credentials" time="0.044701334">
        </testcase>
        <testcase classname="tests/integration/auth.test.js" name="Auth Integration &gt; should fail with invalid credentials" time="0.019059834">
        </testcase>
        <testcase classname="tests/integration/auth.test.js" name="Auth Integration &gt; should require email and password" time="0.002664083">
        </testcase>
        <testcase classname="tests/integration/auth.test.js" name="Auth Integration &gt; should validate token via /api/auth/me" time="0.030510625">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/databaseHealth.test.js" timestamp="2025-12-13T07:18:44.458Z" hostname="MacBook-Air-Piotr.local" tests="11" failures="0" errors="0" skipped="4" time="0.015965083">
        <testcase classname="tests/integration/databaseHealth.test.js" name="Integration Test: Database Health &gt; Connection Health &gt; should connect to database successfully" time="0.000584959">
        </testcase>
        <testcase classname="tests/integration/databaseHealth.test.js" name="Integration Test: Database Health &gt; Connection Health &gt; should have all required tables" time="0.000764917">
        </testcase>
        <testcase classname="tests/integration/databaseHealth.test.js" name="Integration Test: Database Health &gt; Referential Integrity &gt; should enforce foreign key constraints" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/databaseHealth.test.js" name="Integration Test: Database Health &gt; Referential Integrity &gt; should cascade delete correctly" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/databaseHealth.test.js" name="Integration Test: Database Health &gt; Query Performance &gt; should execute simple SELECT queries quickly" time="0.000119958">
        </testcase>
        <testcase classname="tests/integration/databaseHealth.test.js" name="Integration Test: Database Health &gt; Query Performance &gt; should execute JOIN queries efficiently" time="0.000139584">
        </testcase>
        <testcase classname="tests/integration/databaseHealth.test.js" name="Integration Test: Database Health &gt; Query Performance &gt; should handle concurrent queries" time="0.000352709">
        </testcase>
        <testcase classname="tests/integration/databaseHealth.test.js" name="Integration Test: Database Health &gt; Transaction Integrity &gt; should commit transactions successfully" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/databaseHealth.test.js" name="Integration Test: Database Health &gt; Transaction Integrity &gt; should rollback transactions on error" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/databaseHealth.test.js" name="Integration Test: Database Health &gt; Data Consistency &gt; should prevent duplicate emails" time="0.000730583">
        </testcase>
        <testcase classname="tests/integration/databaseHealth.test.js" name="Integration Test: Database Health &gt; Data Consistency &gt; should maintain referential integrity on updates" time="0.000335458">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/initiatives.test.js" timestamp="2025-12-13T07:18:44.459Z" hostname="MacBook-Air-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.309930833">
        <testcase classname="tests/integration/initiatives.test.js" name="Initiatives Integration &gt; should list initiatives" time="0.002923708">
        </testcase>
        <testcase classname="tests/integration/initiatives.test.js" name="Initiatives Integration &gt; should create an initiative" time="0.00183575">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/llmHealth.test.js" timestamp="2025-12-13T07:18:44.459Z" hostname="MacBook-Air-Piotr.local" tests="11" failures="0" errors="0" skipped="7" time="0.558677375">
        <testcase classname="tests/integration/llmHealth.test.js" name="Integration Test: LLM Health &gt; Connection Tests &gt; should test provider connection successfully" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/llmHealth.test.js" name="Integration Test: LLM Health &gt; Connection Tests &gt; should handle connection timeout gracefully" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/llmHealth.test.js" name="Integration Test: LLM Health &gt; Connection Tests &gt; should handle invalid provider gracefully" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/llmHealth.test.js" name="Integration Test: LLM Health &gt; Latency Tests &gt; should measure LLM call latency" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/llmHealth.test.js" name="Integration Test: LLM Health &gt; Latency Tests &gt; should handle concurrent LLM calls" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/llmHealth.test.js" name="Integration Test: LLM Health &gt; Quality Tests &gt; should respect system instructions" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/llmHealth.test.js" name="Integration Test: LLM Health &gt; Quality Tests &gt; should handle context history correctly" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/llmHealth.test.js" name="Integration Test: LLM Health &gt; Error Handling &gt; should handle API errors gracefully" time="0.223868834">
            <system-out>
[AiService] Testing connection for: openai

            </system-out>
            <system-err>
Test connection failed: AuthenticationError: 401 Incorrect API key provided: invalid-*****2345. You can find your API key at https://platform.openai.com/account/api-keys.
    at APIError.generate [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mopenai[24m/core/error.js:48:20[90m)[39m
    at OpenAI.makeStatusError [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mopenai[24m/client.js:165:32[90m)[39m
    at OpenAI.makeRequest [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mopenai[24m/client.js:333:30[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Object.testProviderConnection [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/services/aiService.js:769:36[90m)[39m
    at [90m/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mtests/integration/llmHealth.test.js:238:28
    at [90mfile:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20 {
  status: [33m401[39m,
  headers: Headers {
    date: [32m&apos;Sat, 13 Dec 2025 07:18:32 GMT&apos;[39m,
    [32m&apos;content-type&apos;[39m: [32m&apos;application/json; charset=utf-8&apos;[39m,
    [32m&apos;content-length&apos;[39m: [32m&apos;267&apos;[39m,
    connection: [32m&apos;keep-alive&apos;[39m,
    vary: [32m&apos;Origin&apos;[39m,
    [32m&apos;x-request-id&apos;[39m: [32m&apos;req_268ce29e24b24945ab03b0ca2f709cf4&apos;[39m,
    [32m&apos;x-envoy-upstream-service-time&apos;[39m: [32m&apos;1&apos;[39m,
    [32m&apos;x-openai-proxy-wasm&apos;[39m: [32m&apos;v0.1&apos;[39m,
    [32m&apos;cf-cache-status&apos;[39m: [32m&apos;DYNAMIC&apos;[39m,
    [32m&apos;set-cookie&apos;[39m: [32m&apos;__cf_bm=51KmV5UNoSLJ0Q2SEXTIyGQdNxc304d6.hhJ2sKYdvE-1765610312-1.0.1.1-6Uwo0WcwJUv..bYIBe5bEUbp2hCEfxRSEEPFPh2lkbb8JpezfijXvmkPIVxMkaSUiMcMG9syGNUGZmFzli18.Cffl_yPckaO9HPOJ4aZ0fo; path=/; expires=Sat, 13-Dec-25 07:48:32 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None, _cfuvid=TptNrktK11jqaFbH9wbVeHcPZkH02RvuTudSufSVTq4-1765610312390-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None&apos;[39m,
    [32m&apos;strict-transport-security&apos;[39m: [32m&apos;max-age=31536000; includeSubDomains; preload&apos;[39m,
    [32m&apos;x-content-type-options&apos;[39m: [32m&apos;nosniff&apos;[39m,
    server: [32m&apos;cloudflare&apos;[39m,
    [32m&apos;cf-ray&apos;[39m: [32m&apos;9ad3b02379e4c385-WAW&apos;[39m,
    [32m&apos;alt-svc&apos;[39m: [32m&apos;h3=&quot;:443&quot;; ma=86400&apos;[39m
  },
  requestID: [32m&apos;req_268ce29e24b24945ab03b0ca2f709cf4&apos;[39m,
  error: {
    message: [32m&apos;Incorrect API key provided: invalid-*****2345. You can find your API key at https://platform.openai.com/account/api-keys.&apos;[39m,
    type: [32m&apos;invalid_request_error&apos;[39m,
    param: [1mnull[22m,
    code: [32m&apos;invalid_api_key&apos;[39m
  },
  code: [32m&apos;invalid_api_key&apos;[39m,
  param: [1mnull[22m,
  type: [32m&apos;invalid_request_error&apos;[39m
}

            </system-err>
        </testcase>
        <testcase classname="tests/integration/llmHealth.test.js" name="Integration Test: LLM Health &gt; Error Handling &gt; should handle rate limiting" time="0.212455459">
            <system-out>
[AiService] Testing connection for: openai

            </system-out>
            <system-err>
Test connection failed: AuthenticationError: 401 Incorrect API key provided: test-key. You can find your API key at https://platform.openai.com/account/api-keys.
    at APIError.generate [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mopenai[24m/core/error.js:48:20[90m)[39m
    at OpenAI.makeStatusError [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mopenai[24m/client.js:165:32[90m)[39m
    at OpenAI.makeRequest [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mopenai[24m/client.js:333:30[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Object.testProviderConnection [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/services/aiService.js:769:36[90m)[39m
    at [90m/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mtests/integration/llmHealth.test.js:255:17
    at [90mfile:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20 {
  status: [33m401[39m,
  headers: Headers {
    date: [32m&apos;Sat, 13 Dec 2025 07:18:32 GMT&apos;[39m,
    [32m&apos;content-type&apos;[39m: [32m&apos;application/json; charset=utf-8&apos;[39m,
    [32m&apos;content-length&apos;[39m: [32m&apos;258&apos;[39m,
    connection: [32m&apos;keep-alive&apos;[39m,
    vary: [32m&apos;Origin&apos;[39m,
    [32m&apos;x-request-id&apos;[39m: [32m&apos;req_04c5c1901e5247f5ba643a2c67483997&apos;[39m,
    [32m&apos;x-envoy-upstream-service-time&apos;[39m: [32m&apos;1&apos;[39m,
    [32m&apos;x-openai-proxy-wasm&apos;[39m: [32m&apos;v0.1&apos;[39m,
    [32m&apos;cf-cache-status&apos;[39m: [32m&apos;DYNAMIC&apos;[39m,
    [32m&apos;set-cookie&apos;[39m: [32m&apos;__cf_bm=nG8PndzGe0uZ9Z9vN9JRWxmWkWIK.bLU6lrhqBsEFEI-1765610312-1.0.1.1-NXujWCjiKpim21cQcAeCZzEv5N9TAUUP.6DJHD7WEuUn6qK8CMj9FyuUFeC3BXV5pH1GsF81aQI8fu0j8T2UP7mVYU1I5yxd6zPna5i.yXU; path=/; expires=Sat, 13-Dec-25 07:48:32 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None, _cfuvid=OWaTUx48jNG1ChQdfE3j7AlB53DUs4NLmrOzwtLbR9k-1765610312607-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None&apos;[39m,
    [32m&apos;strict-transport-security&apos;[39m: [32m&apos;max-age=31536000; includeSubDomains; preload&apos;[39m,
    [32m&apos;x-content-type-options&apos;[39m: [32m&apos;nosniff&apos;[39m,
    server: [32m&apos;cloudflare&apos;[39m,
    [32m&apos;cf-ray&apos;[39m: [32m&apos;9ad3b024dbb8ecc2-WAW&apos;[39m,
    [32m&apos;alt-svc&apos;[39m: [32m&apos;h3=&quot;:443&quot;; ma=86400&apos;[39m
  },
  requestID: [32m&apos;req_04c5c1901e5247f5ba643a2c67483997&apos;[39m,
  error: {
    message: [32m&apos;Incorrect API key provided: test-key. You can find your API key at https://platform.openai.com/account/api-keys.&apos;[39m,
    type: [32m&apos;invalid_request_error&apos;[39m,
    param: [1mnull[22m,
    code: [32m&apos;invalid_api_key&apos;[39m
  },
  code: [32m&apos;invalid_api_key&apos;[39m,
  param: [1mnull[22m,
  type: [32m&apos;invalid_request_error&apos;[39m
}

            </system-err>
        </testcase>
        <testcase classname="tests/integration/llmHealth.test.js" name="Integration Test: LLM Health &gt; Provider Configuration &gt; should retrieve provider from database" time="0.000549583">
        </testcase>
        <testcase classname="tests/integration/llmHealth.test.js" name="Integration Test: LLM Health &gt; Provider Configuration &gt; should handle missing provider gracefully" time="0.0003925">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/megatrend.test.js" timestamp="2025-12-13T07:18:44.461Z" hostname="MacBook-Air-Piotr.local" tests="4" failures="0" errors="0" skipped="0" time="0.684599792">
        <testcase classname="tests/integration/megatrend.test.js" name="Megatrend Integration &gt; should fetch baseline megatrends" time="0.004322583">
        </testcase>
        <testcase classname="tests/integration/megatrend.test.js" name="Megatrend Integration &gt; should fetch radar data" time="0.00210375">
        </testcase>
        <testcase classname="tests/integration/megatrend.test.js" name="Megatrend Integration &gt; should fetch megatrend detail by ID" time="0.003005042">
        </testcase>
        <testcase classname="tests/integration/megatrend.test.js" name="Megatrend Integration &gt; should create and manage custom trend" time="0.002446208">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/projects.test.js" timestamp="2025-12-13T07:18:44.461Z" hostname="MacBook-Air-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.453960542">
        <testcase classname="tests/integration/projects.test.js" name="Projects Integration &gt; should create a new project" time="0.003530792">
        </testcase>
        <testcase classname="tests/integration/projects.test.js" name="Projects Integration &gt; should list projects" time="0.001726584">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/storage_security.test.js" timestamp="2025-12-13T07:18:44.461Z" hostname="MacBook-Air-Piotr.local" tests="4" failures="0" errors="0" skipped="0" time="0.995372458">
        <testcase classname="tests/integration/storage_security.test.js" name="Storage Security &amp; Isolation Integration &gt; should NOT allow User B to see files uploaded by User A" time="0.009576834">
        </testcase>
        <testcase classname="tests/integration/storage_security.test.js" name="Storage Security &amp; Isolation Integration &gt; should block upload if project storage limit is exceeded" time="0.055107375">
        </testcase>
        <testcase classname="tests/integration/storage_security.test.js" name="Storage Security &amp; Isolation Integration &gt; should sanitize filenames preventing directory traversal" time="0.001063875">
        </testcase>
        <testcase classname="tests/integration/storage_security.test.js" name="Storage Security &amp; Isolation Integration &gt; should soft delete files instead of removing them immediately" time="0.583250375">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/tasks.test.js" timestamp="2025-12-13T07:18:44.461Z" hostname="MacBook-Air-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.455372541">
        <testcase classname="tests/integration/tasks.test.js" name="Tasks Integration &gt; should list tasks" time="0.002857125">
        </testcase>
        <testcase classname="tests/integration/tasks.test.js" name="Tasks Integration &gt; should create a task" time="0.001816958">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/transaction.test.js" timestamp="2025-12-13T07:18:44.462Z" hostname="MacBook-Air-Piotr.local" tests="4" failures="0" errors="0" skipped="4" time="0">
        <testcase classname="tests/integration/transaction.test.js" name="Integration Test: Database Transactions &gt; Transaction Commit &gt; should commit multi-step transaction successfully" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/transaction.test.js" name="Integration Test: Database Transactions &gt; Transaction Rollback &gt; should rollback transaction on error" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/transaction.test.js" name="Integration Test: Database Transactions &gt; Nested Transactions &gt; should handle savepoints correctly" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/transaction.test.js" name="Integration Test: Database Transactions &gt; Concurrent Transactions &gt; should handle concurrent transactions without deadlock" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/backend/planLimits.test.js" timestamp="2025-12-13T07:18:44.462Z" hostname="MacBook-Air-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.061509834">
        <testcase classname="tests/integration/backend/planLimits.test.js" name="Plan Limits Integration &gt; should prevent creating more projects than allowed by Free plan" time="0.013124709">
        </testcase>
        <testcase classname="tests/integration/backend/planLimits.test.js" name="Plan Limits Integration &gt; should allow creating more projects after upgrade" time="0.001235083">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/routes/analytics.test.js" timestamp="2025-12-13T07:18:44.462Z" hostname="MacBook-Air-Piotr.local" tests="4" failures="0" errors="0" skipped="4" time="0">
        <testcase classname="tests/integration/routes/analytics.test.js" name="Integration Test: Analytics Routes &gt; GET /api/analytics/stats &gt; should return analytics statistics" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/routes/analytics.test.js" name="Integration Test: Analytics Routes &gt; GET /api/analytics/stats &gt; should require authentication" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/routes/analytics.test.js" name="Integration Test: Analytics Routes &gt; GET /api/analytics/usage &gt; should return usage analytics" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/routes/analytics.test.js" name="Integration Test: Analytics Routes &gt; GET /api/analytics/maturity &gt; should return maturity scores" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/routes/billing.test.js" timestamp="2025-12-13T07:18:44.463Z" hostname="MacBook-Air-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.096430875">
        <testcase classname="tests/integration/routes/billing.test.js" name="Integration Test: Billing Routes &gt; GET /api/billing/plans &gt; should return list of subscription plans" time="0.003035042">
        </testcase>
        <testcase classname="tests/integration/routes/billing.test.js" name="Integration Test: Billing Routes &gt; GET /api/billing/plans &gt; should return plans without authentication" time="0.001519708">
        </testcase>
        <testcase classname="tests/integration/routes/billing.test.js" name="Integration Test: Billing Routes &gt; GET /api/billing/user-plans &gt; should return user license plans" time="0.000899083">
        </testcase>
        <testcase classname="tests/integration/routes/billing.test.js" name="Integration Test: Billing Routes &gt; GET /api/billing/usage &gt; should return usage statistics" time="0.001050667">
        </testcase>
        <testcase classname="tests/integration/routes/billing.test.js" name="Integration Test: Billing Routes &gt; GET /api/billing/invoices &gt; should return invoices list" time="0.000700667">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/routes/feedback.test.js" timestamp="2025-12-13T07:18:44.463Z" hostname="MacBook-Air-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.088179417">
        <testcase classname="tests/integration/routes/feedback.test.js" name="Integration Test: Feedback Routes &gt; POST /api/feedback &gt; should submit feedback" time="0.002024834">
        </testcase>
        <testcase classname="tests/integration/routes/feedback.test.js" name="Integration Test: Feedback Routes &gt; POST /api/feedback &gt; should require authentication" time="0.0010645">
        </testcase>
        <testcase classname="tests/integration/routes/feedback.test.js" name="Integration Test: Feedback Routes &gt; GET /api/feedback &gt; should return feedback list (admin only)" time="0.001051666">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/routes/llm.test.js" timestamp="2025-12-13T07:18:44.464Z" hostname="MacBook-Air-Piotr.local" tests="7" failures="0" errors="0" skipped="0" time="0.410810541">
        <testcase classname="tests/integration/routes/llm.test.js" name="Integration Test: LLM Routes &gt; GET /api/llm/providers &gt; should return list of LLM providers" time="0.0121485">
        </testcase>
        <testcase classname="tests/integration/routes/llm.test.js" name="Integration Test: LLM Routes &gt; GET /api/llm/providers &gt; should require authentication" time="0.048729625">
        </testcase>
        <testcase classname="tests/integration/routes/llm.test.js" name="Integration Test: LLM Routes &gt; GET /api/llm/providers/public &gt; should return public providers" time="0.001913083">
        </testcase>
        <testcase classname="tests/integration/routes/llm.test.js" name="Integration Test: LLM Routes &gt; POST /api/llm/test &gt; should test provider connection" time="0.279472625">
            <system-out>
[AiService] Testing connection for: openai

            </system-out>
            <system-err>
Test connection failed: AuthenticationError: 401 Incorrect API key provided: test-key. You can find your API key at https://platform.openai.com/account/api-keys.
    at APIError.generate [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mopenai[24m/core/error.js:48:20[90m)[39m
    at OpenAI.makeStatusError [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mopenai[24m/client.js:165:32[90m)[39m
    at OpenAI.makeRequest [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mopenai[24m/client.js:333:30[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at Object.testProviderConnection [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/services/aiService.js:769:36[90m)[39m
    at [90m/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/routes/llm.js:119:24 {
  status: [33m401[39m,
  headers: Headers {
    date: [32m&apos;Sat, 13 Dec 2025 07:18:34 GMT&apos;[39m,
    [32m&apos;content-type&apos;[39m: [32m&apos;application/json; charset=utf-8&apos;[39m,
    [32m&apos;content-length&apos;[39m: [32m&apos;258&apos;[39m,
    connection: [32m&apos;keep-alive&apos;[39m,
    vary: [32m&apos;Origin&apos;[39m,
    [32m&apos;x-request-id&apos;[39m: [32m&apos;req_a3a01abc4d1a4358b902d5632836d510&apos;[39m,
    [32m&apos;x-envoy-upstream-service-time&apos;[39m: [32m&apos;0&apos;[39m,
    [32m&apos;x-openai-proxy-wasm&apos;[39m: [32m&apos;v0.1&apos;[39m,
    [32m&apos;cf-cache-status&apos;[39m: [32m&apos;DYNAMIC&apos;[39m,
    [32m&apos;set-cookie&apos;[39m: [32m&apos;__cf_bm=AbB9rxwehY8prDYa0OY.iHwt2P21OTR5aUypvRLC88A-1765610314-1.0.1.1-vCAY1_F51N8AtfTmBtIP5FqQEgH6PU2iJBOr_MCvsTYXdfw.tZtq.eVnMiTJ0X43F6.03KnJ6DNN6kxF.y_TETO4AwoLTS0SVJXzR_dIVC4; path=/; expires=Sat, 13-Dec-25 07:48:34 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None, _cfuvid=GfAZtJLRGwXbeF258flj14T5fHsqetUMmAidsPfgKnw-1765610314775-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None&apos;[39m,
    [32m&apos;strict-transport-security&apos;[39m: [32m&apos;max-age=31536000; includeSubDomains; preload&apos;[39m,
    [32m&apos;x-content-type-options&apos;[39m: [32m&apos;nosniff&apos;[39m,
    server: [32m&apos;cloudflare&apos;[39m,
    [32m&apos;cf-ray&apos;[39m: [32m&apos;9ad3b0323d3eee45-WAW&apos;[39m,
    [32m&apos;alt-svc&apos;[39m: [32m&apos;h3=&quot;:443&quot;; ma=86400&apos;[39m
  },
  requestID: [32m&apos;req_a3a01abc4d1a4358b902d5632836d510&apos;[39m,
  error: {
    message: [32m&apos;Incorrect API key provided: test-key. You can find your API key at https://platform.openai.com/account/api-keys.&apos;[39m,
    type: [32m&apos;invalid_request_error&apos;[39m,
    param: [1mnull[22m,
    code: [32m&apos;invalid_api_key&apos;[39m
  },
  code: [32m&apos;invalid_api_key&apos;[39m,
  param: [1mnull[22m,
  type: [32m&apos;invalid_request_error&apos;[39m
}

            </system-err>
        </testcase>
        <testcase classname="tests/integration/routes/llm.test.js" name="Integration Test: LLM Routes &gt; POST /api/llm/test &gt; should handle invalid provider" time="0.001463584">
            <system-out>
[AiService] Testing connection for: invalid-provider

            </system-out>
            <system-err>
Test connection failed: Error: Provider invalid-provider testing not implemented yet.
    at Object.testProviderConnection [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/services/aiService.js:831:23[90m)[39m
    at [90m/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/routes/llm.js:119:40
    at Layer.handleRequest [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mrouter[24m/lib/layer.js:152:17[90m)[39m
    at next [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mrouter[24m/lib/route.js:157:13[90m)[39m
    at Route.dispatch [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mrouter[24m/lib/route.js:117:3[90m)[39m
    at handle [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mrouter[24m/index.js:435:11[90m)[39m
    at Layer.handleRequest [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mrouter[24m/lib/layer.js:152:17[90m)[39m
    at [90m/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mrouter[24m/index.js:295:15
    at processParams [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mrouter[24m/index.js:582:12[90m)[39m
    at next [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mrouter[24m/index.js:291:5[90m)[39m

            </system-err>
        </testcase>
        <testcase classname="tests/integration/routes/llm.test.js" name="Integration Test: LLM Routes &gt; POST /api/llm/test-ollama &gt; should test Ollama connection" time="0.000868333">
        </testcase>
        <testcase classname="tests/integration/routes/llm.test.js" name="Integration Test: LLM Routes &gt; GET /api/llm/ollama-models &gt; should return Ollama models" time="0.000925541">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/routes/notifications.test.js" timestamp="2025-12-13T07:18:44.464Z" hostname="MacBook-Air-Piotr.local" tests="6" failures="0" errors="0" skipped="6" time="0">
        <testcase classname="tests/integration/routes/notifications.test.js" name="Integration Test: Notifications Routes &gt; GET /api/notifications &gt; should return user notifications" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/routes/notifications.test.js" name="Integration Test: Notifications Routes &gt; GET /api/notifications &gt; should require authentication" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/routes/notifications.test.js" name="Integration Test: Notifications Routes &gt; GET /api/notifications/unread &gt; should return unread notifications count" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/routes/notifications.test.js" name="Integration Test: Notifications Routes &gt; PUT /api/notifications/:id/read &gt; should mark notification as read" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/routes/notifications.test.js" name="Integration Test: Notifications Routes &gt; PUT /api/notifications/read-all &gt; should mark all notifications as read" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/routes/notifications.test.js" name="Integration Test: Notifications Routes &gt; DELETE /api/notifications/:id &gt; should delete notification" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/routes/sessions.test.js" timestamp="2025-12-13T07:18:44.465Z" hostname="MacBook-Air-Piotr.local" tests="5" failures="0" errors="0" skipped="5" time="0">
        <testcase classname="tests/integration/routes/sessions.test.js" name="Integration Test: Sessions Routes &gt; GET /api/sessions &gt; should return user sessions" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/routes/sessions.test.js" name="Integration Test: Sessions Routes &gt; GET /api/sessions &gt; should require authentication" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/routes/sessions.test.js" name="Integration Test: Sessions Routes &gt; POST /api/sessions &gt; should create a new session" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/routes/sessions.test.js" name="Integration Test: Sessions Routes &gt; GET /api/sessions/:userId &gt; should return session by user id" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/routes/sessions.test.js" name="Integration Test: Sessions Routes &gt; PUT /api/sessions/:id &gt; should update session" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/routes/settings.test.js" timestamp="2025-12-13T07:18:44.465Z" hostname="MacBook-Air-Piotr.local" tests="3" failures="0" errors="0" skipped="3" time="0">
        <testcase classname="tests/integration/routes/settings.test.js" name="Integration Test: Settings Routes &gt; GET /api/settings &gt; should return user settings" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/routes/settings.test.js" name="Integration Test: Settings Routes &gt; GET /api/settings &gt; should require authentication" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/routes/settings.test.js" name="Integration Test: Settings Routes &gt; PUT /api/settings &gt; should update user settings" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/routes/teams.test.js" timestamp="2025-12-13T07:18:44.465Z" hostname="MacBook-Air-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.095123958">
        <testcase classname="tests/integration/routes/teams.test.js" name="Integration Test: Teams Routes &gt; GET /api/teams &gt; should return list of teams" time="0.002488">
        </testcase>
        <testcase classname="tests/integration/routes/teams.test.js" name="Integration Test: Teams Routes &gt; GET /api/teams &gt; should require authentication" time="0.00119675">
        </testcase>
        <testcase classname="tests/integration/routes/teams.test.js" name="Integration Test: Teams Routes &gt; POST /api/teams &gt; should create a new team" time="0.001475833">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/routes/tokenBilling.test.js" timestamp="2025-12-13T07:18:44.466Z" hostname="MacBook-Air-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.136844209">
        <testcase classname="tests/integration/routes/tokenBilling.test.js" name="Integration Test: Token Billing Routes &gt; GET /api/token-billing/balance &gt; should return user token balance" time="0.002786042">
        </testcase>
        <testcase classname="tests/integration/routes/tokenBilling.test.js" name="Integration Test: Token Billing Routes &gt; GET /api/token-billing/balance &gt; should require authentication" time="0.001451833">
        </testcase>
        <testcase classname="tests/integration/routes/tokenBilling.test.js" name="Integration Test: Token Billing Routes &gt; GET /api/token-billing/packages &gt; should return available token packages" time="0.001164792">
        </testcase>
        <testcase classname="tests/integration/routes/tokenBilling.test.js" name="Integration Test: Token Billing Routes &gt; GET /api/token-billing/transactions &gt; should return token usage history" time="0.001193958">
        </testcase>
        <testcase classname="tests/integration/routes/tokenBilling.test.js" name="Integration Test: Token Billing Routes &gt; GET /api/token-billing/margins &gt; should return margins (admin only)" time="0.001115542">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/routes/users.test.js" timestamp="2025-12-13T07:18:44.466Z" hostname="MacBook-Air-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.173893">
        <testcase classname="tests/integration/routes/users.test.js" name="Integration Test: Users Routes &gt; GET /api/users &gt; should return list of users" time="0.002893">
        </testcase>
        <testcase classname="tests/integration/routes/users.test.js" name="Integration Test: Users Routes &gt; GET /api/users &gt; should require authentication" time="0.001047666">
        </testcase>
        <testcase classname="tests/integration/routes/users.test.js" name="Integration Test: Users Routes &gt; GET /api/auth/me &gt; should return current user" time="0.001215541">
        </testcase>
        <testcase classname="tests/integration/routes/users.test.js" name="Integration Test: Users Routes &gt; GET /api/users/:id &gt; should return user by id" time="0.003650916">
        </testcase>
        <testcase classname="tests/integration/routes/users.test.js" name="Integration Test: Users Routes &gt; PUT /api/users/:id &gt; should update user" time="0.001482583">
        </testcase>
    </testsuite>
</testsuites>
