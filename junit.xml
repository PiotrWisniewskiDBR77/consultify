<?xml version="1.0" encoding="UTF-8" ?>
<testsuites name="vitest tests" tests="135" failures="0" errors="0" time="5.70903642">
    <testsuite name="tests/integration/aiFailure.test.js" timestamp="2025-12-20T18:00:39.489Z" hostname="MacBook-Pro-Piotr.local" tests="7" failures="0" errors="0" skipped="0" time="0.002739875">
        <testcase classname="tests/integration/aiFailure.test.js" name="AI Failure Resilience &gt; PMO Routes Without AI &gt; should return initiatives even when AI service fails" time="0.000626292">
        </testcase>
        <testcase classname="tests/integration/aiFailure.test.js" name="AI Failure Resilience &gt; PMO Routes Without AI &gt; should return tasks when AI context fails" time="0.000163708">
        </testcase>
        <testcase classname="tests/integration/aiFailure.test.js" name="AI Failure Resilience &gt; PMO Routes Without AI &gt; should handle stage gate evaluation without AI" time="0.000086208">
        </testcase>
        <testcase classname="tests/integration/aiFailure.test.js" name="AI Failure Resilience &gt; PMO Routes Without AI &gt; should allow status transitions without AI policy check failure" time="0.000089833">
        </testcase>
        <testcase classname="tests/integration/aiFailure.test.js" name="AI Failure Resilience &gt; PMO Routes Without AI &gt; should serve My Work aggregation without AI" time="0.000079333">
        </testcase>
        <testcase classname="tests/integration/aiFailure.test.js" name="AI Failure Resilience &gt; Graceful Degradation &gt; should return default context when AI memory fails" time="0.000074">
        </testcase>
        <testcase classname="tests/integration/aiFailure.test.js" name="AI Failure Resilience &gt; Graceful Degradation &gt; should log AI failures for monitoring" time="0.00104675">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/aiLayersIntegration.test.js" timestamp="2025-12-20T18:00:39.490Z" hostname="MacBook-Pro-Piotr.local" tests="23" failures="0" errors="0" skipped="0" time="0.03853225">
        <testcase classname="tests/integration/aiLayersIntegration.test.js" name="AI PMO Intelligence Integration &gt; AI-6: Decision Governance &gt; should have decision types defined" time="0.000501709">
        </testcase>
        <testcase classname="tests/integration/aiLayersIntegration.test.js" name="AI PMO Intelligence Integration &gt; AI-6: Decision Governance &gt; should have decision status defined" time="0.000087625">
        </testcase>
        <testcase classname="tests/integration/aiLayersIntegration.test.js" name="AI PMO Intelligence Integration &gt; AI-6: Decision Governance &gt; should have core functions exported" time="0.000084625">
        </testcase>
        <testcase classname="tests/integration/aiLayersIntegration.test.js" name="AI PMO Intelligence Integration &gt; AI-7: Risk &amp; Change Control &gt; should have 5 risk types" time="0.000413459">
        </testcase>
        <testcase classname="tests/integration/aiLayersIntegration.test.js" name="AI PMO Intelligence Integration &gt; AI-7: Risk &amp; Change Control &gt; should track scope changes" time="0.000877333">
        </testcase>
        <testcase classname="tests/integration/aiLayersIntegration.test.js" name="AI PMO Intelligence Integration &gt; AI-7: Risk &amp; Change Control &gt; should detect uncontrolled changes" time="0.00031775">
        </testcase>
        <testcase classname="tests/integration/aiLayersIntegration.test.js" name="AI PMO Intelligence Integration &gt; AI-8: Workload Intelligence &gt; should have correct workload status levels" time="0.000089834">
        </testcase>
        <testcase classname="tests/integration/aiLayersIntegration.test.js" name="AI PMO Intelligence Integration &gt; AI-8: Workload Intelligence &gt; should have burnout risk levels" time="0.00005725">
        </testcase>
        <testcase classname="tests/integration/aiLayersIntegration.test.js" name="AI PMO Intelligence Integration &gt; AI-8: Workload Intelligence &gt; should suggest rebalancing without auto-reassigning" time="0.000050333">
        </testcase>
        <testcase classname="tests/integration/aiLayersIntegration.test.js" name="AI PMO Intelligence Integration &gt; AI-9: Maturity Monitor &gt; should have 5 maturity dimensions" time="0.000256334">
        </testcase>
        <testcase classname="tests/integration/aiLayersIntegration.test.js" name="AI PMO Intelligence Integration &gt; AI-9: Maturity Monitor &gt; should have 5 maturity levels (CMMI-like)" time="0.000060666">
        </testcase>
        <testcase classname="tests/integration/aiLayersIntegration.test.js" name="AI PMO Intelligence Integration &gt; AI-9: Maturity Monitor &gt; should log discipline events" time="0.00017225">
        </testcase>
        <testcase classname="tests/integration/aiLayersIntegration.test.js" name="AI PMO Intelligence Integration &gt; AI-10: Executive Reporting &gt; should have report types" time="0.000041209">
        </testcase>
        <testcase classname="tests/integration/aiLayersIntegration.test.js" name="AI PMO Intelligence Integration &gt; AI-10: Executive Reporting &gt; should have status indicators" time="0.000032917">
        </testcase>
        <testcase classname="tests/integration/aiLayersIntegration.test.js" name="AI PMO Intelligence Integration &gt; AI-10: Executive Reporting &gt; should translate data to narrative" time="0.000107">
        </testcase>
        <testcase classname="tests/integration/aiLayersIntegration.test.js" name="AI PMO Intelligence Integration &gt; AI-11: Failure Handler &gt; should have failure scenarios" time="0.000032041">
        </testcase>
        <testcase classname="tests/integration/aiLayersIntegration.test.js" name="AI PMO Intelligence Integration &gt; AI-11: Failure Handler &gt; should provide graceful degradation" time="0.000078416">
        </testcase>
        <testcase classname="tests/integration/aiLayersIntegration.test.js" name="AI PMO Intelligence Integration &gt; AI-11: Failure Handler &gt; should explain failures user-friendly" time="0.000062833">
        </testcase>
        <testcase classname="tests/integration/aiLayersIntegration.test.js" name="AI PMO Intelligence Integration &gt; AI-11: Failure Handler &gt; should check availability" time="0.000128334">
        </testcase>
        <testcase classname="tests/integration/aiLayersIntegration.test.js" name="AI PMO Intelligence Integration &gt; AI-11: Failure Handler &gt; should support non-blocking execution" time="0.000061625">
        </testcase>
        <testcase classname="tests/integration/aiLayersIntegration.test.js" name="AI PMO Intelligence Integration &gt; AI-11: Failure Handler &gt; should fallback to default on failure" time="0.000267916">
        </testcase>
        <testcase classname="tests/integration/aiLayersIntegration.test.js" name="AI PMO Intelligence Integration &gt; Cross-Layer Integration &gt; should have all layers exportable" time="0.000437042">
        </testcase>
        <testcase classname="tests/integration/aiLayersIntegration.test.js" name="AI PMO Intelligence Integration &gt; Cross-Layer Integration &gt; should have all database tables exist" time="0.00091775">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/api.test.ts" timestamp="2025-12-20T18:00:39.492Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="1" time="0.04323275">
        <testcase classname="tests/integration/api.test.ts" name="Integration Test: API Health &gt; GET /health should return 200 OK" time="0.042671">
            <system-out>
Projects table created successfully (or already exists).

Database initialization complete.

            </system-out>
        </testcase>
        <testcase classname="tests/integration/api.test.ts" name="Integration Test: API Health &gt; GET /non-existent-route should return 404 (handled by catchall serving index.html)" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/apiFullFlow.test.js" timestamp="2025-12-20T18:00:39.492Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="2" time="0.098803667">
        <testcase classname="tests/integration/apiFullFlow.test.js" name="Integration Test: Full API Flow &gt; Project Lifecycle &gt; should create, read, update, and delete a project" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/apiFullFlow.test.js" name="Integration Test: Full API Flow &gt; Task Lifecycle &gt; should create and manage tasks" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/apiFullFlow.test.js" name="Integration Test: Full API Flow &gt; Session Management &gt; should save and retrieve session data" time="0.004333292">
            <system-out>
[Sessions] SAVE Request for user: api-flow-user-1766253639352, type: free, project: NULL

[Sessions] Creating new session b6fa5572-5b5c-4112-bda6-0c1c42e19b59

[Sessions] GET request for user: api-flow-user-1766253639352, type: free, project: NULL

[Sessions] Session found. Keys: step1Completed, step2Completed, testData

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/auth.test.js" timestamp="2025-12-20T18:00:39.493Z" hostname="MacBook-Pro-Piotr.local" tests="4" failures="0" errors="0" skipped="0" time="0.428488834">
        <testcase classname="tests/integration/auth.test.js" name="Auth Integration &gt; should login successfully with valid credentials" time="0.027447417">
        </testcase>
        <testcase classname="tests/integration/auth.test.js" name="Auth Integration &gt; should fail with invalid credentials" time="0.015711792">
        </testcase>
        <testcase classname="tests/integration/auth.test.js" name="Auth Integration &gt; should require email and password" time="0.001505709">
        </testcase>
        <testcase classname="tests/integration/auth.test.js" name="Auth Integration &gt; should validate token via /api/auth/me" time="0.017986625">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/databaseHealth.test.js" timestamp="2025-12-20T18:00:39.493Z" hostname="MacBook-Pro-Piotr.local" tests="11" failures="0" errors="0" skipped="4" time="0.047551375">
        <testcase classname="tests/integration/databaseHealth.test.js" name="Integration Test: Database Health &gt; Connection Health &gt; should connect to database successfully" time="0.000598083">
        </testcase>
        <testcase classname="tests/integration/databaseHealth.test.js" name="Integration Test: Database Health &gt; Connection Health &gt; should have all required tables" time="0.001345834">
        </testcase>
        <testcase classname="tests/integration/databaseHealth.test.js" name="Integration Test: Database Health &gt; Referential Integrity &gt; should enforce foreign key constraints" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/databaseHealth.test.js" name="Integration Test: Database Health &gt; Referential Integrity &gt; should cascade delete correctly" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/databaseHealth.test.js" name="Integration Test: Database Health &gt; Query Performance &gt; should execute simple SELECT queries quickly" time="0.000222125">
        </testcase>
        <testcase classname="tests/integration/databaseHealth.test.js" name="Integration Test: Database Health &gt; Query Performance &gt; should execute JOIN queries efficiently" time="0.000218834">
        </testcase>
        <testcase classname="tests/integration/databaseHealth.test.js" name="Integration Test: Database Health &gt; Query Performance &gt; should handle concurrent queries" time="0.000408167">
        </testcase>
        <testcase classname="tests/integration/databaseHealth.test.js" name="Integration Test: Database Health &gt; Transaction Integrity &gt; should commit transactions successfully" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/databaseHealth.test.js" name="Integration Test: Database Health &gt; Transaction Integrity &gt; should rollback transactions on error" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/databaseHealth.test.js" name="Integration Test: Database Health &gt; Data Consistency &gt; should prevent duplicate emails" time="0.000825958">
        </testcase>
        <testcase classname="tests/integration/databaseHealth.test.js" name="Integration Test: Database Health &gt; Data Consistency &gt; should maintain referential integrity on updates" time="0.000493209">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/initiatives.test.js" timestamp="2025-12-20T18:00:39.494Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.346370041">
        <testcase classname="tests/integration/initiatives.test.js" name="Initiatives Integration &gt; should list initiatives" time="0.002786958">
        </testcase>
        <testcase classname="tests/integration/initiatives.test.js" name="Initiatives Integration &gt; should create an initiative" time="0.00191225">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/llmHealth.test.js" timestamp="2025-12-20T18:00:39.494Z" hostname="MacBook-Pro-Piotr.local" tests="11" failures="0" errors="0" skipped="7" time="0.523087417">
        <testcase classname="tests/integration/llmHealth.test.js" name="Integration Test: LLM Health &gt; Connection Tests &gt; should test provider connection successfully" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/llmHealth.test.js" name="Integration Test: LLM Health &gt; Connection Tests &gt; should handle connection timeout gracefully" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/llmHealth.test.js" name="Integration Test: LLM Health &gt; Connection Tests &gt; should handle invalid provider gracefully" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/llmHealth.test.js" name="Integration Test: LLM Health &gt; Latency Tests &gt; should measure LLM call latency" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/llmHealth.test.js" name="Integration Test: LLM Health &gt; Latency Tests &gt; should handle concurrent LLM calls" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/llmHealth.test.js" name="Integration Test: LLM Health &gt; Quality Tests &gt; should respect system instructions" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/llmHealth.test.js" name="Integration Test: LLM Health &gt; Quality Tests &gt; should handle context history correctly" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/integration/llmHealth.test.js" name="Integration Test: LLM Health &gt; Error Handling &gt; should handle API errors gracefully" time="0.235280875">
            <system-out>
[AiService] Testing connection for: openai

            </system-out>
            <system-err>
Test connection failed: AuthenticationError: 401 Incorrect API key provided: invalid-*****2345. You can find your API key at https://platform.openai.com/account/api-keys.
    at APIError.generate [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mopenai[24m/core/error.js:48:20[90m)[39m
    at OpenAI.makeStatusError [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mopenai[24m/client.js:165:32[90m)[39m
    at OpenAI.makeRequest [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mopenai[24m/client.js:333:30[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at Object.testProviderConnection [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/services/aiService.js:1067:36[90m)[39m
    at [90m/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mtests/integration/llmHealth.test.js:238:28
    at [90mfile:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20 {
  status: [33m401[39m,
  headers: Headers {
    date: [32m&apos;Sat, 20 Dec 2025 18:00:37 GMT&apos;[39m,
    [32m&apos;content-type&apos;[39m: [32m&apos;application/json; charset=utf-8&apos;[39m,
    [32m&apos;content-length&apos;[39m: [32m&apos;267&apos;[39m,
    connection: [32m&apos;keep-alive&apos;[39m,
    vary: [32m&apos;Origin&apos;[39m,
    [32m&apos;x-request-id&apos;[39m: [32m&apos;req_799d85a29e3544659d0c9f62fde541f3&apos;[39m,
    [32m&apos;x-envoy-upstream-service-time&apos;[39m: [32m&apos;1&apos;[39m,
    [32m&apos;x-openai-proxy-wasm&apos;[39m: [32m&apos;v0.1&apos;[39m,
    [32m&apos;cf-cache-status&apos;[39m: [32m&apos;DYNAMIC&apos;[39m,
    [32m&apos;set-cookie&apos;[39m: [32m&apos;__cf_bm=NAXrQAN6oucR6FXWUIxXVhlg806v85xoxvL5HjNictw-1766253637-1.0.1.1-eVONcBtm3Z2wws8_t5Skl9hkafoSO2QjqKM140w09vUjgVsdX9XMSIY5KhC6MIdxwjJRMwcQ2kGvr2a9wHbQmlRCeRr54lG7CK_qwd2fth0; path=/; expires=Sat, 20-Dec-25 18:30:37 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None, _cfuvid=OW6cVnQUqLIGhfuySmhgNSthUJZniWh6QSlccB3Rhho-1766253637540-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None&apos;[39m,
    [32m&apos;strict-transport-security&apos;[39m: [32m&apos;max-age=31536000; includeSubDomains; preload&apos;[39m,
    [32m&apos;x-content-type-options&apos;[39m: [32m&apos;nosniff&apos;[39m,
    server: [32m&apos;cloudflare&apos;[39m,
    [32m&apos;cf-ray&apos;[39m: [32m&apos;9b110a519b2d9d13-WAW&apos;[39m,
    [32m&apos;alt-svc&apos;[39m: [32m&apos;h3=&quot;:443&quot;; ma=86400&apos;[39m
  },
  requestID: [32m&apos;req_799d85a29e3544659d0c9f62fde541f3&apos;[39m,
  error: {
    message: [32m&apos;Incorrect API key provided: invalid-*****2345. You can find your API key at https://platform.openai.com/account/api-keys.&apos;[39m,
    type: [32m&apos;invalid_request_error&apos;[39m,
    param: [1mnull[22m,
    code: [32m&apos;invalid_api_key&apos;[39m
  },
  code: [32m&apos;invalid_api_key&apos;[39m,
  param: [1mnull[22m,
  type: [32m&apos;invalid_request_error&apos;[39m
}

            </system-err>
        </testcase>
        <testcase classname="tests/integration/llmHealth.test.js" name="Integration Test: LLM Health &gt; Error Handling &gt; should handle rate limiting" time="0.221643625">
            <system-out>
[AiService] Testing connection for: openai

            </system-out>
            <system-err>
Test connection failed: AuthenticationError: 401 Incorrect API key provided: test-key. You can find your API key at https://platform.openai.com/account/api-keys.
    at APIError.generate [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mopenai[24m/core/error.js:48:20[90m)[39m
    at OpenAI.makeStatusError [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mopenai[24m/client.js:165:32[90m)[39m
    at OpenAI.makeRequest [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mopenai[24m/client.js:333:30[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at Object.testProviderConnection [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/services/aiService.js:1067:36[90m)[39m
    at [90m/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mtests/integration/llmHealth.test.js:255:17
    at [90mfile:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20 {
  status: [33m401[39m,
  headers: Headers {
    date: [32m&apos;Sat, 20 Dec 2025 18:00:37 GMT&apos;[39m,
    [32m&apos;content-type&apos;[39m: [32m&apos;application/json; charset=utf-8&apos;[39m,
    [32m&apos;content-length&apos;[39m: [32m&apos;258&apos;[39m,
    connection: [32m&apos;keep-alive&apos;[39m,
    vary: [32m&apos;Origin&apos;[39m,
    [32m&apos;x-request-id&apos;[39m: [32m&apos;req_80ed8a4dc31f46c0a2f7e96b5bd20a14&apos;[39m,
    [32m&apos;x-envoy-upstream-service-time&apos;[39m: [32m&apos;1&apos;[39m,
    [32m&apos;x-openai-proxy-wasm&apos;[39m: [32m&apos;v0.1&apos;[39m,
    [32m&apos;cf-cache-status&apos;[39m: [32m&apos;DYNAMIC&apos;[39m,
    [32m&apos;set-cookie&apos;[39m: [32m&apos;__cf_bm=gyAheu4yONs8AVmbOknkSEP7ga4kY1lmEOJbI0lSkE8-1766253637-1.0.1.1-j7qs8VZCD.eOLjjYDHeopaWfytlwempdX0qLjhQmmRriyYNQCh_P1nbgXnu09rThNa0RC5AjxOQjBXVS4BMoNJR7Hko47bkWHECUwIWCJuE; path=/; expires=Sat, 20-Dec-25 18:30:37 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None, _cfuvid=Vdp7.HhFlDMKZMdcG_stC7Vf1V.tFsLAzndJTRqc2M0-1766253637769-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None&apos;[39m,
    [32m&apos;strict-transport-security&apos;[39m: [32m&apos;max-age=31536000; includeSubDomains; preload&apos;[39m,
    [32m&apos;x-content-type-options&apos;[39m: [32m&apos;nosniff&apos;[39m,
    server: [32m&apos;cloudflare&apos;[39m,
    [32m&apos;cf-ray&apos;[39m: [32m&apos;9b110a52ee609d13-WAW&apos;[39m,
    [32m&apos;alt-svc&apos;[39m: [32m&apos;h3=&quot;:443&quot;; ma=86400&apos;[39m
  },
  requestID: [32m&apos;req_80ed8a4dc31f46c0a2f7e96b5bd20a14&apos;[39m,
  error: {
    message: [32m&apos;Incorrect API key provided: test-key. You can find your API key at https://platform.openai.com/account/api-keys.&apos;[39m,
    type: [32m&apos;invalid_request_error&apos;[39m,
    param: [1mnull[22m,
    code: [32m&apos;invalid_api_key&apos;[39m
  },
  code: [32m&apos;invalid_api_key&apos;[39m,
  param: [1mnull[22m,
  type: [32m&apos;invalid_request_error&apos;[39m
}

            </system-err>
        </testcase>
        <testcase classname="tests/integration/llmHealth.test.js" name="Integration Test: LLM Health &gt; Provider Configuration &gt; should retrieve provider from database" time="0.0004255">
        </testcase>
        <testcase classname="tests/integration/llmHealth.test.js" name="Integration Test: LLM Health &gt; Provider Configuration &gt; should handle missing provider gracefully" time="0.000268333">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/megatrend.test.js" timestamp="2025-12-20T18:00:39.495Z" hostname="MacBook-Pro-Piotr.local" tests="4" failures="0" errors="0" skipped="0" time="0.630680916">
        <testcase classname="tests/integration/megatrend.test.js" name="Megatrend Integration &gt; should fetch baseline megatrends" time="0.004276667">
        </testcase>
        <testcase classname="tests/integration/megatrend.test.js" name="Megatrend Integration &gt; should fetch radar data" time="0.002007375">
        </testcase>
        <testcase classname="tests/integration/megatrend.test.js" name="Megatrend Integration &gt; should fetch megatrend detail by ID" time="0.003005958">
        </testcase>
        <testcase classname="tests/integration/megatrend.test.js" name="Megatrend Integration &gt; should create and manage custom trend" time="0.003100875">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/projects.test.js" timestamp="2025-12-20T18:00:39.495Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.331083917">
        <testcase classname="tests/integration/projects.test.js" name="Projects Integration &gt; should create a new project" time="0.007358125">
        </testcase>
        <testcase classname="tests/integration/projects.test.js" name="Projects Integration &gt; should list projects" time="0.003299875">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/storage_security.test.js" timestamp="2025-12-20T18:00:39.495Z" hostname="MacBook-Pro-Piotr.local" tests="4" failures="0" errors="0" skipped="0" time="1.002181917">
        <testcase classname="tests/integration/storage_security.test.js" name="Storage Security &amp; Isolation Integration &gt; should NOT allow User B to see files uploaded by User A" time="0.013211875">
        </testcase>
        <testcase classname="tests/integration/storage_security.test.js" name="Storage Security &amp; Isolation Integration &gt; should block upload if project storage limit is exceeded" time="0.055473625">
        </testcase>
        <testcase classname="tests/integration/storage_security.test.js" name="Storage Security &amp; Isolation Integration &gt; should sanitize filenames preventing directory traversal" time="0.000585875">
        </testcase>
        <testcase classname="tests/integration/storage_security.test.js" name="Storage Security &amp; Isolation Integration &gt; should soft delete files instead of removing them immediately" time="0.571260125">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/tasks.test.js" timestamp="2025-12-20T18:00:39.495Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.466375875">
        <testcase classname="tests/integration/tasks.test.js" name="Tasks Integration &gt; should list tasks" time="0.002836584">
        </testcase>
        <testcase classname="tests/integration/tasks.test.js" name="Tasks Integration &gt; should create a task" time="0.002387667">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/transaction.test.js" timestamp="2025-12-20T18:00:39.496Z" hostname="MacBook-Pro-Piotr.local" tests="4" failures="0" errors="0" skipped="0" time="0.040001667">
        <testcase classname="tests/integration/transaction.test.js" name="Integration Test: Database Transactions &gt; Transaction Commit &gt; should commit multi-step transaction successfully" time="0.001109167">
        </testcase>
        <testcase classname="tests/integration/transaction.test.js" name="Integration Test: Database Transactions &gt; Transaction Rollback &gt; should rollback transaction on error" time="0.000459959">
        </testcase>
        <testcase classname="tests/integration/transaction.test.js" name="Integration Test: Database Transactions &gt; Nested Transactions &gt; should handle savepoints correctly" time="0.000590791">
        </testcase>
        <testcase classname="tests/integration/transaction.test.js" name="Integration Test: Database Transactions &gt; Concurrent Transactions &gt; should handle concurrent transactions without deadlock" time="0.000629167">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/backend/planLimits.test.js" timestamp="2025-12-20T18:00:39.496Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.07331725">
        <testcase classname="tests/integration/backend/planLimits.test.js" name="Plan Limits Integration &gt; should prevent creating more projects than allowed by Free plan" time="0.012534667">
        </testcase>
        <testcase classname="tests/integration/backend/planLimits.test.js" name="Plan Limits Integration &gt; should allow creating more projects after upgrade" time="0.00148775">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/routes/analytics.test.js" timestamp="2025-12-20T18:00:39.496Z" hostname="MacBook-Pro-Piotr.local" tests="4" failures="0" errors="0" skipped="0" time="0.1190715">
        <testcase classname="tests/integration/routes/analytics.test.js" name="Integration Test: Analytics Routes &gt; GET /api/analytics/stats &gt; should return analytics statistics" time="0.004046292">
        </testcase>
        <testcase classname="tests/integration/routes/analytics.test.js" name="Integration Test: Analytics Routes &gt; GET /api/analytics/stats &gt; should require authentication" time="0.001333416">
        </testcase>
        <testcase classname="tests/integration/routes/analytics.test.js" name="Integration Test: Analytics Routes &gt; GET /api/analytics/usage &gt; should return usage analytics" time="0.001669">
        </testcase>
        <testcase classname="tests/integration/routes/analytics.test.js" name="Integration Test: Analytics Routes &gt; GET /api/analytics/maturity &gt; should return maturity scores" time="0.001654042">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/routes/billing.test.js" timestamp="2025-12-20T18:00:39.496Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.12215425">
        <testcase classname="tests/integration/routes/billing.test.js" name="Integration Test: Billing Routes &gt; GET /api/billing/plans &gt; should return list of subscription plans" time="0.003605459">
        </testcase>
        <testcase classname="tests/integration/routes/billing.test.js" name="Integration Test: Billing Routes &gt; GET /api/billing/plans &gt; should return plans without authentication" time="0.003076167">
        </testcase>
        <testcase classname="tests/integration/routes/billing.test.js" name="Integration Test: Billing Routes &gt; GET /api/billing/user-plans &gt; should return user license plans" time="0.001536375">
        </testcase>
        <testcase classname="tests/integration/routes/billing.test.js" name="Integration Test: Billing Routes &gt; GET /api/billing/usage &gt; should return usage statistics" time="0.001241708">
        </testcase>
        <testcase classname="tests/integration/routes/billing.test.js" name="Integration Test: Billing Routes &gt; GET /api/billing/invoices &gt; should return invoices list" time="0.000771084">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/routes/documents.test.js" timestamp="2025-12-20T18:00:39.497Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.083727084">
        <testcase classname="tests/integration/routes/documents.test.js" name="Integration Test: Documents Routes &gt; GET /api/documents &gt; should return list of documents" time="0.002581833">
        </testcase>
        <testcase classname="tests/integration/routes/documents.test.js" name="Integration Test: Documents Routes &gt; GET /api/documents &gt; should require authentication" time="0.0012165">
        </testcase>
        <testcase classname="tests/integration/routes/documents.test.js" name="Integration Test: Documents Routes &gt; POST /api/documents/upload &gt; should require file upload" time="0.001296334">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/routes/feedback.test.js" timestamp="2025-12-20T18:00:39.497Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.084315583">
        <testcase classname="tests/integration/routes/feedback.test.js" name="Integration Test: Feedback Routes &gt; POST /api/feedback &gt; should submit feedback" time="0.002014875">
        </testcase>
        <testcase classname="tests/integration/routes/feedback.test.js" name="Integration Test: Feedback Routes &gt; POST /api/feedback &gt; should require authentication" time="0.001444291">
        </testcase>
        <testcase classname="tests/integration/routes/feedback.test.js" name="Integration Test: Feedback Routes &gt; GET /api/feedback &gt; should return feedback list (admin only)" time="0.001444333">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/routes/llm.test.js" timestamp="2025-12-20T18:00:39.497Z" hostname="MacBook-Pro-Piotr.local" tests="7" failures="0" errors="0" skipped="0" time="0.395499959">
        <testcase classname="tests/integration/routes/llm.test.js" name="Integration Test: LLM Routes &gt; GET /api/llm/providers &gt; should return list of LLM providers" time="0.004200334">
        </testcase>
        <testcase classname="tests/integration/routes/llm.test.js" name="Integration Test: LLM Routes &gt; GET /api/llm/providers &gt; should require authentication" time="0.001280875">
        </testcase>
        <testcase classname="tests/integration/routes/llm.test.js" name="Integration Test: LLM Routes &gt; GET /api/llm/providers/public &gt; should return public providers" time="0.001417667">
        </testcase>
        <testcase classname="tests/integration/routes/llm.test.js" name="Integration Test: LLM Routes &gt; POST /api/llm/test &gt; should test provider connection" time="0.2481025">
            <system-out>
[AiService] Testing connection for: openai

            </system-out>
            <system-err>
Test connection failed: AuthenticationError: 401 Incorrect API key provided: test-key. You can find your API key at https://platform.openai.com/account/api-keys.
    at APIError.generate [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mopenai[24m/core/error.js:48:20[90m)[39m
    at OpenAI.makeStatusError [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mopenai[24m/client.js:165:32[90m)[39m
    at OpenAI.makeRequest [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mopenai[24m/client.js:333:30[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m
    at Object.testProviderConnection [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/services/aiService.js:1067:36[90m)[39m
    at [90m/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/routes/llm.js:123:24 {
  status: [33m401[39m,
  headers: Headers {
    date: [32m&apos;Sat, 20 Dec 2025 18:00:38 GMT&apos;[39m,
    [32m&apos;content-type&apos;[39m: [32m&apos;application/json; charset=utf-8&apos;[39m,
    [32m&apos;content-length&apos;[39m: [32m&apos;258&apos;[39m,
    connection: [32m&apos;keep-alive&apos;[39m,
    vary: [32m&apos;Origin&apos;[39m,
    [32m&apos;x-request-id&apos;[39m: [32m&apos;req_dce702c2fc3d45cab3364ae214c57b31&apos;[39m,
    [32m&apos;x-envoy-upstream-service-time&apos;[39m: [32m&apos;2&apos;[39m,
    [32m&apos;x-openai-proxy-wasm&apos;[39m: [32m&apos;v0.1&apos;[39m,
    [32m&apos;cf-cache-status&apos;[39m: [32m&apos;DYNAMIC&apos;[39m,
    [32m&apos;set-cookie&apos;[39m: [32m&apos;__cf_bm=Lt86V4rvV7niLIL5.r9DwpJ6mQo.yU87eBqhRTEUbeI-1766253638-1.0.1.1-rVl3NwJWAP6d13hzuzDMurUEAutiEm0Wnqjcw68y4Lz9mZvEVBPq9oXqvAqTuzT7PMrPk79dPHLkkJTIy6SeOekfxdLrPeDGw7SsRifjwFc; path=/; expires=Sat, 20-Dec-25 18:30:38 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None, _cfuvid=fqdExWDzRrFaU.Jpg4EcNRURCkaKRc5fzqkKRSiQ_E0-1766253638583-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None&apos;[39m,
    [32m&apos;strict-transport-security&apos;[39m: [32m&apos;max-age=31536000; includeSubDomains; preload&apos;[39m,
    [32m&apos;x-content-type-options&apos;[39m: [32m&apos;nosniff&apos;[39m,
    server: [32m&apos;cloudflare&apos;[39m,
    [32m&apos;cf-ray&apos;[39m: [32m&apos;9b110a5808ff714a-WAW&apos;[39m,
    [32m&apos;alt-svc&apos;[39m: [32m&apos;h3=&quot;:443&quot;; ma=86400&apos;[39m
  },
  requestID: [32m&apos;req_dce702c2fc3d45cab3364ae214c57b31&apos;[39m,
  error: {
    message: [32m&apos;Incorrect API key provided: test-key. You can find your API key at https://platform.openai.com/account/api-keys.&apos;[39m,
    type: [32m&apos;invalid_request_error&apos;[39m,
    param: [1mnull[22m,
    code: [32m&apos;invalid_api_key&apos;[39m
  },
  code: [32m&apos;invalid_api_key&apos;[39m,
  param: [1mnull[22m,
  type: [32m&apos;invalid_request_error&apos;[39m
}

            </system-err>
        </testcase>
        <testcase classname="tests/integration/routes/llm.test.js" name="Integration Test: LLM Routes &gt; POST /api/llm/test &gt; should handle invalid provider" time="0.003192791">
            <system-out>
[AiService] Testing connection for: invalid-provider

            </system-out>
            <system-err>
Test connection failed: Error: Provider invalid-provider testing not implemented yet.
    at Object.testProviderConnection [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/services/aiService.js:1129:23[90m)[39m
    at [90m/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/routes/llm.js:123:40
    at Layer.handleRequest [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mrouter[24m/lib/layer.js:152:17[90m)[39m
    at next [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mrouter[24m/lib/route.js:157:13[90m)[39m
    at Route.dispatch [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mrouter[24m/lib/route.js:117:3[90m)[39m
    at handle [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mrouter[24m/index.js:435:11[90m)[39m
    at Layer.handleRequest [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mrouter[24m/lib/layer.js:152:17[90m)[39m
    at [90m/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mrouter[24m/index.js:295:15
    at processParams [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mrouter[24m/index.js:582:12[90m)[39m
    at next [90m(/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/[39mserver/node_modules/[4mrouter[24m/index.js:291:5[90m)[39m

            </system-err>
        </testcase>
        <testcase classname="tests/integration/routes/llm.test.js" name="Integration Test: LLM Routes &gt; POST /api/llm/test-ollama &gt; should test Ollama connection" time="0.002704208">
        </testcase>
        <testcase classname="tests/integration/routes/llm.test.js" name="Integration Test: LLM Routes &gt; GET /api/llm/ollama-models &gt; should return Ollama models" time="0.005165166">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/routes/notifications.test.js" timestamp="2025-12-20T18:00:39.498Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.132557167">
        <testcase classname="tests/integration/routes/notifications.test.js" name="Integration Test: Notifications Routes &gt; GET /api/notifications &gt; should return user notifications" time="0.003989792">
        </testcase>
        <testcase classname="tests/integration/routes/notifications.test.js" name="Integration Test: Notifications Routes &gt; GET /api/notifications &gt; should require authentication" time="0.002239125">
        </testcase>
        <testcase classname="tests/integration/routes/notifications.test.js" name="Integration Test: Notifications Routes &gt; GET /api/notifications/counts &gt; should return notification counts" time="0.0024225">
        </testcase>
        <testcase classname="tests/integration/routes/notifications.test.js" name="Integration Test: Notifications Routes &gt; PATCH /api/notifications/:id/read &gt; should mark notification as read" time="0.004094792">
        </testcase>
        <testcase classname="tests/integration/routes/notifications.test.js" name="Integration Test: Notifications Routes &gt; POST /api/notifications/mark-all-read &gt; should mark all notifications as read" time="0.001820416">
        </testcase>
        <testcase classname="tests/integration/routes/notifications.test.js" name="Integration Test: Notifications Routes &gt; DELETE /api/notifications/:id &gt; should delete notification" time="0.002567083">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/routes/pmoContext.test.js" timestamp="2025-12-20T18:00:39.498Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.144219667">
        <testcase classname="tests/integration/routes/pmoContext.test.js" name="PMO Context API &gt; GET /api/pmo-context/:projectId &gt; should return PMO context with phase information" time="0.006067667">
        </testcase>
        <testcase classname="tests/integration/routes/pmoContext.test.js" name="PMO Context API &gt; GET /api/pmo-context/:projectId &gt; should return 404 for non-existent project" time="0.001800209">
        </testcase>
        <testcase classname="tests/integration/routes/pmoContext.test.js" name="PMO Context API &gt; GET /api/pmo-context/:projectId &gt; should include allowed actions for current phase" time="0.002152625">
        </testcase>
        <testcase classname="tests/integration/routes/pmoContext.test.js" name="PMO Context API &gt; GET /api/pmo-context/:projectId &gt; should include system messages based on phase" time="0.002209083">
        </testcase>
        <testcase classname="tests/integration/routes/pmoContext.test.js" name="PMO Context API &gt; GET /api/pmo-context/:projectId/task-labels &gt; should return task labels with PMO relevance" time="0.001645042">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/routes/sessions.test.js" timestamp="2025-12-20T18:00:39.498Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.125133458">
        <testcase classname="tests/integration/routes/sessions.test.js" name="Integration Test: Sessions Routes &gt; GET /api/sessions &gt; should return user sessions" time="0.003273667">
            <system-out>
[Sessions] GET request for user: sessions-user-1766253638226, type: free, project: NULL

[Sessions] No session found, returning null.

            </system-out>
        </testcase>
        <testcase classname="tests/integration/routes/sessions.test.js" name="Integration Test: Sessions Routes &gt; GET /api/sessions &gt; should require authentication" time="0.001212625">
        </testcase>
        <testcase classname="tests/integration/routes/sessions.test.js" name="Integration Test: Sessions Routes &gt; POST /api/sessions &gt; should create a new session" time="0.006361625">
            <system-out>
[Sessions] SAVE Request for user: sessions-user-1766253638226, type: free, project: NULL

[Sessions] Creating new session f644de04-3df1-41b4-8f35-3b9800d02f06

            </system-out>
        </testcase>
        <testcase classname="tests/integration/routes/sessions.test.js" name="Integration Test: Sessions Routes &gt; GET /api/sessions/:userId &gt; should return session by user id" time="0.002871042">
            <system-out>
[Sessions] GET request for user: sessions-user-1766253638226, type: free, project: NULL

[Sessions] Session found. Keys: step

            </system-out>
        </testcase>
        <testcase classname="tests/integration/routes/sessions.test.js" name="Integration Test: Sessions Routes &gt; PUT /api/sessions/:id &gt; should update session" time="0.00268175">
            <system-out>
[Sessions] SAVE Request for user: sessions-user-1766253638226, type: free, project: NULL

[Sessions] Updating existing session f644de04-3df1-41b4-8f35-3b9800d02f06

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/routes/settings.test.js" timestamp="2025-12-20T18:00:39.499Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.0841385">
        <testcase classname="tests/integration/routes/settings.test.js" name="Integration Test: Settings Routes &gt; GET /api/settings &gt; should return user settings" time="0.001981083">
        </testcase>
        <testcase classname="tests/integration/routes/settings.test.js" name="Integration Test: Settings Routes &gt; GET /api/settings &gt; should require authentication" time="0.001447791">
        </testcase>
        <testcase classname="tests/integration/routes/settings.test.js" name="Integration Test: Settings Routes &gt; PUT /api/settings &gt; should update user settings" time="0.001539042">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/routes/teams.test.js" timestamp="2025-12-20T18:00:39.499Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.084718792">
        <testcase classname="tests/integration/routes/teams.test.js" name="Integration Test: Teams Routes &gt; GET /api/teams &gt; should return list of teams" time="0.002803042">
        </testcase>
        <testcase classname="tests/integration/routes/teams.test.js" name="Integration Test: Teams Routes &gt; GET /api/teams &gt; should require authentication" time="0.001467583">
        </testcase>
        <testcase classname="tests/integration/routes/teams.test.js" name="Integration Test: Teams Routes &gt; POST /api/teams &gt; should create a new team" time="0.001707708">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/routes/tokenBilling.test.js" timestamp="2025-12-20T18:00:39.499Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.129192792">
        <testcase classname="tests/integration/routes/tokenBilling.test.js" name="Integration Test: Token Billing Routes &gt; GET /api/token-billing/balance &gt; should return user token balance" time="0.00421275">
        </testcase>
        <testcase classname="tests/integration/routes/tokenBilling.test.js" name="Integration Test: Token Billing Routes &gt; GET /api/token-billing/balance &gt; should require authentication" time="0.001623209">
        </testcase>
        <testcase classname="tests/integration/routes/tokenBilling.test.js" name="Integration Test: Token Billing Routes &gt; GET /api/token-billing/packages &gt; should return available token packages" time="0.002877208">
        </testcase>
        <testcase classname="tests/integration/routes/tokenBilling.test.js" name="Integration Test: Token Billing Routes &gt; GET /api/token-billing/transactions &gt; should return token usage history" time="0.003190083">
        </testcase>
        <testcase classname="tests/integration/routes/tokenBilling.test.js" name="Integration Test: Token Billing Routes &gt; GET /api/token-billing/margins &gt; should return margins (admin only)" time="0.002311875">
        </testcase>
    </testsuite>
    <testsuite name="tests/integration/routes/users.test.js" timestamp="2025-12-20T18:00:39.499Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.131859917">
        <testcase classname="tests/integration/routes/users.test.js" name="Integration Test: Users Routes &gt; GET /api/users &gt; should return list of users" time="0.00494475">
        </testcase>
        <testcase classname="tests/integration/routes/users.test.js" name="Integration Test: Users Routes &gt; GET /api/users &gt; should require authentication" time="0.001085625">
        </testcase>
        <testcase classname="tests/integration/routes/users.test.js" name="Integration Test: Users Routes &gt; GET /api/auth/me &gt; should return current user" time="0.001798833">
        </testcase>
        <testcase classname="tests/integration/routes/users.test.js" name="Integration Test: Users Routes &gt; GET /api/users/:id &gt; should return user by id" time="0.007478208">
        </testcase>
        <testcase classname="tests/integration/routes/users.test.js" name="Integration Test: Users Routes &gt; PUT /api/users/:id &gt; should update user" time="0.004592708">
        </testcase>
    </testsuite>
</testsuites>
