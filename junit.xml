<?xml version="1.0" encoding="UTF-8" ?>
<testsuites name="vitest tests" tests="1096" failures="127" errors="0" time="30.805815242">
    <testsuite name="tests/unit/actionProposalEngine.test.js" timestamp="2025-12-21T08:31:14.309Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.184272958">
        <testcase classname="tests/unit/actionProposalEngine.test.js" name="ActionProposalEngine &gt; should generate proposals for USER_AT_RISK" time="0.006440083">
        </testcase>
        <testcase classname="tests/unit/actionProposalEngine.test.js" name="ActionProposalEngine &gt; should generate proposals for BLOCKED_INITIATIVE" time="0.000165209">
        </testcase>
        <testcase classname="tests/unit/actionProposalEngine.test.js" name="ActionProposalEngine &gt; should generate proposals for STRONG_TEAM_MEMBER" time="0.000140291">
        </testcase>
        <testcase classname="tests/unit/actionProposalEngine.test.js" name="ActionProposalEngine &gt; should be deterministic (return same output for same input)" time="0.000144458">
        </testcase>
        <testcase classname="tests/unit/actionProposalEngine.test.js" name="ActionProposalEngine &gt; should return sorted proposals by proposal_id" time="0.000283">
        </testcase>
        <testcase classname="tests/unit/actionProposalEngine.test.js" name="ActionProposalEngine &gt; should adhere to the mandatory output model" time="0.000346291">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/aiPlaybookRoutingEngine.test.js" timestamp="2025-12-21T08:31:14.310Z" hostname="MacBook-Pro-Piotr.local" tests="29" failures="0" errors="0" skipped="0" time="0.137688334">
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_lte &gt; should match when metric is less than threshold" time="0.000659042">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_lte &gt; should match when metric equals threshold" time="0.000077958">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_lte &gt; should not match when metric is greater than threshold" time="0.000066125">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_lte &gt; should not match when metric is not found" time="0.000074625">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_lte &gt; should return false for invalid format" time="0.000073083">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_gte &gt; should match when metric is greater than threshold" time="0.000058584">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_gte &gt; should match when metric equals threshold" time="0.000047541">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; metric_gte &gt; should not match when metric is less than threshold" time="0.000042167">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; flag_eq &gt; should match when flag equals expected value" time="0.000058458">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; flag_eq &gt; should not match when flag does not equal expected value" time="0.000060167">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; flag_eq &gt; should work with string values" time="0.000047709">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; has_open_tasks &gt; should match when open tasks exist and condition is true" time="0.000049416">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; has_open_tasks &gt; should match when no open tasks and condition is false" time="0.000036334">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; has_open_tasks &gt; should recognize in_progress as open" time="0.000036542">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; has_open_tasks &gt; should recognize PENDING as open" time="0.000057458">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; signal_present &gt; should match when signal is present" time="0.000048667">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; signal_present &gt; should not match when signal is not present" time="0.000030083">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; signal_present &gt; should handle simple string signals" time="0.000042875">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; time_since_step_gte &gt; should match when enough time has passed" time="0.000157875">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; time_since_step_gte &gt; should not match when not enough time has passed" time="0.000044417">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; time_since_step_gte &gt; should not match when step timestamp not found" time="0.00003975">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; unknown conditions &gt; should fail safely for unknown condition type" time="0.000153708">
            <system-err>
[AIPlaybookRoutingEngine] Unknown condition type: unknown_condition

            </system-err>
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateCondition &gt; unknown conditions &gt; should fail safely for empty condition" time="0.000038708">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateRouting &gt; should select first matching rule in first_match mode" time="0.000125708">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateRouting &gt; should use else_goto when no rules match" time="0.000042417">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateRouting &gt; should return null when no rules match and no else_goto" time="0.000046959">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateRouting &gt; should use linear flow when no branch_rules defined" time="0.000031666">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateRouting &gt; should record evaluation trace" time="0.00033875">
        </testcase>
        <testcase classname="tests/unit/aiPlaybookRoutingEngine.test.js" name="AIPlaybookRoutingEngine &gt; evaluateRouting &gt; should skip rules with invalid conditions" time="0.000047125">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/aiResponsePostProcessor.test.js" timestamp="2025-12-21T08:31:14.311Z" hostname="MacBook-Pro-Piotr.local" tests="20" failures="0" errors="0" skipped="0" time="0.246556958">
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Memory Prefix &gt; should add memory prefix when memory count &gt; 0" time="0.000494416">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Memory Prefix &gt; should NOT add memory prefix when memory count is 0" time="0.000136459">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Memory Prefix &gt; should NOT duplicate memory prefix if already present" time="0.000068625">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; External Sources Prefix &gt; should add external prefix when external sources are used" time="0.000072916">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; External Sources Prefix &gt; should NOT add external prefix when no external sources" time="0.000066125">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; External Sources Prefix &gt; should NOT duplicate external prefix if already present" time="0.000056917">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Combined Prefixes &gt; should add both prefixes when both memory and external sources exist" time="0.000063">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Combined Prefixes &gt; should maintain correct order: memory first, then external" time="0.000051583">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Edge Cases &gt; should handle empty response safely" time="0.000040708">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Edge Cases &gt; should handle null response safely" time="0.000043542">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Edge Cases &gt; should handle undefined context safely" time="0.000030542">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Edge Cases &gt; should handle null context safely" time="0.000025708">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Edge Cases &gt; should trim whitespace from response" time="0.000025666">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; getMemoryCount &gt; should count previous decisions" time="0.000029459">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; getMemoryCount &gt; should return memoryCount from projectMemory" time="0.000038834">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; getMemoryCount &gt; should return 1 when PMO health snapshot exists" time="0.000032125">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; getExternalSources &gt; should return externalSourcesUsed array" time="0.000261166">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; getExternalSources &gt; should derive sources from fetchedData" time="0.000310083">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; stripPrefixes &gt; should remove memory and external prefixes" time="0.000078958">
        </testcase>
        <testcase classname="tests/unit/aiResponsePostProcessor.test.js" name="aiResponsePostProcessor &gt; Helper Functions &gt; stripPrefixes &gt; should handle text without prefixes" time="0.00003875">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/aiRoleGuard.test.js" timestamp="2025-12-21T08:31:14.312Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.120416541">
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Role Definitions &gt; should define three roles in correct hierarchy" time="0.000672083">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Role Definitions &gt; should define capabilities for each role" time="0.000181084">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Role Descriptions &gt; should return correct description for each role" time="0.000113625">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Role Descriptions &gt; should default to ADVISOR description for unknown role" time="0.000041584">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; ADVISOR Role &gt; should allow explain actions" time="0.000181292">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; ADVISOR Role &gt; should block draft creation" time="0.000091167">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; ADVISOR Role &gt; should block execution actions" time="0.000050583">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; MANAGER Role &gt; should allow draft creation with approval required" time="0.000053667">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; MANAGER Role &gt; should block execution actions" time="0.000054792">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; OPERATOR Role &gt; should allow execution actions" time="0.000066083">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Action Capability Checks &gt; OPERATOR Role &gt; should allow entity modifications" time="0.000058792">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Mutation Validation &gt; should block all mutations for ADVISOR" time="0.000071375">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Mutation Validation &gt; should allow mutations as drafts for MANAGER" time="0.000066208">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; Mutation Validation &gt; should allow direct mutations for OPERATOR" time="0.000050334">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; isActionBlocked &gt; should return blocked with required role for insufficient permissions" time="0.000080542">
        </testcase>
        <testcase classname="tests/unit/aiRoleGuard.test.js" name="AI Role Guard &gt; isActionBlocked &gt; should return not blocked for allowed actions" time="0.000035917">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/analytics.service.test.ts" timestamp="2025-12-21T08:31:14.313Z" hostname="MacBook-Pro-Piotr.local" tests="8" failures="0" errors="0" skipped="0" time="0.168379958">
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; calculateAnalytics &gt; calculates analytics for empty arrays" time="0.000514167">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; calculateAnalytics &gt; calculates completion rate correctly" time="0.000142042">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; calculateAnalytics &gt; calculates initiative statistics" time="0.000118916">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; calculateAnalytics &gt; calculates total cost and benefit" time="0.000057666">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; generateBurnDownData &gt; generates burn down data for date range" time="0.000222875">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; generateBurnDownData &gt; handles empty task list" time="0.0000545">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; generateVelocityData &gt; generates velocity data for specified weeks" time="0.000103916">
        </testcase>
        <testcase classname="tests/unit/analytics.service.test.ts" name="Service Test: Analytics &gt; generateVelocityData &gt; uses default 8 weeks when not specified" time="0.000242583">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/api.service.test.ts" timestamp="2025-12-21T08:31:14.314Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.242153208">
        <testcase classname="tests/unit/api.service.test.ts" name="Api Service Unit Tests &gt; login: should store token and return user on success" time="0.001872833">
            <system-out>
Api.login called: { email: &apos;test@test.com&apos;, url: &apos;/api/auth/login&apos; }

Login response status: undefined

Login response data: { token: &apos;abc-123&apos;, user: { id: &apos;1&apos;, email: &apos;test@test.com&apos; } }

            </system-out>
        </testcase>
        <testcase classname="tests/unit/api.service.test.ts" name="Api Service Unit Tests &gt; login: should throw error on failure" time="0.000697625">
            <system-out>
Api.login called: { email: &apos;test@test.com&apos;, url: &apos;/api/auth/login&apos; }

Login response status: undefined

Login response data: { error: &apos;Invalid credentials&apos; }

            </system-out>
        </testcase>
        <testcase classname="tests/unit/api.service.test.ts" name="Api Service Unit Tests &gt; getUsers: should send Authorization header" time="0.000292958">
        </testcase>
        <testcase classname="tests/unit/api.service.test.ts" name="Api Service Unit Tests &gt; getLLMProviders: should return list" time="0.000100875">
        </testcase>
        <testcase classname="tests/unit/api.service.test.ts" name="Api Service Unit Tests &gt; indexKnowledgeFiles: should trigger indexing" time="0.000162375">
        </testcase>
        <testcase classname="tests/unit/api.service.test.ts" name="Api Service Unit Tests &gt; saveSession: should post data" time="0.000150125">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/asyncJobService.test.js" timestamp="2025-12-21T08:31:14.314Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.388332417">
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; JOB_TYPES Constants &gt; should export EXECUTE_DECISION type" time="0.141182917">
            <system-out>
[Queue] Using Mock Queue for ai-tasks

            </system-out>
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; JOB_TYPES Constants &gt; should export ADVANCE_PLAYBOOK_STEP type" time="0.001884">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; JOB_STATUSES Constants &gt; should export all required statuses" time="0.001918875">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; JOB_STATUSES Constants &gt; should have 6 status types" time="0.001881583">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export enqueueActionExecution" time="0.001425667">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export enqueuePlaybookAdvance" time="0.001823208">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export getJob" time="0.001621583">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export listJobs" time="0.0028995">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export retryJob" time="0.001936084">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export cancelJob" time="0.001127416">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export updateJobStatus" time="0.001046333">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export markDeadLetter" time="0.001159042">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobService Constants and Logic &gt; Service Methods Existence &gt; should export incrementAttempts" time="0.001132333">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="Action Error Codes &gt; should include async job error codes" time="0.002484792">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobProcessor &gt; should export processDecisionExecution" time="0.01581225">
        </testcase>
        <testcase classname="tests/unit/asyncJobService.test.js" name="AsyncJobProcessor &gt; should export processPlaybookAdvance" time="0.000819917">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/breakGlassService.test.js" timestamp="2025-12-21T08:31:14.315Z" hostname="MacBook-Pro-Piotr.local" tests="15" failures="7" errors="0" skipped="0" time="0.146510042">
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; SCOPES &gt; should define all break-glass scopes" time="0.000822375">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; DEFAULT_DURATION_MINUTES &gt; should be 2 hours (120 minutes)" time="0.000101375">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; MAX_DURATION_MINUTES &gt; should be 24 hours (1440 minutes)" time="0.0000735">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; startSession &gt; should throw error for missing required parameters" time="0.0016165">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; startSession &gt; should throw error for invalid scope" time="0.000412416">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; startSession &gt; should throw error if session already exists for scope" time="0.007513208">
            <system-out>
[BreakGlass] Session started: 1d33cc58-4c52-48d3-bce2-3cb596603ad1 (scope: policy_engine_disabled) by user-1

            </system-out>
            <system-err>
[GovernanceAudit] Error fetching prev hash: Error: SQLITE_ERROR: no such column: record_hash
--&gt; in Database#get(&apos;SELECT record_hash FROM governance_audit_log \n&apos; +
  &apos;                 WHERE organization_id = ? \n&apos; +
  &apos;                 ORDER BY created_at DESC LIMIT 1&apos;, [ &apos;org-1&apos; ], [Function (anonymous)])
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/governanceAuditService.js:95:16
    at new Promise (&lt;anonymous&gt;)
    at Object.logAudit (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/governanceAuditService.js:93:16)
    at Statement.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/breakGlassService.js:89:54) {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;,
  __augmented: true
}

[GovernanceAudit] Insert error: [Error: SQLITE_ERROR: table governance_audit_log has no column named actor_role] {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;
}

[BreakGlass] Audit log error: [Error: SQLITE_ERROR: table governance_audit_log has no column named actor_role] {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;
}

            </system-err>
            <failure message="promise resolved &quot;{ …(7) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ …(7) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;actorId&quot;: &quot;user-1&quot;,
+   &quot;createdAt&quot;: &quot;2025-12-21T08:31:02.874Z&quot;,
+   &quot;expiresAt&quot;: &quot;2025-12-21T10:31:02.874Z&quot;,
+   &quot;id&quot;: &quot;1d33cc58-4c52-48d3-bce2-3cb596603ad1&quot;,
+   &quot;organizationId&quot;: &quot;org-1&quot;,
+   &quot;reason&quot;: &quot;Emergency fix&quot;,
+   &quot;scope&quot;: &quot;policy_engine_disabled&quot;,
  }

 ❯ tests/unit/breakGlassService.test.js:98:16
            </failure>
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; startSession &gt; should create session successfully" time="0.000373542">
            <failure message="Active break-glass session already exists for scope: policy_engine_disabled" type="Error">
Error: Active break-glass session already exists for scope: policy_engine_disabled
 ❯ Object.startSession server/services/breakGlassService.js:68:19
 ❯ tests/unit/breakGlassService.test.js:102:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; startSession &gt; should cap duration at MAX_DURATION_MINUTES" time="0.0008645">
            <system-out>
[BreakGlass] Session started: c3c277ef-e1d4-407a-9b6d-03908cf4f286 (scope: emergency_access) by user-1

            </system-out>
            <system-err>
[GovernanceAudit] Error fetching prev hash: Error: SQLITE_ERROR: no such column: record_hash
--&gt; in Database#get(&apos;SELECT record_hash FROM governance_audit_log \n&apos; +
  &apos;                 WHERE organization_id = ? \n&apos; +
  &apos;                 ORDER BY created_at DESC LIMIT 1&apos;, [ &apos;org-1&apos; ], [Function (anonymous)])
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/governanceAuditService.js:95:16
    at new Promise (&lt;anonymous&gt;)
    at Object.logAudit (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/governanceAuditService.js:93:16)
    at Statement.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/breakGlassService.js:89:54) {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;,
  __augmented: true
}

[GovernanceAudit] Insert error: [Error: SQLITE_ERROR: table governance_audit_log has no column named actor_role] {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;
}

[BreakGlass] Audit log error: [Error: SQLITE_ERROR: table governance_audit_log has no column named actor_role] {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;
}

            </system-err>
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; closeSession &gt; should throw error for non-existent session" time="0.000366584">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; closeSession &gt; should throw error for already closed session" time="0.001121">
            <failure message="expected [Function] to throw error including &apos;Session already closed&apos; but got &apos;Session not found&apos;" type="AssertionError">
AssertionError: expected [Function] to throw error including &apos;Session already closed&apos; but got &apos;Session not found&apos;

Expected: &quot;Session already closed&quot;
Received: &quot;Session not found&quot;

 ❯ tests/unit/breakGlassService.test.js:151:13
            </failure>
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; closeSession &gt; should close session successfully" time="0.00036425">
            <failure message="Session not found" type="Error">
Error: Session not found
 ❯ Statement.&lt;anonymous&gt; server/services/breakGlassService.js:133:39
 ❯ Statement.replacement server/node_modules/sqlite3/lib/trace.js:25:27
 ❯ Statement.replacement server/node_modules/sqlite3/lib/trace.js:25:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { code: &apos;SESSION_NOT_FOUND&apos; }
            </failure>
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; isBreakGlassActive &gt; should return false when no active session" time="0.000662625">
            <failure message="expected true to be false // Object.is equality" type="AssertionError">
AssertionError: expected true to be false // Object.is equality

- Expected
+ Received

- false
+ true

 ❯ tests/unit/breakGlassService.test.js:178:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; isBreakGlassActive &gt; should return true when active session exists" time="0.00016425">
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; getActiveSessions &gt; should return empty array when no sessions" time="0.000834291">
            <failure message="expected [ { …(7) }, { …(7) } ] to deeply equal []" type="AssertionError">
AssertionError: expected [ { …(7) }, { …(7) } ] to deeply equal []

- Expected
+ Received

- []
+ [
+   {
+     &quot;actorId&quot;: &quot;user-1&quot;,
+     &quot;createdAt&quot;: &quot;2025-12-21T08:31:02.881Z&quot;,
+     &quot;expiresAt&quot;: &quot;2025-12-22T08:31:02.881Z&quot;,
+     &quot;id&quot;: &quot;c3c277ef-e1d4-407a-9b6d-03908cf4f286&quot;,
+     &quot;organizationId&quot;: &quot;org-1&quot;,
+     &quot;reason&quot;: &quot;Long maintenance&quot;,
+     &quot;scope&quot;: &quot;emergency_access&quot;,
+   },
+   {
+     &quot;actorId&quot;: &quot;user-1&quot;,
+     &quot;createdAt&quot;: &quot;2025-12-21T08:31:02.874Z&quot;,
+     &quot;expiresAt&quot;: &quot;2025-12-21T10:31:02.874Z&quot;,
+     &quot;id&quot;: &quot;1d33cc58-4c52-48d3-bce2-3cb596603ad1&quot;,
+     &quot;organizationId&quot;: &quot;org-1&quot;,
+     &quot;reason&quot;: &quot;Emergency fix&quot;,
+     &quot;scope&quot;: &quot;policy_engine_disabled&quot;,
+   },
+ ]

 ❯ tests/unit/breakGlassService.test.js:196:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/breakGlassService.test.js" name="BreakGlassService &gt; getActiveSessions &gt; should return active sessions" time="0.000668541">
            <failure message="expected [ { …(7) }, { …(7) } ] to have a length of 1 but got 2" type="AssertionError">
AssertionError: expected [ { …(7) }, { …(7) } ] to have a length of 1 but got 2

- Expected
+ Received

- 1
+ 2

 ❯ tests/unit/breakGlassService.test.js:213:28
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/connectorAdapter.test.js" timestamp="2025-12-21T08:31:14.317Z" hostname="MacBook-Pro-Piotr.local" tests="11" failures="7" errors="0" skipped="0" time="0.171638583">
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Dry-run Mode &gt; should return plan without execution in dry-run mode" time="0.00543875">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ tests/unit/connectorAdapter.test.js:48:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Dry-run Mode &gt; should respect sandbox_mode flag on config" time="0.000553875">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ tests/unit/connectorAdapter.test.js:71:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Error Handling &gt; should return error for unknown connector" time="0.0001795">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Error Handling &gt; should return error for unsupported action" time="0.000092209">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Error Handling &gt; should return error when connector not configured" time="0.000401291">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Error Handling &gt; should return error when connector disconnected" time="0.000297">
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Plan Generation &gt; should generate Jira plan for issue_create" time="0.000774666">
            <failure message="the given combination of arguments (undefined and string) is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a string" type="AssertionError">
AssertionError: the given combination of arguments (undefined and string) is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a string
 ❯ tests/unit/connectorAdapter.test.js:155:37
            </failure>
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Plan Generation &gt; should generate Slack plan for message_send" time="0.000477125">
            <failure message="the given combination of arguments (undefined and string) is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a string" type="AssertionError">
AssertionError: the given combination of arguments (undefined and string) is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a string
 ❯ tests/unit/connectorAdapter.test.js:168:37
            </failure>
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Plan Generation &gt; should generate Google Calendar plan for event_create" time="0.000595416">
            <failure message="the given combination of arguments (undefined and string) is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a string" type="AssertionError">
AssertionError: the given combination of arguments (undefined and string) is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a string
 ❯ tests/unit/connectorAdapter.test.js:181:37
            </failure>
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Execution (Mock) &gt; should execute Slack message_send successfully" time="0.0007165">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ tests/unit/connectorAdapter.test.js:205:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/connectorAdapter.test.js" name="ConnectorAdapter &gt; Execution (Mock) &gt; should include duration_ms in result" time="0.000427167">
            <failure message="expected undefined to be defined" type="AssertionError">
AssertionError: expected undefined to be defined
 ❯ tests/unit/connectorAdapter.test.js:221:40
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/connectorRegistry.test.js" timestamp="2025-12-21T08:31:14.319Z" hostname="MacBook-Pro-Piotr.local" tests="14" failures="0" errors="0" skipped="0" time="0.182386791">
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getAllConnectors &gt; should return all available connectors" time="0.001457333">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getConnector &gt; should return connector by key" time="0.00014675">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getConnector &gt; should return null for unknown connector" time="0.000073583">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getConnectorsByCategory &gt; should return connectors filtered by category" time="0.000107167">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getConnectorsByCategory &gt; should return empty array for unknown category" time="0.000253125">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; hasCapability &gt; should return true for supported capability" time="0.0000795">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; hasCapability &gt; should return false for unsupported capability" time="0.00005175">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; hasCapability &gt; should return false for unknown connector" time="0.000040959">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; validateCredentials &gt; should validate all required credentials present" time="0.000091459">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; validateCredentials &gt; should identify missing required credentials" time="0.0000925">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; validateCredentials &gt; should handle unknown connector" time="0.000054875">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getRequiredCredentials &gt; should return required credentials for connector" time="0.000046625">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getRequiredCredentials &gt; should return empty array for unknown connector" time="0.000030292">
        </testcase>
        <testcase classname="tests/unit/connectorRegistry.test.js" name="ConnectorRegistry &gt; getAllCategories &gt; should return all categories" time="0.00009275">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/drdStructure.test.ts" timestamp="2025-12-21T08:31:14.319Z" hostname="MacBook-Pro-Piotr.local" tests="7" failures="0" errors="0" skipped="0" time="0.190588458">
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; exports DRD_STRUCTURE as array" time="0.000440667">
        </testcase>
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; each axis has required properties" time="0.000367375">
        </testcase>
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; each area has required properties" time="0.000867208">
        </testcase>
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; each level has required properties" time="0.003209458">
        </testcase>
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; getQuestionsForAxis &gt; returns areas for valid axis ID" time="0.000108417">
        </testcase>
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; getQuestionsForAxis &gt; returns empty array for invalid axis ID" time="0.000262625">
        </testcase>
        <testcase classname="tests/unit/drdStructure.test.ts" name="Service Test: drdStructure &gt; getQuestionsForAxis &gt; returns areas for different axis IDs" time="0.000080291">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/governanceAudit.test.js" timestamp="2025-12-21T08:31:14.319Z" hostname="MacBook-Pro-Piotr.local" tests="8" failures="0" errors="0" skipped="0" time="0.141902875">
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; logAudit &gt; should throw error for missing required parameters" time="0.0013105">
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; logAudit &gt; should throw error for invalid action" time="0.000243041">
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; logAudit &gt; should log audit entry successfully" time="0.000745042">
            <system-out>
[GovernanceAudit] Logged: CREATE on POLICY_RULE/rule-1 by user-1

            </system-out>
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; getAuditLog &gt; should query with organization filter" time="0.000224208">
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; getAuditLog &gt; should bypass org filter for superadmin" time="0.000119833">
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; getAuditLog &gt; should support action filter" time="0.000289167">
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; exportAuditLog &gt; should export as JSON by default" time="0.00013275">
        </testcase>
        <testcase classname="tests/unit/governanceAudit.test.js" name="GovernanceAuditService &gt; exportAuditLog &gt; should export as CSV when specified" time="0.000145917">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/notificationOutboxService.test.js" timestamp="2025-12-21T08:31:14.320Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.258532208">
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; NOTIFICATION_TYPES Constants &gt; should export APPROVAL_DUE type" time="0.00840925">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; NOTIFICATION_TYPES Constants &gt; should export PLAYBOOK_STUCK type" time="0.001783958">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; NOTIFICATION_TYPES Constants &gt; should export DEAD_LETTER type" time="0.001616959">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; NOTIFICATION_TYPES Constants &gt; should export ESCALATION type" time="0.001813292">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; NOTIFICATION_TYPES Constants &gt; should have 4 notification types" time="0.002236208">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; OUTBOX_STATUSES Constants &gt; should export QUEUED status" time="0.001560041">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; OUTBOX_STATUSES Constants &gt; should export SENT status" time="0.001658667">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; OUTBOX_STATUSES Constants &gt; should export FAILED status" time="0.001188833">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; MAX_ATTEMPTS &gt; should be 3" time="0.002073541">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; Service Methods Existence &gt; should export enqueue" time="0.002727208">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; Service Methods Existence &gt; should export shouldNotify" time="0.002290208">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; Service Methods Existence &gt; should export getUserPreferences" time="0.001137083">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; Service Methods Existence &gt; should export updateUserPreferences" time="0.001075875">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; Service Methods Existence &gt; should export processQueue" time="0.001087708">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService Constants and Logic &gt; Service Methods Existence &gt; should export getOutboxStats" time="0.001447041">
        </testcase>
        <testcase classname="tests/unit/notificationOutboxService.test.js" name="NotificationOutboxService User Preferences &gt; should return true when no preferences set (default behavior)" time="0.001668958">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/pdfExport.test.ts" timestamp="2025-12-21T08:31:14.321Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.261313541">
        <testcase classname="tests/unit/pdfExport.test.ts" name="Service Test: pdfExport &gt; exportReportToPDF &gt; returns false when element is not found" time="0.001113083">
            <system-err>
Element with id non-existent not found

            </system-err>
        </testcase>
        <testcase classname="tests/unit/pdfExport.test.ts" name="Service Test: pdfExport &gt; exportReportToPDF &gt; exports PDF successfully" time="0.000462459">
        </testcase>
        <testcase classname="tests/unit/pdfExport.test.ts" name="Service Test: pdfExport &gt; exportReportToPDF &gt; handles errors gracefully" time="0.001208042">
            <system-err>
PDF Export failed: Error: Canvas error
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/pdfExport.test.ts:89:52
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/pdfExport.test.ts" name="Service Test: pdfExport &gt; exportDashboardToPDF &gt; creates PDF with metadata" time="0.008720083">
        </testcase>
        <testcase classname="tests/unit/pdfExport.test.ts" name="Service Test: pdfExport &gt; exportDashboardToPDF &gt; handles optional metadata" time="0.000255917">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/piiRedactor.test.js" timestamp="2025-12-21T08:31:14.321Z" hostname="MacBook-Pro-Piotr.local" tests="17" failures="0" errors="0" skipped="0" time="0.167793875">
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redactEmails &gt; should redact email addresses" time="0.000463292">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redactEmails &gt; should redact multiple emails" time="0.000070334">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redactEmails &gt; should return non-string values unchanged" time="0.000066541">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redactTokens &gt; should redact JWT-like tokens" time="0.000175334">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redactTokens &gt; should handle partial JWT patterns" time="0.000051375">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should redact email fields" time="0.00012475">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should redact name fields" time="0.000060667">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should redact password fields" time="0.000055958">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should redact token and secret fields" time="0.000065042">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should redact inline emails in string values" time="0.000056875">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should handle arrays with email strings" time="0.000060542">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should handle nested objects" time="0.000049417">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should not mutate original object" time="0.000032208">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redact (deep object redaction) &gt; should handle null and undefined" time="0.000037083">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; redactKeys &gt; should redact specific keys" time="0.000060875">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; createAuditSnapshot &gt; should return JSON string with redacted PII" time="0.000052083">
        </testcase>
        <testcase classname="tests/unit/piiRedactor.test.js" name="PII Redactor &gt; DEFAULT_PII_FIELDS &gt; should include common PII fields" time="0.000381667">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/policyEngine.test.js" timestamp="2025-12-21T08:31:14.322Z" hostname="MacBook-Pro-Piotr.local" tests="21" failures="0" errors="0" skipped="0" time="0.227933166">
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; Safety Guardrails Constants &gt; NEVER_AUTO_APPROVE_RISK_LEVELS should include HIGH" time="0.001351791">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; Safety Guardrails Constants &gt; ALWAYS_MANUAL_ACTION_TYPES should include MEETING_SCHEDULE" time="0.000109042">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; Safety Guardrails Constants &gt; should not include LOW in NEVER_AUTO_APPROVE_RISK_LEVELS" time="0.000112625">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; risk_level_lte &gt; should match when proposal risk is lower or equal" time="0.000157042">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; risk_level_lte &gt; should not match when proposal risk is higher" time="0.000085291">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; action_type_in &gt; should match when action type is in list" time="0.000067708">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; action_type_in &gt; should not match when action type is not in list" time="0.000061667">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; action_type_in &gt; should return false for non-array input" time="0.000039208">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; scope_eq &gt; should match when scope equals" time="0.000066417">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; scope_eq &gt; should not match when scope differs" time="0.00006825">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; signal_in &gt; should match when signal is in list" time="0.000049125">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; signal_in &gt; should not match when signal is not in list" time="0.000042792">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; signal_in &gt; should return false for non-array input" time="0.000035542">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; time_window &gt; should always match for anytime" time="0.000038917">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; CONDITION_HANDLERS (Pure Functions) &gt; time_window &gt; should return false for unrecognized values" time="0.00002725">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; evaluateConditions (Logic Tests) &gt; should return true when all conditions match" time="0.000066875">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; evaluateConditions (Logic Tests) &gt; should return false when any condition fails" time="0.00003425">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; evaluateConditions (Logic Tests) &gt; should return false for unknown conditions (safety)" time="0.000147375">
            <system-err>
[PolicyEngine] Unknown condition: unknown_condition

            </system-err>
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Core Logic &gt; evaluateConditions (Logic Tests) &gt; should return true for empty conditions" time="0.000028792">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Safety Checks &gt; HIGH risk is in NEVER_AUTO_APPROVE list" time="0.000029666">
        </testcase>
        <testcase classname="tests/unit/policyEngine.test.js" name="PolicyEngine Safety Checks &gt; MEETING_SCHEDULE is in ALWAYS_MANUAL list" time="0.000022667">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/regulatoryModeGuard.test.js" timestamp="2025-12-21T08:31:14.323Z" hostname="MacBook-Pro-Piotr.local" tests="31" failures="0" errors="0" skipped="0" time="0.111556209">
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Action Classification &gt; ALLOWED_ACTIONS &gt; should include all advisory-only actions" time="0.000838542">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Action Classification &gt; BLOCKED_ACTIONS &gt; should include all mutation actions" time="0.000183667">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should allow EXPLAIN_CONTEXT in regulatory mode" time="0.000084709">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should allow ANALYZE_RISKS in regulatory mode" time="0.000037916">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should allow EDUCATE in regulatory mode" time="0.000047166">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should BLOCK CREATE_DRAFT_TASK in regulatory mode" time="0.00004225">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should BLOCK CREATE_DRAFT_INITIATIVE in regulatory mode" time="0.000043708">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should BLOCK UPDATE_STATUS in regulatory mode" time="0.000037708">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should BLOCK EXECUTE_ACTION in regulatory mode" time="0.000038542">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should BLOCK MODIFY_ENTITY in regulatory mode" time="0.000044834">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should BLOCK DELETE_ENTITY in regulatory mode" time="0.000031666">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should block actions containing mutation keywords" time="0.000067583">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should allow actions without mutation keywords" time="0.000040166">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; isActionAllowed &gt; should handle null/undefined action gracefully" time="0.00003">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Regulatory Mode Prompt &gt; should contain prohibition statements" time="0.000064417">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Regulatory Mode Prompt &gt; should forbid action verbs" time="0.00004525">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Regulatory Mode Prompt &gt; should require advisory language" time="0.000038666">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Regulatory Mode Prompt &gt; should include example responses" time="0.000035292">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Forbidden Verbs List &gt; should contain all dangerous verbs" time="0.000166583">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Advisory Phrases List &gt; should contain recommended advisory language" time="0.000058584">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should block CREATE_DRAFT_TASK when regulatory mode is enabled" time="0.000213083">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should block UPDATE_STATUS when regulatory mode is enabled" time="0.000083083">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should allow EXPLAIN_CONTEXT when regulatory mode is enabled" time="0.000055584">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should allow ANALYZE_RISKS when regulatory mode is enabled" time="0.000053375">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should NOT block actions when regulatory mode is disabled" time="0.00005725">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should NOT block when no projectId is provided" time="0.000034209">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; enforceRegulatoryMode (with mocked isEnabled) &gt; should log blocked attempts to audit trail" time="0.000478625">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; getStatus &gt; should return full status object when enabled" time="0.000097">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; getStatus &gt; should return full status object when disabled" time="0.000042208">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Integration with AI Role System &gt; should override ANY role when regulatory mode is active" time="0.00010775">
        </testcase>
        <testcase classname="tests/unit/regulatoryModeGuard.test.js" name="Regulatory Mode Guard &gt; Safety: Fail-Safe Behavior &gt; should default to blocking when database error occurs" time="0.0000235">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/roi.test.ts" timestamp="2025-12-21T08:31:14.324Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.15481175">
        <testcase classname="tests/unit/roi.test.ts" name="Unit Test: ROI Calculation &gt; should calculate ROI correctly for positive values" time="0.000392334">
        </testcase>
        <testcase classname="tests/unit/roi.test.ts" name="Unit Test: ROI Calculation &gt; should handle zero cost to avoid infinity" time="0.0000685">
        </testcase>
        <testcase classname="tests/unit/roi.test.ts" name="Unit Test: ROI Calculation &gt; should return 0 for break-even" time="0.000047958">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/secretsVault.test.js" timestamp="2025-12-21T08:31:14.324Z" hostname="MacBook-Pro-Piotr.local" tests="12" failures="0" errors="0" skipped="0" time="0.153403625">
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Encryption/Decryption &gt; should encrypt and decrypt a string successfully" time="0.001827417">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Encryption/Decryption &gt; should encrypt and decrypt an object successfully" time="0.000237459">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Encryption/Decryption &gt; should return null when decrypting null/undefined" time="0.000142125">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Encryption/Decryption &gt; should throw on invalid encrypted data" time="0.000314666">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Encryption/Decryption &gt; should produce different ciphertext for same plaintext (random IV)" time="0.000169042">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Redaction &gt; should redact string values showing only last 4 characters" time="0.000076417">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Redaction &gt; should fully redact short strings" time="0.000050667">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Redaction &gt; should recursively redact nested objects" time="0.000059291">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Redaction &gt; should return empty object for null/undefined" time="0.000058125">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Validation &gt; should validate present fields as valid" time="0.00008275">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Validation &gt; should identify missing fields" time="0.0003405">
        </testcase>
        <testcase classname="tests/unit/secretsVault.test.js" name="SecretsVault Service &gt; Validation &gt; should handle null/undefined secrets" time="0.000058584">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/slaService.test.js" timestamp="2025-12-21T08:31:14.325Z" hostname="MacBook-Pro-Piotr.local" tests="7" failures="0" errors="0" skipped="0" time="0.261113375">
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; SLA_CHECK_INTERVAL_MS &gt; should be 10 minutes in milliseconds" time="0.007042291">
        </testcase>
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; Service Methods Existence &gt; should export findExpiredAssignments" time="0.002573875">
        </testcase>
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; Service Methods Existence &gt; should export markExpired" time="0.002406334">
        </testcase>
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; Service Methods Existence &gt; should export findOrgAdmin" time="0.001150291">
        </testcase>
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; Service Methods Existence &gt; should export escalateAssignment" time="0.001893292">
        </testcase>
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; Service Methods Existence &gt; should export runSlaCheck" time="0.002832667">
        </testcase>
        <testcase classname="tests/unit/slaService.test.js" name="SLAService Constants and Logic &gt; Service Methods Existence &gt; should export getSlaHealth" time="0.002223542">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/store.test.ts" timestamp="2025-12-21T08:31:14.325Z" hostname="MacBook-Pro-Piotr.local" tests="19" failures="0" errors="0" skipped="0" time="0.182984209">
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; initializes with correct default values" time="0.000792125">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets current view" time="0.000156916">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets session mode" time="0.000093458">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets current user" time="0.000268042">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; toggles sidebar open state" time="0.000108208">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; toggles sidebar collapse" time="0.0000845">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; adds chat message" time="0.00052925">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets chat messages" time="0.000163959">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; clears chat" time="0.000139833">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets bot typing state" time="0.000111917">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets current stream content" time="0.000059208">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; updates free session data" time="0.00006275">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; updates free session data with function" time="0.000075166">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; updates full session data" time="0.000064959">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets AI config" time="0.000069916">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; toggles theme" time="0.000062542">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; updates last chat message" time="0.000079916">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; logout resets state" time="0.000131708">
        </testcase>
        <testcase classname="tests/unit/store.test.ts" name="Store Test: useAppStore &gt; sets current project ID" time="0.000080625">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/templateGraphService.test.js" timestamp="2025-12-21T08:31:14.326Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.171602917">
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; createEmptyGraph &gt; creates a graph with START and END nodes connected" time="0.000852375">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; stepsToGraph &gt; converts empty steps to START → END graph" time="0.00021275">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; stepsToGraph &gt; converts steps array to linear graph" time="0.000215792">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; stepsToGraph &gt; preserves step data in nodes" time="0.000324">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; graphToSteps &gt; returns empty array for invalid graph" time="0.000120917">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; graphToSteps &gt; skips START and END nodes in output" time="0.00008325">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; graphToSteps &gt; converts linear graph to ordered steps" time="0.000111958">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; validateDAG &gt; returns valid for acyclic graph" time="0.000129709">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; validateDAG &gt; detects simple cycle" time="0.000068208">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; validateDAG &gt; returns invalid for null graph" time="0.000044875">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; findDeadEnds &gt; returns empty for valid graph" time="0.000072375">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; findDeadEnds &gt; finds nodes without outgoing edges" time="0.000126292">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; findBranchesWithoutElse &gt; returns empty when no BRANCH nodes" time="0.000062167">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; findBranchesWithoutElse &gt; finds BRANCH node without else path" time="0.000055875">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; findBranchesWithoutElse &gt; passes when BRANCH has else path" time="0.000041917">
        </testcase>
        <testcase classname="tests/unit/templateGraphService.test.js" name="templateGraphService &gt; roundtrip: steps → graph → steps &gt; preserves data through roundtrip" time="0.000078792">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/templateValidationService.test.js" timestamp="2025-12-21T08:31:14.326Z" hostname="MacBook-Pro-Piotr.local" tests="9" failures="0" errors="0" skipped="0" time="0.159808875">
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validate &gt; returns error for missing template graph" time="0.000753541">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validate &gt; returns error for invalid JSON in graph" time="0.000187166">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validate &gt; validates empty trigger_signal" time="0.000361875">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validateGraph &gt; returns error for missing nodes array" time="0.000126083">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validateGraph &gt; returns error for missing edges array" time="0.000102708">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validateGraph &gt; returns error when no START node exists" time="0.000101334">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validateGraph &gt; calls validateDAG and reports cycles" time="0.000210333">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validateGraph &gt; calls findDeadEnds and reports dead-end nodes" time="0.00014525">
        </testcase>
        <testcase classname="tests/unit/templateValidationService.test.js" name="templateValidationService &gt; validateGraph &gt; calls findBranchesWithoutElse and reports missing else" time="0.000130042">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/transformationEngine.test.ts" timestamp="2025-12-21T08:31:14.327Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.149023458">
        <testcase classname="tests/unit/transformationEngine.test.ts" name="Service Test: transformationEngine &gt; generates initiatives from session" time="0.000587625">
        </testcase>
        <testcase classname="tests/unit/transformationEngine.test.ts" name="Service Test: transformationEngine &gt; generates initiatives with required properties" time="0.001552208">
        </testcase>
        <testcase classname="tests/unit/transformationEngine.test.ts" name="Service Test: transformationEngine &gt; generates initiatives only for levels above current" time="0.000342625">
        </testcase>
        <testcase classname="tests/unit/transformationEngine.test.ts" name="Service Test: transformationEngine &gt; handles session with no gaps" time="0.000075625">
        </testcase>
        <testcase classname="tests/unit/transformationEngine.test.ts" name="Service Test: transformationEngine &gt; assigns priority based on current level" time="0.000075375">
        </testcase>
        <testcase classname="tests/unit/transformationEngine.test.ts" name="Service Test: transformationEngine &gt; assigns complexity based on target level" time="0.000804791">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/transformationScenarios.test.ts" timestamp="2025-12-21T08:31:14.327Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.173583917">
        <testcase classname="tests/unit/transformationScenarios.test.ts" name="Transformation Scenarios Logic &gt; should have 6 unique scenarios" time="0.000417875">
        </testcase>
        <testcase classname="tests/unit/transformationScenarios.test.ts" name="Transformation Scenarios Logic &gt; recommendScenario should return stabilize for high risk &amp; low budget" time="0.000079583">
        </testcase>
        <testcase classname="tests/unit/transformationScenarios.test.ts" name="Transformation Scenarios Logic &gt; recommendScenario should return quickwins for low risk &amp; low budget" time="0.000050667">
        </testcase>
        <testcase classname="tests/unit/transformationScenarios.test.ts" name="Transformation Scenarios Logic &gt; recommendScenario should return foundation for high risk &amp; high budget" time="0.000087708">
        </testcase>
        <testcase classname="tests/unit/transformationScenarios.test.ts" name="Transformation Scenarios Logic &gt; recommendScenario should default to hybrid" time="0.000048458">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/utils.test.ts" timestamp="2025-12-21T08:31:14.327Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.157433416">
        <testcase classname="tests/unit/utils.test.ts" name="Unit Test: Utilities &gt; should have utility functions available" time="0.000708667">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/workqueueService.test.js" timestamp="2025-12-21T08:31:14.327Z" hostname="MacBook-Pro-Piotr.local" tests="13" failures="0" errors="0" skipped="0" time="0.256121">
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; ASSIGNMENT_STATUSES Constants &gt; should export PENDING status" time="0.012842666">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; ASSIGNMENT_STATUSES Constants &gt; should export ACKED status" time="0.002547416">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; ASSIGNMENT_STATUSES Constants &gt; should export DONE status" time="0.00211725">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; ASSIGNMENT_STATUSES Constants &gt; should export EXPIRED status" time="0.002624708">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; ASSIGNMENT_STATUSES Constants &gt; should have 4 status types" time="0.001862834">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; DEFAULT_SLA_HOURS &gt; should default to 48 hours" time="0.001218792">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export assignApproval" time="0.001895083">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export acknowledgeApproval" time="0.00185525">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export completeApproval" time="0.001867792">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export getMyApprovals" time="0.001856459">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export getOrgApprovals" time="0.001526583">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export getOverdueCount" time="0.00262975">
        </testcase>
        <testcase classname="tests/unit/workqueueService.test.js" name="WorkqueueService Constants and Logic &gt; Service Methods Existence &gt; should export getAssignmentByProposal" time="0.000999959">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/hooks/useAIStream.test.ts" timestamp="2025-12-21T08:31:14.328Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.217906667">
        <testcase classname="tests/unit/hooks/useAIStream.test.ts" name="Hook Test: useAIStream &gt; initializes with correct default values" time="0.006323167">
        </testcase>
        <testcase classname="tests/unit/hooks/useAIStream.test.ts" name="Hook Test: useAIStream &gt; calls API with correct parameters" time="0.005149209">
            <system-out>
[DEBUG-D] startStream entry: {
  msgLength: 12,
  historyLength: 0,
  hasSystemPrompt: true,
  hasContext: false
}
[DEBUG-A,C] startStream onDone: { responseLength: 11 }

            </system-out>
        </testcase>
        <testcase classname="tests/unit/hooks/useAIStream.test.ts" name="Hook Test: useAIStream &gt; updates stream content as chunks arrive" time="0.001275666">
            <system-out>
[DEBUG-D] startStream entry: {
  msgLength: 4,
  historyLength: 0,
  hasSystemPrompt: false,
  hasContext: false
}
[DEBUG-A,C] startStream onDone: { responseLength: 11 }

            </system-out>
        </testcase>
        <testcase classname="tests/unit/hooks/useAIStream.test.ts" name="Hook Test: useAIStream &gt; calls onStreamDone callback when stream completes" time="0.003305583">
            <system-out>
[DEBUG-D] startStream entry: {
  msgLength: 4,
  historyLength: 0,
  hasSystemPrompt: false,
  hasContext: false
}
[DEBUG-A,C] startStream onDone: { responseLength: 8 }

            </system-out>
        </testcase>
        <testcase classname="tests/unit/hooks/useAIStream.test.ts" name="Hook Test: useAIStream &gt; handles stream errors" time="0.003960625">
            <system-out>
[DEBUG-D] startStream entry: {
  msgLength: 4,
  historyLength: 0,
  hasSystemPrompt: false,
  hasContext: false
}

[DEBUG-A,C] startStream error: { errorMsg: &apos;Error: Stream failed&apos; }

            </system-out>
            <system-err>
AI Stream Error: Error: Stream failed
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/hooks/useAIStream.test.ts:87:23
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/hooks/useAIStream.test.ts" name="Hook Test: useAIStream &gt; sets bot typing state correctly" time="0.00310975">
            <system-out>
[DEBUG-D] startStream entry: {
  msgLength: 4,
  historyLength: 0,
  hasSystemPrompt: false,
  hasContext: false
}
[DEBUG-A,C] startStream onDone: { responseLength: 11 }

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/hooks/useIndependentAI.test.ts" timestamp="2025-12-21T08:31:14.328Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.211849958">
        <testcase classname="tests/unit/hooks/useIndependentAI.test.ts" name="useIndependentAI &gt; initializes with default state" time="0.005886791">
        </testcase>
        <testcase classname="tests/unit/hooks/useIndependentAI.test.ts" name="useIndependentAI &gt; callAI manages loading state and accumulates stream" time="0.001329166">
        </testcase>
        <testcase classname="tests/unit/hooks/useIndependentAI.test.ts" name="useIndependentAI &gt; refineText calls callAI with correct prompt and system instruction" time="0.001877958">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/hooks/useScreenContext.test.ts" timestamp="2025-12-21T08:31:14.329Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.181309792">
        <testcase classname="tests/unit/hooks/useScreenContext.test.ts" name="Hook Test: useScreenContext &gt; sets screen context on mount after debounce" time="0.008142666">
        </testcase>
        <testcase classname="tests/unit/hooks/useScreenContext.test.ts" name="Hook Test: useScreenContext &gt; updates context when data changes" time="0.00148425">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/accessPolicyService.test.js" timestamp="2025-12-21T08:31:14.329Z" hostname="MacBook-Pro-Piotr.local" tests="11" failures="0" errors="0" skipped="5" time="0">
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService - skipped due to CJS/ESM mock interop &gt; getOrganizationType &gt; should return org info for valid organization" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService - skipped due to CJS/ESM mock interop &gt; getOrganizationType &gt; should return null for non-existent organization" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService - skipped due to CJS/ESM mock interop &gt; checkTrialStatus &gt; should return expired=false for PAID orgs" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService - skipped due to CJS/ESM mock interop &gt; checkTrialStatus &gt; should return expired=true for expired TRIAL orgs" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService - skipped due to CJS/ESM mock interop &gt; checkTrialStatus &gt; should return warning level for trials expiring in 5 days" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService - skipped due to CJS/ESM mock interop &gt; checkAccess - skipped due to CJS/ESM mock interop &gt; should block write actions for DEMO orgs" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService - skipped due to CJS/ESM mock interop &gt; checkAccess - skipped due to CJS/ESM mock interop &gt; should allow write actions for PAID orgs" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService - skipped due to CJS/ESM mock interop &gt; checkAccess - skipped due to CJS/ESM mock interop &gt; should block when project limit is reached" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService - skipped due to CJS/ESM mock interop &gt; isAIRoleAllowed - skipped due to CJS/ESM mock interop &gt; should allow ADVISOR role in trial mode" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService - skipped due to CJS/ESM mock interop &gt; isAIRoleAllowed - skipped due to CJS/ESM mock interop &gt; should block EXECUTOR role in trial mode" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/accessPolicyService.test.js" name="AccessPolicyService - skipped due to CJS/ESM mock interop &gt; getAIAccessContext - skipped due to CJS/ESM mock interop &gt; should return correct context for demo org" time="0">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/actionDecision.service.test.js" timestamp="2025-12-21T08:31:14.329Z" hostname="MacBook-Pro-Piotr.local" tests="12" failures="0" errors="0" skipped="6" time="0.16436275">
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; validation &gt; should throw error for missing required fields" time="0.001021625">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; validation &gt; should throw error for missing organization_id" time="0.000138959">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; validation &gt; should throw error for invalid decision type" time="0.000109416">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; MODIFIED_ALLOWLIST &gt; should define allowlist for TASK_CREATE" time="0.000350709">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; MODIFIED_ALLOWLIST &gt; should define allowlist for PLAYBOOK_ASSIGN" time="0.000109833">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; MODIFIED_ALLOWLIST &gt; should define allowlist for MEETING_SCHEDULE" time="0.000079709">
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; getDecisionsByProposal &gt; should query decisions by proposal_id" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; getDecisionsByProposal &gt; should parse JSON fields" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; getAuditLog - skipped due to CJS/ESM mock interop &gt; should enforce organization isolation" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; getAuditLog - skipped due to CJS/ESM mock interop &gt; should support SUPERADMIN_BYPASS for global access" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; getAuditLog - skipped due to CJS/ESM mock interop &gt; should support filtering by actionType" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/actionDecision.service.test.js" name="ActionDecisionService - HARDENED &gt; getAuditLog - skipped due to CJS/ESM mock interop &gt; should support filtering by decision" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/activityService.test.js" timestamp="2025-12-21T08:31:14.330Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.76194525">
        <testcase classname="tests/unit/backend/activityService.test.js" name="Backend Service Test: ActivityService &gt; log &gt; logs activity with all parameters" time="0.101933167">
        </testcase>
        <testcase classname="tests/unit/backend/activityService.test.js" name="Backend Service Test: ActivityService &gt; log &gt; handles optional parameters" time="0.100565292">
        </testcase>
        <testcase classname="tests/unit/backend/activityService.test.js" name="Backend Service Test: ActivityService &gt; getRecent &gt; fetches recent activities with default limit" time="0.111066083">
        </testcase>
        <testcase classname="tests/unit/backend/activityService.test.js" name="Backend Service Test: ActivityService &gt; getRecent &gt; fetches recent activities with custom limit" time="0.102422583">
        </testcase>
        <testcase classname="tests/unit/backend/activityService.test.js" name="Backend Service Test: ActivityService &gt; getRecent &gt; handles database errors gracefully" time="0.001302792">
        </testcase>
        <testcase classname="tests/unit/backend/activityService.test.js" name="Backend Service Test: ActivityService &gt; getByOrganization &gt; fetches activities for organization" time="0.102654375">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiActionExecutor.test.js" timestamp="2025-12-21T08:31:14.330Z" hostname="MacBook-Pro-Piotr.local" tests="28" failures="20" errors="0" skipped="0" time="0.208926125">
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should export all action types" time="0.00059625">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; ACTION_STATUS &gt; should export all action statuses" time="0.000116541">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction &gt; should block action when regulatory mode is enabled" time="0.013240708">
            <system-err>
RegulatoryModeGuard.logBlockedAttempt error: [Error: SQLITE_ERROR: table ai_audit_logs has no column named regulatory_mode] {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;
}

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction &gt; should block action when AI role does not permit" time="0.005877417">
            <system-err>
RegulatoryModeGuard.logBlockedAttempt error: [Error: SQLITE_ERROR: table ai_audit_logs has no column named regulatory_mode] {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;
}

            </system-err>
            <failure message="expected undefined to be &apos;ADVISOR&apos; // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be &apos;ADVISOR&apos; // Object.is equality

- Expected: 
&quot;ADVISOR&quot;

+ Received: 
undefined

 ❯ tests/unit/backend/aiActionExecutor.test.js:145:40
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction &gt; should block action when policy does not allow" time="0.003058375">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction &gt; should create action with PENDING status when approval required" time="0.014631834">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ tests/unit/backend/aiActionExecutor.test.js:180:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction &gt; should create action with APPROVED status when no approval needed" time="0.007521584">
            <failure message="expected undefined to be false // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be false // Object.is equality

- Expected: 
false

+ Received: 
undefined

 ❯ tests/unit/backend/aiActionExecutor.test.js:194:45
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction &gt; should force approval when AI role is MANAGER" time="0.005743125">
            <system-err>
RegulatoryModeGuard.logBlockedAttempt error: [Error: SQLITE_ERROR: table ai_audit_logs has no column named regulatory_mode] {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;
}

            </system-err>
            <failure message="expected undefined to be true // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ tests/unit/backend/aiActionExecutor.test.js:212:45
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; requestAction &gt; should handle database error" time="0.006094167">
            <failure message="promise resolved &quot;{ success: false, …(2) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ success: false, …(2) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;error&quot;: &quot;Action requires ASSISTED policy level, but current is ADVISORY&quot;,
+   &quot;requiresUpgrade&quot;: true,
+   &quot;success&quot;: false,
  }

 ❯ tests/unit/backend/aiActionExecutor.test.js:228:15
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; createDraft &gt; should create task draft with proper action type" time="0.000774542">
            <system-err>
RegulatoryModeGuard.logBlockedAttempt error: [Error: SQLITE_ERROR: table ai_audit_logs has no column named regulatory_mode] {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;
}

            </system-err>
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ tests/unit/backend/aiActionExecutor.test.js:242:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; createDraft &gt; should create initiative draft with proper action type" time="0.000375417">
            <system-err>
RegulatoryModeGuard.logBlockedAttempt error: [Error: SQLITE_ERROR: table ai_audit_logs has no column named regulatory_mode] {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;
}

            </system-err>
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ tests/unit/backend/aiActionExecutor.test.js:255:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; createDraft &gt; should store draft content after creation" time="0.002328542">
            <system-err>
RegulatoryModeGuard.logBlockedAttempt error: [Error: SQLITE_ERROR: table ai_audit_logs has no column named regulatory_mode] {
  errno: 1,
  code: &apos;SQLITE_ERROR&apos;
}

            </system-err>
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ tests/unit/backend/aiActionExecutor.test.js:267:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; approveAction &gt; should approve pending action" time="0.000966708">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ tests/unit/backend/aiActionExecutor.test.js:284:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; approveAction &gt; should fail when action not found or already processed" time="0.000332833">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; approveAction &gt; should handle database error" time="0.003036">
            <failure message="promise resolved &quot;{ success: false, …(1) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ success: false, …(1) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;error&quot;: &quot;Action not found or already processed&quot;,
+   &quot;success&quot;: false,
  }

 ❯ tests/unit/backend/aiActionExecutor.test.js:311:17
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; rejectAction &gt; should reject pending action" time="0.000925042">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ tests/unit/backend/aiActionExecutor.test.js:333:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; rejectAction &gt; should fail when action not found" time="0.000538834">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; executeAction &gt; should return error when action not found" time="0.001854958">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; executeAction &gt; should return error when action is not APPROVED" time="0.003197584">
            <failure message="expected &apos;Action not found&apos; to contain &apos;PENDING, not APPROVED&apos;" type="AssertionError">
AssertionError: expected &apos;Action not found&apos; to contain &apos;PENDING, not APPROVED&apos;

Expected: &quot;PENDING, not APPROVED&quot;
Received: &quot;Action not found&quot;

 ❯ tests/unit/backend/aiActionExecutor.test.js:377:34
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; executeAction &gt; should execute CREATE_DRAFT_TASK action" time="0.000515917">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ tests/unit/backend/aiActionExecutor.test.js:403:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; executeAction &gt; should execute CREATE_DRAFT_INITIATIVE action" time="0.000973125">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ tests/unit/backend/aiActionExecutor.test.js:431:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; executeAction &gt; should execute GENERATE_REPORT action" time="0.000287458">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ tests/unit/backend/aiActionExecutor.test.js:452:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; executeAction &gt; should handle default action type" time="0.000156833">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ tests/unit/backend/aiActionExecutor.test.js:471:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; getPendingActions &gt; should return empty array when no pending actions" time="0.000571209">
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; getPendingActions &gt; should return parsed pending actions" time="0.000659292">
            <failure message="expected [] to have a length of 1 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

 ❯ tests/unit/backend/aiActionExecutor.test.js:506:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; getPendingActions &gt; should filter by projectId and organizationId" time="0.001622792">
            <failure message="Cannot read properties of undefined (reading &apos;0&apos;)" type="TypeError">
TypeError: Cannot read properties of undefined (reading &apos;0&apos;)
 ❯ tests/unit/backend/aiActionExecutor.test.js:515:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; getPendingActions &gt; should handle malformed JSON gracefully" time="0.001213">
            <failure message="expected [] to have a length of 1 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

 ❯ tests/unit/backend/aiActionExecutor.test.js:536:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiActionExecutor.test.js" name="AIActionExecutor &gt; _logAudit &gt; should create audit log entry" time="0.000440541">
            <failure message="SQLITE_CONSTRAINT: NOT NULL constraint failed: ai_audit_logs.organization_id" type="Error">
Error: SQLITE_CONSTRAINT: NOT NULL constraint failed: ai_audit_logs.organization_id
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { errno: 19, code: &apos;SQLITE_CONSTRAINT&apos; }
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiActions.test.js" timestamp="2025-12-21T08:31:14.334Z" hostname="MacBook-Pro-Piotr.local" tests="23" failures="0" errors="0" skipped="0" time="0.243155208">
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should have 7 action types" time="0.006848625">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define CREATE_DRAFT_TASK type" time="0.000160625">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define CREATE_DRAFT_INITIATIVE type" time="0.000087042">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define SUGGEST_ROADMAP_CHANGE type" time="0.000070041">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define GENERATE_REPORT type" time="0.000070125">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define PREPARE_DECISION_SUMMARY type" time="0.000048875">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define EXPLAIN_CONTEXT type" time="0.000045042">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_TYPES &gt; should define ANALYZE_RISKS type" time="0.000042875">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_STATUS &gt; should define PENDING status" time="0.00006025">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_STATUS &gt; should define APPROVED status" time="0.000063875">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_STATUS &gt; should define REJECTED status" time="0.000050292">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; ACTION_STATUS &gt; should define EXECUTED status" time="0.000040917">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; Service Structure &gt; should export requestAction function" time="0.000037875">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; Service Structure &gt; should export createDraft function" time="0.000034708">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; Service Structure &gt; should export approveAction function" time="0.0000335">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; Service Structure &gt; should export rejectAction function" time="0.000033292">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; Service Structure &gt; should export getPendingActions function" time="0.00003375">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIActionExecutor &gt; Service Structure &gt; should export executeAction function" time="0.000034167">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIAuditLogger &gt; Service Structure &gt; should export logInteraction function" time="0.005164958">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIAuditLogger &gt; Service Structure &gt; should export logSuggestion function" time="0.000081875">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIAuditLogger &gt; Service Structure &gt; should export recordUserDecision function" time="0.00004725">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIAuditLogger &gt; Service Structure &gt; should export getAuditLogs function" time="0.00003575">
        </testcase>
        <testcase classname="tests/unit/backend/aiActions.test.js" name="AIAuditLogger &gt; Service Structure &gt; should export getAuditStats function" time="0.000030166">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiAnalyticsService.test.js" timestamp="2025-12-21T08:31:14.335Z" hostname="MacBook-Pro-Piotr.local" tests="7" failures="0" errors="0" skipped="7" time="0">
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; getLastActionTrends &gt; should aggregate action counts correctly [BLOCKED: MOCK BYPASS]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; getApprovalStats &gt; should distinguish between auto and manual approvals [BLOCKED: MOCK BYPASS]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; getPlaybookStats &gt; should calculate completion rates and average duration [BLOCKED: MOCK BYPASS]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; getDeadLetterStats &gt; should aggregate dead letter jobs by error code [BLOCKED: MOCK BYPASS]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; getROISummary &gt; should combine metrics from multiple sources [BLOCKED: MOCK BYPASS]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; exportData &gt; should export CSV format correctly [BLOCKED: MOCK BYPASS]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiAnalyticsService.test.js" name="AI Analytics Service &gt; exportData &gt; should export JSON format correctly [BLOCKED: MOCK BYPASS]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiAuditLogger.test.js" timestamp="2025-12-21T08:31:14.335Z" hostname="MacBook-Pro-Piotr.local" tests="24" failures="0" errors="0" skipped="0" time="0.111042417">
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logInteraction &gt; should log a basic AI interaction" time="0.000705792">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logInteraction &gt; should store correlation_id if provided" time="0.000143125">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logInteraction &gt; should handle optional fields" time="0.000080708">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logInteraction &gt; should store explanation data if provided" time="0.000085">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logInteraction &gt; should handle database error" time="0.000551333">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logWithExplanation &gt; should log interaction with full explanation object" time="0.000109292">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logWithExplanation &gt; should default actionType to AI_RESPONSE" time="0.000053375">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logSuggestion &gt; should log AI suggestion" time="0.000067291">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; logSuggestion &gt; should handle minimal parameters" time="0.000051916">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; recordUserDecision &gt; should update user decision on logged suggestion" time="0.000106542">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; recordUserDecision &gt; should record rejection without feedback" time="0.000039917">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; recordUserDecision &gt; should handle non-existent audit entry" time="0.000046333">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditLogs &gt; should return audit logs for organization" time="0.000393292">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditLogs &gt; should filter by project if provided" time="0.000098333">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditLogs &gt; should filter by date range" time="0.000036125">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditLogs &gt; should limit results" time="0.000032167">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditLogs &gt; should filter by action type" time="0.000029334">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditLogs &gt; should return empty array on database error" time="0.000093417">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditStats &gt; should return statistics for organization" time="0.000094708">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getAuditStats &gt; should filter by project if provided" time="0.000103917">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; getRoleDistribution &gt; should return role distribution" time="0.00008625">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; clearOldLogs &gt; should clear logs older than specified days" time="0.00007025">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; clearOldLogs &gt; should use default retention period of 90 days" time="0.000029">
        </testcase>
        <testcase classname="tests/unit/backend/aiAuditLogger.test.js" name="AIAuditLogger &gt; clearOldLogs &gt; should respect custom retention period" time="0.000028791">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiContextBuilder.test.js" timestamp="2025-12-21T08:31:14.336Z" hostname="MacBook-Pro-Piotr.local" tests="21" failures="4" errors="0" skipped="0" time="0.281655084">
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; buildContext &gt; should build complete 6-layer context" time="0.051530708">
            <system-err>
[AIContextBuilder] Failed to get PMO health snapshot: Project not found

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; buildContext &gt; should include PMO health snapshot when available" time="0.020735792">
            <system-err>
[AIContextBuilder] Failed to get PMO health snapshot: Project not found

            </system-err>
            <failure message="Cannot read properties of null (reading &apos;overallScore&apos;)" type="TypeError">
TypeError: Cannot read properties of null (reading &apos;overallScore&apos;)
 ❯ tests/unit/backend/aiContextBuilder.test.js:75:46
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; buildContext &gt; should work without projectId" time="0.0068455">
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; buildContext &gt; should include context hash" time="0.006547667">
            <system-err>
[AIContextBuilder] Failed to get PMO health snapshot: Project not found

            </system-err>
            <failure message="expected undefined to be defined" type="AssertionError">
AssertionError: expected undefined to be defined
 ❯ tests/unit/backend/aiContextBuilder.test.js:88:33
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; buildContext &gt; should handle PMOHealthService unavailability gracefully" time="0.012232666">
            <system-err>
[AIContextBuilder] Failed to get PMO health snapshot: Project not found

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _buildPlatformContext &gt; should include user and organization info" time="0.003794791">
            <failure message="expected undefined to be defined" type="AssertionError">
AssertionError: expected undefined to be defined
 ❯ tests/unit/backend/aiContextBuilder.test.js:129:42
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _buildPlatformContext &gt; should include subscription status" time="0.004384208">
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _buildOrganizationContext &gt; should include organization details" time="0.003484667">
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _buildOrganizationContext &gt; should include team members count" time="0.004810125">
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _buildProjectContext &gt; should return null when no projectId" time="0.002672208">
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _buildProjectContext &gt; should include project details" time="0.00331275">
            <system-err>
[AIContextBuilder] Failed to get PMO health snapshot: Project not found

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _buildProjectContext &gt; should include initiative and task counts" time="0.0037705">
            <system-err>
[AIContextBuilder] Failed to get PMO health snapshot: Project not found

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _buildExecutionContext &gt; should include recent activities" time="0.00243475">
            <system-err>
[AIContextBuilder] Failed to get PMO health snapshot: Project not found

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _buildExecutionContext &gt; should include user assignments" time="0.003788875">
            <system-err>
[AIContextBuilder] Failed to get PMO health snapshot: Project not found

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _buildKnowledgeContext &gt; should include project documents" time="0.003010583">
            <system-err>
[AIContextBuilder] Failed to get PMO health snapshot: Project not found

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _buildKnowledgeContext &gt; should include historical insights" time="0.003697542">
            <system-err>
[AIContextBuilder] Failed to get PMO health snapshot: Project not found

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _buildExternalContext &gt; should include external integrations info" time="0.001760917">
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _buildExternalContext &gt; should handle no external integrations" time="0.002074708">
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; _generateHash &gt; should generate consistent hash for same inputs" time="0.006581667">
            <system-err>
[AIContextBuilder] Failed to get PMO health snapshot: Project not found

[AIContextBuilder] Failed to get PMO health snapshot: Project not found

            </system-err>
            <failure message="expected undefined to be defined" type="AssertionError">
AssertionError: expected undefined to be defined
 ❯ tests/unit/backend/aiContextBuilder.test.js:379:34
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; options handling &gt; should respect skipPMOHealth option" time="0.003560333">
            <system-err>
[AIContextBuilder] Failed to get PMO health snapshot: Project not found

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiContextBuilder.test.js" name="AIContextBuilder &gt; options handling &gt; should respect depth option" time="0.005145333">
            <system-err>
[AIContextBuilder] Failed to get PMO health snapshot: Project not found

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiCoreLayer.test.js" timestamp="2025-12-21T08:31:14.338Z" hostname="MacBook-Pro-Piotr.local" tests="56" failures="0" errors="0" skipped="0" time="0.394079875">
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export buildContext function" time="0.00507975">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _buildPlatformContext function" time="0.000123875">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _buildOrganizationContext function" time="0.000090042">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _buildProjectContext function" time="0.000075625">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _buildExecutionContext function" time="0.000071041">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _buildKnowledgeContext function" time="0.000050708">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _buildExternalContext function" time="0.000043667">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; Service Structure &gt; should export _generateHash function" time="0.0000485">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; _generateHash &gt; should generate consistent hash" time="0.000128125">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIContextBuilder &gt; _generateHash &gt; should generate different hash for different inputs" time="0.000309917">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; POLICY_LEVELS &gt; should define ADVISORY level" time="0.004071916">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; POLICY_LEVELS &gt; should define ASSISTED level" time="0.000178708">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; POLICY_LEVELS &gt; should define PROACTIVE level" time="0.000099542">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; POLICY_LEVELS &gt; should define AUTOPILOT level" time="0.000081583">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; AI_ROLES &gt; should define ADVISOR role" time="0.000082833">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; AI_ROLES &gt; should define PMO_MANAGER role" time="0.000080125">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; AI_ROLES &gt; should define EXECUTOR role" time="0.000068208">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; AI_ROLES &gt; should define EDUCATOR role" time="0.00006875">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; Service Structure &gt; should export getEffectivePolicy function" time="0.000077542">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; Service Structure &gt; should export canPerformAction function" time="0.000069292">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; Service Structure &gt; should export getPolicySummary function" time="0.000132125">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIPolicyEngine &gt; Service Structure &gt; should export updatePolicy function" time="0.000104917">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; MEMORY_TYPES &gt; should define DECISION type" time="0.007636834">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; MEMORY_TYPES &gt; should define PHASE_TRANSITION type" time="0.000088625">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; MEMORY_TYPES &gt; should define RECOMMENDATION type" time="0.000045833">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; MEMORY_TYPES &gt; should define PATTERN type" time="0.000034833">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; createSession &gt; should create session with unique conversationId" time="0.0002515">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; createSession &gt; should create session with empty messages array" time="0.000135417">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; createSession &gt; should create session with startedAt timestamp" time="0.000061292">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; addMessage &gt; should add message to session" time="0.000790042">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; addMessage &gt; should add timestamp to message" time="0.000144667">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; Service Structure &gt; should export recordProjectMemory function" time="0.00007225">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; Service Structure &gt; should export getUserPreferences function" time="0.000064917">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIMemoryManager &gt; Service Structure &gt; should export updateUserPreferences function" time="0.0000735">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; AI_ROLES &gt; should define all 4 roles" time="0.005597125">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; CHAT_MODES &gt; should define EXPLAIN mode" time="0.000083667">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; CHAT_MODES &gt; should define GUIDE mode" time="0.000045416">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; CHAT_MODES &gt; should define ANALYZE mode" time="0.000033875">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; CHAT_MODES &gt; should define DO mode" time="0.000030458">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; CHAT_MODES &gt; should define TEACH mode" time="0.000029084">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should detect EXPLAIN intent" time="0.000076875">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should detect GUIDE intent" time="0.0000415">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should detect ANALYZE intent" time="0.000043583">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should detect DO intent" time="0.000040291">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should detect TEACH intent" time="0.000036958">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should default to EXPLAIN" time="0.000027">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _selectRole &gt; should select ADVISOR for EXPLAIN intent" time="0.000055">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _selectRole &gt; should select PMO_MANAGER for GUIDE intent" time="0.000036625">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _selectRole &gt; should select EXECUTOR for DO intent" time="0.00002975">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _selectRole &gt; should select EDUCATOR for TEACH intent" time="0.000027792">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; _selectRole &gt; should fallback to ADVISOR if role not active" time="0.00002575">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; getRoleDescription &gt; should return description for ADVISOR" time="0.000082875">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; getRoleDescription &gt; should return description for PMO_MANAGER" time="0.000042959">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; getRoleDescription &gt; should return description for EXECUTOR" time="0.000029292">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; getRoleDescription &gt; should return description for EDUCATOR" time="0.000028291">
        </testcase>
        <testcase classname="tests/unit/backend/aiCoreLayer.test.js" name="AIOrchestrator &gt; Service Structure &gt; should export processMessage function" time="0.000026">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiCostControlService.test.js" timestamp="2025-12-21T08:31:14.340Z" hostname="MacBook-Pro-Piotr.local" tests="27" failures="20" errors="0" skipped="0" time="0.127898708">
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; setGlobalBudget &gt; should set global budget" time="0.003910291">
            <failure message="expected undefined to be true // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ tests/unit/backend/aiCostControlService.test.js:49:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; setGlobalBudget &gt; should handle database errors" time="0.002984208">
            <failure message="expected [Function] to throw error including &apos;DB Error&apos; but got &apos;SQLITE_CONSTRAINT: UNIQUE constraint …&apos;" type="AssertionError">
AssertionError: expected [Function] to throw error including &apos;DB Error&apos; but got &apos;SQLITE_CONSTRAINT: UNIQUE constraint …&apos;

Expected: &quot;DB Error&quot;
Received: &quot;SQLITE_CONSTRAINT: UNIQUE constraint failed: ai_budgets.id&quot;

 ❯ tests/unit/backend/aiCostControlService.test.js:63:13
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; setTenantBudget &gt; should set tenant budget" time="0.000880916">
            <failure message="expected undefined to be true // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ tests/unit/backend/aiCostControlService.test.js:71:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; setProjectBudget &gt; should set project budget" time="0.000624667">
            <failure message="expected undefined to be true // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ tests/unit/backend/aiCostControlService.test.js:84:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; getBudget &gt; should return budget when found" time="0.000466292">
            <failure message="expected undefined to be 50 // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be 50 // Object.is equality

- Expected: 
50

+ Received: 
undefined

 ❯ tests/unit/backend/aiCostControlService.test.js:111:46
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; getBudget &gt; should return null when not found" time="0.000164625">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; checkBudget &gt; should allow action when no limits set" time="0.000458208">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; checkBudget &gt; should allow action when within budget" time="0.001035542">
            <failure message="expected 500 to be 85 // Object.is equality" type="AssertionError">
AssertionError: expected 500 to be 85 // Object.is equality

- Expected
+ Received

- 85
+ 500

 ❯ tests/unit/backend/aiCostControlService.test.js:145:44
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; checkBudget &gt; should block action when exceeding budget without auto-downgrade" time="0.00049375">
            <failure message="expected true to be false // Object.is equality" type="AssertionError">
AssertionError: expected true to be false // Object.is equality

- Expected
+ Received

- false
+ true

 ❯ tests/unit/backend/aiCostControlService.test.js:162:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; checkBudget &gt; should trigger downgrade when exceeding budget with auto-downgrade enabled" time="0.000606708">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ tests/unit/backend/aiCostControlService.test.js:181:44
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; checkBudget &gt; should check project budget limit" time="0.000527959">
            <failure message="expected true to be false // Object.is equality" type="AssertionError">
AssertionError: expected true to be false // Object.is equality

- Expected
+ Received

- false
+ true

 ❯ tests/unit/backend/aiCostControlService.test.js:203:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; estimateCost &gt; should calculate cost for known models" time="0.00010875">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; estimateCost &gt; should fallback to default for unknown models" time="0.000042042">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; logUsage &gt; should log usage and update budgets" time="0.000958333">
            <failure message="expected undefined to be true // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ tests/unit/backend/aiCostControlService.test.js:237:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; logUsage &gt; should handle updates without project" time="0.000803916">
            <failure message="expected undefined to be true // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ tests/unit/backend/aiCostControlService.test.js:251:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; resetMonthlyUsage &gt; should reset usage for all scopes if unspecified" time="0.000596334">
            <failure message="expected undefined to be true // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ tests/unit/backend/aiCostControlService.test.js:259:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; resetMonthlyUsage &gt; should reset usage for specific scope" time="0.000805083">
            <failure message="expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{…}, …(2) ]

Number of calls: 0
" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{…}, …(2) ]

Number of calls: 0

 ❯ tests/unit/backend/aiCostControlService.test.js:269:32
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; Model Selection &gt; should return correct category for action" time="0.000306583">
            <failure message="expected &apos;chat&apos; to be &apos;reasoning&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;chat&apos; to be &apos;reasoning&apos; // Object.is equality

Expected: &quot;reasoning&quot;
Received: &quot;chat&quot;

 ❯ tests/unit/backend/aiCostControlService.test.js:279:80
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; Model Selection &gt; should fallback to CHAT for unknown action" time="0.00005">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; Model Selection &gt; should prioritize role if present" time="0.000157875">
            <failure message="expected &apos;chat&apos; to be &apos;execution&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;chat&apos; to be &apos;execution&apos; // Object.is equality

Expected: &quot;execution&quot;
Received: &quot;chat&quot;

 ❯ tests/unit/backend/aiCostControlService.test.js:288:83
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; getTierForBudget &gt; should return tier 1 for non-downgraded reasoning" time="0.000066167">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; getTierForBudget &gt; should downgrade premium to standard when budget constrained" time="0.000164292">
            <failure message="expected 1 to be 2 // Object.is equality" type="AssertionError">
AssertionError: expected 1 to be 2 // Object.is equality

- Expected
+ Received

- 2
+ 1

 ❯ tests/unit/backend/aiCostControlService.test.js:302:26
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; getTierForBudget &gt; should downgrade standard to budget when constrained" time="0.000128125">
            <failure message="expected 2 to be 3 // Object.is equality" type="AssertionError">
AssertionError: expected 2 to be 3 // Object.is equality

- Expected
+ Received

- 3
+ 2

 ❯ tests/unit/backend/aiCostControlService.test.js:308:26
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; getTierForBudget &gt; should keep budget tier at 3 even when constrained" time="0.000033916">
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; Analytics &gt; should return usage summary" time="0.000876333">
            <failure message="expected { totalRequests: 2, …(6) } to have property &apos;length&apos;" type="AssertionError">
AssertionError: expected { totalRequests: 2, …(6) } to have property &apos;length&apos;
 ❯ tests/unit/backend/aiCostControlService.test.js:328:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; Analytics &gt; should return user usage" time="0.000531125">
            <failure message="expected &quot;vi.fn()&quot; to be called at least once" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called at least once
 ❯ tests/unit/backend/aiCostControlService.test.js:334:32
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiCostControlService.test.js" name="AICostControlService &gt; Analytics &gt; should return all budgets" time="0.000838709">
            <failure message="expected [ { id: &apos;budget-global&apos;, …(8) }, …(2) ] to have a length of 1 but got 3" type="AssertionError">
AssertionError: expected [ { id: &apos;budget-global&apos;, …(8) }, …(2) ] to have a length of 1 but got 3

- Expected
+ Received

- 1
+ 3

 ❯ tests/unit/backend/aiCostControlService.test.js:339:28
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiDecisionGovernance.test.js" timestamp="2025-12-21T08:31:14.343Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="4" time="0.126771667">
        <testcase classname="tests/unit/backend/aiDecisionGovernance.test.js" name="AI Decision Governance Service &gt; detectDecisionNeeded &gt; should detect phase transition decision" time="0.000557958">
        </testcase>
        <testcase classname="tests/unit/backend/aiDecisionGovernance.test.js" name="AI Decision Governance Service &gt; detectDecisionNeeded &gt; should check DB for blocked task reason [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiDecisionGovernance.test.js" name="AI Decision Governance Service &gt; getBlockingDecisions &gt; should calculate daysWaiting correctly [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiDecisionGovernance.test.js" name="AI Decision Governance Service &gt; prepareDecisionBrief &gt; should generate a brief and insert into DB [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiDecisionGovernance.test.js" name="AI Decision Governance Service &gt; registerImpact &gt; should record an impact with mocked UUID [BLOCKED: REQUIRE UUID FAIL]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiExecutiveReporting.test.js" timestamp="2025-12-21T08:31:14.343Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="2" time="0">
        <testcase classname="tests/unit/backend/aiExecutiveReporting.test.js" name="AI Executive Reporting Service &gt; generateReport &gt; should dispatch to project status report handler [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiExecutiveReporting.test.js" name="AI Executive Reporting Service &gt; generateReport &gt; should dispatch to portfolio overview handler [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiExplainabilityService.test.js" timestamp="2025-12-21T08:31:14.343Z" hostname="MacBook-Pro-Piotr.local" tests="35" failures="0" errors="0" skipped="0" time="0.176278917">
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; computeConfidenceLevel &gt; returns LOW when context is null" time="0.000455084">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; computeConfidenceLevel &gt; returns LOW when context is empty" time="0.000084542">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; computeConfidenceLevel &gt; returns LOW when PMOHealthSnapshot is missing and no project data" time="0.000057084">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; computeConfidenceLevel &gt; returns MEDIUM when PMOHealthSnapshot exists with blockers" time="0.000065958">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; computeConfidenceLevel &gt; returns HIGH when full context with no blockers" time="0.000074416">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; computeConfidenceLevel &gt; penalizes conflicting signals (many blockers AND many pending decisions)" time="0.000323083">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildReasoningSummary &gt; returns default message when no health data" time="0.000078833">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildReasoningSummary &gt; includes overdue tasks in reasoning" time="0.000042667">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildReasoningSummary &gt; includes pending decisions in reasoning" time="0.00004225">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildReasoningSummary &gt; includes phase information" time="0.000054083">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildReasoningSummary &gt; includes project memory count when provided" time="0.000034083">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; extractConstraintsApplied &gt; includes AI role constraint" time="0.000086166">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; extractConstraintsApplied &gt; includes policy level constraint" time="0.000037708">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; extractConstraintsApplied &gt; includes phase gate constraint" time="0.000042916">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; extractConstraintsApplied &gt; includes regulatory mode constraint" time="0.000042125">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; identifyDataUsed &gt; returns projectData false when no project context" time="0.0000475">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; identifyDataUsed &gt; returns projectData true when project context exists" time="0.000024459">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; identifyDataUsed &gt; returns projectMemoryCount from options" time="0.000024791">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; identifyDataUsed &gt; returns empty externalSources when internet disabled" time="0.000198958">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; identifyDataUsed &gt; returns external sources when internet enabled" time="0.000093584">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildAIExplanation &gt; generates valid AIExplanation object" time="0.000588875">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildAIExplanation &gt; includes all required fields in correct format" time="0.000367292">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildAIExplanation &gt; timestamp is ISO 8601 format" time="0.0001145">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildAIExplanation &gt; maps orchestrator roles to project roles correctly" time="0.000052125">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildExplainabilityFooter &gt; returns empty string when explanation is null" time="0.000056292">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildExplainabilityFooter &gt; formats human-readable footer" time="0.000072666">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildExplainabilityFooter &gt; shows max 3 constraints" time="0.000071542">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; buildExplainabilityFooter &gt; does not expose raw internals" time="0.00004675">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; Internal Helpers &gt; _countPopulatedLayers &gt; returns 0 for null context" time="0.000026625">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; Internal Helpers &gt; _countPopulatedLayers &gt; counts populated layers correctly" time="0.000034959">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; Internal Helpers &gt; _getBlockerCount &gt; returns 0 when no blockers" time="0.000022709">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; Internal Helpers &gt; _getBlockerCount &gt; counts blockers from PMO health snapshot" time="0.000024292">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; Internal Helpers &gt; _getBlockerCount &gt; counts blockers from execution context" time="0.00002325">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="AIExplainabilityService &gt; Internal Helpers &gt; _getBlockerCount &gt; sums blockers from both sources" time="0.00002425">
        </testcase>
        <testcase classname="tests/unit/backend/aiExplainabilityService.test.js" name="Sample Output &gt; generates sample AIExplanation matching the spec" time="0.000252875">
            <system-out>

========== SAMPLE AIExplanation JSON ==========
{
  &quot;aiRole&quot;: &quot;ADVISOR&quot;,
  &quot;regulatoryMode&quot;: false,
  &quot;confidenceLevel&quot;: &quot;HIGH&quot;,
  &quot;reasoningSummary&quot;: &quot;Based on 3 overdue task(s), 1 pending decision(s), current phase: Execution, 5 project memory item(s) consulted&quot;,
  &quot;dataUsed&quot;: {
    &quot;projectData&quot;: true,
    &quot;projectMemoryCount&quot;: 5,
    &quot;externalSources&quot;: []
  },
  &quot;constraintsApplied&quot;: [
    &quot;AI Role: ADVISOR (explain/suggest only, no mutations)&quot;,
    &quot;AI Policy: ADVISORY mode&quot;,
    &quot;Phase Gate: Execution&quot;
  ],
  &quot;timestamp&quot;: &quot;2025-12-21T08:31:08.360Z&quot;
}
================================================


            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiExternalData.test.js" timestamp="2025-12-21T08:31:14.348Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.190841416">
        <testcase classname="tests/unit/backend/aiExternalData.test.js" name="AI External Data Control &gt; Internet Toggle &gt; should block external sources when internetEnabled is false" time="0.000422791">
        </testcase>
        <testcase classname="tests/unit/backend/aiExternalData.test.js" name="AI External Data Control &gt; Internet Toggle &gt; should allow external sources when internetEnabled is true" time="0.000094667">
        </testcase>
        <testcase classname="tests/unit/backend/aiExternalData.test.js" name="AI External Data Control &gt; Internet Toggle &gt; should respect project-level internet toggle" time="0.000049875">
        </testcase>
        <testcase classname="tests/unit/backend/aiExternalData.test.js" name="AI External Data Control &gt; RAG Toggle (GAP-03) &gt; should disable RAG when rag_enabled is 0" time="0.000053666">
        </testcase>
        <testcase classname="tests/unit/backend/aiExternalData.test.js" name="AI External Data Control &gt; RAG Toggle (GAP-03) &gt; should enable RAG by default" time="0.000059416">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiFailureHandler.test.js" timestamp="2025-12-21T08:31:14.348Z" hostname="MacBook-Pro-Piotr.local" tests="9" failures="0" errors="0" skipped="1" time="0.342757083">
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AI Failure Handler Service &gt; Logic: _identifyFailureType &gt; should identify timeout errors" time="0.010014959">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AI Failure Handler Service &gt; Logic: _identifyFailureType &gt; should identify rate limits" time="0.001538042">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AI Failure Handler Service &gt; Logic: _identifyFailureType &gt; should default to model_unavailable" time="0.001811708">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AI Failure Handler Service &gt; Logic: degrade &gt; should return degradation plan for scenarios" time="0.002082791">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AI Failure Handler Service &gt; withFallback &gt; should return result directly if successful" time="0.002421125">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AI Failure Handler Service &gt; withFallback &gt; should use fallback if main AI function fails" time="0.002928459">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AI Failure Handler Service &gt; withFallback &gt; should degrade gracefully if both fail" time="0.001691292">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AI Failure Handler Service &gt; nonBlocking &gt; should swallow errors and return default" time="0.001100208">
        </testcase>
        <testcase classname="tests/unit/backend/aiFailureHandler.test.js" name="AI Failure Handler Service &gt; logFailure (DB Integration) &gt; should insert failure log [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiIntegrationService.test.js" timestamp="2025-12-21T08:31:14.349Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="4" time="0.356471541">
        <testcase classname="tests/unit/backend/aiIntegrationService.test.js" name="AI Integration Service &gt; Logic: getProviderCapabilities &gt; should return correct capabilities for known providers" time="0.009166584">
        </testcase>
        <testcase classname="tests/unit/backend/aiIntegrationService.test.js" name="AI Integration Service &gt; Logic: getProviderCapabilities &gt; should return empty array for unknown provider" time="0.001356625">
        </testcase>
        <testcase classname="tests/unit/backend/aiIntegrationService.test.js" name="AI Integration Service &gt; suggestSync &gt; should create pending action [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiIntegrationService.test.js" name="AI Integration Service &gt; executeAction &gt; should execute approved action and update status [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiIntegrationService.test.js" name="AI Integration Service &gt; executeAction &gt; should throw if action not found or not approved [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiIntegrationService.test.js" name="AI Integration Service &gt; handleWebhook &gt; should process webhook if integration active [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiKnowledgeManager.test.js" timestamp="2025-12-21T08:31:14.349Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="2" time="0.264193666">
        <testcase classname="tests/unit/backend/aiKnowledgeManager.test.js" name="AI Knowledge Manager Service &gt; Logic: _cosineSimilarity &gt; should calculate similarity correctly" time="0.065454459">
        </testcase>
        <testcase classname="tests/unit/backend/aiKnowledgeManager.test.js" name="AI Knowledge Manager Service &gt; Logic: _cosineSimilarity &gt; should handle empty or mismatched vectors" time="0.002357167">
        </testcase>
        <testcase classname="tests/unit/backend/aiKnowledgeManager.test.js" name="AI Knowledge Manager Service &gt; Logic: _formatKnowledgeForPrompt &gt; should format chunks with citations" time="0.001678709">
        </testcase>
        <testcase classname="tests/unit/backend/aiKnowledgeManager.test.js" name="AI Knowledge Manager Service &gt; getContextualKnowledge (Integration) &gt; should retrieve and rank knowledge chunks [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiKnowledgeManager.test.js" name="AI Knowledge Manager Service &gt; captureDecision &gt; should store decision and generate embeddings [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiMaturityMonitor.test.js" timestamp="2025-12-21T08:31:14.349Z" hostname="MacBook-Pro-Piotr.local" tests="4" failures="0" errors="0" skipped="2" time="0.29288525">
        <testcase classname="tests/unit/backend/aiMaturityMonitor.test.js" name="AI Maturity Monitor Service &gt; Logic: _scoreToLevel &gt; should map score to correct level" time="0.009172875">
        </testcase>
        <testcase classname="tests/unit/backend/aiMaturityMonitor.test.js" name="AI Maturity Monitor Service &gt; Logic: _generateInsights &gt; should identify strengths and weaknesses" time="0.002291375">
        </testcase>
        <testcase classname="tests/unit/backend/aiMaturityMonitor.test.js" name="AI Maturity Monitor Service &gt; assessMaturity (Integration) &gt; should aggregate metrics into overall score [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiMaturityMonitor.test.js" name="AI Maturity Monitor Service &gt; benchmarkAgainstPractices &gt; should compare levels vs benchmarks [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiMemoryManager.test.js" timestamp="2025-12-21T08:31:14.349Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0">
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; Session Memory (In-Memory) &gt; should create a session" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; Session Memory (In-Memory) &gt; should add messages to session" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; Session Memory (In-Memory) &gt; should respect context window limit" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; Project Memory &gt; should record project memory" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; Project Memory &gt; should record decision helper" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; Project Memory &gt; should record phase transition" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; Project Memory &gt; should get project memory" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; Project Memory &gt; should build project memory summary" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; Organization Memory &gt; should create new org memory if not exists" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; Organization Memory &gt; should return existing org memory" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; Organization Memory &gt; should update organization memory" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; Organization Memory &gt; should add recurring pattern" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; User Preferences &gt; should get user preferences" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; User Preferences &gt; should update user preferences" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; Cleanup &gt; should clear project memory" time="0">
        </testcase>
        <testcase classname="tests/unit/backend/aiMemoryManager.test.js" name="AIMemoryManager &gt; Cleanup &gt; should clear organization memory" time="0">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiOrchestrator.test.js" timestamp="2025-12-21T08:31:14.350Z" hostname="MacBook-Pro-Piotr.local" tests="9" failures="7" errors="0" skipped="0" time="0.127810041">
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; processMessage &gt; should process user message successfully" time="0.003483792">
            <failure message="expected undefined to be true // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ tests/unit/backend/aiOrchestrator.test.js:81:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; processMessage &gt; should handle context building failure" time="0.0006725">
            <failure message="expected undefined to be false // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be false // Object.is equality

- Expected: 
false

+ Received: 
undefined

 ❯ tests/unit/backend/aiOrchestrator.test.js:93:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should detect intent from message keywords" time="0.00016275">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; _detectIntent &gt; should default to EXPLAIN intent" time="0.000083875">
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; _selectRole &gt; should select role based on intent" time="0.001158083">
            <failure message="Cannot read properties of undefined (reading &apos;includes&apos;)" type="TypeError">
TypeError: Cannot read properties of undefined (reading &apos;includes&apos;)
 ❯ Object._selectRole server/services/aiOrchestrator.js:209:33
 ❯ tests/unit/backend/aiOrchestrator.test.js:117:41
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; _selectRole &gt; should downgrade role if policy restricts" time="0.00037575">
            <failure message="Cannot read properties of undefined (reading &apos;includes&apos;)" type="TypeError">
TypeError: Cannot read properties of undefined (reading &apos;includes&apos;)
 ❯ Object._selectRole server/services/aiOrchestrator.js:209:33
 ❯ tests/unit/backend/aiOrchestrator.test.js:122:41
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; _buildPrompt &gt; should include context and user message" time="0.000271667">
            <failure message="Cannot read properties of undefined (reading &apos;platform&apos;)" type="TypeError">
TypeError: Cannot read properties of undefined (reading &apos;platform&apos;)
 ❯ Object._buildPrompt server/services/aiOrchestrator.js:231:24
 ❯ tests/unit/backend/aiOrchestrator.test.js:133:43
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; postProcessResponse &gt; should add standard footer" time="0.001396958">
            <failure message="expected &apos;Here is the analysis.&apos; to contain &apos;Confidence:&apos;" type="AssertionError">
AssertionError: expected &apos;Here is the analysis.&apos; to contain &apos;Confidence:&apos;

Expected: &quot;Confidence:&quot;
Received: &quot;Here is the analysis.&quot;

 ❯ tests/unit/backend/aiOrchestrator.test.js:148:31
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiOrchestrator.test.js" name="AIOrchestrator &gt; postProcessResponse &gt; should handle labels" time="0.00026525">
            <failure message="expected &apos;Here is the analysis.&apos; to contain &apos;CONFIDENTIAL&apos;" type="AssertionError">
AssertionError: expected &apos;Here is the analysis.&apos; to contain &apos;CONFIDENTIAL&apos;

Expected: &quot;CONFIDENTIAL&quot;
Received: &quot;Here is the analysis.&quot;

 ❯ tests/unit/backend/aiOrchestrator.test.js:157:31
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiPolicyEngine.test.js" timestamp="2025-12-21T08:31:14.351Z" hostname="MacBook-Pro-Piotr.local" tests="8" failures="0" errors="0" skipped="4" time="0.159450292">
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AI Policy Engine Service &gt; getEffectivePolicy &gt; should respect Regulatory Mode override" time="0.006466334">
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AI Policy Engine Service &gt; getEffectivePolicy &gt; should return Organization Default if no project/user override [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AI Policy Engine Service &gt; getEffectivePolicy &gt; should allow Project to restrict policy (Override) [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AI Policy Engine Service &gt; getEffectivePolicy &gt; should NOT allow Project to escalate policy beyond Max" time="0.001081208">
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AI Policy Engine Service &gt; canPerformAction &gt; should allow actions meeting required level [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AI Policy Engine Service &gt; canPerformAction &gt; should deny actions exceeding current level" time="0.001202125">
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AI Policy Engine Service &gt; updatePolicy &gt; should validate policy level" time="0.001345625">
        </testcase>
        <testcase classname="tests/unit/backend/aiPolicyEngine.test.js" name="AI Policy Engine Service &gt; updatePolicy &gt; should update DB [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiPromptHierarchy.test.js" timestamp="2025-12-21T08:31:14.352Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="11" errors="0" skipped="0" time="0.123439458">
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getSystemPrompt &gt; should return default prompt if no custom prompt exists" time="0.004555542">
            <failure message="expected &apos;SYSTEM ROLE: You are an Enterprise PM…&apos; to contain &apos;SYSTEM: Enterprise PMO Architect&apos;" type="AssertionError">
AssertionError: expected &apos;SYSTEM ROLE: You are an Enterprise PM…&apos; to contain &apos;SYSTEM: Enterprise PMO Architect&apos;

- Expected
+ Received

- SYSTEM: Enterprise PMO Architect
+ SYSTEM ROLE: You are an Enterprise PMO Architect (SCMS Core).
+ Your mandate is to design, govern, execute, and stabilize strategic change.
+ You act as a PMO Assistant and Transformation Guide. YOU ARE NOT A CHATBOT.
+
+ COMPLIANCE:
+ - Align with PMI/PMBOK and ISO 21500 standards
+ - All actions must be auditable and traceable
+ - Respect data isolation between tenants and projects
+ - Never fabricate data or metrics not provided in context
+
+ CONSTRAINTS:
+ - Do not claim authority you do not have
+ - Do not approve actions outside your policy level
+ - Do not access external data unless explicitly enabled
+ - Always cite sources when using internal knowledge
+ - Never expose sensitive information across tenant boundaries
+
+ GOVERNANCE:
+ - All draft creations require human approval
+ - Escalate decisions to appropriate stakeholders
+ - Log all significant recommendations for audit

 ❯ tests/unit/backend/aiPromptHierarchy.test.js:38:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getSystemPrompt &gt; should return custom prompt from DB if active" time="0.001467">
            <failure message="expected &apos;SYSTEM ROLE: You are an Enterprise PM…&apos; to be &apos;SYSTEM: Custom Prompt&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;SYSTEM ROLE: You are an Enterprise PM…&apos; to be &apos;SYSTEM: Custom Prompt&apos; // Object.is equality

- Expected
+ Received

- SYSTEM: Custom Prompt
+ SYSTEM ROLE: You are an Enterprise PMO Architect (SCMS Core).
+ Your mandate is to design, govern, execute, and stabilize strategic change.
+ You act as a PMO Assistant and Transformation Guide. YOU ARE NOT A CHATBOT.
+
+ COMPLIANCE:
+ - Align with PMI/PMBOK and ISO 21500 standards
+ - All actions must be auditable and traceable
+ - Respect data isolation between tenants and projects
+ - Never fabricate data or metrics not provided in context
+
+ CONSTRAINTS:
+ - Do not claim authority you do not have
+ - Do not approve actions outside your policy level
+ - Do not access external data unless explicitly enabled
+ - Always cite sources when using internal knowledge
+ - Never expose sensitive information across tenant boundaries
+
+ GOVERNANCE:
+ - All draft creations require human approval
+ - Escalate decisions to appropriate stakeholders
+ - Log all significant recommendations for audit

 ❯ tests/unit/backend/aiPromptHierarchy.test.js:51:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getRolePrompt &gt; should return default role prompt" time="0.000522625">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getRolePrompt &gt; should fallback to default if role unknown" time="0.001106667">
            <failure message="expected &apos;ROLE: Strategic Advisor\nBEHAVIOR:\n-…&apos; to be &apos;&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;ROLE: Strategic Advisor\nBEHAVIOR:\n-…&apos; to be &apos;&apos; // Object.is equality

- Expected
+ Received

+ ROLE: Strategic Advisor
+ BEHAVIOR:
+ - Explain concepts clearly and contextually
+ - Provide strategic insights based on available data
+ - Suggest options without making decisions
+ - Focus on business value and risk assessment
+ - Challenge assumptions constructively

 ❯ tests/unit/backend/aiPromptHierarchy.test.js:63:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getPhasePrompt &gt; should return default phase prompt" time="0.000367042">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getUserOverlay &gt; should return empty string if no user found" time="0.000763">
            <failure message="expected null to be &apos;&apos; // Object.is equality" type="AssertionError">
AssertionError: expected null to be &apos;&apos; // Object.is equality

- Expected: 
&quot;&quot;

+ Received: 
null

 ❯ tests/unit/backend/aiPromptHierarchy.test.js:77:29
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getUserOverlay &gt; should build overlay from user preferences" time="0.000921083">
            <failure message="the given combination of arguments (null and string) is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a string" type="AssertionError">
AssertionError: the given combination of arguments (null and string) is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a string
 ❯ tests/unit/backend/aiPromptHierarchy.test.js:95:29
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; getUserOverlay &gt; should include custom instructions if safe" time="0.000337667">
            <failure message="the given combination of arguments (null and string) is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a string" type="AssertionError">
AssertionError: the given combination of arguments (null and string) is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a string
 ❯ tests/unit/backend/aiPromptHierarchy.test.js:112:29
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; buildPrompt &gt; should stack all layers correctly" time="0.001220875">
            <failure message="expected &apos;### SYSTEM LAYER ###\nSYSTEM ROLE: Yo…&apos; to contain &apos;=== LAYER 1: SYSTEM ===&apos;" type="AssertionError">
AssertionError: expected &apos;### SYSTEM LAYER ###\nSYSTEM ROLE: Yo…&apos; to contain &apos;=== LAYER 1: SYSTEM ===&apos;

- Expected
+ Received

- === LAYER 1: SYSTEM ===
+ ### SYSTEM LAYER ###
+ SYSTEM ROLE: You are an Enterprise PMO Architect (SCMS Core).
+ Your mandate is to design, govern, execute, and stabilize strategic change.
+ You act as a PMO Assistant and Transformation Guide. YOU ARE NOT A CHATBOT.
+
+ COMPLIANCE:
+ - Align with PMI/PMBOK and ISO 21500 standards
+ - All actions must be auditable and traceable
+ - Respect data isolation between tenants and projects
+ - Never fabricate data or metrics not provided in context
+
+ CONSTRAINTS:
+ - Do not claim authority you do not have
+ - Do not approve actions outside your policy level
+ - Do not access external data unless explicitly enabled
+ - Always cite sources when using internal knowledge
+ - Never expose sensitive information across tenant boundaries
+
+ GOVERNANCE:
+ - All draft creations require human approval
+ - Escalate decisions to appropriate stakeholders
+ - Log all significant recommendations for audit

 ❯ tests/unit/backend/aiPromptHierarchy.test.js:127:32
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; _sanitizeCustomInstructions &gt; should remove potential injection attempts" time="0.000286959">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; _sanitizeCustomInstructions &gt; should allow safe instructions" time="0.000052583">
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; upsertPrompt &gt; should create new version of prompt" time="0.000959708">
            <failure message="expected undefined to be true // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ tests/unit/backend/aiPromptHierarchy.test.js:160:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; rollbackToVersion &gt; should rollback prompt version" time="0.000993042">
            <failure message="expected undefined to be true // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ tests/unit/backend/aiPromptHierarchy.test.js:178:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; User Preferences Management &gt; should update user preferences" time="0.000926625">
            <failure message="Invalid tone: casual" type="Error">
Error: Invalid tone: casual
 ❯ Object.updateUserPreferences server/services/aiPromptHierarchy.js:455:19
 ❯ tests/unit/backend/aiPromptHierarchy.test.js:194:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; User Preferences Management &gt; should validate preference keys" time="0.0005315">
            <failure message="expected undefined to be true // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ tests/unit/backend/aiPromptHierarchy.test.js:206:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/aiPromptHierarchy.test.js" name="AIPromptHierarchy &gt; seedDefaults &gt; should seed defaults if missing" time="0.000237417">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiRiskChangeControl.test.js" timestamp="2025-12-21T08:31:14.353Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="3" time="0.272912375">
        <testcase classname="tests/unit/backend/aiRiskChangeControl.test.js" name="AI Risk &amp; Change Control Service &gt; Logic: _suggestMitigation &gt; should return correct mitigation strategies" time="0.0139125">
        </testcase>
        <testcase classname="tests/unit/backend/aiRiskChangeControl.test.js" name="AI Risk &amp; Change Control Service &gt; detectRisks (Integration) &gt; should aggregate risks from all detectors [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiRiskChangeControl.test.js" name="AI Risk &amp; Change Control Service &gt; trackScopeChange &gt; should log scope change [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiRiskChangeControl.test.js" name="AI Risk &amp; Change Control Service &gt; preEscalationWarning &gt; should identify when escalation is NOT needed (Logic Check)" time="0.004094375">
        </testcase>
        <testcase classname="tests/unit/backend/aiRiskChangeControl.test.js" name="AI Risk &amp; Change Control Service &gt; preEscalationWarning &gt; should trigger warning for critical risks [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiRoleGuard.test.js" timestamp="2025-12-21T08:31:14.353Z" hostname="MacBook-Pro-Piotr.local" tests="11" failures="0" errors="0" skipped="9" time="0.215955583">
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AI Role Guard Service &gt; getProjectRole &gt; should return default ADVISOR if no project ID" time="0.004538125">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AI Role Guard Service &gt; getProjectRole &gt; should fetch role from DB [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AI Role Guard Service &gt; getProjectRole &gt; should fallback to ADVISOR on DB error [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AI Role Guard Service &gt; setProjectRole &gt; should update role for valid input [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AI Role Guard Service &gt; setProjectRole &gt; should throw on invalid role" time="0.000727375">
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AI Role Guard Service &gt; canPerformAction &gt; should allow read-only actions for ADVISOR [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AI Role Guard Service &gt; canPerformAction &gt; should block execution actions for ADVISOR [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AI Role Guard Service &gt; canPerformAction &gt; should allow execution actions for OPERATOR [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AI Role Guard Service &gt; validateMutation &gt; should block mutations in ADVISOR mode [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AI Role Guard Service &gt; validateMutation &gt; should force draft in MANAGER mode [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiRoleGuard.test.js" name="AI Role Guard Service &gt; validateMutation &gt; should allow direct execution in OPERATOR mode [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiService.test.js" timestamp="2025-12-21T08:31:14.354Z" hostname="MacBook-Pro-Piotr.local" tests="36" failures="0" errors="0" skipped="4" time="0.145211708">
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; callLLM &gt; should use Google Gemini by default if checks pass" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; callLLM &gt; should block if balance is insufficient" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; callLLM &gt; should call OpenAI via fetch when provider is openai" time="0.001739708">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; callLLM &gt; should call Anthropic via fetch when provider is anthropic" time="0.00016625">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; generateInitiatives &gt; should parse JSON response correctly" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; generateInitiatives &gt; should return empty array on JSON parse error" time="0.00665675">
            <system-err>
LLM Call Error Error: AI Provider not configured.
    at Object.callLLM (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:172:41)
    at Object.generateInitiatives (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:655:29)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:213:33
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:20

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; streamLLM &gt; should yield chunks from Gemini stream" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; streamLLM &gt; should handle errors in stream" time="0.00206875">
            <system-err>
Stream LLM Error Error: AI Provider not configured.
    at Object.streamLLM (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:398:41)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:241:30
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:20

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; buildRoadmap &gt; should return roadmap object on success" time="0.000374041">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; buildRoadmap &gt; should return empty object on error" time="0.000143125">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; suggestTasks &gt; should return tasks array on success" time="0.000385709">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; deepDiagnose &gt; should execute chain of thought and return diagnosis" time="0.000191917">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; enrichInitiative &gt; should maintain structure and fallback to LLM" time="0.000299584">
            <system-err>
Web Search failed, using LLM knowledge Error: Web Fail
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:311:59
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; generateObservations &gt; should return observations from feedback" time="0.000225125">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Generation Methods &gt; testProviderConnection &gt; should test OpenAI connection" time="0.000223208">
            <system-out>
[AiService] Testing connection for: openai

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; enhancePrompt &gt; should return base system role when no extras found" time="0.000067375">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; enhancePrompt &gt; should inject global strategies" time="0.000070334">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; enhancePrompt &gt; should inject client context when orgId provided" time="0.000153916">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Queue Operations &gt; should enqueue task and return jobId" time="0.000206125">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Queue Operations &gt; should get job status" time="0.000079916">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Queue Operations &gt; should return null for non-existent job" time="0.000042709">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Vision Capabilities &gt; should format payload correctly for OpenAI Vision" time="0.000147375">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Vision Capabilities &gt; should use Gemini 1.5 Flash for vision fallback" time="0.000472917">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Advanced Streaming &gt; should parse OpenAI SSE stream correctly" time="0.000211084">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Advanced Streaming &gt; should handle OpenAI stream error" time="0.000280666">
            <system-err>
Stream LLM Error Error: Stream Error
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:237:69
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="AIService Unit Tests &gt; Provider Integrations &gt; should generate JWT for Zhipu AI provider" time="0.001193083">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateTaskInsight &gt; should return parsed insights when LLM returns valid JSON" time="0.000238875">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateTaskInsight &gt; should return fallback object on LLM failure/JSON error" time="0.000202167">
            <system-err>
Task Insight Error Error: LLM Fail
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:630:42
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateExecutionStrategy &gt; should return strategy object on success" time="0.000112">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateExecutionStrategy &gt; should return empty structure on error" time="0.000147542">
            <system-err>
Execution Gen Error SyntaxError: Unexpected token &apos;N&apos;, &quot;Not JSON&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Object.generateExecutionStrategy (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:802:25)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:658:28
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:20

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateInsights (Pre-Mortem) &gt; should return insights on success" time="0.00008425">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateInsights (Pre-Mortem) &gt; should return fallback on error" time="0.000151333">
            <system-err>
Insights Gen Error Error: Fail
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:679:42
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:145:11
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:26
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1243:20
    at new Promise (&lt;anonymous&gt;)
    at runWithTimeout (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1209:10)
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:37
    at Traces.$ (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/traces.U4xDYhzZ.js:115:27)
    at trace (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/vitest/dist/chunks/test.B8ej_ZHS.js:239:21)
    at runTest (file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:1653:12)

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateStrategicFit &gt; should return fit analysis on success" time="0.000081375">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; generateStrategicFit &gt; should return fallback on error" time="0.000106667">
            <system-err>
Fit Check Error SyntaxError: Unexpected token &apos;B&apos;, &quot;Bad JSON&quot; is not valid JSON
    at JSON.parse (&lt;anonymous&gt;)
    at Object.generateStrategicFit (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/aiService.js:864:25)
    at /Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/tests/unit/backend/aiService.test.js:704:28
    at file:///Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/node_modules/@vitest/runner/dist/index.js:915:20

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; simulateEconomics &gt; should combine financial simulation with AI commentary" time="0.000092584">
        </testcase>
        <testcase classname="tests/unit/backend/aiService.test.js" name="Extended AI Capabilities &gt; simulateEconomics &gt; should return just simulation if AI fails" time="0.000058375">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/aiWorkloadIntelligence.test.js" timestamp="2025-12-21T08:31:14.356Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="4" time="0.240626459">
        <testcase classname="tests/unit/backend/aiWorkloadIntelligence.test.js" name="AI Workload Intelligence Service &gt; Logic: _getWorkloadStatus &gt; should classify utilization correctly" time="0.010604">
        </testcase>
        <testcase classname="tests/unit/backend/aiWorkloadIntelligence.test.js" name="AI Workload Intelligence Service &gt; Logic: _calculateBurnoutRisk &gt; should calculate risk score based on factors" time="0.002063333">
        </testcase>
        <testcase classname="tests/unit/backend/aiWorkloadIntelligence.test.js" name="AI Workload Intelligence Service &gt; getPortfolioWorkload &gt; should calculate workload metrics from DB data [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiWorkloadIntelligence.test.js" name="AI Workload Intelligence Service &gt; detectOverAllocation &gt; should detect users with weeks exceeding capacity [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiWorkloadIntelligence.test.js" name="AI Workload Intelligence Service &gt; suggestRebalancing &gt; should return no suggestions if no over-allocation [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/aiWorkloadIntelligence.test.js" name="AI Workload Intelligence Service &gt; suggestRebalancing &gt; should suggest reassignment when capacity exists [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/analyticsService.test.js" timestamp="2025-12-21T08:31:14.356Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.211787458">
        <testcase classname="tests/unit/backend/analyticsService.test.js" name="AnalyticsService - Integration &gt; logUsage &gt; should log AI usage to the database without errors" time="0.000741417">
        </testcase>
        <testcase classname="tests/unit/backend/analyticsService.test.js" name="AnalyticsService - Integration &gt; getStats &gt; should retrieve aggregated stats from real database" time="0.000318833">
        </testcase>
        <testcase classname="tests/unit/backend/analyticsService.test.js" name="AnalyticsService - Integration &gt; getTopTopics &gt; should retrieve top topics from real database" time="0.000216292">
        </testcase>
        <testcase classname="tests/unit/backend/analyticsService.test.js" name="AnalyticsService - Integration &gt; saveMaturityScore &gt; should save maturity score without errors" time="0.000147542">
        </testcase>
        <testcase classname="tests/unit/backend/analyticsService.test.js" name="AnalyticsService - Integration &gt; getIndustryBenchmarks &gt; should retrieve industry benchmarks from real database" time="0.000216875">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/assessmentService.test.js" timestamp="2025-12-21T08:31:14.356Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="2" time="0.350056833">
        <testcase classname="tests/unit/backend/assessmentService.test.js" name="Assessment Service &gt; Logic: generateGapSummary &gt; should interpret gaps correctly" time="0.009437708">
        </testcase>
        <testcase classname="tests/unit/backend/assessmentService.test.js" name="Assessment Service &gt; getAssessment &gt; should retrieve and parse assessment [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/assessmentService.test.js" name="Assessment Service &gt; saveAssessment &gt; should calculate totals and save [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/attributionService.test.js" timestamp="2025-12-21T08:31:14.356Z" hostname="MacBook-Pro-Piotr.local" tests="18" failures="0" errors="0" skipped="15" time="0.118791416">
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; constants &gt; should export SOURCE_TYPES" time="0.000690209">
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; recordAttribution - skipped due to CJS/ESM mock interop &gt; should throw error for missing organizationId" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; recordAttribution - skipped due to CJS/ESM mock interop &gt; should throw error for missing sourceType" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; recordAttribution - skipped due to CJS/ESM mock interop &gt; should throw error for invalid sourceType" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; recordAttribution - skipped due to CJS/ESM mock interop &gt; should record DEMO attribution successfully" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; recordAttribution - skipped due to CJS/ESM mock interop &gt; should record PROMO_CODE attribution successfully" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; recordAttribution - skipped due to CJS/ESM mock interop &gt; should record INVITATION attribution with metadata" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; getOrganizationAttribution - skipped due to CJS/ESM mock interop &gt; should return all attribution events for org" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; getOrganizationAttribution - skipped due to CJS/ESM mock interop &gt; should return empty array for org with no attribution" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; getFirstAttribution - skipped due to CJS/ESM mock interop &gt; should return first attribution event" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; getFirstAttribution - skipped due to CJS/ESM mock interop &gt; should return null for org with no attribution" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; hasAttribution - skipped due to CJS/ESM mock interop &gt; should return true if org has attribution" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; hasAttribution - skipped due to CJS/ESM mock interop &gt; should return false if org has no attribution" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; exportAttribution - skipped due to CJS/ESM mock interop &gt; should export with filters" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; exportAttribution - skipped due to CJS/ESM mock interop &gt; should export all without filters" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; getPartnerSummary - skipped due to CJS/ESM mock interop &gt; should return partner summary for settlements" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; immutability principle &gt; should not expose update methods" time="0.000121375">
        </testcase>
        <testcase classname="tests/unit/backend/attributionService.test.js" name="AttributionService &gt; immutability principle &gt; should only have append-only recordAttribution" time="0.000100958">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/baselineService.test.js" timestamp="2025-12-21T08:31:14.357Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="3" time="0">
        <testcase classname="tests/unit/backend/baselineService.test.js" name="Baseline Service &gt; calculateVariance &gt; should calculate delay correctly when mocking dependencies [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/baselineService.test.js" name="Baseline Service &gt; calculateVariance &gt; should mark critical delays [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/baselineService.test.js" name="Baseline Service &gt; captureBaseline &gt; should create snapshot from roadmap initiatives [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/billingService.test.js" timestamp="2025-12-21T08:31:14.357Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="5" errors="0" skipped="0" time="0.123473833">
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getPlans &gt; should return plans" time="0.003712375">
            <failure message="expected [ { id: &apos;plan-trial&apos;, …(10) }, …(3) ] to have a length of 1 but got 4" type="AssertionError">
AssertionError: expected [ { id: &apos;plan-trial&apos;, …(10) }, …(3) ] to have a length of 1 but got 4

- Expected
+ Received

- 1
+ 4

 ❯ tests/unit/backend/billingService.test.js:70:27
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; createPlan &gt; should create plan" time="0.000334208">
            <failure message="SQLITE_CONSTRAINT: NOT NULL constraint failed: subscription_plans.price_monthly" type="Error">
Error: SQLITE_CONSTRAINT: NOT NULL constraint failed: subscription_plans.price_monthly
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { errno: 19, code: &apos;SQLITE_CONSTRAINT&apos; }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getOrganizationBilling &gt; should return default if no record" time="0.000828416">
            <failure message="Cannot read properties of undefined (reading &apos;orgId&apos;)" type="TypeError">
TypeError: Cannot read properties of undefined (reading &apos;orgId&apos;)
 ❯ tests/unit/backend/billingService.test.js:84:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; getOrganizationBilling &gt; should return stored record" time="0.000713959">
            <failure message="Cannot read properties of undefined (reading &apos;plan_id&apos;)" type="TypeError">
TypeError: Cannot read properties of undefined (reading &apos;plan_id&apos;)
 ❯ tests/unit/backend/billingService.test.js:97:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/billingService.test.js" name="BillingService &gt; createSubscription &gt; should create stripe subscription and update DB" time="0.0008555">
            <failure message="Invalid plan" type="Error">
Error: Invalid plan
 ❯ Object.createSubscription server/services/billingService.js:240:22
 ❯ tests/unit/backend/billingService.test.js:131:28
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/capacityService.test.js" timestamp="2025-12-21T08:31:14.358Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="3" errors="0" skipped="0" time="0.128855833">
        <testcase classname="tests/unit/backend/capacityService.test.js" name="CapacityService &gt; getUserCapacity &gt; should return default capacity if not found" time="0.001694667">
        </testcase>
        <testcase classname="tests/unit/backend/capacityService.test.js" name="CapacityService &gt; getUserCapacity &gt; should return stored capacity" time="0.003862542">
            <failure message="expected undefined to be 30 // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be 30 // Object.is equality

- Expected: 
30

+ Received: 
undefined

 ❯ tests/unit/backend/capacityService.test.js:59:46
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/capacityService.test.js" name="CapacityService &gt; calculateUserCapacity &gt; should calculate capacity based on tasks" time="0.002685083">
            <failure message="SQLITE_ERROR: no such column: t.effort_estimate" type="Error">
Error: SQLITE_ERROR: no such column: t.effort_estimate
 ❯ server/services/capacityService.js:55:16
 ❯ Object.calculateUserCapacity server/services/capacityService.js:54:16
 ❯ tests/unit/backend/capacityService.test.js:79:52

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
Serialized Error: { errno: 1, code: &apos;SQLITE_ERROR&apos;, __augmented: true }
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/capacityService.test.js" name="CapacityService &gt; detectOverloads &gt; should identify users with overloaded weeks" time="0.003205709">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ tests/unit/backend/capacityService.test.js:116:41
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/capacityService.test.js" name="CapacityService &gt; suggestResolutions &gt; should suggest REASSIGN for sustained overload" time="0.000147875">
        </testcase>
        <testcase classname="tests/unit/backend/capacityService.test.js" name="CapacityService &gt; suggestResolutions &gt; should suggest RESEQUENCE for peak overload" time="0.0000515">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/connectorHealthService.test.js" timestamp="2025-12-21T08:31:14.359Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.074869334">
        <testcase classname="tests/unit/backend/connectorHealthService.test.js" name="Connector Health Service &gt; should perform health check (DB interaction) [SKIPPED]" time="0.000398334">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/connectorService.test.js" timestamp="2025-12-21T08:31:14.359Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.112871666">
        <testcase classname="tests/unit/backend/connectorService.test.js" name="Connector Service &gt; should manage connectors (DB interaction) [SKIPPED]" time="0.000397875">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/contextService.test.js" timestamp="2025-12-21T08:31:14.359Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.110883458">
        <testcase classname="tests/unit/backend/contextService.test.js" name="Context Service &gt; should handle context operations (DB interaction) [SKIPPED]" time="0.000393875">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/criticalPathService.test.js" timestamp="2025-12-21T08:31:14.359Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="2" errors="0" skipped="0" time="10.140100542">
        <testcase classname="tests/unit/backend/criticalPathService.test.js" name="CriticalPathService &gt; calculateCriticalPath &gt; should identify critical path correctly" time="5.004135125">
            <failure message="Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with &quot;testTimeout&quot;." type="Error">
Error: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with &quot;testTimeout&quot;.
 ❯ tests/unit/backend/criticalPathService.test.js:34:11
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/criticalPathService.test.js" name="CriticalPathService &gt; calculateCriticalPath &gt; should handle disjoint paths logic" time="5.003723083">
            <failure message="Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with &quot;testTimeout&quot;." type="Error">
Error: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with &quot;testTimeout&quot;.
 ❯ tests/unit/backend/criticalPathService.test.js:65:11
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/dependencyService.test.js" timestamp="2025-12-21T08:31:14.359Z" hostname="MacBook-Pro-Piotr.local" tests="9" failures="2" errors="0" skipped="0" time="0.125277792">
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; addDependency &gt; should add dependency" time="0.003973542">
            <failure message="expected &apos;5568d8b7-1d75-485a-9269-3ad57956a587&apos; to be &apos;uuid-1234&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;5568d8b7-1d75-485a-9269-3ad57956a587&apos; to be &apos;uuid-1234&apos; // Object.is equality

Expected: &quot;uuid-1234&quot;
Received: &quot;5568d8b7-1d75-485a-9269-3ad57956a587&quot;

 ❯ tests/unit/backend/dependencyService.test.js:44:31
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; addDependency &gt; should prevent self-dependency" time="0.000592708">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; removeDependency &gt; should remove dependency" time="0.000587167">
            <failure message="Cannot read properties of undefined (reading &apos;changes&apos;)" type="TypeError">
TypeError: Cannot read properties of undefined (reading &apos;changes&apos;)
 ❯ server/services/dependencyService.js:35:41
 ❯ Object.&lt;anonymous&gt; tests/unit/backend/dependencyService.test.js:33:43
 ❯ server/services/dependencyService.js:33:16
 ❯ Object.removeDependency server/services/dependencyService.js:32:16
 ❯ tests/unit/backend/dependencyService.test.js:61:52
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; getDependencies &gt; should return dependencies" time="0.000247333">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; buildDependencyGraph &gt; should build graph structure" time="0.000532542">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; detectDeadlocks &gt; should detect cycles" time="0.000198458">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; detectDeadlocks &gt; should return false for acyclic graph" time="0.000074625">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; canStart &gt; should be true if no blockers" time="0.000091792">
        </testcase>
        <testcase classname="tests/unit/backend/dependencyService.test.js" name="DependencyService &gt; canStart &gt; should be false if blockers exist" time="0.000112583">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/economicsService.test.js" timestamp="2025-12-21T08:31:14.360Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="2" time="0">
        <testcase classname="tests/unit/backend/economicsService.test.js" name="Economics Service &gt; createValueHypothesis &gt; should insert hypothesis [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/economicsService.test.js" name="Economics Service &gt; getValueSummary &gt; should aggregate financial values [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/emailService.test.js" timestamp="2025-12-21T08:31:14.360Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.231015459">
        <testcase classname="tests/unit/backend/emailService.test.js" name="Backend Service Test: EmailService &gt; sendEmail &gt; sends email with default config" time="0.002423167">
        </testcase>
        <testcase classname="tests/unit/backend/emailService.test.js" name="Backend Service Test: EmailService &gt; sendEmail &gt; uses SMTP settings from database" time="0.051911083">
        </testcase>
        <testcase classname="tests/unit/backend/emailService.test.js" name="Backend Service Test: EmailService &gt; sendEmail &gt; handles database errors gracefully" time="0.000761209">
        </testcase>
        <testcase classname="tests/unit/backend/emailService.test.js" name="Backend Service Test: EmailService &gt; sendEmail &gt; logs email details" time="0.000946958">
        </testcase>
        <testcase classname="tests/unit/backend/emailService.test.js" name="Backend Service Test: EmailService &gt; sendEmail &gt; uses environment variables when database settings are missing" time="0.001404292">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/evidenceLedgerService.test.js" timestamp="2025-12-21T08:31:14.360Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="3" errors="0" skipped="0" time="0.122258792">
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; redactPayload &gt; should redact common PII fields" time="0.000631875">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; redactPayload &gt; should handle arrays" time="0.000112917">
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; createEvidenceObject &gt; should create and redact evidence" time="0.002395542">
            <failure message="Invalid evidence type: METRIC" type="Error">
Error: Invalid evidence type: METRIC
 ❯ server/services/evidenceLedgerService.js:103:27
 ❯ Object.createEvidenceObject server/services/evidenceLedgerService.js:97:12
 ❯ tests/unit/backend/evidenceLedgerService.test.js:73:56
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; linkEvidence &gt; should link evidence to entity" time="0.00293975">
            <failure message="expected undefined to be &apos;uuid-1234&apos; // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be &apos;uuid-1234&apos; // Object.is equality

- Expected: 
&quot;uuid-1234&quot;

+ Received: 
undefined

 ❯ tests/unit/backend/evidenceLedgerService.test.js:88:35
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/evidenceLedgerService.test.js" name="EvidenceLedgerService &gt; recordReasoning &gt; should record reasoning entry" time="0.001168917">
            <failure message="expected &apos;a36f2793-c0f3-4f58-96f2-a4e3a4da5482&apos; to be &apos;uuid-1234&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;a36f2793-c0f3-4f58-96f2-a4e3a4da5482&apos; to be &apos;uuid-1234&apos; // Object.is equality

Expected: &quot;uuid-1234&quot;
Received: &quot;a36f2793-c0f3-4f58-96f2-a4e3a4da5482&quot;

 ❯ tests/unit/backend/evidenceLedgerService.test.js:101:31
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/feedbackService.test.js" timestamp="2025-12-21T08:31:14.360Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.664550333">
        <testcase classname="tests/unit/backend/feedbackService.test.js" name="Backend Service Test: FeedbackService &gt; saveFeedback &gt; saves feedback with all parameters" time="0.1017515">
        </testcase>
        <testcase classname="tests/unit/backend/feedbackService.test.js" name="Backend Service Test: FeedbackService &gt; saveFeedback &gt; saves feedback without correction" time="0.101333417">
        </testcase>
        <testcase classname="tests/unit/backend/feedbackService.test.js" name="Backend Service Test: FeedbackService &gt; getLearningExamples &gt; retrieves learning examples for context" time="0.110377292">
        </testcase>
        <testcase classname="tests/unit/backend/feedbackService.test.js" name="Backend Service Test: FeedbackService &gt; getLearningExamples &gt; handles empty results" time="0.00045525">
        </testcase>
        <testcase classname="tests/unit/backend/feedbackService.test.js" name="Backend Service Test: FeedbackService &gt; getLearningExamples &gt; handles database errors gracefully" time="0.000680208">
        </testcase>
        <testcase classname="tests/unit/backend/feedbackService.test.js" name="Backend Service Test: FeedbackService &gt; getLearningExamples &gt; only returns examples with rating &gt;= 4" time="0.10155875">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/financialService.test.js" timestamp="2025-12-21T08:31:14.361Z" hostname="MacBook-Pro-Piotr.local" tests="9" failures="0" errors="0" skipped="0" time="0.181043292">
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateCost &gt; should estimate cost for High complexity" time="0.00048975">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateCost &gt; should estimate cost for Medium complexity" time="0.000063625">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateCost &gt; should fallback to Low complexity" time="0.000056708">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateBenefit &gt; should estimate benefit for High priority" time="0.000067209">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateBenefit &gt; should estimate benefit for Medium priority" time="0.000049375">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateBenefit &gt; should fallback to Low priority" time="0.000047167">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; estimateBenefit &gt; should return correct benefit range" time="0.000087917">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; simulatePortfolio &gt; should calculate aggregated metrics" time="0.000136125">
        </testcase>
        <testcase classname="tests/unit/backend/financialService.test.js" name="FinancialService &gt; simulatePortfolio &gt; should handle empty portfolio" time="0.000050584">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/helpService.test.js" timestamp="2025-12-21T08:31:14.361Z" hostname="MacBook-Pro-Piotr.local" tests="13" failures="0" errors="0" skipped="0" time="0.2282645">
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; EVENT_TYPES &gt; should define all required event types" time="0.007501833">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; EVENT_TYPES &gt; should have exactly 4 event types" time="0.000421792">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; TARGET_ROLES &gt; should define all valid target roles" time="0.000310083">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; TARGET_ROLES &gt; should have exactly 5 roles" time="0.000088541">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; TARGET_ORG_TYPES &gt; should define all valid org types" time="0.000144333">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; TARGET_ORG_TYPES &gt; should have exactly 4 org types" time="0.0000675">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject invalid event types in markEvent" time="0.000525833">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject createPlaybook without key" time="0.00012175">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject createPlaybook without title" time="0.000088541">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject createPlaybook with invalid target role" time="0.00008925">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject createPlaybook with invalid org type" time="0.00007775">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject createStep without required fields" time="0.000081959">
        </testcase>
        <testcase classname="tests/unit/backend/helpService.test.js" name="HelpService Constants and Validation &gt; Input Validation &gt; should reject createStep with invalid action type" time="0.000063416">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/ingestionService.test.js" timestamp="2025-12-21T08:31:14.362Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.11864825">
        <testcase classname="tests/unit/backend/ingestionService.test.js" name="Ingestion Service &gt; should handle ingestion (DB interaction) [SKIPPED]" time="0.000408792">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/initiativeService.test.js" timestamp="2025-12-21T08:31:14.362Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="4" errors="0" skipped="0" time="0.147880708">
        <testcase classname="tests/unit/backend/initiativeService.test.js" name="InitiativeService &gt; recalculateProgress &gt; should return 0 when no initiativeId provided" time="0.00054">
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.test.js" name="InitiativeService &gt; recalculateProgress &gt; should handle database error during fetch" time="0.007438875">
            <failure message="promise resolved &quot;+0&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;+0&quot; instead of rejecting

- Expected: 
Error {
  &quot;message&quot;: &quot;rejected promise&quot;,
}

+ Received: 
0

 ❯ tests/unit/backend/initiativeService.test.js:46:74
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.test.js" name="InitiativeService &gt; recalculateProgress &gt; should set progress to 0 if no tasks found" time="0.004062834">
            <failure message="expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{…}, …(2) ]

Number of calls: 0
" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{…}, …(2) ]

Number of calls: 0

 ❯ tests/unit/backend/initiativeService.test.js:58:32
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.test.js" name="InitiativeService &gt; recalculateProgress &gt; should calculate weighted progress correctly" time="0.003386292">
            <failure message="expected +0 to be 67 // Object.is equality" type="AssertionError">
AssertionError: expected +0 to be 67 // Object.is equality

- Expected
+ Received

- 67
+ 0

 ❯ tests/unit/backend/initiativeService.test.js:88:30
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.test.js" name="InitiativeService &gt; recalculateProgress &gt; should handle tasks with missing progress/priority" time="0.015170167">
        </testcase>
        <testcase classname="tests/unit/backend/initiativeService.test.js" name="InitiativeService &gt; recalculateProgress &gt; should handle database error during update" time="0.012293958">
            <failure message="promise resolved &quot;+0&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;+0&quot; instead of rejecting

- Expected: 
Error {
  &quot;message&quot;: &quot;rejected promise&quot;,
}

+ Received: 
0

 ❯ tests/unit/backend/initiativeService.test.js:125:74
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/knowledgeService.test.js" timestamp="2025-12-21T08:31:14.362Z" hostname="MacBook-Pro-Piotr.local" tests="11" failures="0" errors="0" skipped="0" time="0.192643584">
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Candidate Management &gt; should add a candidate idea without throwing" time="0.001216458">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Candidate Management &gt; should get candidates without throwing" time="0.000688792">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Strategies &gt; should add a global strategy without throwing" time="0.000241125">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Strategies &gt; should get active strategies without throwing" time="0.000250542">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Client Context &gt; should set and get client context" time="0.001615667">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Client Context &gt; should update existing client context" time="0.002866709">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Candidate Status &gt; should update candidate status" time="0.00100425">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Process Document (RAG) &gt; should process document chunks" time="0.020046792">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Access Control &gt; should restrict user access to project docs" time="0.000633875">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Strategies Toggle &gt; should toggle strategy active status" time="0.00042525">
        </testcase>
        <testcase classname="tests/unit/backend/knowledgeService.test.js" name="KnowledgeService - Integration &gt; Document Lifecycle &gt; should soft delete document" time="0.001958042">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/legalEventLogger.test.js" timestamp="2025-12-21T08:31:14.363Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="3" errors="0" skipped="0" time="0.132952708">
        <testcase classname="tests/unit/backend/legalEventLogger.test.js" name="LegalEventLogger &gt; log &gt; should append log entry" time="0.007162292">
            <system-err>
[LegalEventLogger] Unknown event type: test_event

            </system-err>
            <failure message="expected &apos;6c26551b-3b8c-40d1-8ece-3d2fd7470521&apos; to be &apos;uuid-1234&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;6c26551b-3b8c-40d1-8ece-3d2fd7470521&apos; to be &apos;uuid-1234&apos; // Object.is equality

Expected: &quot;uuid-1234&quot;
Received: &quot;6c26551b-3b8c-40d1-8ece-3d2fd7470521&quot;

 ❯ tests/unit/backend/legalEventLogger.test.js:46:29
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/legalEventLogger.test.js" name="LegalEventLogger &gt; logAccept &gt; should log user acceptance" time="0.00093825">
            <failure message="expected &apos;fa4e0e8f-3b22-41e0-a02a-8c0a3bd7e863&apos; to be &apos;uuid-1234&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;fa4e0e8f-3b22-41e0-a02a-8c0a3bd7e863&apos; to be &apos;uuid-1234&apos; // Object.is equality

Expected: &quot;uuid-1234&quot;
Received: &quot;fa4e0e8f-3b22-41e0-a02a-8c0a3bd7e863&quot;

 ❯ tests/unit/backend/legalEventLogger.test.js:61:29
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/legalEventLogger.test.js" name="LegalEventLogger &gt; getEvents &gt; should fetch events with filters" time="0.002946208">
            <failure message="expected &quot;vi.fn()&quot; to be called with arguments: [ …(3) ]

Number of calls: 0
" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called with arguments: [ …(3) ]

Number of calls: 0

 ❯ tests/unit/backend/legalEventLogger.test.js:82:32
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/legalService.test.js" timestamp="2025-12-21T08:31:14.363Z" hostname="MacBook-Pro-Piotr.local" tests="7" failures="4" errors="0" skipped="0" time="0.1597245">
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; getActiveDocuments &gt; should return active documents" time="0.005163667">
            <failure message="expected [] to have a length of 1 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

 ❯ tests/unit/backend/legalService.test.js:63:26
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; isDocumentApplicable &gt; should match global scope" time="0.000182875">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; isDocumentApplicable &gt; should match region scope" time="0.0000825">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; isDocumentApplicable &gt; should mismatch region scope" time="0.000065667">
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; acceptDocuments &gt; should accept generic user documents" time="0.005570583">
            <failure message="Target cannot be null or undefined." type="AssertionError">
AssertionError: Target cannot be null or undefined.
 ❯ tests/unit/backend/legalService.test.js:107:37
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; acceptDocuments &gt; should validate org admin role for DPA" time="0.002460791">
            <failure message="promise resolved &quot;{ created: [], errors: [ { …(2) } ] }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ created: [], errors: [ { …(2) } ] }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;created&quot;: [],
+   &quot;errors&quot;: [
+     {
+       &quot;docType&quot;: &quot;DPA&quot;,
+       &quot;error&quot;: &quot;No active document found&quot;,
+     },
+   ],
  }

 ❯ tests/unit/backend/legalService.test.js:131:16
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/legalService.test.js" name="LegalService &gt; publishDocument &gt; should publish new version" time="0.001574625">
            <failure message="expected undefined to be true // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ tests/unit/backend/legalService.test.js:148:36
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/metricsAggregator.test.js" timestamp="2025-12-21T08:31:14.364Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.130051042">
        <testcase classname="tests/unit/backend/metricsAggregator.test.js" name="MetricsAggregator &gt; METRIC_KEYS &gt; should define all required metric keys" time="0.0004995">
        </testcase>
        <testcase classname="tests/unit/backend/metricsAggregator.test.js" name="MetricsAggregator &gt; WARNING_SEVERITY &gt; should define severity levels" time="0.000109333">
        </testcase>
        <testcase classname="tests/unit/backend/metricsAggregator.test.js" name="MetricsAggregator &gt; getFunnelMetric &gt; should calculate funnel between two events" time="0.002493875">
            <system-out>
[MetricsCollector] Recorded event: demo_started (ad46ef6e-8d3b-4ff1-90f6-6312f44dc2ba)

[MetricsCollector] Recorded event: demo_started (925252d9-e61e-4725-8ca3-fccb88fb664c)

[MetricsCollector] Recorded event: trial_started (d1e67c02-4aee-43b3-bd3b-35492477f408)

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/metricsAggregator.test.js" name="MetricsAggregator &gt; getOverview &gt; should return complete overview for dashboard" time="0.002303958">
        </testcase>
        <testcase classname="tests/unit/backend/metricsAggregator.test.js" name="MetricsAggregator &gt; buildDailySnapshots &gt; should build snapshots idempotently" time="0.005091583">
            <system-out>
[MetricsAggregator] Building daily snapshots for 2025-12-21

[MetricsAggregator] Created 6 snapshots for 2025-12-21

[MetricsAggregator] Building daily snapshots for 2025-12-21

[MetricsAggregator] Created 6 snapshots for 2025-12-21

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/metricsAggregator.test.js" name="MetricsAggregator &gt; getEarlyWarnings &gt; should return warnings (seed data needed for specific warnings)" time="0.000981583">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/metricsCollector.test.js" timestamp="2025-12-21T08:31:14.364Z" hostname="MacBook-Pro-Piotr.local" tests="4" failures="4" errors="0" skipped="0" time="0.127426083">
        <testcase classname="tests/unit/backend/metricsCollector.test.js" name="MetricsCollector &gt; recordEvent &gt; should record event successfully" time="0.003607416">
            <system-out>
[MetricsCollector] Recorded event: TEST_EVENT (1e7728b8-b089-4a04-9b1f-76d6501b32c8)

            </system-out>
            <system-err>
[MetricsCollector] Unknown event type: TEST_EVENT

            </system-err>
            <failure message="expected &apos;1e7728b8-b089-4a04-9b1f-76d6501b32c8&apos; to be &apos;uuid-1234&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;1e7728b8-b089-4a04-9b1f-76d6501b32c8&apos; to be &apos;uuid-1234&apos; // Object.is equality

Expected: &quot;uuid-1234&quot;
Received: &quot;1e7728b8-b089-4a04-9b1f-76d6501b32c8&quot;

 ❯ tests/unit/backend/metricsCollector.test.js:49:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/metricsCollector.test.js" name="MetricsCollector &gt; recordEvent &gt; should throw on database error" time="0.002627875">
            <system-out>
[MetricsCollector] Recorded event: TEST_EVENT (fbe02360-be9e-45e8-98b5-85d9cfe83646)

            </system-out>
            <system-err>
[MetricsCollector] Unknown event type: TEST_EVENT

            </system-err>
            <failure message="promise resolved &quot;{ …(2) }&quot; instead of rejecting" type="AssertionError">
AssertionError: promise resolved &quot;{ …(2) }&quot; instead of rejecting

- Expected
+ Received

- Error {
-   &quot;message&quot;: &quot;rejected promise&quot;,
+ {
+   &quot;eventId&quot;: &quot;fbe02360-be9e-45e8-98b5-85d9cfe83646&quot;,
+   &quot;success&quot;: true,
  }

 ❯ tests/unit/backend/metricsCollector.test.js:64:17
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/metricsCollector.test.js" name="MetricsCollector &gt; getEvents &gt; should fetch events with filters" time="0.000853">
            <failure message="expected [ { …(7) }, { …(7) } ] to have a length of 1 but got 2" type="AssertionError">
AssertionError: expected [ { …(7) }, { …(7) } ] to have a length of 1 but got 2

- Expected
+ Received

- 1
+ 2

 ❯ tests/unit/backend/metricsCollector.test.js:79:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/metricsCollector.test.js" name="MetricsCollector &gt; getEventCount &gt; should return count" time="0.000525959">
            <failure message="expected 2 to be 42 // Object.is equality" type="AssertionError">
AssertionError: expected 2 to be 42 // Object.is equality

- Expected
+ Received

- 42
+ 2

 ❯ tests/unit/backend/metricsCollector.test.js:98:27
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/myWorkService.test.js" timestamp="2025-12-21T08:31:14.365Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.290532125">
        <testcase classname="tests/unit/backend/myWorkService.test.js" name="MyWorkService &gt; getMyWork &gt; should aggregate work" time="0.002017083">
        </testcase>
        <testcase classname="tests/unit/backend/myWorkService.test.js" name="MyWorkService &gt; errors &gt; should propagate db error" time="0.000763375">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/outcomeService.test.js" timestamp="2025-12-21T08:31:14.365Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.114194791">
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _computeDelta &gt; should compute positive delta correctly" time="0.000545625">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _computeDelta &gt; should handle empty baseline" time="0.000085792">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _computeDelta &gt; should handle empty after" time="0.000064958">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _computeDelta &gt; should handle identical values" time="0.000061625">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _computeDelta &gt; should be deterministic" time="0.000276541">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should return true for positive delta with no criteria" time="0.0000955">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should return false for all-zero delta with no criteria" time="0.000039208">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should evaluate &quot;&gt;&quot; criterion correctly" time="0.000137334">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should evaluate &quot;&gt;=&quot; criterion correctly" time="0.000051292">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should evaluate &quot;&lt;&quot; criterion correctly" time="0.000064084">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should evaluate &quot;&lt;=&quot; criterion correctly" time="0.000038209">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should evaluate &quot;==&quot; criterion correctly" time="0.000034583">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should evaluate &quot;!=&quot; criterion correctly" time="0.000042542">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should require all criteria to pass" time="0.000053">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should handle negative values" time="0.000037">
        </testcase>
        <testcase classname="tests/unit/backend/outcomeService.test.js" name="OutcomeService &gt; _evaluateSuccess &gt; should handle decimal values" time="0.00004275">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/pmoDomainRegistry.test.js" timestamp="2025-12-21T08:31:14.365Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.342727167">
        <testcase classname="tests/unit/backend/pmoDomainRegistry.test.js" name="PMODomainRegistry &gt; getAllDomains &gt; should return domains" time="0.0022565">
        </testcase>
        <testcase classname="tests/unit/backend/pmoDomainRegistry.test.js" name="PMODomainRegistry &gt; getDomain &gt; should return domain" time="0.000398209">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/pmoHealthService.test.js" timestamp="2025-12-21T08:31:14.366Z" hostname="MacBook-Pro-Piotr.local" tests="2" failures="0" errors="0" skipped="0" time="0.266514958">
        <testcase classname="tests/unit/backend/pmoHealthService.test.js" name="PMOHealthService &gt; getHealthSnapshot &gt; should return complete snapshot" time="0.012767833">
            <system-out>
[PMOHealthService] Snapshot generated in 0ms for project proj1

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/pmoHealthService.test.js" name="PMOHealthService &gt; getHealthSnapshot &gt; should handle DB errors" time="0.002521">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/pmoStandardsMapping.test.js" timestamp="2025-12-21T08:31:14.366Z" hostname="MacBook-Pro-Piotr.local" tests="7" failures="0" errors="0" skipped="0" time="0.243473333">
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; getMapping &gt; should return mapping for known concept" time="0.009735542">
        </testcase>
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; getMapping &gt; should return null for unknown concept" time="0.000494791">
        </testcase>
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; getStandardTerm &gt; should return ISO 21500 term correctly" time="0.00044125">
        </testcase>
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; getStandardTerm &gt; should return PMBOK 7 term correctly" time="0.000351083">
        </testcase>
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; isNeutralTerm &gt; should identify neutral terms" time="0.000314667">
        </testcase>
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; isNeutralTerm &gt; should identify vendor-specific terms as non-neutral" time="0.000257208">
        </testcase>
        <testcase classname="tests/unit/backend/pmoStandardsMapping.test.js" name="PMOStandardsMapping &gt; getConceptsByDomain &gt; should return all concepts for a given domain" time="0.000558209">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/progressService.test.js" timestamp="2025-12-21T08:31:14.366Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="3" time="0">
        <testcase classname="tests/unit/backend/progressService.test.js" name="Progress Service &gt; calculateInitiativeProgress &gt; should calculate progress from tasks [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/progressService.test.js" name="Progress Service &gt; calculateProjectProgress &gt; should calculate weighted project progress [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/progressService.test.js" name="Progress Service &gt; calculatePortfolioMetrics &gt; should calculate health score based on blocked initiatives [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/promoCodeService.test.js" timestamp="2025-12-21T08:31:14.366Z" hostname="MacBook-Pro-Piotr.local" tests="18" failures="0" errors="0" skipped="13" time="0.13767375">
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; constants &gt; should export PROMO_TYPES" time="0.000695375">
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; constants &gt; should export DISCOUNT_TYPES" time="0.000154584">
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return invalid for empty code" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return invalid for null code" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return invalid when code not found" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return invalid for expired code" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return invalid for code not yet active" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return invalid when usage limit reached" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return valid for good code with discount" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; validatePromoCode - skipped due to CJS/ESM mock interop &gt; should return valid for partner code without discount" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; markPromoCodeUsed - skipped due to CJS/ESM mock interop &gt; should return error for already used org code" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; createPromoCode &gt; should throw error for missing required fields" time="0.000582791">
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; createPromoCode &gt; should throw error for invalid promo type" time="0.000114875">
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; createPromoCode &gt; should throw error for invalid discount type" time="0.000097041">
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; createPromoCode &gt; should create promo code successfully" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; listPromoCodes - skipped due to CJS/ESM mock interop &gt; should return list of promo codes" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; deactivatePromoCode - skipped due to CJS/ESM mock interop &gt; should deactivate promo code" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/promoCodeService.test.js" name="PromoCodeService &gt; deactivatePromoCode - skipped due to CJS/ESM mock interop &gt; should return false if code not found" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/ragService.test.js" timestamp="2025-12-21T08:31:14.367Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="0" errors="0" skipped="0" time="0.268104583">
        <testcase classname="tests/unit/backend/ragService.test.js" name="RagService - Integration &gt; generateEmbedding &gt; should return null if no provider configured in database" time="0.000862667">
        </testcase>
        <testcase classname="tests/unit/backend/ragService.test.js" name="RagService - Integration &gt; getContext &gt; should return context string without throwing" time="0.001016458">
        </testcase>
        <testcase classname="tests/unit/backend/ragService.test.js" name="RagService - Integration &gt; getContext &gt; should accept limit parameter" time="0.000668792">
        </testcase>
        <testcase classname="tests/unit/backend/ragService.test.js" name="RagService - Integration &gt; getContextKeyword &gt; should perform keyword search without throwing" time="0.000506792">
        </testcase>
        <testcase classname="tests/unit/backend/ragService.test.js" name="RagService - Integration &gt; getAxisDefinitions &gt; should retrieve axis definitions without throwing" time="0.000907083">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/roadmapService.test.js" timestamp="2025-12-21T08:31:14.367Z" hostname="MacBook-Pro-Piotr.local" tests="9" failures="7" errors="0" skipped="0" time="0.141893666">
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; getWaves &gt; should return waves" time="0.004492417">
            <failure message="expected [] to have a length of 1 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

 ❯ tests/unit/backend/roadmapService.test.js:50:27
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; createWave &gt; should create wave" time="0.001617333">
            <failure message="expected &apos;b2f6f3fe-8fdd-4224-a0d0-4faf173e0f88&apos; to be &apos;uuid-1234&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;b2f6f3fe-8fdd-4224-a0d0-4faf173e0f88&apos; to be &apos;uuid-1234&apos; // Object.is equality

Expected: &quot;uuid-1234&quot;
Received: &quot;b2f6f3fe-8fdd-4224-a0d0-4faf173e0f88&quot;

 ❯ tests/unit/backend/roadmapService.test.js:67:31
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; assignToWave &gt; should update initiative wave" time="0.001280417">
            <failure message="expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{…}, …(2) ]

Number of calls: 0
" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{…}, …(2) ]

Number of calls: 0

 ❯ tests/unit/backend/roadmapService.test.js:81:32
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; baselineRoadmap &gt; should baseline waves and increment version" time="0.001182625">
            <failure message="expected &quot;vi.fn()&quot; to be called 2 times, but got 0 times" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called 2 times, but got 0 times
 ❯ tests/unit/backend/roadmapService.test.js:94:32
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; getRoadmapSummary &gt; should return roadmap summary with nested initiatives" time="0.001210542">
            <failure message="expected [] to have a length of 2 but got +0" type="AssertionError">
AssertionError: expected [] to have a length of 2 but got +0

- Expected
+ Received

- 2
+ 0

 ❯ tests/unit/backend/roadmapService.test.js:121:44
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; updateInitiativeSchedule &gt; should update schedule directly if not baselined" time="0.003634417">
            <failure message="expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{…}, …(2) ]

Number of calls: 0
" type="AssertionError">
AssertionError: expected &quot;vi.fn()&quot; to be called with arguments: [ StringContaining{…}, …(2) ]

Number of calls: 0

 ❯ tests/unit/backend/roadmapService.test.js:139:32
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; updateInitiativeSchedule &gt; should require CR if baselined and governance enforced" time="0.006793292">
            <failure message="expected undefined to be true // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ tests/unit/backend/roadmapService.test.js:161:49
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; updateInitiativeSchedule &gt; should allow direct update if baselined but governance relaxed" time="0.001299208">
        </testcase>
        <testcase classname="tests/unit/backend/roadmapService.test.js" name="RoadmapService &gt; updateInitiativeSchedule &gt; should handle no changes" time="0.000763292">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/roiService.test.js" timestamp="2025-12-21T08:31:14.368Z" hostname="MacBook-Pro-Piotr.local" tests="4" failures="4" errors="0" skipped="0" time="0.131599584">
        <testcase classname="tests/unit/backend/roiService.test.js" name="ROIService &gt; getDefaultModel &gt; should return existing model if found" time="0.003605958">
            <failure message="expected undefined to be 100 // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be 100 // Object.is equality

- Expected: 
100

+ Received: 
undefined

 ❯ tests/unit/backend/roiService.test.js:38:50
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/roiService.test.js" name="ROIService &gt; getDefaultModel &gt; should create default model if missing" time="0.000874459">
            <failure message="expected undefined to be defined" type="AssertionError">
AssertionError: expected undefined to be defined
 ❯ tests/unit/backend/roiService.test.js:50:51
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/roiService.test.js" name="ROIService &gt; calculateROI &gt; should calculate ROI based on measurements" time="0.000833">
            <failure message="Cannot convert undefined or null to object" type="TypeError">
TypeError: Cannot convert undefined or null to object
 ❯ Object.calculateROI server/services/roiService.js:110:55
 ❯ tests/unit/backend/roiService.test.js:79:28
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/roiService.test.js" name="ROIService &gt; estimateHoursSaved &gt; should aggregate time saved metrics" time="0.003416875">
            <failure message="expected undefined to be 2 // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be 2 // Object.is equality

- Expected: 
2

+ Received: 
undefined

 ❯ tests/unit/backend/roiService.test.js:100:34
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/scenarioService.test.js" timestamp="2025-12-21T08:31:14.368Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="2" time="0.258712958">
        <testcase classname="tests/unit/backend/scenarioService.test.js" name="Scenario Service &gt; compareScenarios &gt; should compare delays correctly" time="0.00758025">
        </testcase>
        <testcase classname="tests/unit/backend/scenarioService.test.js" name="Scenario Service &gt; analyzeImpact &gt; should detect dependency breaks [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/scenarioService.test.js" name="Scenario Service &gt; createScenario &gt; should persist scenario [BLOCKED: REAL DB HIT]" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/scmsGovernance.test.js" timestamp="2025-12-21T08:31:14.369Z" hostname="MacBook-Pro-Piotr.local" tests="17" failures="0" errors="0" skipped="0" time="0.18594075">
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should allow DRAFT to PLANNED transition" time="0.003679042">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should allow PLANNED to APPROVED transition" time="0.000132291">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should allow APPROVED to IN_EXECUTION transition" time="0.000094125">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should allow IN_EXECUTION to BLOCKED transition" time="0.000076709">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should allow IN_EXECUTION to COMPLETED transition" time="0.000082209">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should disallow COMPLETED to DRAFT transition" time="0.000057666">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Initiative Status Transitions &gt; should disallow invalid status transition" time="0.000051417">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Task Status Transitions &gt; should allow TODO to IN_PROGRESS transition" time="0.000054875">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Task Status Transitions &gt; should allow IN_PROGRESS to DONE transition" time="0.000052792">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Task Status Transitions &gt; should allow IN_PROGRESS to BLOCKED transition" time="0.000060625">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Task Status Transitions &gt; should allow BLOCKED to IN_PROGRESS transition" time="0.000039792">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Task Status Transitions &gt; should disallow direct DONE to TODO transition" time="0.000030458">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Blocked Status Validation &gt; should require blocked reason for BLOCKED initiative status" time="0.000108042">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Blocked Status Validation &gt; should accept blocked reason for BLOCKED status" time="0.0000405">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Status Constants &gt; should export INITIATIVE_STATUSES" time="0.000043709">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Status Constants &gt; should export TASK_STATUSES" time="0.000035833">
        </testcase>
        <testcase classname="tests/unit/backend/scmsGovernance.test.js" name="StatusMachine &gt; Status Constants &gt; should export DECISION_STATUSES" time="0.000033459">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/scmsLifecycle.test.js" timestamp="2025-12-21T08:31:14.369Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.434986541">
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Types &gt; should define READINESS_GATE" time="0.003226">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Types &gt; should define DESIGN_GATE" time="0.000114041">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Types &gt; should define PLANNING_GATE" time="0.000090791">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Types &gt; should define EXECUTION_GATE" time="0.0000755">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Types &gt; should define CLOSURE_GATE" time="0.000072208">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Service Structure &gt; should export getGateType function" time="0.00005425">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Service Structure &gt; should export evaluateGate function" time="0.000183791">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Service Structure &gt; should export passGate function" time="0.000159875">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Mapping &gt; should map Context to Assessment with READINESS_GATE" time="0.000164209">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Mapping &gt; should map Roadmap to Execution with EXECUTION_GATE" time="0.000164458">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Mapping &gt; should map Assessment to Initiatives with DESIGN_GATE" time="0.000104459">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Mapping &gt; should map Initiatives to Roadmap with PLANNING_GATE" time="0.000086667">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="StageGateService &gt; Gate Mapping &gt; should map Execution to Stabilization with CLOSURE_GATE" time="0.0000825">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="Phase Constants &gt; should have 6 phases in SCMS lifecycle" time="0.000722042">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="Phase Constants &gt; should have Context as first phase" time="0.000059334">
        </testcase>
        <testcase classname="tests/unit/backend/scmsLifecycle.test.js" name="Phase Constants &gt; should have Stabilization as last phase" time="0.000032375">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/scmsServices.test.js" timestamp="2025-12-21T08:31:14.370Z" hostname="MacBook-Pro-Piotr.local" tests="39" failures="0" errors="0" skipped="0" time="0.285492291">
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; NOTIFICATION_TYPES &gt; should have notification types defined" time="0.01047775">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; NOTIFICATION_TYPES &gt; should include TASK_ASSIGNED type" time="0.000167209">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; NOTIFICATION_TYPES &gt; should include DECISION_REQUIRED type" time="0.00009125">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; NOTIFICATION_TYPES &gt; should include AI_RISK_DETECTED type" time="0.000077125">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; SEVERITY &gt; should define INFO severity" time="0.000076">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; SEVERITY &gt; should define WARNING severity" time="0.0000575">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NotificationService &gt; SEVERITY &gt; should define CRITICAL severity" time="0.000041">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="MyWorkService &gt; Service Structure &gt; should export getMyWork function" time="0.010088084">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="MyWorkService &gt; Service Structure &gt; should export _getMyTasks helper function" time="0.000183291">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="MyWorkService &gt; Service Structure &gt; should export _getMyAlerts helper function" time="0.00013725">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="ExecutionMonitorService &gt; Service Structure &gt; should export runDailyMonitor function" time="0.00519225">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="ExecutionMonitorService &gt; Service Structure &gt; should export generateExecutionSummary function" time="0.000469667">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EscalationService &gt; Service Structure &gt; should export createEscalation function" time="0.007817708">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EscalationService &gt; Service Structure &gt; should export getEscalations function" time="0.000062834">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EscalationService &gt; Service Structure &gt; should export acknowledgeEscalation function" time="0.000037625">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EscalationService &gt; Service Structure &gt; should export resolveEscalation function" time="0.000037833">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EscalationService &gt; Service Structure &gt; should export runAutoEscalation function" time="0.000028708">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; STABILIZATION_STATUSES &gt; should define STABILIZED status" time="0.010308583">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; STABILIZATION_STATUSES &gt; should define PARTIALLY_STABILIZED status" time="0.000071042">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; STABILIZATION_STATUSES &gt; should define UNSTABLE status" time="0.00013775">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; STABILIZATION_STATUSES &gt; should define NOT_APPLICABLE status" time="0.000055208">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; Service Structure &gt; should export checkEntryCriteria function" time="0.000050916">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; Service Structure &gt; should export checkExitCriteria function" time="0.000032">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="StabilizationService &gt; Service Structure &gt; should export closeProject function" time="0.000033833">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should have 5 value types" time="0.007844416">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should define COST_REDUCTION type" time="0.000147083">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should define REVENUE_INCREASE type" time="0.000237209">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should define RISK_REDUCTION type" time="0.000066416">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should define EFFICIENCY type" time="0.0000455">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; VALUE_TYPES &gt; should define STRATEGIC_OPTION type" time="0.000037125">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; Service Structure &gt; should export createValueHypothesis function" time="0.000032542">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; Service Structure &gt; should export getValueSummary function" time="0.000029375">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="EconomicsService &gt; Service Structure &gt; should export detectMissingValueHypotheses function" time="0.000028917">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="ReportingService &gt; Service Structure &gt; should export generateExecutiveOverview function" time="0.008214416">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="ReportingService &gt; Service Structure &gt; should export generateProjectHealthReport function" time="0.000066916">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="ReportingService &gt; Service Structure &gt; should export generateGovernanceReport function" time="0.000036541">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NarrativeService &gt; Service Structure &gt; should export generateWeeklySummary function" time="0.00380825">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NarrativeService &gt; Service Structure &gt; should export generateExecutiveMemo function" time="0.000072083">
        </testcase>
        <testcase classname="tests/unit/backend/scmsServices.test.js" name="NarrativeService &gt; Service Structure &gt; should export generateProgressNarrative function" time="0.000035875">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/stageGateService.test.js" timestamp="2025-12-21T08:31:14.371Z" hostname="MacBook-Pro-Piotr.local" tests="5" failures="4" errors="0" skipped="0" time="0.117849709">
        <testcase classname="tests/unit/backend/stageGateService.test.js" name="StageGateService &gt; getGateType &gt; should return correct gate for transition" time="0.003196208">
            <failure message="expected null to be &apos;READINESS_GATE&apos; // Object.is equality" type="AssertionError">
AssertionError: expected null to be &apos;READINESS_GATE&apos; // Object.is equality

- Expected: 
&quot;READINESS_GATE&quot;

+ Received: 
null

 ❯ tests/unit/backend/stageGateService.test.js:33:26
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/stageGateService.test.js" name="StageGateService &gt; getGateType &gt; should return null for unknown transition" time="0.000132667">
        </testcase>
        <testcase classname="tests/unit/backend/stageGateService.test.js" name="StageGateService &gt; evaluateGate &gt; should evaluate readiness gate criteria" time="0.000549958">
            <failure message="expected undefined to be defined" type="AssertionError">
AssertionError: expected undefined to be defined
 ❯ tests/unit/backend/stageGateService.test.js:72:44
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/stageGateService.test.js" name="StageGateService &gt; evaluateGate &gt; should report failure if criteria missing" time="0.000187125">
            <failure message="Cannot read properties of undefined (reading &apos;find&apos;)" type="TypeError">
TypeError: Cannot read properties of undefined (reading &apos;find&apos;)
 ❯ tests/unit/backend/stageGateService.test.js:86:55
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/stageGateService.test.js" name="StageGateService &gt; passGate &gt; should record gate passage" time="0.000290833">
            <failure message="expected undefined to be true // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be true // Object.is equality

- Expected: 
true

+ Received: 
undefined

 ❯ tests/unit/backend/stageGateService.test.js:101:36
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/statusMachine.test.js" timestamp="2025-12-21T08:31:14.372Z" hostname="MacBook-Pro-Piotr.local" tests="11" failures="0" errors="0" skipped="0" time="0.176140458">
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; canTransitionInitiative &gt; should allow valid transition" time="0.000434917">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; canTransitionInitiative &gt; should block invalid transition" time="0.000073375">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; canTransitionTask &gt; should allow valid transition" time="0.000053208">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; canTransitionTask &gt; should allow flow back" time="0.000047708">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateInitiativeTransition &gt; should return valid for simple allowed transition" time="0.0000825">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateInitiativeTransition &gt; should require reason for blocking" time="0.0000965">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateInitiativeTransition &gt; should allow blocking with reason" time="0.000037041">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateInitiativeTransition &gt; should prevent completion if pending tasks exist" time="0.000048375">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateInitiativeTransition &gt; should prevent approved state if governance failed" time="0.00005325">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateTaskTransition &gt; should validate blocker type" time="0.000069542">
        </testcase>
        <testcase classname="tests/unit/backend/statusMachine.test.js" name="StatusMachine &gt; validateTaskTransition &gt; should pass with full blocking info" time="0.000033084">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/storageReconciliationService.test.js" timestamp="2025-12-21T08:31:14.372Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.073329417">
        <testcase classname="tests/unit/backend/storageReconciliationService.test.js" name="Storage Reconciliation Service &gt; should handle reconciliation (DB interaction) [SKIPPED]" time="0.000395875">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/storageService.test.js" timestamp="2025-12-21T08:31:14.372Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.168788125">
        <testcase classname="tests/unit/backend/storageService.test.js" name="Storage Service &gt; should handle storage operations (DB interaction) [SKIPPED]" time="0.00042725">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/systemIntegrity.test.js" timestamp="2025-12-21T08:31:14.372Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.109688208">
        <testcase classname="tests/unit/backend/systemIntegrity.test.js" name="System Integrity Service &gt; should perform integrity checks (DB interaction) [SKIPPED]" time="0.000410458">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/tokenBillingService.test.js" timestamp="2025-12-21T08:31:14.373Z" hostname="MacBook-Pro-Piotr.local" tests="16" failures="0" errors="0" skipped="0" time="0.261377375">
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService - Integration &gt; Margins &gt; should get margins without throwing" time="0.000532958">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService - Integration &gt; Margins &gt; should get specific margin by source type" time="0.000263">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService - Integration &gt; Packages &gt; should get packages without throwing" time="0.000240791">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService - Integration &gt; Packages &gt; should upsert package without throwing" time="0.000782125">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService - Integration &gt; Balance &gt; should get balance without throwing" time="0.000218084">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService - Integration &gt; Balance &gt; should ensure balance creates record" time="0.000182292">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService - Integration &gt; Balance &gt; should credit tokens to user" time="0.000909291">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService - Integration &gt; Balance Check &gt; should check sufficient balance" time="0.000556292">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService - Integration &gt; Margin Updates &gt; should update margin and persist changes" time="0.000512">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService - Integration &gt; Token Deduction / Usage &gt; should deduct tokens correctly for platform usage" time="0.00159975">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService - Integration &gt; Token Deduction / Usage &gt; should handle markup multipliers" time="0.003985875">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService - Integration &gt; User API Keys (BYOK) &gt; should add, get and delete user API keys" time="0.045393666">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService - Integration &gt; Source Determination &gt; should prefer BYOK if available and requested" time="0.043601834">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService - Integration &gt; Source Determination &gt; should fallback to platform if no BYOK key" time="0.00286325">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService - Integration &gt; Analytics &gt; should retrieve revenue analytics" time="0.000397416">
        </testcase>
        <testcase classname="tests/unit/backend/tokenBillingService.test.js" name="TokenBillingService - Integration &gt; Analytics &gt; should retrieve transactions for user" time="0.000664083">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/usageService.test.js" timestamp="2025-12-21T08:31:14.373Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="6" errors="0" skipped="0" time="0.116587583">
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; recordTokenUsage &gt; should record usage successfully" time="0.004217292">
            <failure message="expected &apos;usage-317aa91c-d653-470c-86c4-3b63196…&apos; to be &apos;uuid-1234&apos; // Object.is equality" type="AssertionError">
AssertionError: expected &apos;usage-317aa91c-d653-470c-86c4-3b63196…&apos; to be &apos;uuid-1234&apos; // Object.is equality

Expected: &quot;uuid-1234&quot;
Received: &quot;usage-317aa91c-d653-470c-86c4-3b6319658aba&quot;

 ❯ tests/unit/backend/usageService.test.js:60:31
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; getCurrentUsage &gt; should aggregate usage logs" time="0.001054375">
            <failure message="expected undefined to be 5000 // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be 5000 // Object.is equality

- Expected: 
5000

+ Received: 
undefined

 ❯ tests/unit/backend/usageService.test.js:81:39
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; checkQuota &gt; should allow if within limit" time="0.000971042">
            <failure message="expected +0 to be 95000 // Object.is equality" type="AssertionError">
AssertionError: expected +0 to be 95000 // Object.is equality

- Expected
+ Received

- 95000
+ 0

 ❯ tests/unit/backend/usageService.test.js:98:38
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; checkQuota &gt; should allow overage if enabled" time="0.001044583">
            <failure message="expected false to be true // Object.is equality" type="AssertionError">
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 ❯ tests/unit/backend/usageService.test.js:112:43
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; checkQuota &gt; should block if over limit and no overage" time="0.000950625">
            <failure message="expected true to be false // Object.is equality" type="AssertionError">
AssertionError: expected true to be false // Object.is equality

- Expected
+ Received

- false
+ true

 ❯ tests/unit/backend/usageService.test.js:129:36
            </failure>
        </testcase>
        <testcase classname="tests/unit/backend/usageService.test.js" name="UsageService &gt; recordProjectStorageUsage &gt; should record project usage" time="0.000719625">
            <failure message="expected undefined to be &apos;uuid-1234&apos; // Object.is equality" type="AssertionError">
AssertionError: expected undefined to be &apos;uuid-1234&apos; // Object.is equality

- Expected: 
&quot;uuid-1234&quot;

+ Received: 
undefined

 ❯ tests/unit/backend/usageService.test.js:136:31
            </failure>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/webhookService.test.js" timestamp="2025-12-21T08:31:14.374Z" hostname="MacBook-Pro-Piotr.local" tests="1" failures="0" errors="0" skipped="0" time="0.154044041">
        <testcase classname="tests/unit/backend/webhookService.test.js" name="Webhook Service &gt; should handle webhook registration (DB interaction) [SKIPPED]" time="0.000410292">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/adminMiddleware.test.js" timestamp="2025-12-21T08:31:14.374Z" hostname="MacBook-Pro-Piotr.local" tests="4" failures="0" errors="0" skipped="0" time="0.182354042">
        <testcase classname="tests/unit/backend/middleware/adminMiddleware.test.js" name="AdminMiddleware &gt; should call next() if user is admin" time="0.002445125">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/adminMiddleware.test.js" name="AdminMiddleware &gt; should call next() if user is superadmin" time="0.000374958">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/adminMiddleware.test.js" name="AdminMiddleware &gt; should return 403 if user is not admin" time="0.001079083">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/adminMiddleware.test.js" name="AdminMiddleware &gt; should return 401 if verify failed (bad signature)" time="0.000242375">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/auditLog.test.js" timestamp="2025-12-21T08:31:14.374Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.215424417">
        <testcase classname="tests/unit/backend/middleware/auditLog.test.js" name="AuditLog Middleware &gt; should call next() and override res.end" time="0.008308">
            <system-out>
[Database] Selected: SQLite

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/middleware/auditLog.test.js" name="AuditLog Middleware &gt; should log activity when res.end is called for 2xx POST" time="0.052867083">
            <system-out>
[Database] Selected: SQLite

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/middleware/auditLog.test.js" name="AuditLog Middleware &gt; should NOT log for GET requests" time="0.000665417">
            <system-out>
[Database] Selected: SQLite

            </system-out>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/authMiddleware.test.js" timestamp="2025-12-21T08:31:14.374Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="4" time="0.133970375">
        <testcase classname="tests/unit/backend/middleware/authMiddleware.test.js" name="AuthMiddleware &gt; should return 403 if no token provided" time="0.001432958">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/authMiddleware.test.js" name="AuthMiddleware &gt; should return 401 if token expired" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/middleware/authMiddleware.test.js" name="AuthMiddleware &gt; should return 401 if token invalid" time="0.000304791">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/authMiddleware.test.js" name="AuthMiddleware &gt; should call next() if token valid and no revocation check needed (no jti)" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/middleware/authMiddleware.test.js" name="AuthMiddleware &gt; should check revocation if jti is present" time="0">
            <skipped/>
        </testcase>
        <testcase classname="tests/unit/backend/middleware/authMiddleware.test.js" name="AuthMiddleware &gt; should return 401 if token is revoked" time="0">
            <skipped/>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/planLimits.test.js" timestamp="2025-12-21T08:31:14.375Z" hostname="MacBook-Pro-Piotr.local" tests="8" failures="0" errors="0" skipped="0" time="0.2504465">
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should return 403 if no organization found in user" time="0.005589041">
            <system-out>
[Database] Selected: SQLite

            </system-out>
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should return 404 if organization does not exist in DB" time="0.000935959">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should allow request if within limit (Free plan)" time="0.002309666">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should block request if limit reached (Free plan)" time="0.002553209">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should allow request if within limit (Pro plan)" time="0.001906792">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should treat trial status as pro plan" time="0.002392">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should handle undefined limits gracefully (warn and allow)" time="0.002562875">
            <system-err>
Limit key unknown_limit_key not found for plan free

            </system-err>
        </testcase>
        <testcase classname="tests/unit/backend/middleware/planLimits.test.js" name="PlanLimits Middleware &gt; should check max_members limit" time="0.002136958">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" timestamp="2025-12-21T08:31:14.375Z" hostname="MacBook-Pro-Piotr.local" tests="6" failures="0" errors="0" skipped="0" time="0.228349417">
        <testcase classname="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" name="Project Quota Middleware (Integration) &gt; should skip check if no project_id provided" time="0.00089175">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" name="Project Quota Middleware (Integration) &gt; should allow request if quota is sufficient" time="0.001580917">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" name="Project Quota Middleware (Integration) &gt; should allow request if limit is NULL (unlimited)" time="0.001893292">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" name="Project Quota Middleware (Integration) &gt; should block 429 if quota exceeded" time="0.003163792">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" name="Project Quota Middleware (Integration) &gt; should cleanup temp file if quota exceeded" time="0.001723166">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/projectQuotaMiddleware.test.js" name="Project Quota Middleware (Integration) &gt; should handle errors gracefully (e.g. project not found)" time="0.001112167">
            <system-err>
Project quota check error: Error: Project not found
    at Statement.&lt;anonymous&gt; (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/services/usageService.js:300:41)
    at Statement.replacement (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/node_modules/sqlite3/lib/trace.js:25:27)
    at Statement.replacement (/Users/piotrwisniewski/Documents/Antygracity/DRD/consultify/server/node_modules/sqlite3/lib/trace.js:25:27)

            </system-err>
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/quotaMiddleware.test.js" timestamp="2025-12-21T08:31:14.375Z" hostname="MacBook-Pro-Piotr.local" tests="8" failures="0" errors="0" skipped="0" time="0.230534">
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceTokenQuota &gt; should return 401 if no orgId" time="0.001007125">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceTokenQuota &gt; should allow if usage is below limit" time="0.004354375">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceTokenQuota &gt; should block 429 if usage exceeds limit" time="0.001926542">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceTokenQuota &gt; should allow if overage is enabled even if exceeded" time="0.001946667">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceTokenQuota &gt; should set warning headers if &gt; 80%" time="0.001695625">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceStorageQuota &gt; should allow if allowed" time="0.002017792">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; enforceStorageQuota &gt; should block 429 if exceeded" time="0.001395542">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/quotaMiddleware.test.js" name="Quota Middleware (Integration) &gt; recordTokenUsageAfterResponse &gt; should insert usage record into DB" time="0.053151375">
        </testcase>
    </testsuite>
    <testsuite name="tests/unit/backend/middleware/superAdminMiddleware.test.js" timestamp="2025-12-21T08:31:14.376Z" hostname="MacBook-Pro-Piotr.local" tests="3" failures="0" errors="0" skipped="0" time="0.244077708">
        <testcase classname="tests/unit/backend/middleware/superAdminMiddleware.test.js" name="SuperAdminMiddleware &gt; should call next() if user is superadmin" time="0.002085333">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/superAdminMiddleware.test.js" name="SuperAdminMiddleware &gt; should return 403 if user is admin (not super)" time="0.001181291">
        </testcase>
        <testcase classname="tests/unit/backend/middleware/superAdminMiddleware.test.js" name="SuperAdminMiddleware &gt; should return 401 if token is invalid (bad signature)" time="0.000881542">
        </testcase>
    </testsuite>
</testsuites>
